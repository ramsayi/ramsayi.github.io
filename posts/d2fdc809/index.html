<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Unity3D入门教程 - 阿发 | Ramsayi</title><meta name="keywords" content="Unity3D"><meta name="author" content="Ramsayi"><meta name="copyright" content="Ramsayi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Unity3D入门教程 - 阿发"><meta name="application-name" content="Unity3D入门教程 - 阿发"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Unity3D入门教程 - 阿发"><meta property="og:url" content="https://ramsayi.asia/posts/d2fdc809/index.html"><meta property="og:site_name" content="Ramsayi"><meta property="og:description" content="第 01 章 课程介绍1.1 课程介绍Unity ，一款 3D 游戏引擎。 常见的游戏引擎：  Unity ( C# ) Unreal Engine ( C ++ ) Cocos Creator ( JavaScript ) Frostbite Engine、Source Engine、Cry En"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png"><meta property="article:author" content="Ramsayi"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png"><meta name="description" content="第 01 章 课程介绍1.1 课程介绍Unity ，一款 3D 游戏引擎。 常见的游戏引擎：  Unity ( C# ) Unreal Engine ( C ++ ) Cocos Creator ( JavaScript ) Frostbite Engine、Source Engine、Cry En"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://ramsayi.asia/posts/d2fdc809/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"这篇文章已经有","messageNext":"天了，信息可能已经有所发展，内容仅供参考。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Ramsayi","link":"链接: ","source":"来源: Ramsayi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Ramsayi',
  title: 'Unity3D入门教程 - 阿发',
  postAI: '',
  pageFillDescription: '第 01 章 课程介绍, 1.1 课程介绍, 1.2 资源下载, 第 02 章 开发环境, 第 03 章 场景与视图, 3.1 场景, 3.2 游戏物体, 3.3 3D 视图, 3.4 世界坐标系, 3.5 视野中心, 3.6 透视与正交, 第 04 章 游戏物体, 4.1 3D 原生物体, 4.2 物体的移动, 4.3 旋转与缩放, 4.4 多选复制对齐, 4.5 练习, 4.6 AF 扩展插件, 第 05 章 模型, 5.1 网格, 5.2 材质, 5.3 纹理, 5.4 外部模型, 5.5 更多细节, 5.6 FBX 的使用, 5.7 FBX 的使用（二）, 5.7 FBX 的使用（三）, 第 06 章 资源文件, 6.1 资源文件, 6.2 场景文件, 6.3 资源包, 6.4 Unity 资源商店, 第 07 章 父子关系, 7.1 轴心, 7.2 父子关系, 7.3 空物体, 7.4 Global 与 Local, 7.5 Pivot 与 Center, 第 08 章 组件, 8.1 组件, 8.2 添加删除组件, 8.3 AudioSource 组件, 8.4 Transform 组件, 8.5 摄像机, 第 09 章 脚本, 9.1 脚本, 9.2 当前物体, 9.3 物体的坐标, 9.4 播放模式, 第 10 章 帧更新, 10.1 帧更新, 10.2 移动物体, 第 11 章 物体的运动, 11.1 物体的运动, 11.2 相对运动, 11.3 运动的方向, 11.4 小练习, 第 12 章 物体的旋转, 12.1 物体的旋转, 12.2 相对旋转, 12.3 自转与公转, 12.4 官方文档, 第 13 章 脚本的运行, 13.1 脚本的运行, 13.2 消息函数, 13.3 脚本执行顺序, 13.4 主控脚本, 第 14 章 脚本的参数, 14.1 脚本的参数, 14.2 参数的赋值, 14.3 值类型, 14.4 引用类型, 14.5 运行时调试, 第 15 章 鼠标输入, 15.1 鼠标输入, 15.2 几个细节, 15.3 屏幕坐标, 15.4 键盘输入, 第 16 章 组件的访问, 16.1 组件的调用, 16.2 组件的参数, 16.3 引用别的组件, 16.4 引用脚本组件, 16.5 消息调用, 16.6 练习 简单飞控, 第 17 章 物体的访问, 17.1 获取物体, 17.2 父子物体, 17.3 物体的操作, 17.4 练习 俄罗斯方块, 第 18 章 资源的访问, 18.1 资源的使用, 18.2 资源数组, 18.3 练习 三色球, 第 19 章 定时调用, 19.1 定时调用, 19.2 定时与线程, 19.3 几点细节, 19.4 练习 红绿灯, 19.5 练习 加速减速, 第 20 章 向量, 20.1 向量, 20.2 向量运算, 20.3 向量测距, 20.4 向量的使用, 第 21 章 预制体, 21.1 预制体, 21.2 预制体的创建, 21.3 预制体的实例, 21.4 预制体的编辑, 21.5 多级节点, 第 22 章 动态创建实例, 22.1 动态创建实例, 22.2 实例的初始化, 22.3 实例的销毁, 22.4 练习 火控参数, 22.5 练习 按键控制, 第 23 章 物理系统, 23.1 物理系统, 23.2 物理碰撞, 23.3 反弹与摩擦, 第 24 章 碰撞检测, 24.1 运动学刚体, 24.2 碰撞检测, 24.3 碰撞体的编辑, 24.4 练习 击毁目标, 第 25 章 游戏项目实例, 25.1 射击游戏, 25.2 添加角色, 25.3 天空盒, 25.4 子弹和碰撞, 25.5 连续发射, 25.6 按键控制, 25.7 怪兽的走位, 25.8 怪兽生成器, 25.9 子弹特效, 25.10 爆炸特效第章课程介绍课程介绍一款游戏引擎常见的游戏引擎游戏引擎建模游戏建模创建游戏模型面向美术人员游戏引擎驱动游戏逻辑面向开发人员建模软件资源下载官网第章开发环境需要许可证才能使用直接添加一个免费的个人版许可证即可第章场景与视图场景即游戏中的一处关卡场景默认场景中只有一个主摄像机和平行光源游戏物体游戏中的任何角色道具建筑视图了解视图的操作导航器表示世界坐标的方向栅格表示坐标平面天空盒表示游戏世界的背景视图相关操作平移鼠标中键头部旋转鼠标右键旋转中心旋转鼠标左键修改旋转中心鼠标中键缩放鼠标滚轮导航器相关操作重置方向鼠标左键中心方块世界坐标系游戏世界的坐标系左手系视野中心框显所选选中一个物体按键置于视图中心此时旋转视图似是绕着物体旋转透视与正交透视视图近大远小正交视图又称等距视图透视图下物体近大远小正交视图下物体的显示与距离无关第章游戏物体原生物体立方体球体胶囊体圆柱体平面物体的移动移动工具旋转工具缩放工具旋转与缩放旋转工具演示选中一个物体绕轴旋转其中逆时针为正顺时针为负可以在里精确指定按住键时角度增量为度栅格吸附设置可以用快捷键切换操作模式保持默认轴心中心点世界坐标系局部坐标系多选复制对齐多选按或键点选在视图中鼠标框选复制选中物体复制物体右键聚焦选中物体按键置于视图中心或者双击物体激活选中物体在检查器中激活禁用物体对齐对初学者直接目视对齐即可进入正交顶视图正交右视图正交后视图方便观察练习练习使用基本体做一个简单造型扩展插件扩展插件相关功能获取物体的尺寸置于视图中心键切换到正交顶视图键第章模型网格网格存储了模型的形状数据模型的形状由若干个小面围合而成模型是中空的中包含了面顶点坐标面的法向等数据材质材质定义了物体的表面细节颜色金属非金属光滑粗糙透明半透明不透明凹陷凸起纹理纹理也称贴图用一张图定义物体的表面颜色外部模型支持各种建模软件标准模型格式在建模软件中将模型导出为格式即可更多细节模型没有厚度正面可见背面透明物体具有默认材质否则显示为紫色的使用在一个模型文件中一般包含网格定义物体的形状材质定义表面的光学特性贴图定义表面的像素颜色第一种使用方式演示选择文件直接拖到层级窗口观察节点图标选中节点观察中的操作按钮贴图有的模型需要贴图文件贴图文件的路径是约定好的与相同目录或者同级目录材质有的模型定义了多个材质在属性中定义了一个数组的使用二第二种使用方式材质替换演示材质的重映射选中资源文件在中切到属性映射新的材质点应用设置的使用三第三种使用方式分解重组演示选择中的网格选择中的材质或者自定义一个材质如果存在贴图则使用配套的贴图文件第章资源文件资源文件目录下的文件称为资源常见类型模型文件图片文件音频文件脚本文件材质文件场景文件描述文件每一个资源文件文件夹都对一个描述文件场景文件场景文件记录了场景中的节点数据包含场景全局设置节点节点下的组件每个组件的参数值资源包资源包即对下的资源打包演示选择一个资源文件或者一个目录右键生成资源包资源商店第章父子关系轴心轴心指一个物体的操作基准点演示移动一个物体旋转一个物体对于基本体来说轴心点默认位于几何中心父子关系父子级指两个物体之间的关系在窗口中拖动物体到物体下子物体会随着父物体一并移动删除父物体时子物体一并删除相对坐标子物体的坐标是相对于父物体的移动父物体时观察子物体的坐标空物体空物体即空对象空节点演示添加一个空物体空物体不可见没有网格空物体也有坐标可以移动空物体很常见其作用用于节点的组织和管理用于标记一个位置要点与细节其实是一个节点容器一般所谓的物体即有形状的东西对应的与即世界坐标系以世界中心为轴个方向代表上下东西南北即本地坐标系以物体自身为轴个方向代表上下前后左右轴称为轴称为轴称为一般地要求模型的正脸与轴方向一致与轴心几何中心一般来说物体的轴心并不在几何中心处第章组件组件组件代表一个功能例如光源网格过滤器网格渲染器添加删除组件几个组件操作添加一个组件删除一个组件练习和组件添加一个空物体添加加载网格数据添加渲染网格组件组件用于播放音乐音效添加一个音乐文件创建一个物体将音乐文件拖到属性在窗口上方选组件称为变换组件物体的基本参数位置相对坐标旋转欧拉角缩放组件的特点所有物体都有不能被删除摄像机摄像机负责拍摄游戏画面演示调整窗口布局并排显示选中摄像机观察镜头范围摄像机的轴指向即为拍摄方向拍到的画面呈现在窗口中窗口中的画面即为玩家最终所见画面调整摄像机的角度两种方法手工移动旋转摄像机对准目标与视图对齐先在视图里摆好角度此为观察者视角然后选中执行此时摄像机视角与观察者视角完全相同第章脚本脚本文件名即为类名如当前物体在中获取当前物体当前脚本组件当前物体当前物体的名字当前物体下的组件为了简化书写也可写作效果相同物体名字物体的坐标物体的坐标世界坐标本地坐标一般常使用的是与中的值一致世界坐标本地坐标类型即三维向量含三个分量设置物体的坐标其中型的数值在书写时应以结尾播放模式编辑模式播放运行模式在播放模式下实时显示场景中的物体和属性游戏中的状态不可保存第章帧更新帧更新一个游戏帧帧率刷新率每秒更新多少帧称为帧更新此方法会被游戏引擎定时调用以更新游戏的状态演示在中添加日志输出在中观察帧率观察游戏时间距上次更新的时间差显然帧率是不固定的会尽量较快地更新帧更新帧更新时间差帧数计算帧数不支持固定帧率但可以设定一个近似帧率其中指示尽量以的帧率更新游戏移动物体在中移动物体的位置例如运行游戏则物体沿轴正向移动物体的运动并不是匀速的每次运动米但是间隔的不固定比如第次秒运动米第次秒运动米匀速运动使用让物体的匀速运动例如第章物体的运动物体的运动本章研究物体的运动布置测试场景添加小火车添加脚本控制小火车的运动修改可以让物体运动例如此时小车向正北方向运动一般使用实现相对运动其中是坐标增量例如方向增加相对运动可以实现物体的运动其中第个参数相对于世界坐标系相当于自身坐标系本地坐标系要点与细节在建模时要求物体的脸的朝向与物体轴一致运动的方向运动的方向使物体朝着目标方向运动演示添加一个红旗作为目标获取目标物体红旗转向目标向前运动方向其中根据名字路径来查找物体使物体的轴指向物体沿物体自身坐标系的轴向运动小练习练习小火车朝向目标运动到达目标后停止向量测距火车红旗第章物体的旋转物体的旋转给物体调转一个旋转角度四元组不便操作官方不建议使用欧拉角在修改角度持续旋转优化使之匀速旋转每秒转度角相对旋转旋转一个相对角度相当于自转与公转自转绕着自身轴旋转公转围绕另一个物体旋转当父物体转动时带动子物体一并旋转找到父物体控制父物体旋转官方文档第章脚本的运行脚本的运行场景的加载过程创建节点实例化组件实例化脚本组件调用事件函数初始化帧更新注意是一个纯面向对象的框架对象由框架创建消息函数所有的脚本一般应继承于消息函数或称事件函数一些回调函数常见的消息函数初始化仅执行一次初始化仅执行一次帧更新每帧调用一次每当组件启用时调用每当组件禁用时调用其中先于调用总是调用即使组件被禁用只执行一次第一次启用时调用对于初学者使用来初始化即可已禁用的组件其消息函数不会被调用都只会执行一次脚本执行顺序消息函数的调用顺序第阶段初始化第阶段初始化帧更新脚本的优先级默认地所有脚本的优先级为无特定顺序优先级的设定选中一个脚本打开对话框点按钮添加一个脚本指定优先级值越小优先级越高或者直接拖动调节顺序要点与细节脚本的执行顺序和中的层级顺序无关一般地并不需要显式设置默认即可主控脚本主控脚本即游戏的主控逻辑演示添加一个脚本作为主控脚本第章脚本的参数脚本的参数脚本的参数用于控制脚本组件的功能修改添加一个参数参数的用法参数必须为才可以在检查器中显示参数的名称即变量名参数的默认值即变量的默认值可以菜单重置参数的工具提示可以用指定旋转角速度这个是轴向的角速度参数的赋值脚本参数的赋值以下按时间顺序定义默认值在检查器中赋值由框架对参数赋值在中初始化在中初始化在中初始化伪代码表示值类型参数的类型分为值类型引用类型值类型如值类型如引用类型如值类型值类型的特点本身是一个值可直接赋值若未赋值则默认为不能为结构体也是值类型所以若未赋值则各字段值为不能设为其实在里面本质也是类型原则上属于类型引用类型参数也可以是引用类型节点组件如资源如数组类型练习添加使小火车朝着目标运动但是有两个红旗目标运行时调试在游戏运行时可以对物体组件进行实时调试显然在运行模式下所有参数不能保存到场景保存参数的办法在下组件在下组件第章鼠标输入鼠标输入鼠标输入相关几个细节区分事件探测状态探测鼠标事件只触发一次鼠标状态表示当前是否正在被按下鼠标事件是全局的每个脚本互不影响屏幕坐标鼠标点击位置世界坐标与屏幕坐标转换一个物体在屏幕上的位置屏幕坐标其中所谓屏幕相对于摄像机而言的实际上是指摄像头的屏键盘输入获取键盘输入相关按键事件按下按键事件抬起按键状态是否正被按下演示当按下键时向前运动键值常量可参考官方文档第章组件的访问组件的调用组件代表一个功能例如可用于播放音乐音效其中表示自动播放在代码中也可以用来使其播放音乐获取组件播放其中表示泛型即获取类型的组件获取组件停止播放开始播放音乐组件的参数组件的参数也可以在代码中访问例如音频资源是否静音是否循环播放音量设置静音引用别的组件在主控脚本里面访问音频组件第一种办法添加一个变量然后在检查器里指定这个引用访问节点下的组件第二种办法推荐直接添加一个变量然后在检查器里指定这个引用自动找到背景音乐节点下面的组件引用脚本组件一个脚本里访问另一个脚本组件和普通组件一样获取直接引用目标组件直接在检查里引用消息调用不推荐使用这种方法消息调用以消息的形式来调用另一个组件找到目标节点向目标节点发送消息的内部执行反射机制找到节点下的所有组件在组件下寻找这个函数若存在此函数则调用它若不存在则继续查找若最终无法匹配则报错练习简单飞控练习添加无人机控制起降键起飞键降落第章物体的访问获取物体游戏物体也可以叫节点按名称路径获取不推荐通过查找名字变了就找不到了若不重名可以按名称获取旋翼最好指定全路径无人机旋翼引用获取添加一个变量在检查器中引用父子物体场景中的层级关系父子关系是由维持的查看文档找到类的说明获取父级父级的组件父级的节点获取子级遍历子物体按索引获取第个子物体按名称查找子项其中二级子级应该制定路径如找到子物体物体的操作设置新的父级设为一级节点其中为表示一级节点没有父级显示隐藏要点与细节其中表示在根下查找物体练习俄罗斯方块练习版的俄罗斯方块按空格键切换形状表示显示的是哪一个形状向前运动先把原来的形状隐藏显示新的形状第章资源的访问资源的使用在脚本中也可以引用一个资源音频文件纹理贴图材质演示准备音效文件预览添加脚本添加变量引用音频资源使用播放音频用于播放音效资源数组在脚本中也可以定义一个数组变量比如一个音乐盒存了多首歌曲练习创建一个音乐盒点鼠标随机切换其中用于在中随机抽取一个数不含练习三色球练习制作一个变换颜色的小球就是用脚本修改材质第章定时调用定时调用定时调用即一般所谓的定时器继承自只调用一次循环调用是否正在调度中取消调用从调度队列中移除其中函数名是一个字符串反射机制定时与线程定时调用并没有创建新的线程引擎的核心是单线程的验证以及定时调用是在同一个线程获取当前线程号参考官方文档的说明消息函数定时调用协程调用几点细节重复的调用每次都会添加一个新的调度演示连续调用两次取消调用判断是否在队列取消的调用取消当前脚本的所有调用练习红绿灯练习做一个可以自动切换的红绿灯红灯秒绿灯秒黄灯秒红绿黄按顺序指定红灯开始当前材质红绿间隔秒钟绿黄间隔秒钟黄红间隔秒钟切换练习加速减速按鼠标实现风扇加速减速最大转速当前转速加速减速点一下加速再点一下减速旋转速度调整第章向量向量三位向量向量的长度单位向量即长度为的向量例如标准化缩放一个向量使其长度为例如向量标准化几个常量即即即即向量运算加法向量加法即三个分量分别相加例如减法向量加法即三个分量分别相减例如乘法向量乘法分为种标量乘法点积差积其中只要求掌握标量乘法即对每一个分量相乘赋值是值类型可以直接赋值例如不能设为向量测距向量测距用于求两物体间的距离例如自己位置目标位置方向向量距离也可以求距离物体间的距离确切的说是轴心点之间的距离应检查确认物体的轴心点向量的使用可以直接作为脚本的参数第章预制体预制体预制体即预先制作好的物体使用预制体可以提高开发效率演示导出资源包在目录下是预制体资源用预制体来构造物体使用预制体可以快速创建物体在资源中包含了的所有数据预制体的创建预制体的创建先制作好一个样本节点做好以后直接拖到窗口则自动生成一个资源原始物体不再需要可以删除要点与细节在导出资源时应该将依赖文件一并导出只是记录了节点的信息文件中不包含材质贴图数据仅包含引用预制体的实例由预制体创建得到的对象特征在中节点图标不同在中右键菜单在中上下文工具和原之间存在关联右键菜单则解除关联成为普通物体预制体的编辑相当于是一个模板可以再次编辑第种方式单独编辑双击进入单独编辑模式编辑节点和组件退出完成编辑第种方式原位编辑选择在检查器中显示此时仅选中的物体被编辑其余物体是陪衬编辑节点退出完成编辑第种方式覆盖编辑选择直接在场景中编辑编辑完后应用编辑取消编辑要点与细节点之后可断开与原始间的联系多级节点中多级节点父子关系也是常见的情况第章动态创建实例动态创建实例创建之后用动态创建实例演示准备子弹参考制作演示添加火控脚本添加变量克隆实例在检查器中引用子弹的运行游戏在视图中观察创建出来的实例实例的初始化创建之后应做初始化父节点子弹树位置旋转与炮管一致自带的控制脚本要点与细节一般引用而是没有存在感的可以使用空物体标记一个空间坐标实例的销毁一般的创建实例之后也要负责销毁对于子弹来说当飞出屏幕时销毁按射程飞行时间当击中目标时销毁用于销毁一个实例在本轮帧更新之后执行销毁要点与细节区分以下两种写法错误不会立即执行而是在本轮之后才执行练习火控参数练习火控参数的完善对子弹资源的引用子弹节点的管理子弹出生点炮塔子弹飞行速度子弹飞行时长创建子弹的实例指定父节点指定出生点与炮塔角度一致这样写也可以指定初始角度指定初始飞行速度最大最行距离在之后调用自毁自毁销毁实例练习按键控制练习添加按键控制旋转炮塔的方向对子弹资源的引用子弹节点的管理子弹出生点炮塔子弹飞行速度子弹飞行时长子弹发射间隔炮塔转速当前转角左转右转上转下转多维度旋转时不宜使用创建子弹的实例指定父节点指定出生点与炮塔角度一致这样写也可以指定初始角度指定初始飞行速度最大最行距离开火第章物理系统物理系统物理系统即由物理规律起作用的系统确切地说是牛顿运动定律力质量速度刚体组件物理学中的物体给苹果添加组件运行游戏此时牛顿接管了这个物体在重力作用下使其运动物理碰撞物理系统不仅接管了刚体的运动也接管了碰撞演示添加一个小球物体添加碰撞体描述了物体的碰撞范围其中长方碰撞体球形碰撞体碰撞体的范围反弹与摩擦刚体的反弹与摩擦也归物理系统负责演示新建添加给小球的设置观察小球的反弹第章碰撞检测运动学刚体运动学刚体即质量为的刚体由于质量为所以此刚体不受牛顿约束此时需要用脚本使其运动演示添加脚本让小球运动碰撞检测对于运动学刚体也支持碰撞检测由物理引擎负责检测演示触发器挂一个脚本添加消息函数其中表示对方的碰撞体对方节点对方节点的名字要点与细节物理引擎只负责探测不会阻止物体或者反弹物体引擎计算的是之间的碰撞和物体自身形状无关当检测到碰撞时会调用当前节点的脚本中的消息碰撞体的编辑碰撞体的形状规定了碰撞的边界其形状是可以编辑的盒形球形盒形中心位置相当于物体的轴心点长宽高点可以直接编辑绿色框球形中心位置相当于物体的轴心点半径大小点可以直接编辑绿色框练习添加子弹物体检查原先有没有碰撞体如果有则先移除根据体型选择合适形状的碰撞体此处添加一个编辑碰撞体调整边界一般无需调整自动创建合适的尺寸练习击毁目标练习发射一发子弹击毁目标运动学刚体触发器模式消息函数目标子弹发生碰撞要点与细节碰撞的双方只需一方设置为运动学刚体即可第章游戏项目实例射击游戏制作一个射击游戏海空背景玩家子弹无限数量怪兽蛇皮走位无限数量子弹特效爆炸特效背景音乐添加角色添加两个角色玩家敌人天空盒天空盒即游戏的背景光照设置天空盒材质子弹和碰撞添加子弹添加子弹脚本添加碰撞检测注意怪兽是一个空物体其碰撞体要手工编辑连续发射子弹增加自毁时间把子弹做成玩家定义发射点定义子弹目录使用定时器子弹连发按键控制添加按键控制让玩家左右移动怪兽的走位给怪兽添加控制脚本怪兽生成器添加怪兽生成器定时生成怪兽子弹特效添加子弹特效粒子特效注意修改之后要应用爆炸特效添加爆炸特效粒子特效在击中目标时创建特效节点子弹飞行速度子弹生命时长爆炸的粒子特效的子弹碰撞怪兽销毁子弹销毁对方节点创建一个粒子特效表现爆炸效果当粒子特效播放时该节点会自毁子弹节点的预制体子弹节点的父节点子弹出生点开火间隔平移速度实例化一个子弹节点把子弹移动到出生点位置前进速度横移速度每秒改变一次横移速度蛇皮走位种速度选项怪兽的定时创建新的怪兽头转过来添加一个随机的偏移量避免被人堵住出生点',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-13 20:15:08',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/inject/custom.css"><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ramsayi.asia/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Ramsayi</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 1.05rem;">Axios<sup>1</sup></a><a href="/tags/Bilibili/" style="font-size: 1.05rem;">Bilibili<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>35</sup></a><a href="/tags/C-%E7%90%86%E8%AE%BA%E7%BB%BC%E5%90%88%E4%BD%9C%E4%B8%9A/" style="font-size: 1.05rem;">C++理论综合作业<sup>4</sup></a><a href="/tags/Curl/" style="font-size: 1.05rem;">Curl<sup>1</sup></a><a href="/tags/Dart/" style="font-size: 1.05rem;">Dart<sup>115</sup></a><a href="/tags/ECharts/" style="font-size: 1.05rem;">ECharts<sup>4</sup></a><a href="/tags/Excel/" style="font-size: 1.05rem;">Excel<sup>1</sup></a><a href="/tags/FFmpeg/" style="font-size: 1.05rem;">FFmpeg<sup>1</sup></a><a href="/tags/Flutter/" style="font-size: 1.05rem;">Flutter<sup>115</sup></a><a href="/tags/Getx/" style="font-size: 1.05rem;">Getx<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>7</sup></a><a href="/tags/Jupyter/" style="font-size: 1.05rem;">Jupyter<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>1</sup></a><a href="/tags/OneDrive/" style="font-size: 1.05rem;">OneDrive<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>10</sup></a><a href="/tags/React/" style="font-size: 1.05rem;">React<sup>9</sup></a><a href="/tags/SARscape/" style="font-size: 1.05rem;">SARscape<sup>1</sup></a><a href="/tags/Sentinel/" style="font-size: 1.05rem;">Sentinel<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>7</sup></a><a href="/tags/Ubuntu/" style="font-size: 1.05rem;">Ubuntu<sup>2</sup></a><a href="/tags/Unity3D/" style="font-size: 1.05rem;">Unity3D<sup>1</sup></a><a href="/tags/VMware/" style="font-size: 1.05rem;">VMware<sup>1</sup></a><a href="/tags/VSCode/" style="font-size: 1.05rem;">VSCode<sup>1</sup></a><a href="/tags/Vim/" style="font-size: 1.05rem;">Vim<sup>1</sup></a><a href="/tags/Vue2/" style="font-size: 1.05rem;">Vue2<sup>2</sup></a><a href="/tags/Vue3/" style="font-size: 1.05rem;">Vue3<sup>10</sup></a><a href="/tags/Windows/" style="font-size: 1.05rem;">Windows<sup>1</sup></a><a href="/tags/You-Get/" style="font-size: 1.05rem;">You-Get<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 1.05rem;">uniapp<sup>1</sup></a><a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 1.05rem;">下载<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>9</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem;">博客<sup>5</sup></a><a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 1.05rem;">快捷键<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 1.05rem;">终端<sup>3</sup></a><a href="/tags/%E8%99%9A%E5%B9%BB5/" style="font-size: 1.05rem;">虚幻5<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 1.05rem;">视频<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">19</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">113</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" itemprop="url">技术学习</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Unity/" itemprop="url">Unity</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Unity3D/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Unity3D</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Unity3D入门教程 - 阿发</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-07-09T11:15:18.000Z" title="发表于 2023-07-09 19:15:18">2023-07-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-01-13T12:15:08.180Z" title="更新于 2024-01-13 20:15:08">2024-01-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>42分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Unity3D入门教程 - 阿发"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为江苏"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>江苏</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://ramsayi.asia/posts/d2fdc809/"><header><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" itemprop="url">技术学习</a><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Unity/" itemprop="url">Unity</a><a href="/tags/Unity3D/" tabindex="-1" itemprop="url">Unity3D</a><h1 id="CrawlerTitle" itemprop="name headline">Unity3D入门教程 - 阿发</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Ramsayi</span><time itemprop="dateCreated datePublished" datetime="2023-07-09T11:15:18.000Z" title="发表于 2023-07-09 19:15:18">2023-07-09</time><time itemprop="dateCreated datePublished" datetime="2024-01-13T12:15:08.180Z" title="更新于 2024-01-13 20:15:08">2024-01-13</time></header><h1 id="第-01-章-课程介绍"><a href="#第-01-章-课程介绍" class="headerlink" title="第 01 章 课程介绍"></a>第 01 章 课程介绍</h1><h2 id="1-1-课程介绍"><a href="#1-1-课程介绍" class="headerlink" title="1.1 课程介绍"></a>1.1 课程介绍</h2><p>Unity ，一款 3D 游戏引擎。</p>
<p>常见的游戏引擎：</p>
<ul>
<li>Unity ( C# )</li>
<li>Unreal Engine ( C ++ )</li>
<li>Cocos Creator ( JavaScript )</li>
<li>Frostbite Engine、Source Engine、Cry Engine …</li>
</ul>
<p><strong>游戏引擎 VS 建模</strong></p>
<p>游戏建模：创建游戏 模型 ，面向美术人员</p>
<p>游戏引擎：驱动 游戏逻辑 ，面向开发人员</p>
<p>CG 建模软件：3Dmax、Maya、Blender 、Cinema4D、ZBrush …</p>
<h2 id="1-2-资源下载"><a href="#1-2-资源下载" class="headerlink" title="1.2 资源下载"></a>1.2 资源下载</h2><p>官网 <a target="_blank" rel="noopener" href="https://afanihao.cn/">https://afanihao.cn</a></p>
<h1 id="第-02-章-开发环境"><a href="#第-02-章-开发环境" class="headerlink" title="第 02 章 开发环境"></a>第 02 章 开发环境</h1><p>需要许可证才能使用，直接添加一个免费的个人版许可证即可。</p>
<h1 id="第-03-章-场景与视图"><a href="#第-03-章-场景与视图" class="headerlink" title="第 03 章 场景与视图"></a>第 03 章 场景与视图</h1><h2 id="3-1-场景"><a href="#3-1-场景" class="headerlink" title="3.1 场景"></a>3.1 场景</h2><p><code>Scene</code>，即游戏中的一处 关卡 \ 场景</p>
<p>默认场景中，只有一个<strong>主摄像机</strong>和<strong>平行光源</strong></p>
<h2 id="3-2-游戏物体"><a href="#3-2-游戏物体" class="headerlink" title="3.2 游戏物体"></a>3.2 游戏物体</h2><p><code>GameObject</code>，游戏中的任何角色、道具、建筑</p>
<h2 id="3-3-3D-视图"><a href="#3-3-3D-视图" class="headerlink" title="3.3 3D 视图"></a>3.3 3D 视图</h2><p>了解 3D 视图的操作。</p>
<ul>
<li><code>导航器 Gizmo</code>，表示世界坐标的方向</li>
<li><code>栅格 Grid</code>，表示 XZ 坐标平面</li>
<li><code>天空盒 Skybox</code>，表示游戏世界的背景</li>
</ul>
<p><strong>视图相关操作</strong></p>
<p>平移：<code>鼠标中键</code></p>
<p>头部旋转：<code>鼠标右键</code></p>
<p>旋转中心旋转：<code>ALT + 鼠标左键</code></p>
<p>修改旋转中心：<code>鼠标中键</code></p>
<p>缩放：<code>鼠标滚轮</code></p>
<p><strong>导航器相关操作</strong></p>
<p>重置方向：<code>Shift + 鼠标左键中心方块</code></p>
<h2 id="3-4-世界坐标系"><a href="#3-4-世界坐标系" class="headerlink" title="3.4 世界坐标系"></a>3.4 世界坐标系</h2><p>3D 游戏世界的坐标系（左手系）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231115232145354.png" alt="image-20231115232145354"></p>
<h2 id="3-5-视野中心"><a href="#3-5-视野中心" class="headerlink" title="3.5 视野中心"></a>3.5 视野中心</h2><p>框显所选<br>选中一个物体<br>按<code>F键</code>，置于视图中心<br>此时旋转视图，似是绕着物体旋转。</p>
<h2 id="3-6-透视与正交"><a href="#3-6-透视与正交" class="headerlink" title="3.6 透视与正交"></a>3.6 透视与正交</h2><p>透视视图<code>Perspective</code>， 近大远小<br>正交视图<code>Orthographic</code>， 又称等距视图<code>Isometric</code><br>透视图下，物体‘近大远小’。正交视图下，物体的显示与距离无关</p>
<h1 id="第-04-章-游戏物体"><a href="#第-04-章-游戏物体" class="headerlink" title="第 04 章 游戏物体"></a>第 04 章 游戏物体</h1><h2 id="4-1-3D-原生物体"><a href="#4-1-3D-原生物体" class="headerlink" title="4.1 3D 原生物体"></a>4.1 3D 原生物体</h2><p>Cube ，立方体</p>
<p>Sphere ，球体</p>
<p>Capsule ，胶囊体</p>
<p>Cylinder ，圆柱体</p>
<p>Plane ，平面</p>
<h2 id="4-2-物体的移动"><a href="#4-2-物体的移动" class="headerlink" title="4.2 物体的移动"></a>4.2 物体的移动</h2><p>Move Tool ，移动工具</p>
<p>Rotate Tool ，旋转工具</p>
<p>Scale Tool ，缩放工具</p>
<h2 id="4-3-旋转与缩放"><a href="#4-3-旋转与缩放" class="headerlink" title="4.3 旋转与缩放"></a>4.3 旋转与缩放</h2><p>Rotate Tool ，旋转工具</p>
<p>演示：选中一个物体，绕 Z 轴旋转。</p>
<p>其中，</p>
<ul>
<li><p>逆时针为正，顺时针为负</p>
</li>
<li><p>可以在 Inspector 里精确指定</p>
</li>
<li><p>按住 CTRL 键时，角度增量为 15 度</p>
<p>Edit | Grid and Snap Settings 栅格吸附设置</p>
</li>
</ul>
<p>1 可以用快捷键 <code>W 、E 、R</code> 切换</p>
<p>2 操作模式，保持默认</p>
<ul>
<li>Pivot 轴心 &#x2F; Center 中心点</li>
<li>Global 世界坐标系 &#x2F; Local 局部坐标系</li>
</ul>
<h2 id="4-4-多选复制对齐"><a href="#4-4-多选复制对齐" class="headerlink" title="4.4 多选复制对齐"></a>4.4 多选复制对齐</h2><p>1 多选</p>
<ul>
<li><p>按 CTRL 或 SHIFT 键，点选</p>
</li>
<li><p>在 3D 视图中，鼠标 框选</p>
</li>
</ul>
<p>2 复制</p>
<ul>
<li><p>选中物体，<code>CTRL + D</code> 复制</p>
</li>
<li><p>物体右键 Duplicate</p>
</li>
</ul>
<p>3 聚焦</p>
<ul>
<li><p>选中物体，按 F 键 ，置于视图中心</p>
</li>
<li><p>或者 双击 物体</p>
</li>
</ul>
<p>4 激活</p>
<ul>
<li>Active 选中物体，在检查器中 激活 &#x2F; 禁用 物体</li>
</ul>
<p>5 对齐</p>
<ul>
<li><p>对初学者，直接 目视对齐 即可</p>
</li>
<li><p>进入 正交顶视图 &#x2F; 正交右视图 &#x2F; 正交后视图 ，方便观察</p>
</li>
</ul>
<h2 id="4-5-练习"><a href="#4-5-练习" class="headerlink" title="4.5 练习"></a>4.5 练习</h2><p>练习，使用基本体做一个简单造型。</p>
<h2 id="4-6-AF-扩展插件"><a href="#4-6-AF-扩展插件" class="headerlink" title="4.6 AF 扩展插件"></a>4.6 AF 扩展插件</h2><p>AF 扩展插件 ，AfSimpleExtension.cs</p>
<p>相关功能：</p>
<ul>
<li><p>获取物体的尺寸</p>
</li>
<li><p>置于视图中心，<code>G键</code></p>
</li>
<li><p>切换到 正交顶视图，<code>1键</code></p>
</li>
</ul>
<h1 id="第-05-章-模型"><a href="#第-05-章-模型" class="headerlink" title="第 05 章 模型"></a>第 05 章 模型</h1><h2 id="5-1-网格"><a href="#5-1-网格" class="headerlink" title="5.1 网格"></a>5.1 网格</h2><p>网格<code>Mesh</code>，存储了模型的形状数据</p>
<ul>
<li>模型的形状，由若干个小面围合而成</li>
<li>模型是中空的</li>
<li>Mesh 中包含了<strong>面</strong>、<strong>顶点坐标</strong>、<strong>面的法向</strong>等数据</li>
</ul>
<h2 id="5-2-材质"><a href="#5-2-材质" class="headerlink" title="5.2 材质"></a>5.2 材质</h2><p>材质<code>Material</code>，.定义了物体的表面细节</p>
<ul>
<li>颜色</li>
<li>金属&#x2F;非金属</li>
<li>光滑&#x2F;粗糙</li>
<li>透明&#x2F;半透明&#x2F;不透明</li>
<li>凹陷&#x2F;凸起</li>
</ul>
<h2 id="5-3-纹理"><a href="#5-3-纹理" class="headerlink" title="5.3 纹理"></a>5.3 纹理</h2><p>纹理<code>Texture</code>，也称贴图，用一张图定义物体的表面颜色</p>
<h2 id="5-4-外部模型"><a href="#5-4-外部模型" class="headerlink" title="5.4 外部模型"></a>5.4 外部模型</h2><p>Unity 支持各种 CG 建模软件：3Dmax&#x2F;Maya&#x2F;Blender&#x2F;Cinema4D&#x2F;ZBrush，.<br>标准模型格式：<code>FBX</code></p>
<p>在建模软件中，将模型导出为 FBX 格式即可。</p>
<h2 id="5-5-更多细节"><a href="#5-5-更多细节" class="headerlink" title="5.5 更多细节"></a>5.5 更多细节</h2><p>模型没有厚度，正面可见，背面透明</p>
<p>物体具有默认材质 <code>Default-Material</code>，否则显示为紫色</p>
<h2 id="5-6-FBX-的使用"><a href="#5-6-FBX-的使用" class="headerlink" title="5.6 FBX 的使用"></a>5.6 FBX 的使用</h2><p>在一个 FBX 模型文件中，一般包含：</p>
<ul>
<li><code>Mesh</code> 网格，定义物体的形状</li>
<li><code>Material</code> 材质，定义表面的光学特性</li>
<li><code>Texture</code> 贴图，定义表面的像素颜色</li>
</ul>
<p>FBX 第一种使用方式：<br>演示：</p>
<ul>
<li>选择<code>*.fbx</code>文件，直接拖到层级窗口</li>
<li>观察节点图标</li>
<li>选中节点，观察 Inspector 中的操作按钮</li>
</ul>
<p>贴图，</p>
<ul>
<li>有的模型需要贴图文件</li>
<li>贴图文件的路径是约定好的</li>
<li>与 fbx 相同目录，或者同级<code>Textures</code>目录</li>
</ul>
<p>材质，</p>
<ul>
<li>有的模型定义了多个材质</li>
<li>在 Materials 属性中定义了一个数组</li>
</ul>
<h2 id="5-7-FBX-的使用（二）"><a href="#5-7-FBX-的使用（二）" class="headerlink" title="5.7 FBX 的使用（二）"></a>5.7 FBX 的使用（二）</h2><p>FBX 第二种使用方式：<code>材质替换</code><br>演示：材质的重映射 Remap</p>
<ul>
<li><p>选中*.fbx 资源文件</p>
</li>
<li><p>在 Inspector 中切到 Materials 属性</p>
<p><code>Use Embeded Materials</code></p>
<p><code>On Demand Remap</code>: 映射新的材质</p>
</li>
<li><p>点<code>Apply</code>应用设置</p>
</li>
</ul>
<h2 id="5-7-FBX-的使用（三）"><a href="#5-7-FBX-的使用（三）" class="headerlink" title="5.7 FBX 的使用（三）"></a>5.7 FBX 的使用（三）</h2><p>FBX 第三种使用方式：<code>分解重组</code><br>演示：</p>
<ul>
<li>-选择 fbx 中的 网格</li>
<li>-选择 bx 中的 材质，或者自定义一个材质</li>
<li>-如果存在贴图，则使用 x 配套的贴图文件</li>
</ul>
<h1 id="第-06-章-资源文件"><a href="#第-06-章-资源文件" class="headerlink" title="第 06 章 资源文件"></a>第 06 章 资源文件</h1><h2 id="6-1-资源文件"><a href="#6-1-资源文件" class="headerlink" title="6.1 资源文件"></a>6.1 资源文件</h2><p><code>Assets</code>目录下的文件，称为资源<br>常见类型：</p>
<ul>
<li>模型文件 Model(<code>*.fbx</code>)</li>
<li>图片文件 Texture(*<code>jpg/png psd/tif</code>)</li>
<li>音频文件 AudioClip(*<code>.mp3/wav/aif</code>)</li>
<li>脚本文件 Script(<code>*.cs</code>)</li>
<li>材质文件*<code>.mat</code>，场景文件<code>*.unity</code>。。</li>
</ul>
<p><code>Meta</code>,描述文件<br>每一个资源文件&#x2F;文件夹，都对一个<code>*.meta</code>描述文件</p>
<h2 id="6-2-场景文件"><a href="#6-2-场景文件" class="headerlink" title="6.2 场景文件"></a>6.2 场景文件</h2><p>场景文件<code>*unity</code>,记录了场景中的节点数据<br>包含：</p>
<ul>
<li>场景全局设置</li>
<li>节点</li>
<li>节点下的组件</li>
<li>每个组件的参数值</li>
</ul>
<h2 id="6-3-资源包"><a href="#6-3-资源包" class="headerlink" title="6.3 资源包"></a>6.3 资源包</h2><p>资源包<code>Unity Package</code>,即对 Assets 下的资源打包<br>演示：</p>
<ul>
<li>-选择一个资源文件，或者一个目录</li>
<li>-右键，<code>Export Package</code></li>
<li>-生成*.unitypackage 资源包</li>
</ul>
<h2 id="6-4-Unity-资源商店"><a href="#6-4-Unity-资源商店" class="headerlink" title="6.4 Unity 资源商店"></a>6.4 Unity 资源商店</h2><p><a target="_blank" rel="noopener" href="https://assetstore.unity.com/">https://assetstore.unity.com/</a></p>
<h1 id="第-07-章-父子关系"><a href="#第-07-章-父子关系" class="headerlink" title="第 07 章 父子关系"></a>第 07 章 父子关系</h1><h2 id="7-1-轴心"><a href="#7-1-轴心" class="headerlink" title="7.1 轴心"></a>7.1 轴心</h2><p>轴心<code>Pivot</code>,指一个物体的操作基准点<br>演示：</p>
<ul>
<li>移动一个物体</li>
<li>旋转一个物体</li>
<li>对于基本体来说，轴心点默认位于几何中心</li>
</ul>
<h2 id="7-2-父子关系"><a href="#7-2-父子关系" class="headerlink" title="7.2 父子关系"></a>7.2 父子关系</h2><p><code>父子级</code>，指两个物体之间的关系。<br>在 Hierarchy 窗口中，</p>
<ul>
<li>拖动物体 B,到物体 A 下</li>
<li>子物体会随着父物体一并移动</li>
<li>删除父物体时，子物体一并删除</li>
</ul>
<p><code>相对坐标</code>：子物体的坐标，是相对于父物体的。<br>移动父物体时，观察子物体的坐标。。</p>
<h2 id="7-3-空物体"><a href="#7-3-空物体" class="headerlink" title="7.3 空物体"></a>7.3 空物体</h2><p>空物体<code>EmptyObject</code>，即空对象、空节点。<br>演示：</p>
<ul>
<li>添加一个空物体</li>
<li>空物体不可见，（没有网格）</li>
<li>空物体也有坐标，可以移动</li>
</ul>
<p>空物体很常见，其作用：</p>
<ul>
<li>-用于节点的组织和管理</li>
<li>-用于标记一个位置</li>
</ul>
<p><strong>要点与细节</strong></p>
<p><code>GameObject</code>，其实是一个节点&#x2F;容器<br>一般所谓的‘物体’，即有形状的东西，对应的 Mesh</p>
<h2 id="7-4-Global-与-Local"><a href="#7-4-Global-与-Local" class="headerlink" title="7.4 Global 与 Local"></a>7.4 Global 与 Local</h2><ol>
<li><p><code>Global</code>，即世界坐标系</p>
<ul>
<li>-以世界中心为轴</li>
<li>-6 个方向代表：上下东西南北</li>
</ul>
</li>
<li><p><code>Local</code>，即本地坐标系</p>
<ul>
<li>-以物体自身为轴</li>
<li>-6 个方向代表：上下前后左右</li>
</ul>
</li>
</ol>
<p>y 轴称为<code>up</code>，z 轴称为<code>forward</code>，x 轴称为<code>right</code></p>
<p>一般地，要求模型的正脸与 Z 轴方向一致</p>
<h2 id="7-5-Pivot-与-Center"><a href="#7-5-Pivot-与-Center" class="headerlink" title="7.5 Pivot 与 Center"></a>7.5 Pivot 与 Center</h2><p><code>Pivot</code>，轴心<br><code>Center</code>，几何中心<br>一般来说，物体的轴心并不在几何中心处</p>
<h1 id="第-08-章-组件"><a href="#第-08-章-组件" class="headerlink" title="第 08 章 组件"></a>第 08 章 组件</h1><h2 id="8-1-组件"><a href="#8-1-组件" class="headerlink" title="8.1 组件"></a>8.1 组件</h2><p>组件<code>Component</code>，代表一个功能<br>例如，</p>
<ul>
<li><code>Light</code>，光源</li>
<li><code>Mesh Filter</code>，网格过滤器</li>
<li><code>Mesh Renderer</code>，网格渲染器。。</li>
</ul>
<h2 id="8-2-添加删除组件"><a href="#8-2-添加删除组件" class="headerlink" title="8.2 添加删除组件"></a>8.2 添加删除组件</h2><p>几个组件操作：</p>
<p><code>Add Component</code>，添加一个组件</p>
<p><code>Remove Component</code>，删除一个组件</p>
<p>练习：Mesh Filter 和 Mesh Renderer 组件。</p>
<ul>
<li>添加一个空物体</li>
<li>添加<code>Mesh|Mesh Filter</code>，加载网格数据</li>
<li>添加<code>Mesh|Mesh Renderer</code>，渲染网格</li>
</ul>
<h2 id="8-3-AudioSource-组件"><a href="#8-3-AudioSource-组件" class="headerlink" title="8.3 AudioSource 组件"></a>8.3 AudioSource 组件</h2><p><code>AudioSource</code>组件，用于播放音乐&#x2F;音效</p>
<ol>
<li>添加一个音乐文件，*.mp3&#x2F;wav&#x2F;aiff</li>
<li>创建一个物体<ul>
<li>Add Component, Audio | Audio Source</li>
<li>将音乐文件拖到 AudioSource.AudioClip 属性</li>
<li>在 3D 窗口上方，选 Toggle Audio On</li>
</ul>
</li>
</ol>
<h2 id="8-4-Transform-组件"><a href="#8-4-Transform-组件" class="headerlink" title="8.4 Transform 组件"></a>8.4 Transform 组件</h2><p><code>Transform</code>，称为变换组件。</p>
<p>物体的基本参数：</p>
<ul>
<li><code>Position</code>，位置（相对坐标）</li>
<li><code>Rotation</code>，旋转（欧拉角）</li>
<li><code>Scale</code>，缩放</li>
</ul>
<p>Transform 组件的特点：</p>
<ul>
<li>1 所有物体都有</li>
<li>2 不能被删除</li>
</ul>
<h2 id="8-5-摄像机"><a href="#8-5-摄像机" class="headerlink" title="8.5 摄像机"></a>8.5 摄像机</h2><p>摄像机<code>Camera</code>，负责拍摄游戏画面。<br>演示：</p>
<ul>
<li>1 调整窗口布局，<code>Scene</code>&#x2F;<code>Game</code>并排显示</li>
<li>2 选中摄像机，观察镜头范围</li>
<li>3 摄像机的 Z 轴指向，即为拍摄方向</li>
<li>4 拍到的画面，呈现在 Game 窗口中</li>
</ul>
<p>Game 窗口中的画面，即为玩家最终所见画面</p>
<p><strong>调整摄像机的角度</strong>，两种方法：</p>
<ul>
<li>1 手工移动、旋转摄像机，对准目标</li>
<li>2 Align with View,与 3D 视图对齐<ul>
<li>先在 3D 视图里摆好角度，此为观察者视角</li>
<li>然后选中 Main Camera,执行 Align with View</li>
</ul>
</li>
</ul>
<p>此时，摄像机视角与观察者视角完全相同</p>
<h1 id="第-09-章-脚本"><a href="#第-09-章-脚本" class="headerlink" title="第 09 章 脚本"></a>第 09 章 脚本</h1><h2 id="9-1-脚本"><a href="#9-1-脚本" class="headerlink" title="9.1 脚本"></a>9.1 脚本</h2><p>文件名即为类名 。如 SimpleLogic</p>
<h2 id="9-2-当前物体"><a href="#9-2-当前物体" class="headerlink" title="9.2 当前物体"></a>9.2 当前物体</h2><p>在 SimpleLogic.cs 中，获取当前物体</p>
<ol>
<li><code>this</code>，当前脚本组件</li>
<li><code>this.gameObject</code>，当前物体<br><code>this.gameObject.name</code>，当前物体的名字</li>
<li><code>this.gameObject.transform</code>，当前物体下的 Transform 组件<br>为了简化书写，也可写作<code>this.transform</code>，效果相同</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GameObject obj = <span class="keyword">this</span>.gameObject;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> name = obj.name;</span><br><span class="line">Debug.Log(<span class="string">&quot;物体名字：&quot;</span> + name)</span><br><span class="line"></span><br><span class="line">Transform tr = transform;</span><br></pre></td></tr></table></figure>

<h2 id="9-3-物体的坐标"><a href="#9-3-物体的坐标" class="headerlink" title="9.3 物体的坐标"></a>9.3 物体的坐标</h2><p>物体的坐标，</p>
<ul>
<li><code>transform.position</code>，世界坐标</li>
<li><code>transform.localPosition</code>，本地坐标</li>
</ul>
<p>一般常使用的是 localPosition，与 Inspector 中的值一致</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Transform tr = transform;</span><br><span class="line">Vector3 pos = tr.position;</span><br><span class="line">Debug.Log(<span class="string">&quot;世界坐标：&quot;</span> + pos.ToString(<span class="string">&quot;F3&quot;</span>));</span><br><span class="line"></span><br><span class="line">Vector3 localPos = tr.localPosition;</span><br><span class="line">Debug.Log(<span class="string">&quot;本地坐标：&quot;</span> + localPos.ToString(<span class="string">&quot;F3&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>Vectors3 类型，即三维向量，含 x y z 三个分量(float)<br>设置物体的坐标：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.localPosition = <span class="keyword">new</span> Vector3(<span class="number">1.5f</span>, <span class="number">0</span>, <span class="number">2.0f</span>);</span><br></pre></td></tr></table></figure>

<p>其中，float 型的数值，在书写时应以 f 结尾</p>
<h2 id="9-4-播放模式"><a href="#9-4-播放模式" class="headerlink" title="9.4 播放模式"></a>9.4 播放模式</h2><p>Edit Mode，编辑模式<br><code>Play Mode</code>，播放&#x2F;运行模式<br>在播放模式下，</p>
<ul>
<li><strong>实时显示</strong>场景中的物体和属性</li>
<li>游戏中的状态<strong>不可保存</strong></li>
</ul>
<p>You must exit play mode to save the scene</p>
<h1 id="第-10-章-帧更新"><a href="#第-10-章-帧更新" class="headerlink" title="第 10 章 帧更新"></a>第 10 章 帧更新</h1><h2 id="10-1-帧更新"><a href="#10-1-帧更新" class="headerlink" title="10.1 帧更新"></a>10.1 帧更新</h2><p>Frame，一个游戏帧<br><code>FrameRate</code>，帧率&#x2F;刷新率<br><code>FPS</code>，Frames Per Sencond，每秒更新多少帧</p>
<p><code>Update()</code>，称为帧更新<br>此方法会被游戏引擎定时调用，以更新游戏的状态<br>演示：在 Update()中添加日志输出，在 Console 中观察。。</p>
<p>帧率观察：</p>
<ul>
<li><code>Time.time</code>，游戏时间</li>
<li><code>Time.deltaTime</code>，距上次更新的时间差</li>
</ul>
<p>显然，帧率是不固定的，Unity 会尽量较快地更新</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Debug.Log(<span class="string">&quot;帧更新：&quot;</span> + Time.time);</span><br><span class="line">Debug.Log(<span class="string">&quot;帧更新时间差：&quot;</span> + Time.deltaTime);</span><br><span class="line"><span class="comment">//帧数计算</span></span><br><span class="line">Debug.Log(<span class="string">&quot;帧数：&quot;</span> + (<span class="number">1</span> / Time.deltaTime));</span><br></pre></td></tr></table></figure>

<p>Unity 不支持固定帧率，但可以设定一个近似帧率</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Application.targetFrameRate = <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<p>其中，指示 Unity 尽量以 FPS&#x3D;60 的帧率更新游戏</p>
<h2 id="10-2-移动物体"><a href="#10-2-移动物体" class="headerlink" title="10.2 移动物体"></a>10.2 移动物体</h2><p>在 Update()中，移动物体的位置<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 pos = transform.localPosition;</span><br><span class="line">pos.X += <span class="number">0.01f</span>;</span><br><span class="line">transform.localPosition = pos;</span><br></pre></td></tr></table></figure>

<p>运行游戏，则物体沿 X 轴正向移动</p>
<p>物体的运动并不是匀速的。<br>每次运动 0.01 米，但是间隔的 deltaTime 不固定<br>比如，<br>第 1 次，deltaTime&#x3D;0.016 秒，运动 0.01 米<br>第 2 次，deltaTime&#x3D;0.030 秒，运动 0.01 米。</p>
<p><strong>匀速运动</strong></p>
<p>使用<code>deltaTime</code>,让物体的匀速运动<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> speed = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">float</span> distance = speed * Time.deltaTime;</span><br></pre></td></tr></table></figure>

<h1 id="第-11-章-物体的运动"><a href="#第-11-章-物体的运动" class="headerlink" title="第 11 章 物体的运动"></a>第 11 章 物体的运动</h1><h2 id="11-1-物体的运动"><a href="#11-1-物体的运动" class="headerlink" title="11.1 物体的运动"></a>11.1 物体的运动</h2><p>本章研究物体的运动。</p>
<ul>
<li>1 布置测试场景</li>
<li>2 添加小火车</li>
<li>3 添加脚本<code>SimpleLogic</code>，控制小火车的运动</li>
</ul>
<p>修改 position&#x2F;localPosition,可以让物体运动<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 pos = transform.localPosition</span><br><span class="line">pos.z += distance;</span><br><span class="line">transform.localPosition = pos;</span><br></pre></td></tr></table></figure>

<p>此时，小车向正北(+Z)方向运动</p>
<p>一般使用<code>transform.Translate()</code>，实现相对运动</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(dx,dy,dz,.)</span><br></pre></td></tr></table></figure>

<p>其中，dx,dy,dz 是坐标增量<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(O, O, distance); <span class="comment">//Z方向增加distance</span></span><br></pre></td></tr></table></figure>

<h2 id="11-2-相对运动"><a href="#11-2-相对运动" class="headerlink" title="11.2 相对运动"></a>11.2 相对运动</h2><p><code>transform.Translate()</code>，可以实现物体的运动</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(dx, dy, dz, space);</span><br></pre></td></tr></table></figure>

<p>其中，第 4 个参数：<br><code>Space.World</code>，相对于世界坐标系<br><code>Space.Self</code>，相当于自身坐标系（本地坐标系）</p>
<p><strong>要点与细节</strong></p>
<p>在建模时，要求物体的脸的朝向与物体<code>+Z</code>轴一致</p>
<h2 id="11-3-运动的方向"><a href="#11-3-运动的方向" class="headerlink" title="11.3 运动的方向"></a>11.3 运动的方向</h2><p>运动的方向，使物体朝着目标方向运动<br>演示：添加一个红旗，作为目标。。</p>
<ol>
<li><p>获取目标物体</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GameObject flag = GameObject.Find(<span class="string">&quot;红旗&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>转向目标</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.LookAt(flag.transform);</span><br></pre></td></tr></table></figure>
</li>
<li><p>向‘前’运动，forward，+Z 方向</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(<span class="number">0</span>, <span class="number">0</span>, dz, Space.Self);</span><br></pre></td></tr></table></figure></li>
</ol>
<p>其中，<br><code>GameObject.Find(name_or_path)</code>，根据名字&#x2F;路径来查找物体<br><code>transform.LookAt(target)</code>，使物体的 Z 轴指向物体<br><code>Space.self</code>，沿物体自身坐标系的轴向运动</p>
<h2 id="11-4-小练习"><a href="#11-4-小练习" class="headerlink" title="11.4 小练习"></a>11.4 小练习</h2><p>练习：小火车朝向目标运动，到达目标后停止。</p>
<p>向量测距：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p1 = 火车.transform.position</span><br><span class="line">p2 = 红旗.transform.position</span><br><span class="line">p = p1 - p2</span><br><span class="line">distance = p.magnitude</span><br></pre></td></tr></table></figure>

<h1 id="第-12-章-物体的旋转"><a href="#第-12-章-物体的旋转" class="headerlink" title="第 12 章 物体的旋转"></a>第 12 章 物体的旋转</h1><h2 id="12-1-物体的旋转"><a href="#12-1-物体的旋转" class="headerlink" title="12.1 物体的旋转"></a>12.1 物体的旋转</h2><p>给物体调转一个旋转角度。</p>
<ol>
<li><p>Quaternion 四元组(x,y,z,w)</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.rotation=…不便操作，官方不建议使用</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Quaternion.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Quaternion.html</a></p>
</li>
<li><p>欧拉角 Euler Angle</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">transform.eulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">45</span>, <span class="number">0</span>);</span><br><span class="line">transform.localEulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">45</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<p>在 Update()修改角度，持续旋转</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 angles = transform.localEulerAngles;</span><br><span class="line">angles.y += <span class="number">0.5f</span>;</span><br><span class="line">transform.localEulerAngles = angles;</span><br></pre></td></tr></table></figure>

<p>优化，使之匀速旋转，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> rotateSpeed = <span class="number">30</span>; <span class="comment">//每秒转30度角</span></span><br><span class="line"></span><br><span class="line">angles.y += rotateSpeed * Time.deltaTime; <span class="comment">//0.5f;</span></span><br></pre></td></tr></table></figure>

<h2 id="12-2-相对旋转"><a href="#12-2-相对旋转" class="headerlink" title="12.2 相对旋转"></a>12.2 相对旋转</h2><p><code>Rotate()</code>，旋转一个相对角度</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Rotate(dx, dy, dz, space);</span><br></pre></td></tr></table></figure>

<p>相当于，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 angles = transform.localEulerAngles;</span><br><span class="line">angles += <span class="keyword">new</span> Vector3(dx, dy, dz);</span><br><span class="line">transform.localEulerAngles = angles;</span><br></pre></td></tr></table></figure>

<h2 id="12-3-自转与公转"><a href="#12-3-自转与公转" class="headerlink" title="12.3 自转与公转"></a>12.3 自转与公转</h2><p>自转，绕着自身轴旋转。<br>公转，围绕另一个物体旋转。<br>当父物体转动时，带动子物体一并旋转。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 找到父物体</span></span><br><span class="line">Transform parent = transform.parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制父物体旋转</span></span><br><span class="line">parent.Rotate(<span class="number">0</span>, rotateSpeed * Time.deltaTime, <span class="number">0</span>, Space.Self);</span><br></pre></td></tr></table></figure>

<h2 id="12-4-官方文档"><a href="#12-4-官方文档" class="headerlink" title="12.4 官方文档"></a>12.4 官方文档</h2><p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/index.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/index.html</a></p>
<h1 id="第-13-章-脚本的运行"><a href="#第-13-章-脚本的运行" class="headerlink" title="第 13 章 脚本的运行"></a>第 13 章 脚本的运行</h1><h2 id="13-1-脚本的运行"><a href="#13-1-脚本的运行" class="headerlink" title="13.1 脚本的运行"></a>13.1 脚本的运行</h2><p>场景的加载过程：</p>
<ol>
<li><p>创建节点</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GameObject node = <span class="keyword">new</span> GameObject()</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例化组件</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MeshRenderer comp = <span class="keyword">new</span> MeshRenderer()</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例化脚本组件</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SimpleLogic script1 = <span class="keyword">new</span> SimpleLogic()</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用事件函数</p>
<ul>
<li>初始化<code>script1.Start()</code></li>
<li>帧更新<code>script1.Update()</code></li>
</ul>
</li>
</ol>
<p>注意，Unity 是一个纯面向对象的框架，对象由框架创建</p>
<h2 id="13-2-消息函数"><a href="#13-2-消息函数" class="headerlink" title="13.2 消息函数"></a>13.2 消息函数</h2><p>所有的脚本，一般应继承于<code>MonoBehaviour</code><br><code>消息函数</code>，或称事件函数，一些回调函数</p>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/current/ScriptReference/MonoBehaviour.html">https://docs.unity.cn/cn/current/ScriptReference/MonoBehaviour.html</a></p>
<p>常见的消息函数：</p>
<ul>
<li><code>Awake</code>，初始化，仅执行一次</li>
<li><code>Start</code>，初始化，仅执行一次</li>
<li><code>Update</code>，帧更新，每帧调用一次</li>
<li><code>OnEnable</code>，每当组件启用时调用</li>
<li><code>OnDisable</code>，每当组件禁用时调用</li>
</ul>
<p>其中，<br><code>Awake</code>先于 Start 调用<br><code>Awake</code>总是调用，即使组件被禁用<br><code>Start</code>，只执行一次，第一次启用时调用<br>对于初学者，使用 Start 来初始化即可。</p>
<p>已禁用的组件，其消息函数<code>Start</code>&#x2F;<code>Update</code>不会被调用<br><code>Awake</code>&#x2F;<code>Start</code>,都只会执行一次</p>
<h2 id="13-3-脚本执行顺序"><a href="#13-3-脚本执行顺序" class="headerlink" title="13.3 脚本执行顺序"></a>13.3 脚本执行顺序</h2><p>消息函数的调用顺序：<br><strong>第 1 阶段初始化</strong>，<br>script1.Awake(), script2.Awake(),..<br><strong>第 2 阶段初始化</strong>，<br>script1.Start(), script2.Start(),..<br><strong>帧更新</strong>，<br>script1.Update(), script2.Update(),..</p>
<p>脚本的优先级 <strong>Script Execution Order</strong><br>默认地，所有脚本的优先级为 0，无特定顺序</p>
<p>优先级的设定：</p>
<ol>
<li>选中一个脚本，打开 <strong>Execution Order</strong> 对话框</li>
<li>点+按钮，添加一个脚本</li>
<li>指定优先级，值越小、优先级越高<br>或者，直接拖动调节顺序</li>
</ol>
<p><strong>要点与细节</strong></p>
<ol>
<li>脚本的执行顺序，和 Hierarchy 中的层级顺序无关</li>
<li>一般地，并不需要显式设置 Execution Order，默认即可</li>
</ol>
<h2 id="13-4-主控脚本"><a href="#13-4-主控脚本" class="headerlink" title="13.4 主控脚本"></a>13.4 主控脚本</h2><p>主控脚本，即游戏的主控逻辑。<br>演示：添加一个脚本<strong>MainLogic</strong>,作为主控脚本。。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Application.targetFrameRate = <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<h1 id="第-14-章-脚本的参数"><a href="#第-14-章-脚本的参数" class="headerlink" title="第 14 章 脚本的参数"></a>第 14 章 脚本的参数</h1><h2 id="14-1-脚本的参数"><a href="#14-1-脚本的参数" class="headerlink" title="14.1 脚本的参数"></a>14.1 脚本的参数</h2><p>脚本的参数，用于控制脚本组件的功能。<br>修改 RotateY.cs，添加一个参数。。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> rotateSpeed=<span class="number">30f</span>;</span><br></pre></td></tr></table></figure>

<p>参数的用法：</p>
<ol>
<li><p>参数必须为<code>public</code>，才可以在检查器中显示</p>
</li>
<li><p>参数的名称即变量名<br><code>rotateSpeed</code> → <code>Rotate Speed</code></p>
</li>
<li><p>参数的默认值，即变量的默认值<br>可以<strong>Reset</strong>菜单重置</p>
</li>
<li><p>参数的工具提示，可以用<code>[Tooltip()]</code>指定</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Tooltip(<span class="string">&quot;旋转角速度&quot;</span>)</span>]</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ Tooltip(<span class="string">&quot;这个是Y轴向的角速度&quot;</span>) ]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> rotateSpeed = <span class="number">30f</span>;</span><br></pre></td></tr></table></figure>

<h2 id="14-2-参数的赋值"><a href="#14-2-参数的赋值" class="headerlink" title="14.2 参数的赋值"></a>14.2 参数的赋值</h2><p>脚本参数的赋值（以下按时间顺序）</p>
<ol>
<li><p>定义默认值</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> rotateSpeed = <span class="number">30f</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在检查器中赋值</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script.rotateSpeed = <span class="number">180f</span>; <span class="comment">//由Unity框架对参数赋值</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Awake 中初始化在 Start 中初始化</p>
</li>
<li><p>在 Start 中初始化</p>
</li>
</ol>
<p>伪代码表示：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RotateY script = <span class="keyword">new</span> RotateY()</span><br><span class="line">script.rotateSpeed = <span class="number">180f</span></span><br><span class="line">script.Awake()</span><br><span class="line">script.Start()</span><br></pre></td></tr></table></figure>

<h2 id="14-3-值类型"><a href="#14-3-值类型" class="headerlink" title="14.3 值类型"></a>14.3 值类型</h2><p>参数的类型，分为值类型、引用类型<br><strong>值类型</strong>：如 int, float, bool<br><strong>值类型</strong>(struct)：如 Vector3, Color<br><strong>引用类型</strong>(class)：如 GameObject, Transform, MeshRenderer…</p>
<p><strong>值类型</strong></p>
<p>值类型的特点：</p>
<ul>
<li><p>本身是一个值，可直接赋值</p>
</li>
<li><p>若未赋值，则默认为 0</p>
</li>
<li><p>不能为 null</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> speed = <span class="literal">null</span> ??</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>结构体 struct</strong>，也是值类型<br>所以，</p>
<ul>
<li><p>若未赋值，则各字段值为 0</p>
</li>
<li><p>不能设为 null</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vector3 rotateSpeed = <span class="literal">null</span> ??</span><br></pre></td></tr></table></figure></li>
</ul>
<p>其实，在 C#里面，int, float 本质也是 struct 类型<br>string，原则上属于 class 类型</p>
<h2 id="14-4-引用类型"><a href="#14-4-引用类型" class="headerlink" title="14.4 引用类型"></a>14.4 引用类型</h2><p>参数也可以是引用类型。</p>
<ul>
<li>-<strong>节点</strong>，GameObject</li>
<li>-<strong>组件</strong>，如 Transform、MeshRenderer、AudioSource</li>
<li>-<strong>资源</strong>，如 Material、Texture、AudioClip、…</li>
<li>-<strong>数组类型</strong></li>
</ul>
<p>练习：添加 TrainLogic,使小火车朝着目标运动<br>但是，有两个红旗目标。。</p>
<h2 id="14-5-运行时调试"><a href="#14-5-运行时调试" class="headerlink" title="14.5 运行时调试"></a>14.5 运行时调试</h2><p>在游戏运行时，可以对物体&#x2F;组件进行<strong>实时调试</strong></p>
<p>显然，在运行模式下，所有参数不能保存到场景<br>保存参数的办法：</p>
<ul>
<li>-在 Play Mode 下，组件<code>Copy Component</code></li>
<li>-在 Edit Mode 下，组件<code>Paste Component Values</code></li>
</ul>
<h1 id="第-15-章-鼠标输入"><a href="#第-15-章-鼠标输入" class="headerlink" title="第 15 章 鼠标输入"></a>第 15 章 鼠标输入</h1><h2 id="15-1-鼠标输入"><a href="#15-1-鼠标输入" class="headerlink" title="15.1 鼠标输入"></a>15.1 鼠标输入</h2><p>鼠标输入 相关 API :</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input.GetMouseButtonDown()</span><br><span class="line">Input.GetMouseButtonUp()</span><br><span class="line">Input.GetMouseButton()</span><br></pre></td></tr></table></figure>

<h2 id="15-2-几个细节"><a href="#15-2-几个细节" class="headerlink" title="15.2 几个细节"></a>15.2 几个细节</h2><p>1 区分 事件探测 VS 状态探测</p>
<p>鼠标事件，只触发一次</p>
<p><code>Input.GetMouseButtonDown()</code></p>
<p><code>Input.GetMouseButtonUp()</code></p>
<p>鼠标状态，表示当前是否正在被按下</p>
<p><code>Input.GetMouseButton()</code></p>
<p>2 鼠标事件是全局的，每个脚本 互不影响</p>
<h2 id="15-3-屏幕坐标"><a href="#15-3-屏幕坐标" class="headerlink" title="15.3 屏幕坐标"></a>15.3 屏幕坐标</h2><p><code>Input.mousePosition</code></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">	Vector3 mousePos = Input.mousePosition;</span><br><span class="line">	Debug.Log(<span class="string">&quot;鼠标点击位置:&quot;</span> + mousePos);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>世界坐标</strong>与<strong>屏幕坐标</strong>转换</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个物体，在屏幕上的位置 ：</span></span><br><span class="line">worldPos = transform.position;</span><br><span class="line"><span class="comment">// screenPos 屏幕坐标</span></span><br><span class="line">screenPos = Camera.main.WorldToScreenPoint(worldPos);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其中所谓 屏幕，相对于摄像机而言的，实际上是指摄像头的屏</span></span><br></pre></td></tr></table></figure>

<h2 id="15-4-键盘输入"><a href="#15-4-键盘输入" class="headerlink" title="15.4 键盘输入"></a>15.4 键盘输入</h2><p>获取键盘输入，相关 API ：</p>
<p><code>Input.GetKeyDown(key)</code> 按键事件，按下</p>
<p><code>Input.GetKeyUp(key)</code> 按键事件， 抬起</p>
<p><code>Input.GetKey(key)</code> 按键状态，是否正被按下</p>
<p>演示：当按下 W 键时，向前运动 。</p>
<p>键值常量，可参考官方文档：</p>
<p><code>KeyCode.A</code> ，</p>
<p><code>KeyCode.Space</code> ，</p>
<p><code>KeyCode.LeftArrow</code> …</p>
<h1 id="第-16-章-组件的访问"><a href="#第-16-章-组件的访问" class="headerlink" title="第 16 章 组件的访问"></a>第 16 章 组件的访问</h1><h2 id="16-1-组件的调用"><a href="#16-1-组件的调用" class="headerlink" title="16.1 组件的调用"></a>16.1 组件的调用</h2><p>组件<code>Component</code>，代表一个功能。<br>例如，<code>AudioSource</code>可用于播放音乐、音效。。<br>其中，<code>Play on Awake</code>表示自动播放</p>
<p>在代码中，也可以用 API 来使其播放音乐。</p>
<ol>
<li><p>获取 AudioSource 组件</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AudioSource audio = GetComponent&lt;AudioSource&gt;();</span><br></pre></td></tr></table></figure>
</li>
<li><p>播放</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">audio.Play();</span><br></pre></td></tr></table></figure>

<p>其中，&lt;&gt;表示泛型，即获取<code>&lt;AudioSource&gt;</code>类型的组件</p>
</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        PlayMusic();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PlayMusic</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 获取组件</span></span><br><span class="line">    AudioSource audio = GetComponent&lt;AudioSource&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( audio.isPlaying )</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* 停止播放&quot;</span>);</span><br><span class="line">        audio.Stop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* 开始播放音乐 ..&quot;</span>);</span><br><span class="line">        audio.Play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="16-2-组件的参数"><a href="#16-2-组件的参数" class="headerlink" title="16.2 组件的参数"></a>16.2 组件的参数</h2><p>组件的参数，也可以在代码中访问。<br>例如，<br><code>AudioClip</code>，音频资源<br><code>Mute</code>，是否静音<br><code>Loop</code>，是否循环播放<br><code>Volume</code>，音量</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">audio.mute = <span class="literal">true</span>; <span class="comment">//设置静音</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/AudioSource.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/AudioSource.html</a></p>
<h2 id="16-3-引用别的组件"><a href="#16-3-引用别的组件" class="headerlink" title="16.3 引用别的组件"></a>16.3 引用别的组件</h2><p>在主控脚本里面访问音频组件</p>
<p><strong>第一种办法，</strong></p>
<p>（1）添加一个变量，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> GameObject bgmNode;</span><br></pre></td></tr></table></figure>

<p>然后在检查器里指定这个引用。</p>
<p>（2）访问节点下的组件，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AudioSource audio = bgmNode.getComponent&lt;AudioSource&gt;();</span><br></pre></td></tr></table></figure>

<p><strong>第二种办法：（推荐）</strong></p>
<p>直接添加一个变量，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> AudioSource bgm;</span><br></pre></td></tr></table></figure>

<p>然后在检查器里指定这个引用 。自动找到背景音乐节点下面的 AudioSource 组件</p>
<h2 id="16-4-引用脚本组件"><a href="#16-4-引用脚本组件" class="headerlink" title="16.4 引用脚本组件"></a>16.4 引用脚本组件</h2><p>一个脚本里，访问另一个脚本组件。<br>和普通组件一样，</p>
<ol>
<li><p>API 获取</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FanLogic fan = node.getComponent&lt;FanLogic&gt;();</span><br></pre></td></tr></table></figure>
</li>
<li><p>直接引用</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> FanLogic fan;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目标组件，直接在检查里引用</span></span><br><span class="line"><span class="keyword">public</span> FanLogic fan;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        DoWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoWork</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//FanLogic fan = fanNode.GetComponent&lt;FanLogic&gt;();</span></span><br><span class="line">    fan.rotateSpeed = <span class="number">180</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="16-5-消息调用"><a href="#16-5-消息调用" class="headerlink" title="16.5 消息调用"></a>16.5 消息调用</h2><p>不推荐使用这种方法</p>
<p>消息调用<code>SendMessage</code>，以‘消息’的形式来调用另一个组件</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//找到目标节点</span></span><br><span class="line"><span class="keyword">public</span> GameObject target;</span><br><span class="line"><span class="comment">//向目标节点发送‘消息’</span></span><br><span class="line">target.SendMessage(methodName, <span class="keyword">value</span>)</span><br></pre></td></tr></table></figure>

<p><code>SendMessage</code>的内部执行（<strong>反射机制</strong>）：</p>
<ol>
<li>找到 target 节点下的所有组件</li>
<li>在组件下寻找 methodName 这个函数<ul>
<li>若存在此函数，则调用它</li>
<li>若不存在，则继续查找</li>
<li>若最终无法匹配，则报错</li>
</ul>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Component.SendMessage.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Component.SendMessage.html</a></p>
<h2 id="16-6-练习-简单飞控"><a href="#16-6-练习-简单飞控" class="headerlink" title="16.6 练习 简单飞控"></a>16.6 练习 简单飞控</h2><p>练习，添加无人机，控制起降。</p>
<p>MainLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> RotateLogic rotateLogic;</span><br><span class="line">    <span class="keyword">public</span> FlyLogic flyLogic;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Application.targetFrameRate = <span class="number">60</span>;</span><br><span class="line">        rotateLogic.DoRotate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// w 键，起飞， s 键 ，降落</span></span><br><span class="line">        <span class="keyword">if</span>(Input.GetKeyDown(KeyCode.W))</span><br><span class="line">        &#123;</span><br><span class="line">            flyLogic.Fly();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.S))</span><br><span class="line">        &#123;</span><br><span class="line">            flyLogic.Land();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RotateLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RotateLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> m_rotateSpeed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.Rotate(<span class="number">0</span>, m_rotateSpeed * Time.deltaTime, <span class="number">0</span>, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoRotate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_rotateSpeed = <span class="number">360</span>*<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoStop</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_rotateSpeed = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FlyLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FlyLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> m_speed = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> height = transform.position.y;</span><br><span class="line">        <span class="built_in">float</span> dy = m_speed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( dy &gt; <span class="number">0</span> &amp;&amp; height &lt; <span class="number">4</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            transform.Translate(<span class="number">0</span>, dy, <span class="number">0</span>, Space.Self);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dy &lt; <span class="number">0</span> &amp;&amp; height &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.Translate(<span class="number">0</span>, dy, <span class="number">0</span>, Space.Self);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_speed = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Land</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_speed = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-17-章-物体的访问"><a href="#第-17-章-物体的访问" class="headerlink" title="第 17 章 物体的访问"></a>第 17 章 物体的访问</h1><h2 id="17-1-获取物体"><a href="#17-1-获取物体" class="headerlink" title="17.1 获取物体"></a>17.1 获取物体</h2><p>游戏物体<code>GameObject</code>，也可以叫节点</p>
<ol>
<li><p>按 名称&#x2F;路径 获取（不推荐），通过<code>Find()</code>查找，名字变了就找不到了</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//若不重名，可以按名称获取</span></span><br><span class="line">GameObject node = GameObject.Find(<span class="string">&quot;旋翼&quot;</span>);</span><br><span class="line"><span class="comment">//最好指定全路径</span></span><br><span class="line">GameObject node = GameObject.Find(<span class="string">&quot;无人机/旋翼&quot;</span>);</span><br><span class="line"></span><br><span class="line">RotateLogic rotateLogic = node.GetComponent&lt;RotateLogic&gt;();</span><br><span class="line">rotateLogic.DoRotate();</span><br></pre></td></tr></table></figure>
</li>
<li><p>引用获取，添加一个变量，在检查器中引用</p>
</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> GameObject wingNode;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    RotateLogic rotateLogic = wingNode.GetComponent&lt;RotateLogic&gt;();</span><br><span class="line">    rotateLogic.DoRotate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="17-2-父子物体"><a href="#17-2-父子物体" class="headerlink" title="17.2 父子物体"></a>17.2 父子物体</h2><p>场景中的层级关系&#x2F;父子关系，是由 Transform 维持的。</p>
<p>查看文档，找到 Transform 类的说明</p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Transform.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Transform.html</a></p>
<ol>
<li>获取父级</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父级的Transform组件</span></span><br><span class="line">Transform parent = transform.parent;</span><br><span class="line"><span class="comment">//父级的GameObject节点</span></span><br><span class="line">GameObject parentNode = transform.parent.gameObject;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>获取子级</li>
</ol>
<ul>
<li><code>foreach</code>遍历</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (Transform child <span class="keyword">in</span> transform)</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;* 子物体: &quot;</span> + child.name); <span class="comment">//child</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>GetChild()</code>，按索引获取</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Transform child = transform.GetChild(<span class="number">0</span>); <span class="comment">//第0个</span></span><br><span class="line">Debug.Log(<span class="string">&quot;* 子物体: &quot;</span> + child.name); <span class="comment">//child</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>transform.Find()</code>，按名称查找子项，</p>
<p>其中，二级子级应该制定路径，如 bb&#x2F;cc</p>
</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Transform child = transform.Find(<span class="string">&quot;bb/cc&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(child != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;* 找到子物体: &quot;</span> + child.name); <span class="comment">//child</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;Not Found&quot;</span>); <span class="comment">//child</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="17-3-物体的操作"><a href="#17-3-物体的操作" class="headerlink" title="17.3 物体的操作"></a>17.3 物体的操作</h2><ol>
<li>设置新的父级</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.SetParent(other);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>设为一级节点</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.SetParent(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>其中，parent 为 null 表示一级节点（没有父级）</p>
<ol start="3">
<li><code>gameObject.SetActive(false)</code> 显示&#x2F;隐藏</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Transform child = transform.Find(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(child.gameObject.activeSelf)</span><br><span class="line">&#123;</span><br><span class="line">    child.gameObject.SetActive(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    child.gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>要点与细节</strong></p>
<p><code>transform.Find(&quot;/222&quot;)</code>，其中<code>/</code>表示在根下查找物体</p>
<h2 id="17-4-练习-俄罗斯方块"><a href="#17-4-练习-俄罗斯方块" class="headerlink" title="17.4 练习 俄罗斯方块"></a>17.4 练习 俄罗斯方块</h2><p>练习，3D 版的俄罗斯方块，按空格键切换形状。</p>
<p>PlayerLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlayerLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> m_index = <span class="number">0</span>; <span class="comment">// 表示显示的是哪一个形状</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetKeyDown(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            ChangeShape();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向前运动</span></span><br><span class="line">        <span class="built_in">float</span> speed = <span class="number">1</span>;</span><br><span class="line">        transform.Translate(<span class="number">0</span>, <span class="number">0</span>, speed * Time.deltaTime, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ChangeShape</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 先把原来的形状，隐藏</span></span><br><span class="line">        Transform child = transform.GetChild(m_index);</span><br><span class="line">        child.gameObject.SetActive(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        m_index += <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> count = transform.childCount;</span><br><span class="line">        <span class="keyword">if</span> (m_index &gt;= count)</span><br><span class="line">            m_index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 显示新的形状</span></span><br><span class="line">        child = transform.GetChild(m_index);</span><br><span class="line">        child.gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-18-章-资源的访问"><a href="#第-18-章-资源的访问" class="headerlink" title="第 18 章 资源的访问"></a>第 18 章 资源的访问</h1><h2 id="18-1-资源的使用"><a href="#18-1-资源的使用" class="headerlink" title="18.1 资源的使用"></a>18.1 资源的使用</h2><p>在脚本中，也可以引用一个资源。</p>
<p><code>AudioClip</code>，音频文件</p>
<p><code>Texture</code>，纹理贴图</p>
<p><code>Material</code>，材质 ……</p>
<p>演示：</p>
<ol>
<li><p>准备音效文件，预览</p>
</li>
<li><p>添加脚本<code>MusicTest.cs</code></p>
<ul>
<li>添加变量<code>public AudioClip audioSuccess;</code></li>
</ul>
</li>
<li><p>引用音频资源</p>
</li>
<li><p>使用 API 播放音频</p>
<ul>
<li><code>AudioSource.PlayOneShot(clip)</code>，用于播放音效</li>
</ul>
</li>
</ol>
<h2 id="18-2-资源数组"><a href="#18-2-资源数组" class="headerlink" title="18.2 资源数组"></a>18.2 资源数组</h2><p>在脚本中，也可以定义一个数组变量。</p>
<p>比如，一个音乐盒，存了多首歌曲。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> AudioClip[] songs;</span><br></pre></td></tr></table></figure>

<p>练习，创建一个音乐盒，点鼠标随机切换</p>
<p>其中，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> index = Random.Range(min, max);</span><br></pre></td></tr></table></figure>

<p>用于在<code>[min,max)</code>中随机抽取一个数，不含<code>max</code></p>
<h2 id="18-3-练习-三色球"><a href="#18-3-练习-三色球" class="headerlink" title="18.3 练习 三色球"></a>18.3 练习 三色球</h2><p>练习，制作一个变换颜色的小球。</p>
<p>就是用脚本修改 Material 材质</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SimpleLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Material[] colors;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> m_index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            ChangeColor();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ChangeColor</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_index += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (m_index &gt;= colors.Length)</span><br><span class="line">            m_index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        Material selected = colors[m_index];</span><br><span class="line"></span><br><span class="line">        MeshRenderer rd = GetComponent&lt;MeshRenderer&gt;();</span><br><span class="line">        rd.material = selected;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-19-章-定时调用"><a href="#第-19-章-定时调用" class="headerlink" title="第 19 章 定时调用"></a>第 19 章 定时调用</h1><h2 id="19-1-定时调用"><a href="#19-1-定时调用" class="headerlink" title="19.1 定时调用"></a>19.1 定时调用</h2><p><strong>定时调用</strong>Invoke*，即一般所谓的‘定时器’<br>继承自<code>MonoBehaviour</code>:</p>
<ul>
<li><p><code>Invoke(func, delay)</code>，只调用一次</p>
</li>
<li><p><code>InvokeRepeating(func, delay, interval)</code>，循环调用</p>
</li>
<li><p><code>IsInvoking(func)</code>，是否正在调度中</p>
</li>
<li><p><code>CancelInvoke(func)</code>，取消调用、从调度队列中移除</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/MonoBehaviour.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/MonoBehaviour.html</a></p>
<p>其中，<br><code>func</code>，函数名是一个字符串（反射机制）</p>
<h2 id="19-2-定时与线程"><a href="#19-2-定时与线程" class="headerlink" title="19.2 定时与线程"></a>19.2 定时与线程</h2><p><code>InvokeRepeating</code> 定时调用，并没有创建新的线程<br>Unity 引擎的核心是<strong>单线程</strong>的。</p>
<p>验证：</p>
<p><code>Start()</code>、<code>Update()</code>、以及定时调用，是在同一个线程。<br>获取当前线程号，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Threading;</span><br><span class="line"><span class="built_in">int</span> threadld = Thread.CurrentThread.ManagedThreadld</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/Manual/ExecutionOrder.html">https://docs.unity3d.com/cn/2023.2/Manual/ExecutionOrder.html</a></p>
<p>参考官方文档的说明。</p>
<ul>
<li>消息函数 <code>Awake</code>&#x2F;<code>Start</code>&#x2F;<code>Update</code>&#x2F;<code>OnEnable</code>.</li>
<li>定时调用 <code>Invoke</code></li>
<li>协程调用 <code>Coroutine</code></li>
</ul>
<h2 id="19-3-几点细节"><a href="#19-3-几点细节" class="headerlink" title="19.3 几点细节"></a>19.3 几点细节</h2><ol>
<li><p>重复的调用<br>每次<code>InvokeRepeating</code>，都会添加一个新的调度<br>演示：连续调用两次<code>InvokeRepeating</code>。</p>
</li>
<li><p>取消调用<br><code>IsInvoking(func)</code>，判断 func 是否在 Invoke 队列<br><code>CancelInvoke(func)</code>，取消 func 的 Invoke 调用<br><code>CancelInvoke()</code>，取消当前脚本的所有 Invoke 调用</p>
</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!IsInvoking(func))</span><br><span class="line">&#123;</span><br><span class="line">	InvokeRepeating(func, delay, interval);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="19-4-练习-红绿灯"><a href="#19-4-练习-红绿灯" class="headerlink" title="19.4 练习 红绿灯"></a>19.4 练习 红绿灯</h2><p>练习，做一个可以自动切换的红绿灯。<br>红灯，4 秒<br>绿灯，4 秒<br>黄灯，1 秒</p>
<p>LightLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LightLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;红、绿、黄按顺序指定&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Material[] colors;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> m_index = <span class="number">0</span>; <span class="comment">// 红灯开始</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        ChangeColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ChangeColor</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 当前材质</span></span><br><span class="line">        Material color = colors[m_index];</span><br><span class="line">        MeshRenderer renderer = GetComponent&lt;MeshRenderer&gt;();</span><br><span class="line">        renderer.material = color;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* Change -&gt; &quot;</span> + m_index + <span class="string">&quot;, time=&quot;</span> + Time.time);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_index == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 红 -&gt; 绿，间隔3秒钟</span></span><br><span class="line">            Invoke(<span class="string">&quot;ChangeColor&quot;</span>, <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (m_index == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 绿 -&gt; 黄，间隔1秒钟</span></span><br><span class="line">            Invoke(<span class="string">&quot;ChangeColor&quot;</span>, <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (m_index == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 黄 -&gt; 红，间隔1秒钟</span></span><br><span class="line">            Invoke(<span class="string">&quot;ChangeColor&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 切换</span></span><br><span class="line">        m_index++;</span><br><span class="line">        <span class="keyword">if</span> (m_index &gt;= <span class="number">3</span>) m_index = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="19-5-练习-加速减速"><a href="#19-5-练习-加速减速" class="headerlink" title="19.5 练习 加速减速"></a>19.5 练习 加速减速</h2><p>按鼠标实现风扇加速减速</p>
<p>FanLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FanLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 最大转速</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> maxRotateSpeed = <span class="number">720</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> m_speed = <span class="number">0</span>; <span class="comment">// 当前转速</span></span><br><span class="line">    <span class="built_in">bool</span> m_speedUp = <span class="literal">false</span>; <span class="comment">// true 加速 , false 减速</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        InvokeRepeating(<span class="string">&quot;AdjustSpeed&quot;</span>, <span class="number">0.1f</span>, <span class="number">0.1f</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 点一下，加速。再点一下，减速。</span></span><br><span class="line">        <span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            m_speedUp = !m_speedUp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 旋转</span></span><br><span class="line">        <span class="keyword">if</span>(m_speed &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.Rotate(<span class="number">0</span>, m_speed * Time.deltaTime, <span class="number">0</span>, Space.Self);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 速度调整</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">AdjustSpeed</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_speedUp)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (m_speed &lt; maxRotateSpeed)</span><br><span class="line">                m_speed += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            m_speed -= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (m_speed &lt; <span class="number">0</span>)</span><br><span class="line">                m_speed = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-20-章-向量"><a href="#第-20-章-向量" class="headerlink" title="第 20 章 向量"></a>第 20 章 向量</h1><h2 id="20-1-向量"><a href="#20-1-向量" class="headerlink" title="20.1 向量"></a>20.1 向量</h2><ol>
<li>Vector3 三位向量</li>
</ol>
<p>API: 向量的长度</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vector3 v = <span class="keyword">new</span> Vector3(<span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">float</span> len = v.magnitude;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>单位向量，即长度为 1 的向量。</li>
</ol>
<p>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vector3 v1 = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 v2 = <span class="keyword">new</span> Vector3(<span class="number">0.6f</span>, <span class="number">0.8f</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>标准化 Normalize</li>
</ol>
<p>缩放一个向量，使其长度为 1， 例如，</p>
<p><code>(3, 4, 0) → (0.6, 0.8, 0)</code><br><code>(2, 2, 0) → (0.707, 0.707, 0)</code><br><code>(1, 0, 0) → (1, 0, 0)</code></p>
<p>API: 向量标准化</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vector3 v1 = <span class="keyword">new</span> Vector3(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 v2 = v1.normalized;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>几个常量</li>
</ol>
<p><code>Vector3.zero</code> 即(0, 0, 0)<br><code>Vector3.up</code> 即(0, 1, 0)<br><code>Vector3.right</code> 即(1, 0, 0)<br><code>Vector3.forward</code> 即(0, 0, 1)</p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Vector3.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Vector3.html</a></p>
<h2 id="20-2-向量运算"><a href="#20-2-向量运算" class="headerlink" title="20.2 向量运算"></a>20.2 向量运算</h2><ol>
<li>加法</li>
</ol>
<p>向量加法，即 x y z 三个分量分别相加<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 a = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 b = <span class="keyword">new</span> Vector3(<span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">Vector3 c = a + b;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231113183101275.png" alt="image-20231113183101275"></p>
<ol start="2">
<li>减法</li>
</ol>
<p>向量加法，即 x y z 三个分量分别相减<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vector3 m = <span class="keyword">new</span> Vector3 (<span class="number">5</span>, <span class="number">4</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 n = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 p = m - n;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231113183251327.png" alt="image-20231113183251327"></p>
<ol start="3">
<li>乘法</li>
</ol>
<p>向量乘法，分为 3 种：</p>
<ul>
<li><p>标量乘法 <code>b = a * 2</code></p>
</li>
<li><p>点积 <code>c = Vector3.Dot(a, b)</code></p>
</li>
<li><p>差积 <code>c = Vector3.Cross(a, b)</code></p>
</li>
</ul>
<p>其中，只要求掌握标量乘法，即对每一个分量相乘</p>
<ol start="4">
<li>赋值</li>
</ol>
<p>Vectors3 是值类型，可以直接赋值<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vector3 a = <span class="keyword">new</span> Vector(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 b = a;</span><br></pre></td></tr></table></figure>

<p>不能设为 null，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vector3 speed = <span class="literal">null</span>; ??</span><br></pre></td></tr></table></figure>

<h2 id="20-3-向量测距"><a href="#20-3-向量测距" class="headerlink" title="20.3 向量测距"></a>20.3 向量测距</h2><p>向量测距，用于求两物体间的距离<br>例如，</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vector3 p1 = transform.position; /自己位置</span><br><span class="line">Vector3 p2 = target.transform.position; /目标位置</span><br><span class="line">Vector3 direction = p2 - p1; /方向向量</span><br><span class="line"><span class="built_in">float</span> distance = direction.magnitude; /距离</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vector3.Distance(a, b) <span class="comment">//也可以求距离</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Vector3.Distance.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Vector3.Distance.html</a></p>
<p>物体间的距离，确切的说是<strong>轴心点</strong>之间的距离<br>应检查确认物体的轴心点。</p>
<h2 id="20-4-向量的使用"><a href="#20-4-向量的使用" class="headerlink" title="20.4 向量的使用"></a>20.4 向量的使用</h2><p>Vector3 可以直接作为脚本的参数</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Vector3 speed;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">	transform.Translate(speed * Time.deltaTime, Space.Self);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-21-章-预制体"><a href="#第-21-章-预制体" class="headerlink" title="第 21 章 预制体"></a>第 21 章 预制体</h1><h2 id="21-1-预制体"><a href="#21-1-预制体" class="headerlink" title="21.1 预制体"></a>21.1 预制体</h2><p>预制体 <code>Prefab</code>，即预先制作好的物体<br>使用预制体，可以提高开发效率。</p>
<p>演示：导出 <code>RacingCar</code> 资源包。。</p>
<ul>
<li>在 Prefabs 目录下，是预制体资源，<code>*.prefab</code></li>
<li>用预制体来构造物体</li>
</ul>
<p>使用预制体 Prefab，可以快速创建物体<br>在 Prefab 资源中，包含了的所有数据。</p>
<h2 id="21-2-预制体的创建"><a href="#21-2-预制体的创建" class="headerlink" title="21.2 预制体的创建"></a>21.2 预制体的创建</h2><p><strong>预制体的创建：</strong></p>
<ol>
<li>先制作好一个样本节点</li>
<li>做好以后，直接拖到 Assets 窗口，则自动生成一个 <code>*.prefab</code> 资源</li>
<li>原始物体不再需要，可以删除。</li>
</ol>
<p><strong>要点与细节</strong></p>
<p>在导出 prefab 资源时，应该将依赖文件一并导出。<br>prefab 只是记录了节点的信息。<br>prefab 文件中<strong>不包含材质、贴图数据</strong>，仅包含引用</p>
<h2 id="21-3-预制体的实例"><a href="#21-3-预制体的实例" class="headerlink" title="21.3 预制体的实例"></a>21.3 预制体的实例</h2><p><strong>Prefab Instance</strong>， 由预制体创建得到的对象</p>
<p>特征：</p>
<ul>
<li>在 Hierarchy 中，节点图标不同</li>
<li>在 Hierarchy 中，右键菜单 | Prefab</li>
<li>在 Inspector 中，上下文工具 | Prefab</li>
</ul>
<p>Prefab Instance 和原 Prefab 之间存在关联。<br>右键菜单 Prefab | <strong>Unpack</strong>，则解除关联，成为普通物体</p>
<h2 id="21-4-预制体的编辑"><a href="#21-4-预制体的编辑" class="headerlink" title="21.4 预制体的编辑"></a>21.4 预制体的编辑</h2><p><strong>*.prefab</strong>相当于是一个模板，可以再次编辑</p>
<p><strong>第 1 种方式：单独编辑</strong></p>
<ul>
<li>双击 Prefab，进入 <strong>单独编辑</strong> 模式</li>
<li>编辑节点和组件</li>
<li>退出，完成编辑</li>
</ul>
<p><strong>第 2 种方式：原位编辑</strong></p>
<ul>
<li>选择 Prefab Instance</li>
<li>在检查器中 Open</li>
<li>Context:显示：Normal &#x2F; Gray &#x2F; Hidden</li>
<li>此时，仅选中的物体被编辑，其余物体是陪衬</li>
<li>编辑节点</li>
<li>退出，完成编辑</li>
</ul>
<p><strong>第 3 种方式：覆盖编辑</strong></p>
<ul>
<li>选择 Prefab Instance</li>
<li>直接在场景中编辑</li>
<li>编辑完后</li>
<li>Overrides | Apply， 应用编辑</li>
<li>Overrides | Revert， 取消编辑</li>
</ul>
<p><strong>要点与细节</strong></p>
<ol>
<li>点 Unpack 之后，可断开与原始 Prefab 间的联系</li>
</ol>
<h2 id="21-5-多级节点"><a href="#21-5-多级节点" class="headerlink" title="21.5 多级节点"></a>21.5 多级节点</h2><p>Prefab 中，多级节点 &#x2F; 父子关系，也是常见的情况</p>
<h1 id="第-22-章-动态创建实例"><a href="#第-22-章-动态创建实例" class="headerlink" title="第 22 章 动态创建实例"></a>第 22 章 动态创建实例</h1><h2 id="22-1-动态创建实例"><a href="#22-1-动态创建实例" class="headerlink" title="22.1 动态创建实例"></a>22.1 动态创建实例</h2><p>创建 Prefab 之后，用 API 动态创建实例<br>API:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.Instantiate(original, parent)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Object.Instantiate.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Object.Instantiate.html</a></p>
<p><strong>演示：</strong></p>
<ol>
<li><p>准备子弹 prefab，参考<code>制作演示</code></p>
</li>
<li><p>添加火控脚本 FireLogic</p>
<ul>
<li><p>添加变量 <code>public GameObject bulletPrefab;</code></p>
</li>
<li><p>克隆实例</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GameObject node = Instantiate(bulletPrefab, <span class="literal">null</span>);</span><br><span class="line">node.transform.position = Vector3.zero;</span><br><span class="line">node.transform.localEulerAngles = Vector3.zero;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>在检查器中，引用子弹的 prefab</p>
</li>
<li><p>运行游戏</p>
</li>
</ol>
<p>在 3D 视图中，观察创建出来的实例。</p>
<h2 id="22-2-实例的初始化"><a href="#22-2-实例的初始化" class="headerlink" title="22.2 实例的初始化"></a>22.2 实例的初始化</h2><p>创建 Prefab Instance 之后，应做初始化：</p>
<ul>
<li><code>parent</code>， 父节点：子弹树 Bullut Folder</li>
<li><code>position / localPosition</code>， 位置：fire point</li>
<li><code>eulerAngles / localEulerAngles</code>， 旋转：与炮管一致</li>
<li><code>Script</code>， 自带的控制脚本</li>
</ul>
<p><strong>要点与细节</strong></p>
<p>(1)一般引用 Transform，而 GameObject 是没有存在感的<br>(2)可以使用空物体，标记一个空间坐标</p>
<h2 id="22-3-实例的销毁"><a href="#22-3-实例的销毁" class="headerlink" title="22.3 实例的销毁"></a>22.3 实例的销毁</h2><p>一般的，创建实例之后，也要负责销毁。</p>
<p>对于子弹来说，</p>
<ul>
<li>当飞出屏幕时，销毁</li>
<li>按 射程 &#x2F; 飞行时间</li>
<li>当击中目标时，销毁</li>
</ul>
<p><code>Object.Destroy(obj)</code>， 用于销毁一个实例</p>
<p>在本轮帧更新<code>Update()</code>之后，执行销毁</p>
<p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.2/ScriptReference/Object.Destroy.html">https://docs.unity3d.com/cn/2023.2/ScriptReference/Object.Destroy.html</a></p>
<p><strong>要点与细节</strong></p>
<ol>
<li>区分以下两种写法：<br><code>Destroy(this.gameObject)</code><br><code>Destroy(this)</code> 错误</li>
<li><code>Destroy()</code>不会立即执行，而是在本轮 Update 之后才执行</li>
</ol>
<h2 id="22-4-练习-火控参数"><a href="#22-4-练习-火控参数" class="headerlink" title="22.4 练习 火控参数"></a>22.4 练习 火控参数</h2><p>练习 火控参数的完善</p>
<p>MainLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Application.targetFrameRate = <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FireLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FireLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 对子弹 prefab 资源的引用</span></span><br><span class="line">    <span class="keyword">public</span> GameObject bulletPrefab;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹节点的管理&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform bulletFolder;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹出生点&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform firePoint;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;炮塔&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform cannon;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹飞行速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> bulletSpeed;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹飞行时长&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> bulletLifetime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            TestFire();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">TestFire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* 创建子弹的实例 ..&quot;</span>);</span><br><span class="line">        GameObject node = Object.Instantiate(bulletPrefab, bulletFolder); <span class="comment">// 指定父节点</span></span><br><span class="line">        node.transform.position = <span class="keyword">this</span>.firePoint.position;  <span class="comment">// 指定出生点</span></span><br><span class="line">        node.transform.eulerAngles = <span class="keyword">this</span>.cannon.eulerAngles; <span class="comment">// 与炮塔角度一致</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// node.transform.rotation = this.cannon.rotation; // 这样写也可以，指定初始角度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 指定初始飞行速度</span></span><br><span class="line">        BulletLogic script = node.GetComponent&lt;BulletLogic&gt;();</span><br><span class="line">        script.speed = <span class="keyword">this</span>.bulletSpeed; <span class="comment">// 0.5f;</span></span><br><span class="line">        script.maxDistance = script.speed * <span class="keyword">this</span>.bulletLifetime; <span class="comment">// 最大最行距离</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BulletLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BulletLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> speed;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> maxDistance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> lifetime = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(speed &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            lifetime = maxDistance / speed;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在 lifetime之后，调用 SelfDestroy 自毁</span></span><br><span class="line">        Invoke(<span class="string">&quot;SelfDestroy&quot;</span>, lifetime);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.transform.Translate(<span class="number">0</span>, <span class="number">0</span>, speed, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SelfDestroy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* 自毁 !&quot;</span>);</span><br><span class="line">        <span class="comment">// 销毁实例</span></span><br><span class="line">        Object.Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="22-5-练习-按键控制"><a href="#22-5-练习-按键控制" class="headerlink" title="22.5 练习 按键控制"></a>22.5 练习 按键控制</h2><p>练习，添加按键控制，旋转炮塔的方向。</p>
<p>FireLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FireLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 对子弹 prefab 资源的引用</span></span><br><span class="line">    <span class="keyword">public</span> GameObject bulletPrefab;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹节点的管理&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform bulletFolder;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹出生点&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform firePoint;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;炮塔&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform cannon;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹飞行速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> bulletSpeed;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹飞行时长&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> bulletLifetime;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹发射间隔&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> bulletInterval;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;炮塔转速&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> rotateSpeed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当前转角</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 m_eulerAngles;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        StartFire();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//if(Input.GetMouseButtonDown(0))</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">//    TestFire();</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">float</span> delta = rotateSpeed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.A))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 左转</span></span><br><span class="line">            <span class="keyword">if</span> (m_eulerAngles.y &gt; <span class="number">-75</span>)</span><br><span class="line">                m_eulerAngles.y -= delta;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.D))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 右转</span></span><br><span class="line">            <span class="keyword">if</span> (m_eulerAngles.y &lt; <span class="number">75</span>)</span><br><span class="line">                m_eulerAngles.y += delta;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.W))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 上转</span></span><br><span class="line">            <span class="keyword">if</span> (m_eulerAngles.x &gt; <span class="number">-60</span>)</span><br><span class="line">                m_eulerAngles.x -= delta;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.S))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 下转</span></span><br><span class="line">            <span class="keyword">if</span> (m_eulerAngles.x &lt; <span class="number">10</span>)</span><br><span class="line">                m_eulerAngles.x += delta;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 多维度旋转时，不宜使用 Rotate</span></span><br><span class="line">        cannon.transform.localEulerAngles = m_eulerAngles;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">TestFire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;* 创建子弹的实例 ..&quot;);</span></span><br><span class="line">        GameObject node = Instantiate(bulletPrefab, bulletFolder); <span class="comment">// 指定父节点</span></span><br><span class="line">        node.transform.position = firePoint.position;  <span class="comment">// 指定出生点</span></span><br><span class="line">        node.transform.eulerAngles = cannon.eulerAngles; <span class="comment">// 与炮塔角度一致</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// node.transform.rotation = this.cannon.rotation; // 这样写也可以，指定初始角度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 指定初始飞行速度</span></span><br><span class="line">        BulletLogic script = node.GetComponent&lt;BulletLogic&gt;();</span><br><span class="line">        script.speed = bulletSpeed; <span class="comment">// 0.5f;</span></span><br><span class="line">        script.maxDistance = script.speed * bulletLifetime; <span class="comment">// 最大最行距离</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开火</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StartFire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (! IsInvoking(<span class="string">&quot;TestFire&quot;</span>) )</span><br><span class="line">        &#123;</span><br><span class="line">            InvokeRepeating(<span class="string">&quot;TestFire&quot;</span>, bulletInterval, bulletInterval);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StopFire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        CancelInvoke(<span class="string">&quot;TestFire&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-23-章-物理系统"><a href="#第-23-章-物理系统" class="headerlink" title="第 23 章 物理系统"></a>第 23 章 物理系统</h1><h2 id="23-1-物理系统"><a href="#23-1-物理系统" class="headerlink" title="23.1 物理系统"></a>23.1 物理系统</h2><p>物理系统 <strong>Physics</strong>，即由物理规律起作用的系统<br>确切地说，是 <strong>牛顿运动定律</strong> (力，质量，速度)</p>
<p>刚体组件 <code>Rigidbody</code>，物理学中的物体</p>
<ol>
<li>给‘苹果’添加 Rigidbody 组件<br><code>Physics</code> | <code>Rigidbody</code></li>
<li>运行游戏<br>此时，牛顿接管了这个物体，在重力作用下使其运动</li>
</ol>
<h2 id="23-2-物理碰撞"><a href="#23-2-物理碰撞" class="headerlink" title="23.2 物理碰撞"></a>23.2 物理碰撞</h2><p>物理系统，不仅接管了刚体的运动，也接管了<code>碰撞</code>。<br>演示：添加一个 小球 物体，添加 Rigidbody。</p>
<p>碰撞体 <code>Collider</code>，描述了物体的碰撞范围。<br>其中，<br><code>Box Collider</code>，长方碰撞体<br><code>Sphere Collider</code>，球形碰撞体</p>
<p>碰撞体的范围：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231121073117251.png" alt="image-20231121073117251"></p>
<h2 id="23-3-反弹与摩擦"><a href="#23-3-反弹与摩擦" class="headerlink" title="23.3 反弹与摩擦"></a>23.3 反弹与摩擦</h2><p>刚体的反弹与摩擦，也归物理系统负责。<br>演示：</p>
<ul>
<li>新建 <code>Physici Material</code>，添加给小球的 <code>Collider</code></li>
<li>设置 <code>Friction</code>、<code>Bounciness</code></li>
<li>观察小球的反弹。</li>
</ul>
<h1 id="第-24-章-碰撞检测"><a href="#第-24-章-碰撞检测" class="headerlink" title="第 24 章 碰撞检测"></a>第 24 章 碰撞检测</h1><h2 id="24-1-运动学刚体"><a href="#24-1-运动学刚体" class="headerlink" title="24.1 运动学刚体"></a>24.1 运动学刚体</h2><p>运动学刚体 <code>Kinematic</code> ，即质量为 0 的刚体</p>
<p>由于质量为 0，所以此刚体不受牛顿约束。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231121073746148.png" alt="image-20231121073746148"></p>
<p>此时，需要用脚本使其运动。<br>演示：添加 SimpleLogic 脚本，让小球运动。</p>
<h2 id="24-2-碰撞检测"><a href="#24-2-碰撞检测" class="headerlink" title="24.2 碰撞检测"></a>24.2 碰撞检测</h2><p>对于运动学刚体，也支持碰撞检测。</p>
<p>由 物理引擎 负责检测。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./../../.https:/cdn.jsdelivr.net/gh/ramsayi/assets/article/Unity3D/image-20231121074236048.png" alt="image-20231121074236048"></p>
<p>演示：</p>
<ol>
<li>Rigidbody ☑ Is Kinematic</li>
<li>Collider ☑ Is Trigger 触发器</li>
<li>挂一个脚本，添加消息函数</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<p><code>Collider other</code> ，表示对方的碰撞体</p>
<p><code>other.gameObject</code> ，对方节点</p>
<p><code>other.name</code> ，对方节点的名字</p>
<p><strong>要点与细节</strong></p>
<ol>
<li>物理引擎只负责探测 ( Trigger ) ，不会阻止物体或者反弹</li>
<li>物体引擎计算的是 Collider 之间的碰撞，和物体自身形状无关</li>
<li>当检测到碰撞时，会调用当前节点 的脚本中的 OnTriggerEnter 消息</li>
</ol>
<h2 id="24-3-碰撞体的编辑"><a href="#24-3-碰撞体的编辑" class="headerlink" title="24.3 碰撞体的编辑"></a>24.3 碰撞体的编辑</h2><p>碰撞体 Collider 的形状，规定了碰撞的边界。</p>
<p>其形状是可以编辑的，</p>
<ul>
<li><p><code>Box Collider</code> ，盒形</p>
</li>
<li><p><code>Sphere Collider</code> ，球形</p>
</li>
</ul>
<p><code>Box Collider</code> ，盒形</p>
<ul>
<li><p><code>Center</code> 中心位置，相当于物体的轴心点</p>
</li>
<li><p><code>Size</code> 长宽高</p>
</li>
</ul>
<p>点 Edit Collider ，可以直接编辑 绿色框。</p>
<p><code>Sphere Collider</code> ，球形</p>
<ul>
<li><p><code>Center</code> 中心位置，相当于物体的轴心点</p>
</li>
<li><p><code>Radius</code> 半径大小</p>
</li>
</ul>
<p>点 Edit Collider ，可以直接编辑 绿色框。</p>
<p>练习：添加子弹物体 。。。</p>
<ol>
<li><p>检查原先有没有碰撞体，如果有，则先移除</p>
</li>
<li><p>根据体型，选择合适形状的碰撞体</p>
<p>此处，添加一个 Box Collider</p>
</li>
<li><p>编辑碰撞体，调整边界</p>
<p><code>一般无需调整</code>，自动创建合适的尺寸。</p>
</li>
</ol>
<h2 id="24-4-练习-击毁目标"><a href="#24-4-练习-击毁目标" class="headerlink" title="24.4 练习 击毁目标"></a>24.4 练习 击毁目标</h2><p>练习，发射一发子弹，击毁目标。</p>
<ol>
<li><p>运动学刚体 Rigidbody &#x2F; Is Kinematic</p>
</li>
<li><p>触发器模式 Collider &#x2F; Is Trigger</p>
</li>
<li><p>消息函数 void OnTriggerEnter()</p>
</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BulletLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Vector3 speed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.Translate(speed * Time.deltaTime, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( other.name.Equals(<span class="string">&quot;目标&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;* 子弹发生碰撞，other=&quot;</span> + other.name);</span><br><span class="line">            Destroy(other.gameObject);</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>要点与细节</strong></p>
<p>碰撞的双方，只需一方设置为运动学刚体即可</p>
<h1 id="第-25-章-游戏项目实例"><a href="#第-25-章-游戏项目实例" class="headerlink" title="第 25 章 游戏项目实例"></a>第 25 章 游戏项目实例</h1><h2 id="25-1-射击游戏"><a href="#25-1-射击游戏" class="headerlink" title="25.1 射击游戏"></a>25.1 射击游戏</h2><p>制作一个射击游戏。</p>
<ul>
<li><p>海空背景</p>
</li>
<li><p>玩家</p>
</li>
<li><p>子弹，无限数量</p>
</li>
<li><p>怪兽，蛇皮走位，无限数量</p>
</li>
<li><p>子弹特效，爆炸特效</p>
</li>
<li><p>背景音乐</p>
</li>
</ul>
<h2 id="25-2-添加角色"><a href="#25-2-添加角色" class="headerlink" title="25.2 添加角色"></a>25.2 添加角色</h2><p>添加两个角色。玩家，敌人。</p>
<h2 id="25-3-天空盒"><a href="#25-3-天空盒" class="headerlink" title="25.3 天空盒"></a>25.3 天空盒</h2><p>天空盒 <code>Skybox</code> ，即游戏的背景。</p>
<p>Window | Rendering | Lighting ，光照设置</p>
<p>Environment | Skybox Material ，天空盒材质</p>
<h2 id="25-4-子弹和碰撞"><a href="#25-4-子弹和碰撞" class="headerlink" title="25.4 子弹和碰撞"></a>25.4 子弹和碰撞</h2><p>添加子弹。</p>
<p>添加子弹脚本。</p>
<p>添加碰撞检测。</p>
<p>注意，<strong>怪兽是一个空物体</strong>，其碰撞体要手工编辑</p>
<h2 id="25-5-连续发射"><a href="#25-5-连续发射" class="headerlink" title="25.5 连续发射"></a>25.5 连续发射</h2><ol>
<li>子弹</li>
</ol>
<ul>
<li><p>增加自毁时间 <code>lifetime</code></p>
</li>
<li><p>把子弹做成 <code>prefab</code></p>
</li>
</ul>
<ol start="2">
<li>玩家</li>
</ol>
<ul>
<li><p>定义发射点 <code>fire point</code></p>
</li>
<li><p>定义子弹目录 <code>bullet folder</code></p>
</li>
<li><p>使用定时器，子弹连发</p>
</li>
</ul>
<h2 id="25-6-按键控制"><a href="#25-6-按键控制" class="headerlink" title="25.6 按键控制"></a>25.6 按键控制</h2><p>添加按键控制，让玩家左右移动。</p>
<h2 id="25-7-怪兽的走位"><a href="#25-7-怪兽的走位" class="headerlink" title="25.7 怪兽的走位"></a>25.7 怪兽的走位</h2><p>给怪兽添加控制脚本 <code>EnemyLogic</code></p>
<h2 id="25-8-怪兽生成器"><a href="#25-8-怪兽生成器" class="headerlink" title="25.8 怪兽生成器"></a>25.8 怪兽生成器</h2><p>添加怪兽生成器，定时生成怪兽。</p>
<h2 id="25-9-子弹特效"><a href="#25-9-子弹特效" class="headerlink" title="25.9 子弹特效"></a>25.9 子弹特效</h2><p>添加子弹特效。粒子特效 <code>Particle System</code><br>注意，修改之后要应用 Prefab</p>
<h2 id="25-10-爆炸特效"><a href="#25-10-爆炸特效" class="headerlink" title="25.10 爆炸特效"></a>25.10 爆炸特效</h2><p>添加爆炸特效。粒子特效 <code>Particle System</code><br>在击中目标时，创建特效节点。</p>
<p>MainLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Application.targetFrameRate = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BulletLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BulletLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹飞行速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> speed = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹生命时长&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> lifetime = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;爆炸的粒子特效的prefab&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> GameObject explosionEffect;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Invoke(<span class="string">&quot;SelfDestroy&quot;</span>, lifetime);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.Translate(<span class="number">0</span>, <span class="number">0</span>, speed * Time.deltaTime, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;* 子弹碰撞, other=&quot;</span> + other.name);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!other.name.StartsWith(<span class="string">&quot;怪兽&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 销毁子弹</span></span><br><span class="line">        Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 销毁对方节点</span></span><br><span class="line">        Destroy(other.gameObject);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建一个粒子特效，表现爆炸效果</span></span><br><span class="line">        GameObject effectNode = Instantiate(explosionEffect, <span class="literal">null</span>);</span><br><span class="line">        effectNode.transform.position = <span class="keyword">this</span>.transform.position;</span><br><span class="line">        <span class="comment">// 当粒子特效播放时，该节点会自毁</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SelfDestroy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PlayerLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlayerLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹节点的预制体&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> GameObject bulletPrefab;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹节点的父节点&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform bulletFolder;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;子弹出生点&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Transform firePoint;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;开火间隔&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> fireInterval = <span class="number">0.1f</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;平移速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">0.1f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        InvokeRepeating(<span class="string">&quot;Fire&quot;</span>, fireInterval, fireInterval);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> dx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.A))</span><br><span class="line">        &#123;</span><br><span class="line">            dx = -moveSpeed;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.D))</span><br><span class="line">        &#123;</span><br><span class="line">            dx = moveSpeed;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.transform.Translate(dx, <span class="number">0</span>, <span class="number">0</span>, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Fire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 实例化一个子弹节点</span></span><br><span class="line">        GameObject node = Instantiate(bulletPrefab, bulletFolder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 把子弹移动到出生点位置</span></span><br><span class="line">        node.transform.position = firePoint.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>EnemyLogic.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EnemyLogic</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;前进速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> zSpeed = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 横移速度</span></span><br><span class="line">    <span class="built_in">float</span> xSpeed = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 每秒改变一次横移速度</span></span><br><span class="line">        InvokeRepeating(<span class="string">&quot;SnakeMove&quot;</span>, <span class="number">1f</span>, <span class="number">1f</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> dz = zSpeed * Time.deltaTime;</span><br><span class="line">        <span class="built_in">float</span> dx = xSpeed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.transform.Translate(dx, <span class="number">0</span>, dz, Space.Self);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 蛇皮走位</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SnakeMove</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 4 种速度选项</span></span><br><span class="line">        <span class="built_in">float</span>[] options = &#123; <span class="number">-10</span>, <span class="number">-5</span>, <span class="number">5</span>, <span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> sel = Random.Range(<span class="number">0</span>, options.Length);</span><br><span class="line"></span><br><span class="line">        xSpeed = options[sel];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>EnemyCreator.cs</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EnemyCreator</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;怪兽的 Prefab&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> GameObject enemyPrefab;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Tooltip(<span class="string">&quot;定时创建新的怪兽&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> interval = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// CreateEnemy();</span></span><br><span class="line">        InvokeRepeating(<span class="string">&quot;CreateEnemy&quot;</span>, <span class="number">0.1f</span>, interval);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateEnemy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        GameObject node = Instantiate(enemyPrefab, <span class="keyword">this</span>.transform);</span><br><span class="line">        node.transform.position = <span class="keyword">this</span>.transform.position;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 头转过来</span></span><br><span class="line">        node.transform.localEulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加一个随机的偏移量，避免被人堵住出生点</span></span><br><span class="line">        <span class="built_in">float</span> dx = Random.Range(<span class="number">-20</span>, <span class="number">20</span>);</span><br><span class="line">        node.transform.Translate(dx, <span class="number">0</span>, <span class="number">0</span>, Space.Self);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Ramsayi</div><div class="post-copyright__author_desc">这个人很懒，什么都填了</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://ramsayi.asia/posts/d2fdc809/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://ramsayi.asia/posts/d2fdc809/')">Unity3D入门教程 - 阿发</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://ramsayi.asia/posts/d2fdc809/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Unity3D入门教程 - 阿发&amp;url=https://ramsayi.asia/posts/d2fdc809/&amp;pic=https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ramsayi.asia" target="_blank">Ramsayi</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Unity3D/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Unity3D<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/ue5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3194afad/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/python-data-dig.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python数据挖掘基础-Day04</div></div></a></div><div class="next-post pull-right"><a href="/posts/a2554cd9/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Sentinel/Sentinel-1-SAR-User-Guide-Naming-Conventions-Figure-1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Sentinel 1文件名命名规则</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Ramsayi</h1><div class="author-info__desc">这个人很懒，什么都填了</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/ramsayi" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/354247938" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-01-%E7%AB%A0-%E8%AF%BE%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">第 01 章 课程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%AF%BE%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 课程介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 资源下载</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-02-%E7%AB%A0-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">第 02 章 开发环境</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-03-%E7%AB%A0-%E5%9C%BA%E6%99%AF%E4%B8%8E%E8%A7%86%E5%9B%BE"><span class="toc-number">3.</span> <span class="toc-text">第 03 章 场景与视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%9C%BA%E6%99%AF"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%B8%B8%E6%88%8F%E7%89%A9%E4%BD%93"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 游戏物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-3D-%E8%A7%86%E5%9B%BE"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 3D 视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E4%B8%96%E7%95%8C%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 世界坐标系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E8%A7%86%E9%87%8E%E4%B8%AD%E5%BF%83"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 视野中心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E9%80%8F%E8%A7%86%E4%B8%8E%E6%AD%A3%E4%BA%A4"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 透视与正交</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-04-%E7%AB%A0-%E6%B8%B8%E6%88%8F%E7%89%A9%E4%BD%93"><span class="toc-number">4.</span> <span class="toc-text">第 04 章 游戏物体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-3D-%E5%8E%9F%E7%94%9F%E7%89%A9%E4%BD%93"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 3D 原生物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%89%A9%E4%BD%93%E7%9A%84%E7%A7%BB%E5%8A%A8"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 物体的移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E6%97%8B%E8%BD%AC%E4%B8%8E%E7%BC%A9%E6%94%BE"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 旋转与缩放</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%A4%9A%E9%80%89%E5%A4%8D%E5%88%B6%E5%AF%B9%E9%BD%90"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 多选复制对齐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E7%BB%83%E4%B9%A0"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-AF-%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6"><span class="toc-number">4.6.</span> <span class="toc-text">4.6 AF 扩展插件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-05-%E7%AB%A0-%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">第 05 章 模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E7%BD%91%E6%A0%BC"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 网格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E6%9D%90%E8%B4%A8"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 材质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E7%BA%B9%E7%90%86"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 纹理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 外部模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E6%9B%B4%E5%A4%9A%E7%BB%86%E8%8A%82"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 更多细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-FBX-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 FBX 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-FBX-%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%8C%EF%BC%89"><span class="toc-number">5.7.</span> <span class="toc-text">5.7 FBX 的使用（二）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-FBX-%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%89%EF%BC%89"><span class="toc-number">5.8.</span> <span class="toc-text">5.7 FBX 的使用（三）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-06-%E7%AB%A0-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">第 06 章 资源文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 资源文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%9C%BA%E6%99%AF%E6%96%87%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 场景文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E8%B5%84%E6%BA%90%E5%8C%85"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 资源包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-Unity-%E8%B5%84%E6%BA%90%E5%95%86%E5%BA%97"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 Unity 资源商店</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-07-%E7%AB%A0-%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB"><span class="toc-number">7.</span> <span class="toc-text">第 07 章 父子关系</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E8%BD%B4%E5%BF%83"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 轴心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 父子关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E7%A9%BA%E7%89%A9%E4%BD%93"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 空物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-Global-%E4%B8%8E-Local"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 Global 与 Local</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-Pivot-%E4%B8%8E-Center"><span class="toc-number">7.5.</span> <span class="toc-text">7.5 Pivot 与 Center</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-08-%E7%AB%A0-%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">第 08 章 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E7%BB%84%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E7%BB%84%E4%BB%B6"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 添加删除组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-AudioSource-%E7%BB%84%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 AudioSource 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-Transform-%E7%BB%84%E4%BB%B6"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 Transform 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E6%91%84%E5%83%8F%E6%9C%BA"><span class="toc-number">8.5.</span> <span class="toc-text">8.5 摄像机</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-09-%E7%AB%A0-%E8%84%9A%E6%9C%AC"><span class="toc-number">9.</span> <span class="toc-text">第 09 章 脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E8%84%9A%E6%9C%AC"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E5%BD%93%E5%89%8D%E7%89%A9%E4%BD%93"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 当前物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E7%89%A9%E4%BD%93%E7%9A%84%E5%9D%90%E6%A0%87"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 物体的坐标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E6%92%AD%E6%94%BE%E6%A8%A1%E5%BC%8F"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 播放模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-10-%E7%AB%A0-%E5%B8%A7%E6%9B%B4%E6%96%B0"><span class="toc-number">10.</span> <span class="toc-text">第 10 章 帧更新</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E5%B8%A7%E6%9B%B4%E6%96%B0"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 帧更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E7%A7%BB%E5%8A%A8%E7%89%A9%E4%BD%93"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 移动物体</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-11-%E7%AB%A0-%E7%89%A9%E4%BD%93%E7%9A%84%E8%BF%90%E5%8A%A8"><span class="toc-number">11.</span> <span class="toc-text">第 11 章 物体的运动</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E7%89%A9%E4%BD%93%E7%9A%84%E8%BF%90%E5%8A%A8"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 物体的运动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E7%9B%B8%E5%AF%B9%E8%BF%90%E5%8A%A8"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 相对运动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E8%BF%90%E5%8A%A8%E7%9A%84%E6%96%B9%E5%90%91"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 运动的方向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-%E5%B0%8F%E7%BB%83%E4%B9%A0"><span class="toc-number">11.4.</span> <span class="toc-text">11.4 小练习</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-12-%E7%AB%A0-%E7%89%A9%E4%BD%93%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="toc-number">12.</span> <span class="toc-text">第 12 章 物体的旋转</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E7%89%A9%E4%BD%93%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 物体的旋转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E7%9B%B8%E5%AF%B9%E6%97%8B%E8%BD%AC"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 相对旋转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-%E8%87%AA%E8%BD%AC%E4%B8%8E%E5%85%AC%E8%BD%AC"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 自转与公转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="toc-number">12.4.</span> <span class="toc-text">12.4 官方文档</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-13-%E7%AB%A0-%E8%84%9A%E6%9C%AC%E7%9A%84%E8%BF%90%E8%A1%8C"><span class="toc-number">13.</span> <span class="toc-text">第 13 章 脚本的运行</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E8%84%9A%E6%9C%AC%E7%9A%84%E8%BF%90%E8%A1%8C"><span class="toc-number">13.1.</span> <span class="toc-text">13.1 脚本的运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E6%B6%88%E6%81%AF%E5%87%BD%E6%95%B0"><span class="toc-number">13.2.</span> <span class="toc-text">13.2 消息函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">13.3.</span> <span class="toc-text">13.3 脚本执行顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-%E4%B8%BB%E6%8E%A7%E8%84%9A%E6%9C%AC"><span class="toc-number">13.4.</span> <span class="toc-text">13.4 主控脚本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-14-%E7%AB%A0-%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">14.</span> <span class="toc-text">第 14 章 脚本的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1-%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">14.1.</span> <span class="toc-text">14.1 脚本的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2-%E5%8F%82%E6%95%B0%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="toc-number">14.2.</span> <span class="toc-text">14.2 参数的赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3-%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">14.3.</span> <span class="toc-text">14.3 值类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-4-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">14.4.</span> <span class="toc-text">14.4 引用类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-5-%E8%BF%90%E8%A1%8C%E6%97%B6%E8%B0%83%E8%AF%95"><span class="toc-number">14.5.</span> <span class="toc-text">14.5 运行时调试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-15-%E7%AB%A0-%E9%BC%A0%E6%A0%87%E8%BE%93%E5%85%A5"><span class="toc-number">15.</span> <span class="toc-text">第 15 章 鼠标输入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1-%E9%BC%A0%E6%A0%87%E8%BE%93%E5%85%A5"><span class="toc-number">15.1.</span> <span class="toc-text">15.1 鼠标输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2-%E5%87%A0%E4%B8%AA%E7%BB%86%E8%8A%82"><span class="toc-number">15.2.</span> <span class="toc-text">15.2 几个细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3-%E5%B1%8F%E5%B9%95%E5%9D%90%E6%A0%87"><span class="toc-number">15.3.</span> <span class="toc-text">15.3 屏幕坐标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4-%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5"><span class="toc-number">15.4.</span> <span class="toc-text">15.4 键盘输入</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-16-%E7%AB%A0-%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">16.</span> <span class="toc-text">第 16 章 组件的访问</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-%E7%BB%84%E4%BB%B6%E7%9A%84%E8%B0%83%E7%94%A8"><span class="toc-number">16.1.</span> <span class="toc-text">16.1 组件的调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">16.2.</span> <span class="toc-text">16.2 组件的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3-%E5%BC%95%E7%94%A8%E5%88%AB%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">16.3.</span> <span class="toc-text">16.3 引用别的组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4-%E5%BC%95%E7%94%A8%E8%84%9A%E6%9C%AC%E7%BB%84%E4%BB%B6"><span class="toc-number">16.4.</span> <span class="toc-text">16.4 引用脚本组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-5-%E6%B6%88%E6%81%AF%E8%B0%83%E7%94%A8"><span class="toc-number">16.5.</span> <span class="toc-text">16.5 消息调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-6-%E7%BB%83%E4%B9%A0-%E7%AE%80%E5%8D%95%E9%A3%9E%E6%8E%A7"><span class="toc-number">16.6.</span> <span class="toc-text">16.6 练习 简单飞控</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-17-%E7%AB%A0-%E7%89%A9%E4%BD%93%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">17.</span> <span class="toc-text">第 17 章 物体的访问</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1-%E8%8E%B7%E5%8F%96%E7%89%A9%E4%BD%93"><span class="toc-number">17.1.</span> <span class="toc-text">17.1 获取物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2-%E7%88%B6%E5%AD%90%E7%89%A9%E4%BD%93"><span class="toc-number">17.2.</span> <span class="toc-text">17.2 父子物体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-3-%E7%89%A9%E4%BD%93%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">17.3.</span> <span class="toc-text">17.3 物体的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-4-%E7%BB%83%E4%B9%A0-%E4%BF%84%E7%BD%97%E6%96%AF%E6%96%B9%E5%9D%97"><span class="toc-number">17.4.</span> <span class="toc-text">17.4 练习 俄罗斯方块</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-18-%E7%AB%A0-%E8%B5%84%E6%BA%90%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">18.</span> <span class="toc-text">第 18 章 资源的访问</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1-%E8%B5%84%E6%BA%90%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">18.1.</span> <span class="toc-text">18.1 资源的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-2-%E8%B5%84%E6%BA%90%E6%95%B0%E7%BB%84"><span class="toc-number">18.2.</span> <span class="toc-text">18.2 资源数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-3-%E7%BB%83%E4%B9%A0-%E4%B8%89%E8%89%B2%E7%90%83"><span class="toc-number">18.3.</span> <span class="toc-text">18.3 练习 三色球</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-19-%E7%AB%A0-%E5%AE%9A%E6%97%B6%E8%B0%83%E7%94%A8"><span class="toc-number">19.</span> <span class="toc-text">第 19 章 定时调用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1-%E5%AE%9A%E6%97%B6%E8%B0%83%E7%94%A8"><span class="toc-number">19.1.</span> <span class="toc-text">19.1 定时调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-2-%E5%AE%9A%E6%97%B6%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="toc-number">19.2.</span> <span class="toc-text">19.2 定时与线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-3-%E5%87%A0%E7%82%B9%E7%BB%86%E8%8A%82"><span class="toc-number">19.3.</span> <span class="toc-text">19.3 几点细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-4-%E7%BB%83%E4%B9%A0-%E7%BA%A2%E7%BB%BF%E7%81%AF"><span class="toc-number">19.4.</span> <span class="toc-text">19.4 练习 红绿灯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-5-%E7%BB%83%E4%B9%A0-%E5%8A%A0%E9%80%9F%E5%87%8F%E9%80%9F"><span class="toc-number">19.5.</span> <span class="toc-text">19.5 练习 加速减速</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-20-%E7%AB%A0-%E5%90%91%E9%87%8F"><span class="toc-number">20.</span> <span class="toc-text">第 20 章 向量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#20-1-%E5%90%91%E9%87%8F"><span class="toc-number">20.1.</span> <span class="toc-text">20.1 向量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-2-%E5%90%91%E9%87%8F%E8%BF%90%E7%AE%97"><span class="toc-number">20.2.</span> <span class="toc-text">20.2 向量运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-3-%E5%90%91%E9%87%8F%E6%B5%8B%E8%B7%9D"><span class="toc-number">20.3.</span> <span class="toc-text">20.3 向量测距</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-4-%E5%90%91%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">20.4.</span> <span class="toc-text">20.4 向量的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-21-%E7%AB%A0-%E9%A2%84%E5%88%B6%E4%BD%93"><span class="toc-number">21.</span> <span class="toc-text">第 21 章 预制体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1-%E9%A2%84%E5%88%B6%E4%BD%93"><span class="toc-number">21.1.</span> <span class="toc-text">21.1 预制体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-2-%E9%A2%84%E5%88%B6%E4%BD%93%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">21.2.</span> <span class="toc-text">21.2 预制体的创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-3-%E9%A2%84%E5%88%B6%E4%BD%93%E7%9A%84%E5%AE%9E%E4%BE%8B"><span class="toc-number">21.3.</span> <span class="toc-text">21.3 预制体的实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-4-%E9%A2%84%E5%88%B6%E4%BD%93%E7%9A%84%E7%BC%96%E8%BE%91"><span class="toc-number">21.4.</span> <span class="toc-text">21.4 预制体的编辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-5-%E5%A4%9A%E7%BA%A7%E8%8A%82%E7%82%B9"><span class="toc-number">21.5.</span> <span class="toc-text">21.5 多级节点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-22-%E7%AB%A0-%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-number">22.</span> <span class="toc-text">第 22 章 动态创建实例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#22-1-%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-number">22.1.</span> <span class="toc-text">22.1 动态创建实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-2-%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">22.2.</span> <span class="toc-text">22.2 实例的初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-3-%E5%AE%9E%E4%BE%8B%E7%9A%84%E9%94%80%E6%AF%81"><span class="toc-number">22.3.</span> <span class="toc-text">22.3 实例的销毁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-4-%E7%BB%83%E4%B9%A0-%E7%81%AB%E6%8E%A7%E5%8F%82%E6%95%B0"><span class="toc-number">22.4.</span> <span class="toc-text">22.4 练习 火控参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-5-%E7%BB%83%E4%B9%A0-%E6%8C%89%E9%94%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">22.5.</span> <span class="toc-text">22.5 练习 按键控制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-23-%E7%AB%A0-%E7%89%A9%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">23.</span> <span class="toc-text">第 23 章 物理系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#23-1-%E7%89%A9%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">23.1.</span> <span class="toc-text">23.1 物理系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-2-%E7%89%A9%E7%90%86%E7%A2%B0%E6%92%9E"><span class="toc-number">23.2.</span> <span class="toc-text">23.2 物理碰撞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-3-%E5%8F%8D%E5%BC%B9%E4%B8%8E%E6%91%A9%E6%93%A6"><span class="toc-number">23.3.</span> <span class="toc-text">23.3 反弹与摩擦</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-24-%E7%AB%A0-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B"><span class="toc-number">24.</span> <span class="toc-text">第 24 章 碰撞检测</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#24-1-%E8%BF%90%E5%8A%A8%E5%AD%A6%E5%88%9A%E4%BD%93"><span class="toc-number">24.1.</span> <span class="toc-text">24.1 运动学刚体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-2-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B"><span class="toc-number">24.2.</span> <span class="toc-text">24.2 碰撞检测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-3-%E7%A2%B0%E6%92%9E%E4%BD%93%E7%9A%84%E7%BC%96%E8%BE%91"><span class="toc-number">24.3.</span> <span class="toc-text">24.3 碰撞体的编辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-4-%E7%BB%83%E4%B9%A0-%E5%87%BB%E6%AF%81%E7%9B%AE%E6%A0%87"><span class="toc-number">24.4.</span> <span class="toc-text">24.4 练习 击毁目标</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC-25-%E7%AB%A0-%E6%B8%B8%E6%88%8F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E4%BE%8B"><span class="toc-number">25.</span> <span class="toc-text">第 25 章 游戏项目实例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#25-1-%E5%B0%84%E5%87%BB%E6%B8%B8%E6%88%8F"><span class="toc-number">25.1.</span> <span class="toc-text">25.1 射击游戏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-2-%E6%B7%BB%E5%8A%A0%E8%A7%92%E8%89%B2"><span class="toc-number">25.2.</span> <span class="toc-text">25.2 添加角色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-3-%E5%A4%A9%E7%A9%BA%E7%9B%92"><span class="toc-number">25.3.</span> <span class="toc-text">25.3 天空盒</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-4-%E5%AD%90%E5%BC%B9%E5%92%8C%E7%A2%B0%E6%92%9E"><span class="toc-number">25.4.</span> <span class="toc-text">25.4 子弹和碰撞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-5-%E8%BF%9E%E7%BB%AD%E5%8F%91%E5%B0%84"><span class="toc-number">25.5.</span> <span class="toc-text">25.5 连续发射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-6-%E6%8C%89%E9%94%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">25.6.</span> <span class="toc-text">25.6 按键控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-7-%E6%80%AA%E5%85%BD%E7%9A%84%E8%B5%B0%E4%BD%8D"><span class="toc-number">25.7.</span> <span class="toc-text">25.7 怪兽的走位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-8-%E6%80%AA%E5%85%BD%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">25.8.</span> <span class="toc-text">25.8 怪兽生成器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-9-%E5%AD%90%E5%BC%B9%E7%89%B9%E6%95%88"><span class="toc-number">25.9.</span> <span class="toc-text">25.9 子弹特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-10-%E7%88%86%E7%82%B8%E7%89%B9%E6%95%88"><span class="toc-number">25.10.</span> <span class="toc-text">25.10 爆炸特效</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/947f8646/" title="虚幻5 - 入门教程 - GenJi 欧酱"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/ue5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="虚幻5 - 入门教程 - GenJi 欧酱"/></a><div class="content"><a class="title" href="/posts/947f8646/" title="虚幻5 - 入门教程 - GenJi 欧酱">虚幻5 - 入门教程 - GenJi 欧酱</a><time datetime="2023-11-21T15:31:43.000Z" title="发表于 2023-11-21 23:31:43">2023-11-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b2d509e5/" title="OneDrive自定义云同步文件夹"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/bg/wallhaven-ex9gwo.png?_r_=4c12c8a9-88d7-e033-0ed0-48fd3286504e" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OneDrive自定义云同步文件夹"/></a><div class="content"><a class="title" href="/posts/b2d509e5/" title="OneDrive自定义云同步文件夹">OneDrive自定义云同步文件夹</a><time datetime="2023-10-17T04:41:17.000Z" title="发表于 2023-10-17 12:41:17">2023-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/36da500e/" title="SARscape中SAR数据处理准备工作总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/bg/wallhaven-1poo61.jpg?_r_=97dcbde5-ad77-4986-63bf-2af6f7d77cd7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SARscape中SAR数据处理准备工作总结"/></a><div class="content"><a class="title" href="/posts/36da500e/" title="SARscape中SAR数据处理准备工作总结">SARscape中SAR数据处理准备工作总结</a><time datetime="2023-09-19T11:36:30.000Z" title="发表于 2023-09-19 19:36:30">2023-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a2554cd9/" title="Sentinel 1文件名命名规则"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Sentinel/Sentinel-1-SAR-User-Guide-Naming-Conventions-Figure-1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sentinel 1文件名命名规则"/></a><div class="content"><a class="title" href="/posts/a2554cd9/" title="Sentinel 1文件名命名规则">Sentinel 1文件名命名规则</a><time datetime="2023-09-19T11:21:13.000Z" title="发表于 2023-09-19 19:21:13">2023-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d2fdc809/" title="Unity3D入门教程 - 阿发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity3D入门教程 - 阿发"/></a><div class="content"><a class="title" href="/posts/d2fdc809/" title="Unity3D入门教程 - 阿发">Unity3D入门教程 - 阿发</a><time datetime="2023-07-09T11:15:18.000Z" title="发表于 2023-07-09 19:15:18">2023-07-09</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:anzhiyu-c@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/6378063631" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/372204786" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/DwCpMEy/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2018 - 2024 By <a class="footer-bar-link" href="/" title="Ramsayi" target="_blank">Ramsayi</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://image.anheyu.com" title="图床">图床</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">265</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">47</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">40</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ramsayi.asia/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 0.88rem;">Axios<sup>1</sup></a><a href="/tags/Bilibili/" style="font-size: 0.88rem;">Bilibili<sup>1</sup></a><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>35</sup></a><a href="/tags/C-%E7%90%86%E8%AE%BA%E7%BB%BC%E5%90%88%E4%BD%9C%E4%B8%9A/" style="font-size: 0.88rem;">C++理论综合作业<sup>4</sup></a><a href="/tags/Curl/" style="font-size: 0.88rem;">Curl<sup>1</sup></a><a href="/tags/Dart/" style="font-size: 0.88rem;">Dart<sup>115</sup></a><a href="/tags/ECharts/" style="font-size: 0.88rem;">ECharts<sup>4</sup></a><a href="/tags/Excel/" style="font-size: 0.88rem;">Excel<sup>1</sup></a><a href="/tags/FFmpeg/" style="font-size: 0.88rem;">FFmpeg<sup>1</sup></a><a href="/tags/Flutter/" style="font-size: 0.88rem;">Flutter<sup>115</sup></a><a href="/tags/Getx/" style="font-size: 0.88rem;">Getx<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>7</sup></a><a href="/tags/Jupyter/" style="font-size: 0.88rem;">Jupyter<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 0.88rem;">Markdown<sup>1</sup></a><a href="/tags/OneDrive/" style="font-size: 0.88rem;">OneDrive<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>10</sup></a><a href="/tags/React/" style="font-size: 0.88rem;">React<sup>9</sup></a><a href="/tags/SARscape/" style="font-size: 0.88rem;">SARscape<sup>1</sup></a><a href="/tags/Sentinel/" style="font-size: 0.88rem;">Sentinel<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>7</sup></a><a href="/tags/Ubuntu/" style="font-size: 0.88rem;">Ubuntu<sup>2</sup></a><a href="/tags/Unity3D/" style="font-size: 0.88rem;">Unity3D<sup>1</sup></a><a href="/tags/VMware/" style="font-size: 0.88rem;">VMware<sup>1</sup></a><a href="/tags/VSCode/" style="font-size: 0.88rem;">VSCode<sup>1</sup></a><a href="/tags/Vim/" style="font-size: 0.88rem;">Vim<sup>1</sup></a><a href="/tags/Vue2/" style="font-size: 0.88rem;">Vue2<sup>2</sup></a><a href="/tags/Vue3/" style="font-size: 0.88rem;">Vue3<sup>10</sup></a><a href="/tags/Windows/" style="font-size: 0.88rem;">Windows<sup>1</sup></a><a href="/tags/You-Get/" style="font-size: 0.88rem;">You-Get<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 0.88rem;">uniapp<sup>1</sup></a><a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 0.88rem;">下载<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>9</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">博客<sup>5</sup></a><a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 0.88rem;">快捷键<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 0.88rem;">终端<sup>3</sup></a><a href="/tags/%E8%99%9A%E5%B9%BB5/" style="font-size: 0.88rem;">虚幻5<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 0.88rem;">视频<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/01/2018 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2018 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Ramsayi 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("01/01/2018 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/inject/custom.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>