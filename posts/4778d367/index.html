<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>GetX | 𝙍𝙖𝙢𝙨𝙖𝙮𝙞'𝙨 𝘽𝙡𝙤𝙜</title><meta name="author" content="Ramsayi"><meta name="copyright" content="Ramsayi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言 使用Bloc的时候，有一个让我至今为止十分在意的问题，无法真正的跨页面交互！在反复的查阅官方文档后，使用一个全局Bloc的方式，实现了“伪”跨页面交互，详细可查看：flutter_bloc使用解析；fish_redux的广播机制是可以比较完美的实现跨页面交互的，我也写了一篇几万字文章介绍如何使用该框架：fish_redux使用详解，redux层次划分是比较细的，写起来会很费劲；最近尝试了Ge">
<meta property="og:type" content="article">
<meta property="og:title" content="GetX">
<meta property="og:url" content="https://ramsayi.github.io/posts/4778d367/index.html">
<meta property="og:site_name" content="𝙍𝙖𝙢𝙨𝙖𝙮𝙞&#39;𝙨 𝘽𝙡𝙤𝙜">
<meta property="og:description" content="前言 使用Bloc的时候，有一个让我至今为止十分在意的问题，无法真正的跨页面交互！在反复的查阅官方文档后，使用一个全局Bloc的方式，实现了“伪”跨页面交互，详细可查看：flutter_bloc使用解析；fish_redux的广播机制是可以比较完美的实现跨页面交互的，我也写了一篇几万字文章介绍如何使用该框架：fish_redux使用详解，redux层次划分是比较细的，写起来会很费劲；最近尝试了Ge">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/getx.webp">
<meta property="article:published_time" content="2022-09-18T02:35:27.000Z">
<meta property="article:modified_time" content="2022-09-26T14:20:18.000Z">
<meta property="article:author" content="Ramsayi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/getx.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/ramsayi/src/img/logo/logo_1.png"><link rel="canonical" href="https://ramsayi.github.io/posts/4778d367/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"这篇文章已经","messageNext":"天未更新了，其中的内容可能已经不再适用了。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":1000},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#304ffe","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'GetX',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-26 22:20:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/ramsayi.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/logo/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">135</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">50</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://dart.cn/guides"><i class="fa-fw fas fa-book"></i><span> Dart中文文档</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.flutterchina.club/docs/"><i class="fa-fw fas fa-book"></i><span> Flutter中文文档</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://book.flutterchina.club/"><i class="fa-fw fas fa-book"></i><span> Flutter实战</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 后端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1016959663602400"><i class="fa-fw fas fa-book"></i><span> Python教程 - 廖雪峰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1177760294764384"><i class="fa-fw fas fa-book"></i><span> SQL教程 - 廖雪峰</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chevron-circle-down"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//scabet.github.io/"><i class="fa-fw fas fa-compass"></i><span> Scabet</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbk.github.io/"><i class="fa-fw fas fa-compass"></i><span> 网址导航</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbs.github.io/"><i class="fa-fw fas fa-compass"></i><span> 花里胡哨</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbt.github.io/"><i class="fa-fw fas fa-compass"></i><span> Aabbt</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//swclub.github.io/"><i class="fa-fw fas fa-compass"></i><span> SWClub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/getx.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">𝙍𝙖𝙢𝙨𝙖𝙮𝙞'𝙨 𝘽𝙡𝙤𝙜</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://dart.cn/guides"><i class="fa-fw fas fa-book"></i><span> Dart中文文档</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.flutterchina.club/docs/"><i class="fa-fw fas fa-book"></i><span> Flutter中文文档</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://book.flutterchina.club/"><i class="fa-fw fas fa-book"></i><span> Flutter实战</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 后端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1016959663602400"><i class="fa-fw fas fa-book"></i><span> Python教程 - 廖雪峰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1177760294764384"><i class="fa-fw fas fa-book"></i><span> SQL教程 - 廖雪峰</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chevron-circle-down"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//scabet.github.io/"><i class="fa-fw fas fa-compass"></i><span> Scabet</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbk.github.io/"><i class="fa-fw fas fa-compass"></i><span> 网址导航</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbs.github.io/"><i class="fa-fw fas fa-compass"></i><span> 花里胡哨</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbt.github.io/"><i class="fa-fw fas fa-compass"></i><span> Aabbt</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//swclub.github.io/"><i class="fa-fw fas fa-compass"></i><span> SWClub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">GetX</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-18T02:35:27.000Z" title="发表于 2022-09-18 10:35:27">2022-09-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-26T14:20:18.000Z" title="更新于 2022-09-26 22:20:18">2022-09-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Dart-Flutter/">Dart&amp;Flutter</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>38分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/4778d367/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/posts/4778d367/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>使用Bloc的时候，有一个让我至今为止十分在意的问题，无法真正的跨页面交互！在反复的查阅官方文档后，使用一个全局Bloc的方式，实现了“伪”跨页面交互，详细可查看：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6856268776510504968">flutter_bloc使用解析</a>；fish_redux的广播机制是可以比较完美的实现跨页面交互的，我也写了一篇几万字文章介绍如何使用该框架：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6860029460524040199">fish_redux使用详解</a>，redux层次划分是比较细的，写起来会很费劲；最近尝试了GetX相关功能，解决了我的相当一部分痛点</p>
</blockquote>
<blockquote>
<p>把整篇文章写完后，我马上把自己的一个demo里面所有Bloc代码全用GetX替换，且去掉了Fluro框架；感觉用Getx虽然会省掉大量的模板代码，但还是有些重复工作：创建文件夹，创建几个必备文件，写那些必须要写的初始化代码和类；略微繁琐，<strong>为了对得起GetX给我开发带来的巨大便利，我就花了一些时间，给它写了一个插件！</strong> 上面这重复的代码，文件，文件夹统统能一键生成！</p>
</blockquote>
<p><strong>GetX相关优势</strong></p>
<ul>
<li>依赖注入<ul>
<li>GetX是通过依赖注入的方式，存储相应的XxxGetxController；已经脱离了InheritedWidget那一套玩法，自己手动去管理这些实例，使用场景被大大拓展</li>
<li>简单的思路，却能产生深远的影响：优雅的跨页面功能便是基于这种设计而实现的、获取实例无需BuildContext、GetBuilder自动化的处理及其减少了入参等等</li>
</ul>
</li>
<li>跨页面交互<ul>
<li>这绝对是GetX的一个优点！对于复杂的生产环境，跨页面交互的场景，实在太常见了，GetX的跨页面交互，实现的也较为优雅</li>
</ul>
</li>
<li>路由管理<ul>
<li>getx内部实现了路由管理，而且用起来，非常简单！bloc没实现路由管理，我不得不找一个star量高的路由框架，就选择了fluro，但是不得不吐槽下，fluro用起来真的很折磨人，每次新建一个页面，最让我抗拒的就是去写fluro路由代码，横跨几个文件来回写，头皮发麻</li>
<li>GetX实现了动态路由传参，也就是说直接在命名路由上拼参数，然后能拿到这些拼在路由上的参数，也就是说用flutter写H5，直接能通过Url传值，OMG！可以无脑舍弃复杂的fluro了</li>
</ul>
</li>
<li>实现了全局BuildContext</li>
<li>国际化，主题实现</li>
</ul>
<p>如果深度使用过Provider，Bloc这类依赖InheritedWidget建立起的状态管理框架；再看看GetX内部实现思想，就能发现，他们已经是俩种体系的东西了</p>
<p>对此，我来抛出一些问题：InheritedWidget存在什么缺点？为什么其数据传递和路由设计思想对立？为什么getx使用依赖注入？getx的obx自动刷新黑魔法是个什么鬼？</p>
<ul>
<li>对这些感兴趣的小伙伴，可以看看：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6984593635681517582">Flutter GetX深度剖析 | 我们终将走出自己的路（万字图文）</a></li>
</ul>
<p>下来将全面的介绍GetX的使用，文章也不分篇水阅读量了，力求一文写清楚，方便大家随时查阅</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><ul>
<li>首先导入GetX的插件</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"># getx 状态管理框架 https:<span class="comment">//pub.flutter-io.cn/packages/get</span></span><br><span class="line"># 非空安全最后一个版本（flutter <span class="number">2.0</span>之前版本）</span><br><span class="line"><span class="keyword">get</span>: ^<span class="number">3.26</span><span class="number">.0</span></span><br><span class="line">    </span><br><span class="line"># 空安全版本 最新版本请查看  https:<span class="comment">//pub.flutter-io.cn/packages/get</span></span><br><span class="line"><span class="keyword">get</span>: ^<span class="number">4.3</span><span class="number">.8</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>GetX地址</strong></p>
<ul>
<li>Github：<a href="https://link.juejin.cn/?target=https://github.com/jonataslaw/getx">jonataslaw&#x2F;getx</a></li>
<li>Pub：<a href="https://link.juejin.cn/?target=https://pub.dev/packages/get">get</a></li>
</ul>
<h2 id="主入口配置"><a href="#主入口配置" class="headerlink" title="主入口配置"></a>主入口配置</h2><ul>
<li>只需要将<code>MaterialApp</code>改成<code>GetMaterialApp</code>即可</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      home: CounterGetPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>各模块导包，均使用下面包即可</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>这个getx代码生成插件，我花了不少精力去完善，功能已经比较齐全了，希望对大家有所帮助。</p>
<p>欢迎大家提issue，提issue之前，请务必认真查看文档：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7005003323753365517">GetX代码生成IDEA插件，超详细功能讲解</a>，确保想提的需求，在本插件里面未被实现；上次有个老哥给我连开三个issue，提的需求都是早已实现的功能。。。</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><blockquote>
<p><strong>插件地址</strong></p>
</blockquote>
<ul>
<li>Github：<a href="https://link.juejin.cn/?target=https://github.com/xdd666t/getx_template">getx_template</a></li>
<li>Jetbrains：<a href="https://link.juejin.cn/?target=https://plugins.jetbrains.com/plugin/15919-getx/versions">getx_template</a></li>
</ul>
<blockquote>
<p><strong>插件的功能含义</strong></p>
</blockquote>
<ul>
<li>Model：生成GetX的模式<ul>
<li>Default：默认模式，生成三个文件：state，logic，view</li>
<li>Easy：简单模式，生成俩个文件：logic，view</li>
</ul>
</li>
<li>Module Name：模块的名称，请使用大驼峰或小驼峰命名</li>
<li>插件详细功能说明，请查阅：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7005003323753365517">GetX代码生成IDEA插件，超详细功能讲解</a></li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>在设置里面选择：Plugins —&gt; 输入“getx”搜索 —&gt; 选择名字为：“GeX” —&gt; 然后安装 —&gt; 最后记得点击下“Apply”</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9935ebc5a8384f2faff7b48d728896c9~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210927092128051"></p>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><ul>
<li>生成模板代码弹窗</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e7b623b2e1e424a982ccc9301df6424~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="getx_new"></p>
<ul>
<li>提供后缀名修改，也支持了持久化</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be33ac035cc448fa8eff8616903a1704~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210926111944785"></p>
<ul>
<li>Alt + Enter ： 可以选择包裹Widget，有四种可选：GetBuilder、GetBuilder（Auto Dispose），Obx、GetX，大大方便开发哟(＾Ｕ＾)ノ~ＹＯ<ul>
<li>如果你发现某个页面，你的GetXController无法回收，可以使用 GetBuilder（Auto Dispose）Wrap 你的 Widget</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30e14f564b6c427e9c65757811b53140~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210802160603092"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/461c5cfa1eb746d881ced0dba1560343~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210802160631405"></p>
<ul>
<li><p>快捷代码片段提示：我自己写了很多，也有一部分直接引用：</p>
<p>getx-snippets-intelliJ</p>
<ul>
<li>输入 <strong>getx</strong> 前缀便有提示</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64a2b143ea474c6480df5534687d8347~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210922111700625"></p>
<h1 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h1><h2 id="效果图-1"><a href="#效果图-1" class="headerlink" title="效果图"></a>效果图</h2><ul>
<li><a href="https://link.juejin.cn/?target=https://xdd666t.github.io/flutter_use/web/index.html%23/getCounterRx">体验一下</a></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/356a139dc86f49ea9aaad9ee29e7fe87~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="counter_getx"></p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p><strong>首先，当然是实现一个简单的计数器，来看GetX怎么将逻辑层和界面层解耦的</strong></p>
<ul>
<li>来使用插件生成下简单文件<ul>
<li>模式选择：Easy</li>
<li>功能选择：useFolder</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f59c98bcaac148099eadbbab05a4c2a5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210927092300651"></p>
<p>来看下生成的默认代码，默认代码十分简单，详细解释放在俩种状态管理里</p>
<ul>
<li>logic</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterGetLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;logic.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterGetPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(CounterGetLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="简单状态管理"><a href="#简单状态管理" class="headerlink" title="简单状态管理"></a>简单状态管理</h3><blockquote>
<p>GetBuilder：这是一个极其轻巧的状态管理器，占用资源极少！</p>
</blockquote>
<ul>
<li>logic：先来看看logic层<ul>
<li>因为是处理页面逻辑的，加上Controller单词过长，也防止和Flutter自带的一些控件控制器弄混，所以该层用<code>logic</code>结尾，这里就定为了<code>logic</code>层</li>
<li>当然这点随个人意向，写Event，Controller均可（插件生成代码，支持自定义通用后缀）</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterEasyLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> increase() &#123;</span><br><span class="line">    ++count;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterEasyPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(CounterEasyLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-简单式&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: GetBuilder&lt;CounterEasyLogic&gt;(builder: (logic) &#123;</span><br><span class="line">          <span class="keyword">return</span> Text(</span><br><span class="line">            <span class="string">&#x27;点击了 <span class="subst">$&#123;logic.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">            style: TextStyle(fontSize: <span class="number">30.0</span>),</span><br><span class="line">          );</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>分析下：GetBuilder这个方法<ul>
<li>init：虽然上述代码没用到，但是，这个参数是存在在GetBuilder中的，因为在加载变量的时候就使用<code>Get.put()</code>生成了<code>CounterEasyGetLogic</code>对象，GetBuilder会自动查找该对象，所以，就可以不使用init参数</li>
<li>builder：方法参数，拥有一个入参，类型便是GetBuilder所传入泛型的类型</li>
<li>initState，dispose等：GetBuilder拥有StatefulWidget所有周期回调，可以在相应回调内做一些操作</li>
</ul>
</li>
</ul>
<h3 id="响应式状态管理"><a href="#响应式状态管理" class="headerlink" title="响应式状态管理"></a>响应式状态管理</h3><blockquote>
<p>当数据源变化时，将自动执行刷新组件的方法</p>
</blockquote>
<ul>
<li>logic层<ul>
<li>这里变量数值后写<code>.obs</code>操作，是说明定义了该变量为响应式变量，当该变量数值变化时，页面的刷新方法将自动刷新</li>
<li>基础类型，List，类都可以加<code>.obs</code>，使其变成响应式变量</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterRxLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">自增</span></span></span><br><span class="line">  <span class="keyword">void</span> increase() =&gt; ++count;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view层</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterRxPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(CounterRxLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-响应式&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Obx(() &#123;</span><br><span class="line">          <span class="keyword">return</span> Text(</span><br><span class="line">            <span class="string">&#x27;点击了 <span class="subst">$&#123;logic.count.value&#125;</span> 次&#x27;</span>,</span><br><span class="line">            style: TextStyle(fontSize: <span class="number">30.0</span>),</span><br><span class="line">          );</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>可以发现刷新组件的方法极其简单：<code>Obx()</code>，这样可以愉快的到处写定点刷新操作了</li>
<li>Obx()方法刷新的条件<ul>
<li>只有当响应式变量的值发生变化时，才会会执行刷新操作，当某个变量初始值为：“test”，再赋值为：“test”，并不会执行刷新操作</li>
<li>当你定义了一个响应式变量，该响应式变量改变时，包裹该响应式变量的Obx()方法才会执行刷新操作，其它的未包裹该响应式变量的Obx()方法并不会执行刷新操作，Cool！</li>
</ul>
</li>
<li>来看下如果把整个类对象设置成响应类型，如何实现更新操作呢？<ul>
<li>下面解释来自官方README文档</li>
<li>这里尝试了下，将整个类对象设置为响应类型，当你改变了类其中一个变量，然后执行更新操作，<code>只要包裹了该响应类变量的Obx()，都会实行刷新操作</code>，将整个类设置响应类型，需要结合实际场景使用</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// model</span></span><br><span class="line"><span class="comment">// 我们将使整个类成为可观察的，而不是每个属性。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    User(&#123;<span class="keyword">this</span>.name = <span class="string">&#x27;&#x27;</span>, <span class="keyword">this</span>.age = <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// controller</span></span><br><span class="line"><span class="keyword">final</span> user = User().obs;</span><br><span class="line"><span class="comment">//当你需要更新user变量时。</span></span><br><span class="line">user.update( (user) &#123; <span class="comment">// 这个参数是你要更新的类本身。</span></span><br><span class="line">    user.name = <span class="string">&#x27;Jonny&#x27;</span>;</span><br><span class="line">    user.age = <span class="number">18</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 更新user变量的另一种方式。</span></span><br><span class="line">user(User(name: <span class="string">&#x27;João&#x27;</span>, age: <span class="number">35</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// view</span></span><br><span class="line">Obx(()=&gt; Text(<span class="string">&quot;Name <span class="subst">$&#123;user.value.name&#125;</span>: Age: <span class="subst">$&#123;user.value.age&#125;</span>&quot;</span>));</span><br><span class="line"><span class="comment">// 你也可以不使用.value来访问模型值。</span></span><br><span class="line">user().name; <span class="comment">// 注意是user变量，而不是类变量（首字母是小写的）。</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>分析</strong></p>
<ul>
<li>Obx是配合Rx响应式变量使用、GetBuilder是配合update使用：请注意，这完全是俩套定点刷新控件的方案<ul>
<li>区别：前者响应式变量变化，Obx自动刷新；后者需要使用update手动调用刷新</li>
</ul>
</li>
<li>每一个响应式变量，都需要生成对应的<code>GetStream</code>，占用资源大于基本数据类型，会对内存造成一定压力</li>
<li><code>GetBuilder</code>内部实际上是对StatefulWidget的封装，所以占用资源极小</li>
</ul>
<p><strong>使用场景</strong></p>
<ul>
<li>一般来说，对于大多数场景都是可以使用响应式变量的</li>
<li>但是，在一个包含了大量对象的List，都使用响应式变量，将生成大量的<code>GetStream</code>，必将对内存造成较大的压力，该情况下，就要考虑使用简单状态管理了</li>
<li>总的来说：推荐GetBuilder和update配合的写法<ul>
<li>GetBuilder内置回收GetxController的功能，能避免一些无法自动回收GetxController的坑爹问题<ul>
<li><code>使用GetBuilder的自动回收：GetBuilder需要设置assignId: true；或使用插件一键Wrap Widget：GetBuilder（Auto Dispose）</code></li>
</ul>
</li>
<li><strong>使用Obx，相关变量定义初始化以及实体更新和常规写法不同，会对初次接触该框架的人，造成很大的困扰</strong></li>
<li><strong>getx的IDEA插件现已支持一键Wrap Widget生成GetBuilder，可以一定程度上提升你的开发效率</strong></li>
</ul>
</li>
</ul>
<h1 id="跨页面交互"><a href="#跨页面交互" class="headerlink" title="跨页面交互"></a>跨页面交互</h1><blockquote>
<p>跨页面交互，在复杂的场景中，是非常重要的功能，来看看GetX怎么实现跨页面事件交互的</p>
</blockquote>
<h2 id="效果图-2"><a href="#效果图-2" class="headerlink" title="效果图"></a>效果图</h2><ul>
<li><a href="https://link.juejin.cn/?target=https://xdd666t.github.io/flutter_use/web/index.html%23/jumpOne">体验一下</a></li>
<li>Cool，这才是真正的跨页面交互！下级页面能随意调用上级页面事件，且关闭页面后，下次重进，数据也很自然重置了（全局Bloc不会重置，需要手动重置）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/188439cfe00d45baba407f22e7602dd4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="jump_getx"></p>
<h2 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h2><h3 id="页面一"><a href="#页面一" class="headerlink" title="页面一"></a>页面一</h3><p>常规代码</p>
<ul>
<li>logic<ul>
<li>这里的自增事件，是供其它页面调用的，该页面本身没使用</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetJumpOneLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">跳转到跨页面</span></span></span><br><span class="line">  <span class="keyword">void</span> toJumpTwo() &#123;</span><br><span class="line">    Get.toNamed(RouteConfig.getJumpTwo, arguments: &#123;<span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;我是上个页面传递过来的数据&#x27;</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">跳转到跨页面</span></span></span><br><span class="line">  <span class="keyword">void</span> increase() &#123;</span><br><span class="line">    count = ++count;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view<ul>
<li>此处就一个显示文字和跳转功能</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetJumpOnePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">使用Get.put()实例化你的类，使其对当下的所有子路由可用。</span></span></span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(GetJumpOneLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor: Colors.white,</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">&#x27;跨页面-One&#x27;</span>)),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.toJumpTwo(),</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.arrow_forward_outlined),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: GetBuilder&lt;GetJumpOneLogic&gt;(</span><br><span class="line">          builder: (logic) &#123;</span><br><span class="line">            <span class="keyword">return</span> Text(<span class="string">&#x27;跨页面-Two点击了 <span class="subst">$&#123;logic.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">                style: TextStyle(fontSize: <span class="number">30.0</span>));</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="页面二"><a href="#页面二" class="headerlink" title="页面二"></a>页面二</h3><p>这个页面就是重点了</p>
<ul>
<li>logic<ul>
<li>将演示怎么调用前一个页面的事件</li>
<li>怎么接收上个页面数据</li>
<li>请注意，<code>GetxController</code>包含比较完整的生命周期回调，可以在<code>onInit()</code>接受传递的数据；如果接收的数据需要刷新到界面上，请在<code>onReady</code>回调里面接收数据操作，<code>onReady</code>是在<code>addPostFrameCallback</code>回调中调用，刷新数据的操作在<code>onReady</code>进行，能保证界面是初始加载完毕后才进行页面刷新操作的</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetJumpTwoLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> msg = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onReady() &#123;</span><br><span class="line">    <span class="keyword">var</span> map = Get.arguments;</span><br><span class="line">    msg = map[<span class="string">&#x27;msg&#x27;</span>];</span><br><span class="line">    update();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.onReady();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">跳转到跨页面</span></span></span><br><span class="line">  <span class="keyword">void</span> increase() &#123;</span><br><span class="line">    count = ++count;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view<ul>
<li>加号的点击事件，点击时，能实现俩个页面数据的变换</li>
<li>重点来了，这里通过<code>Get.find()</code>，获取到了之前实例化GetXController，获取某个模块的GetXController后就很好做了，可以通过这个GetXController去调用相应的事件，也可以通过它，拿到该模块的数据！</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetJumpTwoPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> oneLogic = Get.find&lt;GetJumpOneLogic&gt;();</span><br><span class="line">  <span class="keyword">final</span> twoLogic = Get.put(GetJumpTwoLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor: Colors.white,</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">&#x27;跨页面-Two&#x27;</span>)),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          oneLogic.increase();</span><br><span class="line">          twoLogic.increase();</span><br><span class="line">        &#125;,</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(mainAxisSize: MainAxisSize.min, children: [</span><br><span class="line">          <span class="comment">//计数显示</span></span><br><span class="line">          GetBuilder&lt;GetJumpTwoLogic&gt;(</span><br><span class="line">            builder: (logic) &#123;</span><br><span class="line">              <span class="keyword">return</span> Text(<span class="string">&#x27;跨页面-Two点击了 <span class="subst">$&#123;twoLogic.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">                  style: TextStyle(fontSize: <span class="number">30.0</span>));</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line">          <span class="comment">//传递数据</span></span><br><span class="line">          GetBuilder&lt;GetJumpTwoLogic&gt;(</span><br><span class="line">            builder: (logic) &#123;</span><br><span class="line">              <span class="keyword">return</span> Text(<span class="string">&#x27;传递的数据：<span class="subst">$&#123;twoLogic.msg&#125;</span>&#x27;</span>,</span><br><span class="line">                  style: TextStyle(fontSize: <span class="number">30.0</span>));</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ]),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>GetX这种的跨页面交互事件，真的是非常简单了，侵入性也非常的低，不需要在主入口配置什么，在复杂的业务场景下，这样简单的跨页面交互方式，就能实现很多事了</p>
<h1 id="进阶吧！计数器"><a href="#进阶吧！计数器" class="headerlink" title="进阶吧！计数器"></a>进阶吧！计数器</h1><blockquote>
<p>我们可能会遇到过很多复杂的业务场景，在复杂的业务场景下，单单某个模块关于变量的初始化操作可能就非常多，在这个时候，如果还将state（状态层）和logic（逻辑层）写在一起，维护起来可能看的比较晕</p>
<p>这里将状态层和逻辑层进行一个拆分，这样在稍微大一点的项目里使用GetX，也能保证结构足够清晰了！</p>
</blockquote>
<p>在这里就继续用计数器举例吧！</p>
<h2 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h2><p>此处需要划分三个结构了：state（状态层），logic（逻辑层），view（界面层）</p>
<ul>
<li>这里使用插件生成下模板代码<ul>
<li>Model：选择Default（默认）</li>
<li>Function：useFolder（默认选中）</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/001f2f9188b8436fb0d894f6e1369e3f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20211127151801015"></p>
<p><strong>来看下生成的模板代码</strong></p>
<ul>
<li>state</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighState</span> </span>&#123;</span><br><span class="line">  GetCounterHighState() &#123;</span><br><span class="line">    <span class="comment">///<span class="language-markdown">Initialize variables</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>logic</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;state.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> GetCounterHighState state = GetCounterHighState();</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;logic.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(GetCounterHighLogic());</span><br><span class="line">  <span class="keyword">final</span> state = Get.find&lt;GetCounterHighLogic&gt;().state;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>为什么写成这样三个模块，需要把State单独提出来，请速速浏览下方</p>
<h3 id="改造"><a href="#改造" class="headerlink" title="改造"></a>改造</h3><ul>
<li>state<ul>
<li>这里使用划分出来的state层，来统一管理所有的状态变量</li>
<li>涉及到状态变量定义和Logic层彻底分开</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighState</span> </span>&#123;</span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">int</span> count;</span><br><span class="line"></span><br><span class="line">  GetCounterHighState() &#123;</span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>logic<ul>
<li>逻辑层就比较简单，需要注意的是：开始时需要实例化状态类</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> GetCounterHighState state = GetCounterHighState();</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">自增</span></span></span><br><span class="line">  <span class="keyword">void</span> increase() &#123;</span><br><span class="line">    state.count = ++state.count;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view<ul>
<li>实际上view层，和之前的几乎没区别，区别的是把状态层给独立出来了</li>
<li>因为<code>CounterHighGetLogic</code>被实例化，所以直接使用<code>Get.find&lt;CounterHighGetLogic&gt;()</code>就能拿到刚刚实例化的逻辑层，然后拿到state，使用单独的变量接收下</li>
<li>ok，此时：logic只专注于触发事件交互，state只专注数据</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetCounterHighPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(GetCounterHighLogic());</span><br><span class="line">  <span class="keyword">final</span> state = Get.find&lt;GetCounterHighLogic&gt;().state;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-进阶版&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: GetBuilder&lt;GetCounterHighLogic&gt;(</span><br><span class="line">          builder: (logic) &#123;</span><br><span class="line">            <span class="keyword">return</span> Text(</span><br><span class="line">              <span class="string">&#x27;点击了 <span class="subst">$&#123;state.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">30.0</span>),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><blockquote>
<p>看了上面的改造，屏幕前的你可能想吐槽了：坑比啊，之前简简单单的逻辑层，被拆成俩个，还搞得这么麻烦，你是猴子请来的逗比吗？</p>
<p>大家先别急着吐槽，当业务过于复杂，state层，也是会维护很多东西的，让我们看看下面的一个小栗子，下面实例代码是不能直接运行的，想看详细运行代码，请查看项目：<a href="https://link.juejin.cn/?target=https://github.com/xdd666t/flutter_use">flutter_use</a></p>
</blockquote>
<ul>
<li>state</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainState</span> </span>&#123;</span><br><span class="line">  <span class="comment">///<span class="language-markdown">选择index</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">int</span> selectedIndex;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">控制是否展开</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">bool</span> isUnfold;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">是否缩放</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">bool</span> isScale;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">分类按钮数据源</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">List</span>&lt;BtnInfo&gt; list;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">Navigation的item信息</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">List</span>&lt;BtnInfo&gt; itemList;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">PageView页面</span></span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">List</span>&lt;Widget&gt; pageList;</span><br><span class="line">  <span class="keyword">late</span> PageController pageController;</span><br><span class="line"></span><br><span class="line">  MainState() &#123;</span><br><span class="line">    <span class="comment">//初始化index</span></span><br><span class="line">    selectedIndex = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//默认不展开</span></span><br><span class="line">    isUnfold = <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//默认不缩放</span></span><br><span class="line">    isScale = <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//PageView页面</span></span><br><span class="line">    pageList = [</span><br><span class="line">      KeepAlivePage(FunctionPage()),</span><br><span class="line">      KeepAlivePage(ExamplePage()),</span><br><span class="line">      KeepAlivePage(SettingPage()),</span><br><span class="line">    ];</span><br><span class="line">    <span class="comment">//item栏目</span></span><br><span class="line">    itemList = [</span><br><span class="line">      BtnInfo(</span><br><span class="line">        title: <span class="string">&quot;功能&quot;</span>,</span><br><span class="line">        icon: Icon(Icons.bubble_chart),</span><br><span class="line">      ),</span><br><span class="line">      BtnInfo(</span><br><span class="line">        title: <span class="string">&quot;范例&quot;</span>,</span><br><span class="line">        icon: Icon(Icons.opacity),</span><br><span class="line">      ),</span><br><span class="line">      BtnInfo(</span><br><span class="line">        title: <span class="string">&quot;设置&quot;</span>,</span><br><span class="line">        icon: Icon(Icons.settings),</span><br><span class="line">      ),</span><br><span class="line">    ];</span><br><span class="line">    <span class="comment">//页面控制器</span></span><br><span class="line">    pageController = PageController();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>logic</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> state = MainState();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="comment">///<span class="language-markdown">初始化应用信息</span></span></span><br><span class="line">    InitConfig.initApp(Get.context);</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">切换tab</span></span></span><br><span class="line">  <span class="keyword">void</span> switchTap(<span class="built_in">int</span> index) &#123;</span><br><span class="line">    state.selectedIndex = index;</span><br><span class="line">    state.pageController.jumpToPage(index);</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">是否展开侧边栏</span></span></span><br><span class="line">  <span class="keyword">void</span> onUnfold(<span class="built_in">bool</span> isUnfold) &#123;</span><br><span class="line">    state.isUnfold = !state.isUnfold;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">是否缩放</span></span></span><br><span class="line">  <span class="keyword">void</span> onScale(<span class="built_in">bool</span> isScale) &#123;</span><br><span class="line">    state.isScale = !state.isScale;</span><br><span class="line">    update();</span><br><span class="line"></span><br><span class="line">    initWindow(scale: isScale ? <span class="number">1.25</span> : <span class="number">1.0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>view</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> MainLogic logic = Get.put(MainLogic());</span><br><span class="line">  <span class="keyword">final</span> MainState state = Get.find&lt;MainLogic&gt;().state;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor: Colors.white,</span><br><span class="line">      body: Row(children: [</span><br><span class="line">        <span class="comment">///<span class="language-markdown">侧边栏区域</span></span></span><br><span class="line">        GetBuilder&lt;MainLogic&gt;(</span><br><span class="line">          builder: (logic) &#123;</span><br><span class="line">            <span class="keyword">return</span> SideNavigation(</span><br><span class="line">              selectedIndex: state.selectedIndex,</span><br><span class="line">              isUnfold: state.isUnfold,</span><br><span class="line">              isScale: state.isScale,</span><br><span class="line">              sideItems: state.itemList,</span><br><span class="line">              <span class="comment">//点击item</span></span><br><span class="line">              onItem: (index) =&gt; logic.switchTap(index),</span><br><span class="line">              <span class="comment">//展开侧边栏</span></span><br><span class="line">              onUnfold: (isUnfold) =&gt; logic.onUnfold(isUnfold),</span><br><span class="line">              <span class="comment">//缩放整体布局</span></span><br><span class="line">              onScale: (isScale) =&gt; logic.onScale(isScale),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">        <span class="comment">///<span class="language-markdown">Expanded占满剩下的空间</span></span></span><br><span class="line">        Expanded(</span><br><span class="line">          child: PageView.builder(</span><br><span class="line">            physics: NeverScrollableScrollPhysics(),</span><br><span class="line">            itemCount: state.pageList.length,</span><br><span class="line">            itemBuilder: (context, index) =&gt; state.pageList[index],</span><br><span class="line">            controller: state.pageController,</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>从上面可以看出，state层里面的状态已经较多了，当某些模块涉及到大量的：提交表单数据，跳转数据，展示数据等等，state层的代码会相当的多，相信我，真的是非常多，一旦业务发生变更，还要经常维护修改，就蛋筒了</p>
<p>在复杂的业务下，将状态层（state）和业务逻辑层（logic）分开，绝对是个明智的举动</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><ul>
<li>该模块的效果图就不放了，和上面计数器效果一模一样，想体验一下，可点击：<a href="https://link.juejin.cn/?target=https://xdd666t.github.io/flutter_use/web/index.html%23/counterHighGet">体验一下</a></li>
<li>简单的业务模块，可以使用俩层结构：logic，view；复杂的业务模块，推荐使用三层结构：state，logic，view</li>
</ul>
<h1 id="Binding的使用"><a href="#Binding的使用" class="headerlink" title="Binding的使用"></a>Binding的使用</h1><h2 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h2><p>大家可能发现了，插件上增加了addBinding的功能</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/865fd00f69fc4f799648c09a1b3edcda~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210927093135423"></p>
<p>再加上getx的demo也用了binding，想必各位靓仔就非常想使用这个功能</p>
<p>这个功能实际的作用非常简单</p>
<ul>
<li>统一管理单模块使用的GetXController</li>
<li>binding模块需要在getx路由页面进行绑定；进入页面的时候，统一懒注入binding模块的GetXController</li>
</ul>
<p>这样做当然有好处</p>
<ul>
<li>可以统一管理复杂模块的多个GetXController</li>
</ul>
<p>请注意</p>
<ul>
<li>不建议在Get.to()方法里面进行binding绑定<ul>
<li>如果存在多个页面跳转到存在binding页面，你的每个Get.to()方法都需要绑定</li>
<li>这样极其容易出bug，对后面接盘的人，十分不友好</li>
</ul>
</li>
<li>使用binding，你理应使用getx的命名路由</li>
</ul>
<p><strong>郑重申明：不使用binding，并不会对功能有任何的影响</strong></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><blockquote>
<p><strong>首先必须搭建好路由模块</strong></p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      initialRoute: RouteConfig.testOne,</span><br><span class="line">      getPages: RouteConfig.getPages,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RouteConfig</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> testOne = <span class="string">&quot;/testOne&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> testTwo = <span class="string">&quot;/testOne/testTwo&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">List</span>&lt;GetPage&gt; getPages = [</span><br><span class="line">    GetPage(</span><br><span class="line">      name: testOne,</span><br><span class="line">      page: () =&gt; TestOnePage(),</span><br><span class="line">      binding: TestOneBinding(),</span><br><span class="line">    ),</span><br><span class="line">    GetPage(</span><br><span class="line">      name: testTwo,</span><br><span class="line">      page: () =&gt; TestTwoPage(),</span><br><span class="line">      binding: TestTwoBinding(),</span><br><span class="line">    ),</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>创建页面模块</strong></p>
</blockquote>
<ul>
<li>选中addBinding功能</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a096e86c22af4b3496c0e188185770ce~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210927093312584"></p>
<ul>
<li>创建TestOne</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">///<span class="language-markdown">logic层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestOneLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> jump() =&gt; Get.toNamed(RouteConfig.testTwo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown">view层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestOnePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.find&lt;TestOneLogic&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">&#x27;页面一&#x27;</span>)),</span><br><span class="line">      body: Center(child: Text(<span class="string">&#x27;页面一&#x27;</span>, style: TextStyle(fontSize: <span class="number">30.0</span>))),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.jump(),</span><br><span class="line">        child: Icon(Icons.arrow_forward),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown">binding层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestOneBinding</span> <span class="keyword">extends</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut(() =&gt; TestOneLogic());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>TestTwo</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">///<span class="language-markdown">logic层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestTwoLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown">view层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestTwoPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.find&lt;TestTwoLogic&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">&#x27;页面二&#x27;</span>)),</span><br><span class="line">      body: Center(child: Text(<span class="string">&#x27;页面二&#x27;</span>, style: TextStyle(fontSize: <span class="number">30.0</span>))),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown">binding层</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestTwoBinding</span> <span class="keyword">extends</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut(() =&gt; TestTwoLogic());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这边我写了一个极其简单的范例，仅仅是个跳转页面的功能，我觉得，应该可以展示binding的功能了</p>
<ul>
<li>就是统一管理某个模块需要注入的多个GetXController</li>
<li>请注意，该注入是懒注入，只有使用了 find + 对应的泛型，才会被真正的注入的getx的全局map实例里</li>
</ul>
<p>实际上，手动写binding文件，还是有点麻烦，写了binding，view层的使用也需要做相应的变动</p>
<p>铁汁们，为了帮你们节省点开发时间，这点浪费你们生命且没什么技术含量的事情，已经在插件里帮你完成</p>
<ul>
<li>有需要的，选中addBinding功能即可</li>
<li>GetPage里面绑定binding的操作，只能麻烦你们自己动下手了，项目结构千变万化，这玩意没法定位</li>
</ul>
<h1 id="路由管理"><a href="#路由管理" class="headerlink" title="路由管理"></a>路由管理</h1><p><strong>GetX实现了一套用起来十分简单的路由管理，可以使用一种极其简单的方式导航，也可以使用命名路由导航</strong></p>
<p><strong>关于简单路由和命名路由的区别</strong></p>
<ul>
<li>简单路由：十分简单，看下下面的例子</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.to(SomePage());</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>命名路由<ul>
<li>在web上，可以直接通过命名的url直接导航页面</li>
<li>实现路由拦截的操作，举一个官方文档的例子：很轻松的实现了一个未登录，跳转登录页面功能</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">GetStorage box = GetStorage();</span><br><span class="line"></span><br><span class="line">GetMaterialApp(</span><br><span class="line">  getPages: [</span><br><span class="line">    GetPage(name: <span class="string">&#x27;/&#x27;</span>, page:()&#123;</span><br><span class="line">      <span class="keyword">return</span> box.hasData(<span class="string">&#x27;token&#x27;</span>) ? Home() : Login();</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="简单路由"><a href="#简单路由" class="headerlink" title="简单路由"></a>简单路由</h2><ul>
<li>主入口配置</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      home: MainPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>路由的相关使用<ul>
<li>使用是非常简单，使用Get.to()之类api即可，此处简单演示，详细api说明，放在本节结尾</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//跳转新页面</span></span><br><span class="line">Get.to(SomePage());</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="命名路由导航"><a href="#命名路由导航" class="headerlink" title="命名路由导航"></a>命名路由导航</h2><p><strong>这里是推荐使用命名路由导航的方式</strong></p>
<ul>
<li>统一管理起了所有页面</li>
<li>在app中可能感受不到，但是在web端，加载页面的url地址就是命名路由你所设置字符串，也就是说，在web中，可以直接通过url导航到相关页面</li>
</ul>
<p>下面说明下，如何使用</p>
<ul>
<li>首先，在主入口出配置下</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      initialRoute: RouteConfig.main,</span><br><span class="line">      getPages: RouteConfig.getPages,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>RouteConfig类<ul>
<li>下面是我的相关页面，和其映射的页面，请根据自己的页面进行相关编写</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RouteConfig</span> </span>&#123;</span><br><span class="line">  <span class="comment">///<span class="language-markdown">主页面</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> main = <span class="string">&quot;/&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">演示SmartDialog控件 喜马拉雅  dialog页面</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> smartDialog = <span class="string">&quot;/smartDialog&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> himalaya = <span class="string">&quot;/himalaya&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> dialog = <span class="string">&quot;/dialog&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">bloc计数器模块 Bloc跨页面传递事件</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> blCubitCounterPage = <span class="string">&quot;/blCubitCounterPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> blBlocCounterPage = <span class="string">&quot;/blBlocCounterPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> cubitSpanOne = <span class="string">&quot;/cubitSpanOne&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> cubitSpanTwo = <span class="string">&quot;/cubitSpanOne/cubitSpanTwo&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> streamPage = <span class="string">&quot;/streamPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> blCustomBuilderPage = <span class="string">&quot;/blCustomBuilderPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> counterEasyCPage = <span class="string">&quot;/counterEasyCPage&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">测试布局页面</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> testLayout = <span class="string">&quot;/testLayout&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">GetX 计数器  跨页面交互</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getCounterRx = <span class="string">&quot;/getCounterRx&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getCounterEasy = <span class="string">&quot;/counterEasyGet&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getCounterHigh = <span class="string">&quot;/counterHighGet&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getJumpOne = <span class="string">&quot;/jumpOne&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getJumpTwo = <span class="string">&quot;/jumpOne/jumpTwo&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getCounterBinding = <span class="string">&quot;/getCounterBinding&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> counterEasyXBuilderPage = <span class="string">&quot;/counterEasyXBuilder&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> counterEasyXEbxPage = <span class="string">&quot;/counterEasyXEbx&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">Provider</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> proEasyCounterPage = <span class="string">&quot;/proEasyCounterPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> proHighCounterPage = <span class="string">&quot;/proHighCounterPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> proSpanOnePage = <span class="string">&quot;/proSpanOnePage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> proSpanTwoPage = <span class="string">&quot;/proSpanOnePage/proSpanTwoPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> testNotifierPage = <span class="string">&quot;/testNotifierPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> customBuilderPage = <span class="string">&quot;/customBuilderPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> counterEasyPPage = <span class="string">&quot;/counterEasyPPage&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> counterGlobalEasyPPage = <span class="string">&quot;/counterGlobalEasyPPage&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">别名映射页面</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">List</span>&lt;GetPage&gt; getPages = [</span><br><span class="line">    GetPage(name: main, page: () =&gt; MainPage()),</span><br><span class="line">    GetPage(name: dialog, page: () =&gt; DialogPage()),</span><br><span class="line">    GetPage(name: blCubitCounterPage, page: () =&gt; BlCubitCounterPage()),</span><br><span class="line">    GetPage(name: blBlocCounterPage, page: () =&gt; BlBlocCounterPage()),</span><br><span class="line">    GetPage(name: streamPage, page: () =&gt; StreamPage()),</span><br><span class="line">    GetPage(name: blCustomBuilderPage, page: () =&gt; BlCustomBuilderPage()),</span><br><span class="line">    GetPage(name: counterEasyCPage, page: () =&gt; CounterEasyCPage()),</span><br><span class="line">    GetPage(name: testLayout, page: () =&gt; TestLayoutPage()),</span><br><span class="line">    GetPage(name: smartDialog, page: () =&gt; SmartDialogPage()),</span><br><span class="line">    GetPage(name: cubitSpanOne, page: () =&gt; CubitSpanOnePage()),</span><br><span class="line">    GetPage(name: cubitSpanTwo, page: () =&gt; CubitSpanTwoPage()),</span><br><span class="line">    GetPage(name: getCounterRx, page: () =&gt; GetCounterRxPage()),</span><br><span class="line">    GetPage(name: getCounterEasy, page: () =&gt; GetCounterEasyPage()),</span><br><span class="line">    GetPage(name: getCounterHigh, page: () =&gt; GetCounterHighPage()),</span><br><span class="line">    GetPage(name: getJumpOne, page: () =&gt; GetJumpOnePage()),</span><br><span class="line">    GetPage(name: getJumpTwo, page: () =&gt; GetJumpTwoPage()),</span><br><span class="line">    GetPage(</span><br><span class="line">      name: getCounterBinding,</span><br><span class="line">      page: () =&gt; GetCounterBindingPage(),</span><br><span class="line">      binding: GetCounterBinding(),</span><br><span class="line">    ),</span><br><span class="line">    GetPage(name: counterEasyXBuilderPage, page: () =&gt; EasyXCounterPage()),</span><br><span class="line">    GetPage(name: counterEasyXEbxPage, page: () =&gt; EasyXEbxCounterPage()),</span><br><span class="line">    GetPage(name: himalaya, page: () =&gt; HimalayaPage()),</span><br><span class="line">    GetPage(name: proEasyCounterPage, page: () =&gt; ProEasyCounterPage()),</span><br><span class="line">    GetPage(name: proHighCounterPage, page: () =&gt; ProHighCounterPage()),</span><br><span class="line">    GetPage(name: proSpanOnePage, page: () =&gt; ProSpanOnePage()),</span><br><span class="line">    GetPage(name: proSpanTwoPage, page: () =&gt; ProSpanTwoPage()),</span><br><span class="line">    GetPage(name: testNotifierPage, page: () =&gt; TestNotifierPage()),</span><br><span class="line">    GetPage(name: customBuilderPage, page: () =&gt; CustomBuilderPage()),</span><br><span class="line">    GetPage(name: counterEasyPPage, page: () =&gt; CounterEasyPPage()),</span><br><span class="line">    GetPage(name: counterGlobalEasyPPage, page: () =&gt; CounterGlobalEasyPPage()),</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="路由API"><a href="#路由API" class="headerlink" title="路由API"></a>路由API</h2><p><strong>请注意命名路由，只需要在api结尾加上<code>Named</code>即可，举例：</strong></p>
<ul>
<li>默认：Get.to(SomePage());</li>
<li>命名路由：Get.toNamed(“&#x2F;somePage”);</li>
</ul>
<p><strong>详细Api介绍，下面内容来自GetX的README文档，进行了相关整理</strong></p>
<ul>
<li>导航到新的页面</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.to(NextScreen());</span><br><span class="line">Get.toNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>关闭SnackBars、Dialogs、BottomSheets或任何你通常会用Navigator.pop(context)关闭的东西</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.back();</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>进入下一个页面，但没有返回上一个页面的选项（用于SplashScreens，登录页面等）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.off(NextScreen());</span><br><span class="line">Get.offNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>进入下一个界面并取消之前的所有路由（在购物车、投票和测试中很有用）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.offAll(NextScreen());</span><br><span class="line">Get.offAllNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>发送数据到其它页面</li>
</ul>
<p>只要发送你想要的参数即可。Get在这里接受任何东西，无论是一个字符串，一个Map，一个List，甚至一个类的实例。</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.to(NextScreen(), arguments: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br><span class="line">Get.toNamed(<span class="string">&quot;/NextScreen&quot;</span>, arguments: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在你的类或控制器上：</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(Get.arguments);</span><br><span class="line"><span class="comment">//print out: Get is the best</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>要导航到下一条路由，并在返回后立即接收或更新数据</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.to(Payment());</span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/payment&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>在另一个页面上，发送前一个路由的数据</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.back(result: <span class="string">&#x27;success&#x27;</span>);</span><br><span class="line"><span class="comment">// 并使用它，例：</span></span><br><span class="line"><span class="keyword">if</span>(data == <span class="string">&#x27;success&#x27;</span>) madeAnything();</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>如果你不想使用GetX语法，只要把 Navigator（大写）改成 navigator（小写），你就可以拥有标准导航的所有功能，而不需要使用context，例如：</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 默认的Flutter导航</span></span><br><span class="line">Navigator.of(context).push(</span><br><span class="line">  context,</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Flutter语法获得，而不需要context。</span></span><br><span class="line">navigator.push(</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (_) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// get语法</span></span><br><span class="line">Get.to(HomePage());</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>动态网页链接</strong></p>
<ul>
<li>这是一个非常重要的功能，在web端，可以<code>保证通过url传参数到页面</code>里</li>
</ul>
<p>Get提供高级动态URL，就像在Web上一样。Web开发者可能已经在Flutter上想要这个功能了，Get也解决了这个问题。</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.offAllNamed(<span class="string">&quot;/NextScreen?device=phone&amp;id=354&amp;name=Enzo&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在你的controller&#x2F;bloc&#x2F;stateful&#x2F;stateless类上：</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(Get.parameters[<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line"><span class="comment">// out: 354</span></span><br><span class="line"><span class="built_in">print</span>(Get.parameters[<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"><span class="comment">// out: Enzo</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>你也可以用Get轻松接收NamedParameters。</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">    GetMaterialApp(</span><br><span class="line">      initialRoute: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      getPages: [</span><br><span class="line">      GetPage(</span><br><span class="line">        name: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        page: () =&gt; MyHomePage(),</span><br><span class="line">      ),</span><br><span class="line">      GetPage(</span><br><span class="line">        name: <span class="string">&#x27;/profile/&#x27;</span>,</span><br><span class="line">        page: () =&gt; MyProfile(),</span><br><span class="line">      ),</span><br><span class="line">       <span class="comment">//你可以为有参数的路由定义一个不同的页面，也可以为没有参数的路由定义一个不同的页面，但是你必须在不接收参数的路由上使用斜杠&quot;/&quot;，就像上面说的那样。</span></span><br><span class="line">       GetPage(</span><br><span class="line">        name: <span class="string">&#x27;/profile/:user&#x27;</span>,</span><br><span class="line">        page: () =&gt; UserProfile(),</span><br><span class="line">      ),</span><br><span class="line">      GetPage(</span><br><span class="line">        name: <span class="string">&#x27;/third&#x27;</span>,</span><br><span class="line">        page: () =&gt; Third(),</span><br><span class="line">        transition: Transition.cupertino  </span><br><span class="line">      ),</span><br><span class="line">     ],</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>发送命名路由数据</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.toNamed(<span class="string">&quot;/profile/34954&quot;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在第二个页面上，通过参数获取数据</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(Get.parameters[<span class="string">&#x27;user&#x27;</span>]);</span><br><span class="line"><span class="comment">// out: 34954</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>现在，你需要做的就是使用Get.toNamed()来导航你的命名路由，不需要任何context(你可以直接从你的BLoC或Controller类中调用你的路由)，当你的应用程序被编译到web时，你的路由将出现在URL中。</p>
<h1 id="资源释放"><a href="#资源释放" class="headerlink" title="资源释放"></a>资源释放</h1><blockquote>
<p><strong>关于GetxController的资源释放，这个栏目的内容相当重要！</strong></p>
</blockquote>
<h2 id="资源未释放的场景"><a href="#资源未释放的场景" class="headerlink" title="资源未释放的场景"></a>资源未释放的场景</h2><p>在我们使用GetX的时候，可能没什么GetxController未被释放的感觉，这种情况，是因为我们一般都是用了getx的那一套路由跳转api（Get.to、Get.toName…）之类：使用Get.toName，肯定需要使用GetPage；如果使用Get.to，是不需要在GetPage中注册的，Get.to的内部有一个添加到GetPageRoute的操作</p>
<p>通过上面会在GetPage注册可知，说明在我们跳转页面的时候，GetX会拿你到页面信息存储起来，加以管理，下面俩种场景会导致GetxController无法释放</p>
<ul>
<li>GetxController可被自动释放的条件<ul>
<li>GetPage+Get.toName配套使用，可释放</li>
<li>直接使用Get.to，可释放</li>
</ul>
</li>
<li>GetxController无法被自动释放场景<ul>
<li>未使用GetX提供的路由跳转：直接使用原生路由api的跳转操作</li>
<li>这样会直接导致GetX无法感知对应页面GetxController的生命周期，会导致其无法释放</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Navigator.push(</span><br><span class="line">    context,</span><br><span class="line">    MaterialPageRoute(builder: (context) =&gt; XxxxPage()),</span><br><span class="line">);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>由此，可从上面可以看出，GetxController无法被释放的场景：不使用GetX路由</strong></p>
<h2 id="最优解"><a href="#最优解" class="headerlink" title="最优解"></a>最优解</h2><p>这里有个最优解方案，就算你不使用Getx路由，也能很轻松回收各个页面的GetXController，感谢 <a target="_blank" rel="noopener" href="https://juejin.cn/user/254742428916408/posts">@法的空间</a> 在评论里指出</p>
<ul>
<li>手动让getx感知路由</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: HomePage,</span><br><span class="line">      <span class="comment">///<span class="language-markdown">此处配置下！</span></span></span><br><span class="line">      navigatorObservers: [GetXRouterObserver()],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown">自定义这个关键类！！！！！！</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetXRouterObserver</span> <span class="keyword">extends</span> <span class="title">NavigatorObserver</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didPush(Route&lt;<span class="built_in">dynamic</span>&gt; route, Route&lt;<span class="built_in">dynamic</span>&gt;? previousRoute) &#123;</span><br><span class="line">    RouterReportManager.reportCurrentRoute(route);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didPop(Route&lt;<span class="built_in">dynamic</span>&gt; route, Route&lt;<span class="built_in">dynamic</span>&gt;? previousRoute) <span class="keyword">async</span> &#123;</span><br><span class="line">    RouterReportManager.reportRouteDispose(route);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>讲真的，这个原理其实很简单，但是思路很有趣；大家点进<code>reportCurrentRoute</code> 和 <code>reportRouteDispose</code> 这俩个方法，大概就知道是怎么回事了</p>
<ul>
<li><code>reportCurrentRoute</code> 就是让当前的路由标定给GetX</li>
<li>当我们进入一个页面的时候，相应GetXController会进行初始化，最终会调用 <code>_startController&lt;S&gt;(&#123;String? tag&#125;)</code>方法</li>
<li><code>_startController</code>中会调用<code>RouterReportManager.appendRouteByCreate(i)</code>，将注入的GetXController都保存起来</li>
<li>保存在一个map中，key为当前路由<code>route</code>，value为HashSet，可以保存多个GetXController</li>
<li>ok，路由关闭的时候，在<code>reportRouteDispose</code>方法中回收，key为当前<code>route</code>，遍历value中所有的GetXController回收</li>
<li>我giao，基于这种思路，大家能干很多事了！！！</li>
</ul>
<h2 id="折中方案"><a href="#折中方案" class="headerlink" title="折中方案"></a>折中方案</h2><p>如果上面的最优解没法帮你解决GetXController的回收问题，你可能就遇到特殊的场景了，一般来说，分析分析你自己的代码，基本都能分析出来</p>
<p>如果懒得分析原因，就试试下面这种折中方案吧；颗粒度极小，针对单页面维度解决</p>
<h3 id="StatefulWidget方案"><a href="#StatefulWidget方案" class="headerlink" title="StatefulWidget方案"></a>StatefulWidget方案</h3><p>这边我模拟了上面场景，写了一个解决方案</p>
<ul>
<li>第一个页面跳转</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Navigator.push(</span><br><span class="line">    Get.context,</span><br><span class="line">    MaterialPageRoute(builder: (context) =&gt; AutoDisposePage()),</span><br><span class="line">);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>演示页面<ul>
<li>这地方地方必须要使用StatefulWidget，因为在这种情况，无法感知生命周期，就需要使用StatefulWidget生命周期</li>
<li>在dispose回调处，把当前GetxController从整个GetxController管理链中删除即可</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoDisposePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _AutoDisposePageState createState() =&gt; _AutoDisposePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AutoDisposePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AutoDisposePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> AutoDisposeLogic logic = Get.put(AutoDisposeLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BaseScaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-自动释放&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Obx(</span><br><span class="line">          () =&gt; Text(<span class="string">&#x27;点击了 <span class="subst">$&#123;logic.count.value&#125;</span> 次&#x27;</span>,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">30.0</span>)),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    Get.delete&lt;AutoDisposeLogic&gt;();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoDisposeLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">自增</span></span></span><br><span class="line">  <span class="keyword">void</span> increase() =&gt; ++count;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>看到这，你可能会想，啊这！怎么这么麻烦，我怎么还要写StatefulWidget，好麻烦！</strong></p>
<p><strong>各位放心，这个问题，我也想到了，我特地在插件里面加上了自动回收的功能</strong></p>
</blockquote>
<ul>
<li>如果你写的页面无法被回收，记得勾选autoDispose<ul>
<li>怎么判断页面的GetxController是否能被回收呢？实际上很简单，上面的未被释放的场景已经描述的比较清楚了，不清楚的话，就再看看</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2355654627694c0cb003423565de737f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210922112126153"></p>
<p>来看下代码，default模式一样可以的</p>
<ul>
<li>view</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoDisposePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _AutoDisposePageState createState() =&gt; _AutoDisposePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AutoDisposePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AutoDisposePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> AutoDisposeLogic logic = Get.put(AutoDisposeLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">    Widget build(BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> Container();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    Get.delete&lt;AutoDisposeLogic&gt;();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>logic</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoDisposeLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="优化StatefulWidget方案"><a href="#优化StatefulWidget方案" class="headerlink" title="优化StatefulWidget方案"></a>优化StatefulWidget方案</h3><p>上面的是个通用解决方法，你不需要额外的引入任何其它的东西；但是这种方案用到了StatefulWidget，代码多了一大坨，让我有点膈应</p>
<p>鄙人有着相当的强迫症，想了很久，从外部入手，我就写了一个通用控件，来对相应的GetXController进行回收</p>
<p><strong>GetBindWidget</strong></p>
<ul>
<li>本控件含义：将GetXController和当前页面的生命周期绑定，页面关闭时，自动回收</li>
<li>该控件可以回收单个GetXController（bind参数），可以加上对应tag（tag参数）；也可以回收多个GetXController（binds），可以加上多个tag（tags参数，请和binds 一 一 对应；无tag的GetXController的，tag可以写成空字符：””）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">GetBindWidget can bind GetxController, and when the page is disposed,</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">it can automatically destroy the bound related GetXController</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">Sample:</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">class SampleController extends GetxController &#123;</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">  final String title = &#x27;My Awesome View&#x27;;</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#125;</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">class SamplePage extends StatelessWidget &#123;</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">  final controller = Get.put(SampleController());</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">  @override</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">  Widget build(BuildContext context) &#123;</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">    return GetBindWidget(</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">      bind: controller,</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">      child: Container(),</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">    );</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">  &#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetBindWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> GetBindWidget(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.bind,</span><br><span class="line">    <span class="keyword">this</span>.tag,</span><br><span class="line">    <span class="keyword">this</span>.binds,</span><br><span class="line">    <span class="keyword">this</span>.tags,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.child,</span><br><span class="line">  &#125;)  : <span class="keyword">assert</span>(</span><br><span class="line">          binds == <span class="keyword">null</span> || tags == <span class="keyword">null</span> || binds.length == tags.length,</span><br><span class="line">          <span class="string">&#x27;The binds and tags arrays length should be equal\n&#x27;</span></span><br><span class="line">          <span class="string">&#x27;and the elements in the two arrays correspond one-to-one&#x27;</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> GetxController? bind;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String?</span> tag;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;GetxController&gt;? binds;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;? tags;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _GetBindWidgetState createState() =&gt; _GetBindWidgetState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_GetBindWidgetState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">GetBindWidget</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> widget.child;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _closeGetXController();</span><br><span class="line">    _closeGetXControllers();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown"><span class="code">Close GetxController bound to the current page</span></span></span></span><br><span class="line">  <span class="keyword">void</span> _closeGetXController() &#123;</span><br><span class="line">    <span class="keyword">if</span> (widget.bind == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> key = widget.bind.runtimeType.toString() + (widget.tag ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    GetInstance().delete(key: key);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown"><span class="code">Batch close GetxController bound to the current page</span></span></span></span><br><span class="line">  <span class="keyword">void</span> _closeGetXControllers() &#123;</span><br><span class="line">    <span class="keyword">if</span> (widget.binds == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; widget.binds!.length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> type = widget.binds![i].runtimeType.toString();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (widget.tags == <span class="keyword">null</span>) &#123;</span><br><span class="line">        GetInstance().delete(key: type);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> key = type + (widget.tags?[i] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        GetInstance().delete(key: key);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>使用非常的简单</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// <span class="language-markdown">回收单个GetXController</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logic = Get.put(TestLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetBindWidget(</span><br><span class="line">      bind: logic,</span><br><span class="line">      child: Container(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">回收多个GetXController</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> logicOne = Get.put(TestLogic(), tag: <span class="string">&#x27;one&#x27;</span>);</span><br><span class="line">  <span class="keyword">final</span> logicTwo = Get.put(TestLogic());</span><br><span class="line">  <span class="keyword">final</span> logicThree = Get.put(TestLogic(), tag: <span class="string">&#x27;three&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetBindWidget(</span><br><span class="line">      binds: [logicOne, logicTwo, logicThree],</span><br><span class="line">      tags: [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;three&#x27;</span>],</span><br><span class="line">      child: Container(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">回收日志</span></span></span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> has been created <span class="keyword">with</span> tag <span class="string">&quot;one&quot;</span></span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> <span class="keyword">with</span> tag <span class="string">&quot;one&quot;</span> has been initialized</span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> has been created</span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> has been initialized</span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> has been created <span class="keyword">with</span> tag <span class="string">&quot;three&quot;</span></span><br><span class="line">[GETX] Instance <span class="string">&quot;TestLogic&quot;</span> <span class="keyword">with</span> tag <span class="string">&quot;three&quot;</span> has been initialized</span><br><span class="line">[GETX] <span class="string">&quot;TestLogicone&quot;</span> onDelete() called</span><br><span class="line">[GETX] <span class="string">&quot;TestLogicone&quot;</span> deleted from memory</span><br><span class="line">[GETX] <span class="string">&quot;TestLogic&quot;</span> onDelete() called</span><br><span class="line">[GETX] <span class="string">&quot;TestLogic&quot;</span> deleted from memory</span><br><span class="line">[GETX] <span class="string">&quot;TestLogicthree&quot;</span> onDelete() called</span><br><span class="line">[GETX] <span class="string">&quot;TestLogicthree&quot;</span> deleted from memory</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h1 id="一些问题汇总"><a href="#一些问题汇总" class="headerlink" title="一些问题汇总"></a>一些问题汇总</h1><blockquote>
<p>如果使用中，有比较坑的问题，希望大家在评论里提出来，我会在这个栏目汇总一下</p>
</blockquote>
<ol>
<li><strong>无法跳转重复页面</strong></li>
</ol>
<ul>
<li>另一种表现形式：使用Get.to（Get.toName）在系统Dialog上跳转页面，未关闭Dialog；返回，再跳转，会出现无法跳转的情况</li>
</ul>
<p>debug了下to方法内部的运行，发现他用了一个preventDuplicates参数，限制跳转重复页面</p>
<ul>
<li>为什么这样做？<ul>
<li>优点：能解决多次点击跳转按钮，跳转多个重复页面的问题</li>
<li>缺点：限制了复杂业务跳转重复页面的场景</li>
</ul>
</li>
</ul>
<p>当然上面的缺点也不算是缺点，毕竟已经给了参数可以控制</p>
<ul>
<li>跳转重复页面，可以这样写</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Get.to(XxxxPage(), preventDuplicates: <span class="keyword">false</span>);</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line">Get.toNamed(<span class="string">&#x27;xxx&#x27;</span>,  preventDuplicates: <span class="keyword">false</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>使用PageView时，所有PageView页面控制器，全被初始化问题</strong></li>
</ol>
<p>大家使用PageView，添加PageView页面，PageView页面用GetX构成，会发现所有的PageView页面控制器全被初始化了！并不是切换到某个页面时，对应页面的控制器才被初始化！</p>
<p>PageView切换到某个页面的时候，才会调用对应Page页面的build方法；<code>对于PageView页面，控制器的注入过程，不能写在类中了，需要将其移入到build方法中初始化。</code></p>
<ul>
<li>正常页面，注入写法（非PageView页面）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterEasyGetPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> CounterEasyGetLogic logic = Get.put(CounterEasyGetLogic());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-简单式&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: GetBuilder&lt;CounterEasyGetLogic&gt;(</span><br><span class="line">          builder: (logicGet) =&gt; Text(</span><br><span class="line">            <span class="string">&#x27;点击了 <span class="subst">$&#123;logicGet.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">            style: TextStyle(fontSize: <span class="number">30.0</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>PageView页面，初始化位置必须调整</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterEasyGetPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> CounterEasyGetLogic logic = Get.put(CounterEasyGetLogic());</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器-简单式&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: GetBuilder&lt;CounterEasyGetLogic&gt;(</span><br><span class="line">          builder: (logicGet) =&gt; Text(</span><br><span class="line">            <span class="string">&#x27;点击了 <span class="subst">$&#123;logicGet.count&#125;</span> 次&#x27;</span>,</span><br><span class="line">            style: TextStyle(fontSize: <span class="number">30.0</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; logic.increase(),</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>大家如果觉得手动移太麻烦的话，也可以选中插件的 <strong>isPageView</strong> 功能</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d3166f7d25e4c6493842daad09eeed1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image-20210927093414647"></p>
<h1 id="最后-1"><a href="#最后-1" class="headerlink" title="最后"></a>最后</h1><h2 id="相关地址"><a href="#相关地址" class="headerlink" title="相关地址"></a>相关地址</h2><ul>
<li><p>文中DEMO地址：<a href="https://link.juejin.cn/?target=https://github.com/xdd666t/flutter_use">flutter_use</a></p>
</li>
<li><p>GetX插件地址：<a href="https://link.juejin.cn/?target=https://github.com/xdd666t/getx_template">getx_template</a></p>
</li>
<li><p>Windows：</p>
<p>Windows平台安装包</p>
<ul>
<li>密码：xdd666</li>
</ul>
</li>
</ul>
<h2 id="系列文章"><a href="#系列文章" class="headerlink" title="系列文章"></a>系列文章</h2><blockquote>
<p>引流了，手动滑稽.png</p>
</blockquote>
<ul>
<li>IDEA插件：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7005003323753365517">GetX代码生成IDEA插件，超详细功能讲解（透过现象看本质）</a></li>
<li>GetX原理：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6984593635681517582">Flutter GetX深度剖析 | 我们终将走出自己的路（万字图文）</a></li>
<li>告别克苏鲁代码山：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6939774499399139336">Flutter 改善套娃地狱问题（仿喜马拉雅PC页面举例）</a></li>
<li>让Dialog拥有更多可能：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7026150456673959943">这一次，解决Flutter Dialog的各种痛点！</a></li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/getx.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/b5e6e462/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/flutter.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Flutter项目搭建</div></div></a></div><div class="next-post pull-right"><a href="/posts/c1fb37dd/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/dartflutter.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Dart&amp;Flutter</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-text">准备</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5"><span class="toc-text">引入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%85%A5%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-text">主入口配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%9B%BE"><span class="toc-text">效果图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-text">计数器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%9B%BE-1"><span class="toc-text">效果图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-text">实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">简单状态管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">响应式状态管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%A8%E9%A1%B5%E9%9D%A2%E4%BA%A4%E4%BA%92"><span class="toc-text">跨页面交互</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%9B%BE-2"><span class="toc-text">效果图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-1"><span class="toc-text">实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%80"><span class="toc-text">页面一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%BA%8C"><span class="toc-text">页面二</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E5%90%A7%EF%BC%81%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-text">进阶吧！计数器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E9%80%A0"><span class="toc-text">改造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94"><span class="toc-text">对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-text">最后</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Binding%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">Binding的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E-1"><span class="toc-text">说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86"><span class="toc-text">路由管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%B7%AF%E7%94%B1"><span class="toc-text">简单路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-text">命名路由导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1API"><span class="toc-text">路由API</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E9%87%8A%E6%94%BE"><span class="toc-text">资源释放</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%9C%AA%E9%87%8A%E6%94%BE%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">资源未释放的场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BC%98%E8%A7%A3"><span class="toc-text">最优解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%98%E4%B8%AD%E6%96%B9%E6%A1%88"><span class="toc-text">折中方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#StatefulWidget%E6%96%B9%E6%A1%88"><span class="toc-text">StatefulWidget方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96StatefulWidget%E6%96%B9%E6%A1%88"><span class="toc-text">优化StatefulWidget方案</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB"><span class="toc-text">一些问题汇总</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E5%90%8E-1"><span class="toc-text">最后</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%9C%B0%E5%9D%80"><span class="toc-text">相关地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0"><span class="toc-text">系列文章</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/getx.webp')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By Ramsayi</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://www.gushici.com/t_782">满堂花醉三千客，一剑霜寒十四州</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'hYhAkaCoGek8gsKP8H2vLfmS-gzGzoHsz',
      appKey: '8Cxp5qHQuHTnuUIsOuPqWoQk',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="//code.tidio.co/fxk9glqedvgfb9eqhzyajcc3o4oupxbo.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && location.pathname =='/'){
    
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo-theme-butterfly.webp" alt="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo-theme-butterfly.webp"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-09-08</span><a class="blog-slider__title" href="posts/23ce82cf/">Butterfly主题配置</a><div class="blog-slider__text">Butterfly主题配置</div><a class="blog-slider__button" href="posts/23ce82cf/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo.webp" alt="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo.webp"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-07-07</span><a class="blog-slider__title" href="posts/b8f4bd70/">Hexo博客搭建</a><div class="blog-slider__text">Hexo博客搭建</div><a class="blog-slider__button" href="posts/b8f4bd70/">详情</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载swiper')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script>
<style></style> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='all'|| 'all' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/踩坑记录/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 Ramsayiの踩坑记录 (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/参考手册/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 Ramsayiの参考手册 (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/技术学习/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎉 Ramsayiの技术学习 (103)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/建站博客/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 Ramsayiの建站博客 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/逆向破解/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 Ramsayiの逆向破解 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/效率办公/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 Ramsayiの效率办公 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://ramsayi.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #304ffe}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style>
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?ramsayi";
            var git_color =['#f3f5ff', '#ccd4ff', '#a5b3ff', '#7e91fe', '#5770fe', '#304ffe', '#092efe', '#0122de', '#011cb7', '#011690', '#011069'];
            var git_user ="ramsayi";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>