<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vueå…¨å®¶æ¡¶-é¡¹ç›®å®æˆ˜ | ğ™ğ™–ğ™¢ğ™¨ğ™–ğ™®ğ™'ğ™¨ ğ˜½ğ™¡ğ™¤ğ™œ</title><meta name="keywords" content="Vue2"><meta name="author" content="Ramsayi"><meta name="copyright" content="Ramsayi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä¸€ã€ä»Šæ—¥ç›®æ ‡1.åˆå§‹åŒ–é¡¹ç›®2.åŸºäºVueæŠ€æœ¯æ ˆè¿›è¡Œé¡¹ç›®å¼€å‘3.ä½¿ç”¨Vueçš„ç¬¬ä¸‰æ–¹ç»„ä»¶è¿›è¡Œé¡¹ç›®å¼€å‘4.ç†è§£å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ 1.ç”µå•†ä¸šåŠ¡æ¦‚è¿°å®¢æˆ·ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCç«¯ï¼Œå°ç¨‹åºï¼Œç§»åŠ¨webï¼Œç§»åŠ¨appç®¡ç†å‘˜ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCåå°ç®¡ç†ç«¯ã€‚PCåå°ç®¡ç†ç«¯çš„åŠŸèƒ½ï¼šç®¡ç†ç”¨æˆ·è´¦å·ï¼ˆç™»å½•ï¼Œé€€å‡ºï¼Œç”¨æˆ·ç®¡ç†ï¼Œæƒé™ç®¡ç†ï¼‰ï¼Œå•†å“ç®¡ç†ï¼ˆå•†å“åˆ†ç±»ï¼Œåˆ†ç±»å‚æ•°ï¼Œå•†å“ä¿¡æ¯ï¼Œè®¢å•ï¼‰ï¼Œæ•°æ®ç»Ÿè®¡ç”µå•†åå°ç®¡ç†ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡">
<meta property="og:type" content="article">
<meta property="og:title" content="Vueå…¨å®¶æ¡¶-é¡¹ç›®å®æˆ˜">
<meta property="og:url" content="https://ramsayi.github.io/posts/1386d0b9/index.html">
<meta property="og:site_name" content="ğ™ğ™–ğ™¢ğ™¨ğ™–ğ™®ğ™&#39;ğ™¨ ğ˜½ğ™¡ğ™¤ğ™œ">
<meta property="og:description" content="ä¸€ã€ä»Šæ—¥ç›®æ ‡1.åˆå§‹åŒ–é¡¹ç›®2.åŸºäºVueæŠ€æœ¯æ ˆè¿›è¡Œé¡¹ç›®å¼€å‘3.ä½¿ç”¨Vueçš„ç¬¬ä¸‰æ–¹ç»„ä»¶è¿›è¡Œé¡¹ç›®å¼€å‘4.ç†è§£å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ 1.ç”µå•†ä¸šåŠ¡æ¦‚è¿°å®¢æˆ·ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCç«¯ï¼Œå°ç¨‹åºï¼Œç§»åŠ¨webï¼Œç§»åŠ¨appç®¡ç†å‘˜ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCåå°ç®¡ç†ç«¯ã€‚PCåå°ç®¡ç†ç«¯çš„åŠŸèƒ½ï¼šç®¡ç†ç”¨æˆ·è´¦å·ï¼ˆç™»å½•ï¼Œé€€å‡ºï¼Œç”¨æˆ·ç®¡ç†ï¼Œæƒé™ç®¡ç†ï¼‰ï¼Œå•†å“ç®¡ç†ï¼ˆå•†å“åˆ†ç±»ï¼Œåˆ†ç±»å‚æ•°ï¼Œå•†å“ä¿¡æ¯ï¼Œè®¢å•ï¼‰ï¼Œæ•°æ®ç»Ÿè®¡ç”µå•†åå°ç®¡ç†ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/vuejs.webp">
<meta property="article:published_time" content="2022-06-10T13:29:12.000Z">
<meta property="article:modified_time" content="2022-09-26T14:20:18.000Z">
<meta property="article:author" content="Ramsayi">
<meta property="article:tag" content="Vue2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/vuejs.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/ramsayi/src/img/logo/logo_1.png"><link rel="canonical" href="https://ramsayi.github.io/posts/1386d0b9/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"è¿™ç¯‡æ–‡ç« å·²ç»","messageNext":"å¤©æœªæ›´æ–°äº†ï¼Œå…¶ä¸­çš„å†…å®¹å¯èƒ½å·²ç»ä¸å†é€‚ç”¨äº†ã€‚"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":1000},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#304ffe","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vueå…¨å®¶æ¡¶-é¡¹ç›®å®æˆ˜',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-26 22:20:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/ramsayi.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/logo/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">135</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">50</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">36</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> å‰ç«¯</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://dart.cn/guides"><i class="fa-fw fas fa-book"></i><span> Dartä¸­æ–‡æ–‡æ¡£</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.flutterchina.club/docs/"><i class="fa-fw fas fa-book"></i><span> Flutterä¸­æ–‡æ–‡æ¡£</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://book.flutterchina.club/"><i class="fa-fw fas fa-book"></i><span> Flutterå®æˆ˜</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> åç«¯</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1016959663602400"><i class="fa-fw fas fa-book"></i><span> Pythonæ•™ç¨‹ - å»–é›ªå³°</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1177760294764384"><i class="fa-fw fas fa-book"></i><span> SQLæ•™ç¨‹ - å»–é›ªå³°</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chevron-circle-down"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//scabet.github.io/"><i class="fa-fw fas fa-compass"></i><span> Scabet</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbk.github.io/"><i class="fa-fw fas fa-compass"></i><span> ç½‘å€å¯¼èˆª</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbs.github.io/"><i class="fa-fw fas fa-compass"></i><span> èŠ±é‡Œèƒ¡å“¨</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbt.github.io/"><i class="fa-fw fas fa-compass"></i><span> Aabbt</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//swclub.github.io/"><i class="fa-fw fas fa-compass"></i><span> SWClub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/vuejs.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ğ™ğ™–ğ™¢ğ™¨ğ™–ğ™®ğ™'ğ™¨ ğ˜½ğ™¡ğ™¤ğ™œ</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> å‰ç«¯</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://dart.cn/guides"><i class="fa-fw fas fa-book"></i><span> Dartä¸­æ–‡æ–‡æ¡£</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.flutterchina.club/docs/"><i class="fa-fw fas fa-book"></i><span> Flutterä¸­æ–‡æ–‡æ¡£</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://book.flutterchina.club/"><i class="fa-fw fas fa-book"></i><span> Flutterå®æˆ˜</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> åç«¯</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1016959663602400"><i class="fa-fw fas fa-book"></i><span> Pythonæ•™ç¨‹ - å»–é›ªå³°</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//www.liaoxuefeng.com/wiki/1177760294764384"><i class="fa-fw fas fa-book"></i><span> SQLæ•™ç¨‹ - å»–é›ªå³°</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chevron-circle-down"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="//scabet.github.io/"><i class="fa-fw fas fa-compass"></i><span> Scabet</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbk.github.io/"><i class="fa-fw fas fa-compass"></i><span> ç½‘å€å¯¼èˆª</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbs.github.io/"><i class="fa-fw fas fa-compass"></i><span> èŠ±é‡Œèƒ¡å“¨</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//aabbt.github.io/"><i class="fa-fw fas fa-compass"></i><span> Aabbt</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="//swclub.github.io/"><i class="fa-fw fas fa-compass"></i><span> SWClub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vueå…¨å®¶æ¡¶-é¡¹ç›®å®æˆ˜</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-06-10T13:29:12.000Z" title="å‘è¡¨äº 2022-06-10 21:29:12">2022-06-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-09-26T14:20:18.000Z" title="æ›´æ–°äº 2022-09-26 22:20:18">2022-09-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">æŠ€æœ¯å­¦ä¹ </a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Vue/">Vue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">33.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>153åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/posts/1386d0b9/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/posts/1386d0b9/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="ä¸€ã€ä»Šæ—¥ç›®æ ‡"><a href="#ä¸€ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä¸€ã€ä»Šæ—¥ç›®æ ‡"></a>ä¸€ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.åˆå§‹åŒ–é¡¹ç›®<br>2.åŸºäºVueæŠ€æœ¯æ ˆè¿›è¡Œé¡¹ç›®å¼€å‘<br>3.ä½¿ç”¨Vueçš„ç¬¬ä¸‰æ–¹ç»„ä»¶è¿›è¡Œé¡¹ç›®å¼€å‘<br>4.ç†è§£å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼</p>
<h3 id="1-ç”µå•†ä¸šåŠ¡æ¦‚è¿°"><a href="#1-ç”µå•†ä¸šåŠ¡æ¦‚è¿°" class="headerlink" title="1.ç”µå•†ä¸šåŠ¡æ¦‚è¿°"></a>1.ç”µå•†ä¸šåŠ¡æ¦‚è¿°</h3><p>å®¢æˆ·ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCç«¯ï¼Œå°ç¨‹åºï¼Œç§»åŠ¨webï¼Œç§»åŠ¨app<br>ç®¡ç†å‘˜ä½¿ç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼šPCåå°ç®¡ç†ç«¯ã€‚<br>PCåå°ç®¡ç†ç«¯çš„åŠŸèƒ½ï¼šç®¡ç†ç”¨æˆ·è´¦å·ï¼ˆç™»å½•ï¼Œé€€å‡ºï¼Œç”¨æˆ·ç®¡ç†ï¼Œæƒé™ç®¡ç†ï¼‰ï¼Œå•†å“ç®¡ç†ï¼ˆå•†å“åˆ†ç±»ï¼Œåˆ†ç±»å‚æ•°ï¼Œå•†å“ä¿¡æ¯ï¼Œè®¢å•ï¼‰ï¼Œæ•°æ®ç»Ÿè®¡<br>ç”µå•†åå°ç®¡ç†ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼<br>å‰ç«¯é¡¹ç›®æ˜¯åŸºäºVueçš„SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰é¡¹ç›®</p>
<p>å‰ç«¯æŠ€æœ¯æ ˆ:Vue,Vue-Router,Element-UI,Axios,Echarts<br>åç«¯æŠ€æœ¯æ ˆï¼šNode.js,Express,Jwt(æ¨¡æ‹Ÿsession),Mysql,Sequelize(æ“ä½œæ•°æ®åº“çš„æ¡†æ¶)</p>
<h3 id="2-é¡¹ç›®åˆå§‹åŒ–"><a href="#2-é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="2.é¡¹ç›®åˆå§‹åŒ–"></a>2.é¡¹ç›®åˆå§‹åŒ–</h3><p>A.å®‰è£…Vueè„šæ‰‹æ¶<br>B.é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®<br>C.é…ç½®è·¯ç”±<br>D.é…ç½®Element-UI:åœ¨æ’ä»¶ä¸­å®‰è£…ï¼Œæœç´¢vue-cli-plugin-element<br>E.é…ç½®Axiosï¼šåœ¨ä¾èµ–ä¸­å®‰è£…,æœç´¢axios(è¿è¡Œä¾èµ–)<br>F.åˆå§‹åŒ–gitä»“åº“<br>G.å°†æœ¬åœ°é¡¹ç›®æ‰˜ç®¡åˆ°githubæˆ–è€…ç äº‘ä¸­</p>
<h3 id="3-ç äº‘ç›¸å…³æ“ä½œ"><a href="#3-ç äº‘ç›¸å…³æ“ä½œ" class="headerlink" title="3.ç äº‘ç›¸å…³æ“ä½œ"></a>3.ç äº‘ç›¸å…³æ“ä½œ</h3><p>A.æ³¨å†Œç™»å½•ç äº‘è´¦å·<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E6%B3%A8%E5%86%8C%E7%A0%81%E4%BA%91.jpg"></p>
<p>B.å®‰è£…git<br>    åœ¨Windowsä¸Šä½¿ç”¨Gitï¼Œå¯ä»¥ä»Gitå®˜ç½‘ç›´æ¥ä¸‹è½½å®‰è£…ç¨‹åºè¿›è¡Œå®‰è£…ã€‚<br>    æµ‹è¯•å‘½ä»¤ï¼šgit â€“version</p>
<p>C.ç‚¹å‡»ç½‘ç«™å³ä¸Šè§’â€œç™»å½•â€ï¼Œç™»å½•ç äº‘ï¼Œå¹¶è¿›è¡Œè´¦å·è®¾ç½®<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E7%A0%81%E4%BA%91%E7%82%B9%E5%87%BB%E8%AE%BE%E7%BD%AE.jpg"></p>
<p>D.åœ¨æœ¬åœ°åˆ›å»ºå…¬é’¥ï¼šåœ¨ç»ˆç«¯è¿è¡Œï¼šssh-keygen -t rsa -C â€œ<a href="mailto:&#120;&#x78;&#x78;&#64;&#120;&#x78;&#120;&#46;&#99;&#x6f;&#109;">&#120;&#x78;&#x78;&#64;&#120;&#x78;&#120;&#46;&#99;&#x6f;&#109;</a>â€œ<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BA%E5%85%AC%E9%92%A5.jpg"><br>E.æ‰¾åˆ°å…¬é’¥åœ°å€ï¼š<br>Your identification has been saved in &#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.<br>Your public key has been saved in &#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.pub.<br>å½“æˆ‘ä»¬åˆ›å»ºå…¬é’¥å®Œæ¯•ä¹‹åï¼Œè¯·æ³¨æ„æ‰“å°å‡ºæ¥çš„ä¿¡æ¯â€œYour public key has been saved inâ€<br>&#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.pub : cç›˜ä¸‹é¢çš„Usersä¸‹é¢çš„Myä¸‹é¢çš„.sshä¸‹é¢çš„id_rsa.pubå°±æ˜¯æˆ‘ä»¬åˆ›å»ºå¥½çš„å…¬é’¥äº†</p>
<p>E.æ‰“å¼€id_rsa.pubæ–‡ä»¶ï¼Œå¤åˆ¶æ–‡ä»¶ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œç‚¹å‡»ç äº‘ä¸­çš„SSHå…¬é’¥ï¼Œå°†ç”Ÿæˆçš„å…¬é’¥å¤åˆ¶åˆ°å…¬é’¥ä¸­<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/pub%E6%96%87%E4%BB%B6.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/ssh%E5%85%AC%E9%92%A5.jpg"><br>G.æµ‹è¯•å…¬é’¥ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤<br>ssh -T <a href="mailto:&#103;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x65;&#x65;&#46;&#99;&#x6f;&#109;">&#103;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x65;&#x65;&#46;&#99;&#x6f;&#109;</a><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/success.jpg"></p>
<p>H.å°†æœ¬åœ°ä»£ç æ‰˜ç®¡åˆ°ç äº‘ä¸­<br>ç‚¹å‡»ç äº‘å³ä¸Šè§’çš„+å·-&gt;æ–°å»ºä»“åº“<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93.jpg"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%932.jpg"></p>
<p>I.è¿›è¡Œgité…ç½®ï¼š<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/config.jpg"><br>æ‰“å¼€é¡¹ç›®æ‰€åœ¨ä½ç½®çš„ç»ˆç«¯ï¼Œè¿›è¡Œgitä»“åº“å…³è”<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E9%A1%B9%E7%9B%AE%E7%BB%88%E7%AB%AF%E6%89%A7%E8%A1%8C%E5%85%B3%E8%81%94.jpg"></p>
<h3 id="4-é…ç½®åå°é¡¹ç›®"><a href="#4-é…ç½®åå°é¡¹ç›®" class="headerlink" title="4.é…ç½®åå°é¡¹ç›®"></a>4.é…ç½®åå°é¡¹ç›®</h3><p>A.å®‰è£…phpStudyå¹¶å¯¼å…¥mysqlæ•°æ®åº“æ•°æ®<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/phpStudy.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/mysql.jpg"><br>B.å®‰è£…nodeJSï¼Œé…ç½®åå°é¡¹ç›®,ä»ç»ˆç«¯æ‰“å¼€åå°é¡¹ç›®vue_api_server<br>ç„¶ååœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤å®‰è£…é¡¹ç›®ä¾èµ–åŒ…ï¼šnpm install</p>
<p>C.ä½¿ç”¨postmanæµ‹è¯•apiæ¥å£<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/postman.jpg"></p>
<h3 id="5-å®ç°ç™»å½•åŠŸèƒ½"><a href="#5-å®ç°ç™»å½•åŠŸèƒ½" class="headerlink" title="5.å®ç°ç™»å½•åŠŸèƒ½"></a>5.å®ç°ç™»å½•åŠŸèƒ½</h3><p>A.ç™»å½•çŠ¶æ€ä¿æŒ<br>å¦‚æœæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åŒæºï¼Œå»ºè®®å¯ä»¥ä½¿ç”¨cookieæˆ–è€…sessionæ¥ä¿æŒç™»å½•çŠ¶æ€<br>å¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è·¨åŸŸäº†ï¼Œå»ºè®®ä½¿ç”¨tokenè¿›è¡Œç»´æŒç™»å½•çŠ¶æ€ã€‚</p>
<p>B.ç™»å½•é€»è¾‘ï¼š<br>åœ¨ç™»å½•é¡µé¢è¾“å…¥è´¦å·å’Œå¯†ç è¿›è¡Œç™»å½•ï¼Œå°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨<br>æœåŠ¡å™¨è¿”å›ç™»å½•çš„ç»“æœï¼Œç™»å½•æˆåŠŸåˆ™è¿”å›æ•°æ®ä¸­å¸¦æœ‰token<br>å®¢æˆ·ç«¯å¾—åˆ°tokenå¹¶è¿›è¡Œä¿å­˜ï¼Œåç»­çš„è¯·æ±‚éƒ½éœ€è¦å°†æ­¤tokenå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šéªŒè¯tokenä»¥ä¿è¯ç”¨æˆ·èº«ä»½ã€‚</p>
<p>C.æ·»åŠ æ–°åˆ†æ”¯loginï¼Œåœ¨loginåˆ†æ”¯ä¸­å¼€å‘å½“å‰é¡¹ç›®vue_shopï¼š<br>æ‰“å¼€vue_shopç»ˆç«¯ï¼Œä½¿ç”¨git statusç¡®å®šå½“å‰é¡¹ç›®çŠ¶æ€ã€‚<br>ç¡®å®šå½“å‰å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªåˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œå¼€å‘å®Œæ¯•ä¹‹åå°†å…¶åˆå¹¶åˆ°master<br>git checkout -b login<br>ç„¶åæŸ¥çœ‹æ–°åˆ›å»ºçš„åˆ†æ”¯ï¼šgit branch<br>ç¡®å®šæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨loginåˆ†æ”¯è¿›è¡Œå¼€å‘<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/branch.jpg"></p>
<p>ç„¶åæ‰§è¡Œvue uiå‘½ä»¤æ‰“å¼€uiç•Œé¢ï¼Œç„¶åè¿è¡Œserveï¼Œè¿è¡ŒappæŸ¥çœ‹å½“å‰é¡¹ç›®æ•ˆæœ<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/ui%E7%95%8C%E9%9D%A2%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE.jpg"></p>
<p>å‘ç°ç°åœ¨æ˜¯ä¸€ä¸ªé»˜è®¤é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ›´æ”¹ï¼Œæ‰“å¼€é¡¹ç›®çš„srcç›®å½•ï¼Œç‚¹å‡»main.jsæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./plugins/element.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>å†æ‰“å¼€App.vue(æ ¹ç»„ä»¶)ï¼Œå°†æ ¹ç»„ä»¶çš„å†…å®¹è¿›è¡Œæ“ä½œæ¢³ç†(templateä¸­ç•™ä¸‹æ ¹èŠ‚ç‚¹ï¼Œscriptä¸­ç•™ä¸‹é»˜è®¤å¯¼å‡ºï¼Œå»æ‰ç»„ä»¶ï¼Œstyleä¸­å»æ‰æ‰€æœ‰æ ·å¼)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>å†æ‰“å¼€router.js(è·¯ç”±)ï¼Œå°†routesæ•°ç»„ä¸­çš„è·¯ç”±è§„åˆ™æ¸…é™¤ï¼Œç„¶åå°†viewsåˆ é™¤ï¼Œå°†componentsä¸­çš„helloworld.vueåˆ é™¤</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    </span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨componentsæ–‡ä»¶å¤¹ä¸­æ–°å»ºLogin.vueç»„ä»¶,æ·»åŠ templateï¼Œscriptï¼Œstyleæ ‡ç­¾,styleæ ‡ç­¾ä¸­çš„scopedå¯ä»¥é˜²æ­¢ç»„ä»¶ä¹‹é—´çš„æ ·å¼å†²çªï¼Œæ²¡æœ‰scopedåˆ™æ ·å¼æ˜¯å…¨å±€çš„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;login_container&quot;&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login_container &#123;</span><br><span class="line">  background-color: #2b5b6b;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨router.jsä¸­å¯¼å…¥ç»„ä»¶å¹¶è®¾ç½®è§„åˆ™<br>åœ¨App.vueä¸­æ·»åŠ è·¯ç”±å ä½ç¬¦</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬ç»™Login.vueä¸­çš„å†…å®¹æ·»åŠ æ ·å¼çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™â€œç¼ºå°‘less-loaderâ€ï¼Œéœ€è¦é…ç½®lessåŠ è½½å™¨ï¼ˆå¼€å‘ä¾èµ–ï¼‰ï¼Œå®‰è£…less(å¼€å‘ä¾èµ–)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/less.jpg"><br>ç„¶åéœ€è¦æ·»åŠ å…¬å…±æ ·å¼ï¼Œåœ¨assetsæ–‡ä»¶å¤¹ä¸‹é¢æ·»åŠ cssæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºglobal.cssæ–‡ä»¶,æ·»åŠ å…¨å±€æ ·å¼</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å…¨å±€æ ·å¼è¡¨ */</span></span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-id">#app</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨main.jsä¸­å¯¼å…¥global.cssï¼Œä½¿å¾—å…¨å±€æ ·å¼ç”Ÿæ•ˆ import â€œ.&#x2F;assets&#x2F;css&#x2F;global.cssâ€<br>ç„¶åLogin.vueä¸­çš„æ ¹å…ƒç´ ä¹Ÿéœ€è¦è®¾ç½®æ’‘æ»¡å…¨å±ï¼ˆheight:100%ï¼‰<br>æœ€ç»ˆLogin.vueæ–‡ä»¶ä¸­çš„ä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;login_container&quot;&gt;</span><br><span class="line">        &lt;!-- ç™»å½•ç›’å­  --&gt;</span><br><span class="line">        &lt;div class=&quot;login_box&quot;&gt;</span><br><span class="line">            &lt;!-- å¤´åƒ --&gt;</span><br><span class="line">            &lt;div class=&quot;avatar_box&quot;&gt;</span><br><span class="line">                &lt;img src=&quot;../assets/logo.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- ç™»å½•è¡¨å• --&gt;</span><br><span class="line">            &lt;el-form :model=&quot;loginForm&quot; ref=&quot;LoginFormRef&quot; :rules=&quot;loginFormRules&quot; label-width=&quot;0px&quot; class=&quot;login_form&quot;&gt;</span><br><span class="line">                &lt;!-- ç”¨æˆ·å --&gt;</span><br><span class="line">                &lt;el-form-item prop=&quot;username&quot;&gt;</span><br><span class="line">                    &lt;el-input v-model=&quot;loginForm.username&quot; prefix-icon=&quot;iconfont icon-user&quot; &gt;&lt;/el-input&gt;</span><br><span class="line">                &lt;/el-form-item&gt; </span><br><span class="line">                &lt;!-- å¯†ç  --&gt;</span><br><span class="line">                &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">                    &lt;el-input type=&quot;password&quot; v-model=&quot;loginForm.password&quot; prefix-icon=&quot;iconfont icon-3702mima&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                &lt;/el-form-item&gt; </span><br><span class="line">                &lt;!-- æŒ‰é’® --&gt;</span><br><span class="line">                &lt;el-form-item class=&quot;btns&quot;&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot; @click=&quot;login&quot;&gt;ç™»å½•&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button type=&quot;info&quot; @click=&quot;resetLoginForm&quot;&gt;é‡ç½®&lt;/el-button&gt;</span><br><span class="line">                &lt;/el-form-item&gt; </span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //æ•°æ®ç»‘å®š</span><br><span class="line">      loginForm: &#123;</span><br><span class="line">        username: &#x27;admin&#x27;,</span><br><span class="line">        password: &#x27;123456&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //è¡¨å•éªŒè¯è§„åˆ™</span><br><span class="line">      loginFormRules: &#123;</span><br><span class="line">        username: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥ç™»å½•å&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            min: 3,</span><br><span class="line">            max: 10,</span><br><span class="line">            message: &#x27;ç™»å½•åé•¿åº¦åœ¨ 3 åˆ° 10 ä¸ªå­—ç¬¦&#x27;,</span><br><span class="line">            trigger: &#x27;blur&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        password: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥å¯†ç &#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            min: 6,</span><br><span class="line">            max: 15,</span><br><span class="line">            message: &#x27;å¯†ç é•¿åº¦åœ¨ 6 åˆ° 15 ä¸ªå­—ç¬¦&#x27;,</span><br><span class="line">            trigger: &#x27;blur&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //æ·»åŠ è¡Œä¸ºï¼Œ</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //æ·»åŠ è¡¨å•é‡ç½®æ–¹æ³•</span><br><span class="line">    resetLoginForm() &#123;</span><br><span class="line">      //this=&gt;å½“å‰ç»„ä»¶å¯¹è±¡ï¼Œå…¶ä¸­çš„å±æ€§$refsåŒ…å«äº†è®¾ç½®çš„è¡¨å•ref</span><br><span class="line">      //   console.log(this)</span><br><span class="line">      this.$refs.LoginFormRef.resetFields()</span><br><span class="line">    &#125;,</span><br><span class="line">    login() &#123;</span><br><span class="line">      //ç‚¹å‡»ç™»å½•çš„æ—¶å€™å…ˆè°ƒç”¨validateæ–¹æ³•éªŒè¯è¡¨å•å†…å®¹æ˜¯å¦æœ‰è¯¯</span><br><span class="line">      this.$refs.LoginFormRef.validate(async valid =&gt; &#123;</span><br><span class="line">        console.log(this.loginFormRules)</span><br><span class="line">        //å¦‚æœvalidå‚æ•°ä¸ºtrueåˆ™éªŒè¯é€šè¿‡</span><br><span class="line">        if (!valid) &#123;</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //å‘é€è¯·æ±‚è¿›è¡Œç™»å½•</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.post(&#x27;login&#x27;, this.loginForm)</span><br><span class="line">        //   console.log(res);</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;ç™»å½•å¤±è´¥:&#x27; + res.meta.msg) //console.log(&quot;ç™»å½•å¤±è´¥:&quot;+res.meta.msg)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.$message.success(&#x27;ç™»å½•æˆåŠŸ&#x27;)</span><br><span class="line">        console.log(res)</span><br><span class="line">        //ä¿å­˜token</span><br><span class="line">        window.sessionStorage.setItem(&#x27;token&#x27;, res.data.token)</span><br><span class="line">        // å¯¼èˆªè‡³/home</span><br><span class="line">        this.$router.push(&#x27;/home&#x27;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login_container &#123;</span><br><span class="line">  background-color: #2b5b6b;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.login_box &#123;</span><br><span class="line">  width: 450px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  transform: translate(-50%, -50%);</span><br><span class="line">  .avatar_box &#123;</span><br><span class="line">    height: 130px;</span><br><span class="line">    width: 130px;</span><br><span class="line">    border: 1px solid #eee;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    box-shadow: 0 0 10px #ddd;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%, -50%);</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    img &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      background-color: #eee;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.login_form &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding: 0 20px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.btns &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­æˆ‘ä»¬æœ‰ç”¨åˆ°ä¸€ä¸‹å†…å®¹ï¼Œéœ€è¦è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼š</p>
<p>A.æ·»åŠ element-uiçš„è¡¨å•ç»„ä»¶<br>åœ¨pluginsæ–‡ä»¶å¤¹ä¸­æ‰“å¼€element.jsæ–‡ä»¶ï¼Œè¿›è¡Œelementuiçš„æŒ‰éœ€å¯¼å…¥<br>import Vue from â€˜vueâ€™<br>import { Button } from â€˜element-uiâ€™<br>import { Form, FormItem } from â€˜element-uiâ€™<br>import { Input } from â€˜element-uiâ€™</p>
<p>Vue.use(Button)<br>Vue.use(Form)<br>Vue.use(FormItem)<br>Vue.use(Input)</p>
<p>B.æ·»åŠ ç¬¬ä¸‰æ–¹å­—ä½“<br>å¤åˆ¶ç´ æä¸­çš„fontsæ–‡ä»¶å¤¹åˆ°assetsä¸­,åœ¨å…¥å£æ–‡ä»¶main.jsä¸­å¯¼å…¥import â€˜.&#x2F;assets&#x2F;fonts&#x2F;iconfont.cssâ€™<br>ç„¶åç›´æ¥åœ¨ <el-input prefix-icon="iconfont icon-3702mima"></el-input><br>æ¥ç€æ·»åŠ ç™»å½•ç›’å­</p>
<p>C.æ·»åŠ è¡¨å•éªŒè¯çš„æ­¥éª¤<br>1).ç»™<el-form>æ·»åŠ å±æ€§:rules&#x3D;â€rulesâ€ï¼Œrulesæ˜¯ä¸€å †éªŒè¯è§„åˆ™ï¼Œå®šä¹‰åœ¨scriptã€ä¸­<br>2).åœ¨scriptä¸­æ·»åŠ rulesï¼šexport default{ data(){return{â€¦â€¦, rules: {<br>          name: [<br>            { required: true, message: â€˜è¯·è¾“å…¥æ´»åŠ¨åç§°â€™, trigger: â€˜blurâ€™ },<br>            { min: 3, max: 5, message: â€˜é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦â€™, trigger: â€˜blurâ€™ }<br>          ],<br>          region: [<br>            { required: true, message: â€˜è¯·é€‰æ‹©æ´»åŠ¨åŒºåŸŸâ€™, trigger: â€˜changeâ€™ }<br>          ]<br>}â€¦â€¦<br>3).é€šè¿‡<el-form-item>çš„propå±æ€§è®¾ç½®éªŒè¯è§„åˆ™<el-form-item label="æ´»åŠ¨åç§°" prop="name"></p>
<p>4.å¯¼å…¥axiosä»¥å‘é€ajaxè¯·æ±‚<br>æ‰“å¼€main.jsï¼Œimport axios from â€˜axiosâ€™;<br>è®¾ç½®è¯·æ±‚çš„æ ¹è·¯å¾„ï¼šaxios.defaults.baseURL &#x3D; â€˜<a target="_blank" rel="noopener" href="http://127.0.0.1:8888/api/private/v1/&#39;">http://127.0.0.1:8888/api/private/v1/&#39;</a>;<br>æŒ‚è½½axiosï¼šVue.prototype.$http &#x3D; axios;</p>
<p>5.é…ç½®å¼¹çª—æç¤ºï¼š<br>åœ¨pluginsæ–‡ä»¶å¤¹ä¸­æ‰“å¼€element.jsæ–‡ä»¶ï¼Œè¿›è¡Œelementuiçš„æŒ‰éœ€å¯¼å…¥<br>import {Message} from â€˜element-uiâ€™<br>è¿›è¡Œå…¨å±€æŒ‚è½½ï¼šVue.prototype.$message &#x3D; Message;<br>åœ¨login.vueç»„ä»¶ä¸­ç¼–å†™å¼¹çª—ä»£ç ï¼šthis.$message.error(â€˜ç™»å½•å¤±è´¥â€™)</p>
<h3 id="6-ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ"><a href="#6-ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ" class="headerlink" title="6.ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ"></a>6.ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ</h3><p>A.ç™»å½•æˆåŠŸä¹‹åï¼Œéœ€è¦å°†åå°è¿”å›çš„tokenä¿å­˜åˆ°sessionStorageä¸­<br>æ“ä½œå®Œæ¯•ä¹‹åï¼Œéœ€è¦è·³è½¬åˆ°&#x2F;home</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//ç‚¹å‡»ç™»å½•çš„æ—¶å€™å…ˆè°ƒç”¨validateæ–¹æ³•éªŒè¯è¡¨å•å†…å®¹æ˜¯å¦æœ‰è¯¯</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">LoginFormRef</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">loginFormRules</span>)</span><br><span class="line">        <span class="comment">//å¦‚æœvalidå‚æ•°ä¸ºtrueåˆ™éªŒè¯é€šè¿‡</span></span><br><span class="line">        <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é€è¯·æ±‚è¿›è¡Œç™»å½•</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(<span class="string">&#x27;login&#x27;</span>, <span class="variable language_">this</span>.<span class="property">loginForm</span>)</span><br><span class="line">        <span class="comment">//   console.log(res);</span></span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç™»å½•å¤±è´¥:&#x27;</span> + res.<span class="property">meta</span>.<span class="property">msg</span>) <span class="comment">//console.log(&quot;ç™»å½•å¤±è´¥:&quot;+res.meta.msg)</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        <span class="comment">//ä¿å­˜token</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">        <span class="comment">// å¯¼èˆªè‡³/home</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ ä¸€ä¸ªç»„ä»¶Home.vueï¼Œå¹¶ä¸ºä¹‹æ·»åŠ è§„åˆ™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        this is home</span><br><span class="line">        &lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; é€€å‡º &lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    logout() &#123;</span><br><span class="line">      window.sessionStorage.clear()</span><br><span class="line">      this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;less&#x27; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ è·¯ç”±è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<p>æ·»åŠ è·¯ç”±å®ˆå«<br>å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œä¸èƒ½è®¿é—®&#x2F;home,å¦‚æœç”¨æˆ·é€šè¿‡urlåœ°å€ç›´æ¥è®¿é—®ï¼Œåˆ™å¼ºåˆ¶è·³è½¬åˆ°ç™»å½•é¡µé¢<br>æ‰“å¼€router.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Login.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Home.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>:<span class="string">&#x27;/login&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span> , <span class="attr">component</span>:<span class="title class_">Login</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span> , <span class="attr">component</span>:<span class="title class_">Home</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‚è½½è·¯ç”±å¯¼èˆªå®ˆå«,toè¡¨ç¤ºå°†è¦è®¿é—®çš„è·¯å¾„ï¼Œfromè¡¨ç¤ºä»å“ªé‡Œæ¥ï¼Œnextæ˜¯ä¸‹ä¸€ä¸ªè¦åšçš„æ“ä½œ</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123; </span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">next</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//è·å–token</span></span><br><span class="line">  <span class="keyword">const</span> tokenStr = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!tokenStr)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router </span><br></pre></td></tr></table></figure>

<p>å®ç°é€€å‡ºåŠŸèƒ½<br>åœ¨Homeç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé€€å‡ºåŠŸèƒ½æŒ‰é’®,ç»™é€€å‡ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œæ·»åŠ äº‹ä»¶å¤„ç†ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">logout</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><p>A.å¤„ç†ESLintè­¦å‘Š<br>æ‰“å¼€è„šæ‰‹æ¶é¢æ¿ï¼ŒæŸ¥çœ‹è­¦å‘Šä¿¡æ¯<br>[å›¾ç‰‡]<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒESLintå’Œvscodeæ ¼å¼åŒ–å·¥å…·æœ‰å†²çªï¼Œéœ€è¦æ·»åŠ é…ç½®æ–‡ä»¶è§£å†³å†²çªã€‚<br>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  .prettierrc æ–‡ä»¶</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span><span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€.eslintrc.jsæ–‡ä»¶ï¼Œç¦ç”¨å¯¹ space-before-function-paren çš„æ£€æŸ¥:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;space-before-function-paren&#x27;</span> : <span class="number">0</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>B.åˆå¹¶æŒ‰éœ€å¯¼å…¥çš„element-ui</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Form</span>, <span class="title class_">FormItem</span>, <span class="title class_">Input</span>, <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Form</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">FormItem</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br><span class="line"><span class="comment">// è¿›è¡Œå…¨å±€æŒ‚è½½ï¼š</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$message</span> = <span class="title class_">Message</span></span><br></pre></td></tr></table></figure>

<p>C.å°†ä»£ç æäº¤åˆ°ç äº‘<br>æ–°å»ºä¸€ä¸ªé¡¹ç›®ç»ˆç«¯,è¾“å…¥å‘½ä»¤â€˜git statusâ€™æŸ¥çœ‹ä¿®æ”¹è¿‡çš„ä¸æ–°å¢çš„æ–‡ä»¶å†…å®¹<br>å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼šgit add .<br>å°†æ‰€æœ‰ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼šgit commit -m â€œæ·»åŠ ç™»å½•åŠŸèƒ½ä»¥åŠ&#x2F;homeçš„åŸºæœ¬ç»“æ„â€<br>æŸ¥çœ‹åˆ†æ”¯ï¼š git branch  å‘ç°æ‰€æœ‰ä»£ç éƒ½è¢«æäº¤åˆ°äº†loginåˆ†æ”¯<br>å°†loginåˆ†æ”¯ä»£ç åˆå¹¶åˆ°masterä¸»åˆ†æ”¯ï¼Œå…ˆåˆ‡æ¢åˆ°masterï¼šgit checkout master<br>åœ¨masteråˆ†æ”¯è¿›è¡Œä»£ç åˆå¹¶ï¼šgit merge login<br>å°†æœ¬åœ°çš„masteræ¨é€åˆ°è¿œç«¯çš„ç äº‘ï¼šgit push</p>
<p>æ¨é€æœ¬åœ°çš„å­åˆ†æ”¯åˆ°ç äº‘ï¼Œå…ˆåˆ‡æ¢åˆ°å­åˆ†æ”¯ï¼šgit checkout åˆ†æ”¯å<br>ç„¶åæ¨é€åˆ°ç äº‘ï¼šgit push -u origin è¿œç«¯åˆ†æ”¯å</p>
<h2 id="äºŒã€ä»Šæ—¥ç›®æ ‡"><a href="#äºŒã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="äºŒã€ä»Šæ—¥ç›®æ ‡"></a>äºŒã€ä»Šæ—¥ç›®æ ‡</h2><p>1.å®ç°åå°é¦–é¡µçš„åŸºæœ¬å¸ƒå±€<br>2.å®ç°å·¦ä¾§èœå•æ <br>3.å®ç°ç”¨æˆ·åˆ—è¡¨å±•ç¤º<br>4.å®ç°æ·»åŠ ç”¨æˆ·</p>
<h3 id="1-åå°é¦–é¡µåŸºæœ¬å¸ƒå±€"><a href="#1-åå°é¦–é¡µåŸºæœ¬å¸ƒå±€" class="headerlink" title="1.åå°é¦–é¡µåŸºæœ¬å¸ƒå±€"></a>1.åå°é¦–é¡µåŸºæœ¬å¸ƒå±€</h3><p>æ‰“å¼€Home.vueç»„ä»¶ï¼Œè¿›è¡Œå¸ƒå±€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-container class=&quot;home-container&quot;&gt;</span><br><span class="line">  &lt;!-- å¤´éƒ¨åŒºåŸŸ --&gt;</span><br><span class="line">  &lt;el-header&gt;Header&lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; é€€å‡º &lt;/el-button&gt;&lt;/el-header&gt;</span><br><span class="line">  &lt;!-- é¡µé¢ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">  &lt;el-container&gt;</span><br><span class="line">    &lt;!-- ä¾§è¾¹æ  --&gt;</span><br><span class="line">    &lt;el-aside width=&quot;200px&quot;&gt;Aside&lt;/el-aside&gt;</span><br><span class="line">    &lt;!-- ä¸»ä½“ç»“æ„ --&gt;</span><br><span class="line">    &lt;el-main&gt;Main&lt;/el-main&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/el-container&gt;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè·Ÿelement-uiç»„ä»¶åŒåçš„ç±»åå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„ç»™å¯¹åº”çš„ç»„ä»¶æ·»åŠ æ ·å¼ï¼Œå¦‚ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.home-container</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-header</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#373D41</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-aside</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#333744</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-main</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#eaedf1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-é¡¶éƒ¨å¸ƒå±€ï¼Œä¾§è¾¹æ å¸ƒå±€"><a href="#2-é¡¶éƒ¨å¸ƒå±€ï¼Œä¾§è¾¹æ å¸ƒå±€" class="headerlink" title="2.é¡¶éƒ¨å¸ƒå±€ï¼Œä¾§è¾¹æ å¸ƒå±€"></a>2.é¡¶éƒ¨å¸ƒå±€ï¼Œä¾§è¾¹æ å¸ƒå±€</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-container class=&quot;home-container&quot;&gt;</span><br><span class="line">      &lt;!-- å¤´éƒ¨åŒºåŸŸ --&gt;</span><br><span class="line">      &lt;el-header&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;!-- é»‘é©¬logo --&gt;</span><br><span class="line">          &lt;img src=&quot;../assets/heima.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">          &lt;!-- é¡¶éƒ¨æ ‡é¢˜ --&gt;</span><br><span class="line">          &lt;span&gt;ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; é€€å‡º &lt;/el-button&gt;</span><br><span class="line">      &lt;/el-header&gt;</span><br><span class="line">      &lt;!-- é¡µé¢ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;!-- ä¾§è¾¹æ  --&gt;</span><br><span class="line">        &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">          &lt;!-- ä¾§è¾¹æ èœå• --&gt;</span><br><span class="line">          &lt;el-menu</span><br><span class="line">            background-color=&quot;#333744&quot;</span><br><span class="line">            text-color=&quot;#fff&quot;</span><br><span class="line">            active-text-color=&quot;#ffd04b&quot;&gt;</span><br><span class="line">            &lt;!-- ä¸€çº§èœå• --&gt;</span><br><span class="line">            &lt;el-submenu index=&quot;1&quot;&gt;</span><br><span class="line">              &lt;!-- ä¸€çº§èœå•æ¨¡æ¿ --&gt;</span><br><span class="line">              &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;!-- æ–‡æœ¬ --&gt;</span><br><span class="line">                &lt;span&gt;å¯¼èˆªä¸€&lt;/span&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;!-- äºŒçº§å­èœå• --&gt;</span><br><span class="line">              &lt;el-menu-item index=&quot;1-4-1&quot;&gt;</span><br><span class="line">                &lt;!-- äºŒçº§èœå•æ¨¡æ¿ --&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                  &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">                  &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">                  &lt;!-- æ–‡æœ¬ --&gt;</span><br><span class="line">                  &lt;span&gt;å­èœå•ä¸€&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">              &lt;/el-menu-item&gt;</span><br><span class="line">            &lt;/el-submenu&gt;</span><br><span class="line">            </span><br><span class="line">          &lt;/el-menu&gt;</span><br><span class="line">        &lt;/el-aside&gt;</span><br><span class="line">        &lt;!-- ä¸»ä½“ç»“æ„ --&gt;</span><br><span class="line">        &lt;el-main&gt;Main&lt;/el-main&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-axiosè¯·æ±‚æ‹¦æˆªå™¨"><a href="#3-axiosè¯·æ±‚æ‹¦æˆªå™¨" class="headerlink" title="3.axiosè¯·æ±‚æ‹¦æˆªå™¨"></a>3.axiosè¯·æ±‚æ‹¦æˆªå™¨</h3><p>åå°é™¤äº†ç™»å½•æ¥å£ä¹‹å¤–ï¼Œéƒ½éœ€è¦tokenæƒé™éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ axiosè¯·æ±‚æ‹¦æˆªå™¨æ¥æ·»åŠ tokenï¼Œä»¥ä¿è¯æ‹¥æœ‰è·å–æ•°æ®çš„æƒé™<br>åœ¨main.jsä¸­æ·»åŠ ä»£ç ï¼Œåœ¨å°†axiosæŒ‚è½½åˆ°vueåŸå‹ä¹‹å‰æ·»åŠ ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚åœ¨åˆ°è¾¾æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆä¼šè°ƒç”¨useä¸­çš„è¿™ä¸ªå›è°ƒå‡½æ•°æ¥æ·»åŠ è¯·æ±‚å¤´ä¿¡æ¯</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">//ä¸ºè¯·æ±‚å¤´å¯¹è±¡ï¼Œæ·»åŠ tokenéªŒè¯çš„Authorizationå­—æ®µ</span></span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-è¯·æ±‚ä¾§è¾¹æ æ•°æ®"><a href="#4-è¯·æ±‚ä¾§è¾¹æ æ•°æ®" class="headerlink" title="4.è¯·æ±‚ä¾§è¾¹æ æ•°æ®"></a>4.è¯·æ±‚ä¾§è¾¹æ æ•°æ®</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // å·¦ä¾§èœå•æ•°æ®</span><br><span class="line">      menuList: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    // åœ¨createdé˜¶æ®µè¯·æ±‚å·¦ä¾§èœå•æ•°æ®</span><br><span class="line">    this.getMenuList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    logout() &#123;</span><br><span class="line">      window.sessionStorage.clear()</span><br><span class="line">      this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    async getMenuList() &#123;</span><br><span class="line">      // å‘é€è¯·æ±‚è·å–å·¦ä¾§èœå•æ•°æ®</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;menus&#x27;)</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(res.meta.msg)</span><br><span class="line"></span><br><span class="line">      this.menuList = res.data</span><br><span class="line">      console.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡v-foråŒé‡å¾ªç¯æ¸²æŸ“å·¦ä¾§èœå•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-menu</span><br><span class="line">  background-color=&quot;#333744&quot;</span><br><span class="line">  text-color=&quot;#fff&quot;</span><br><span class="line">  active-text-color=&quot;#ffd04b&quot;&gt;</span><br><span class="line">  &lt;!-- ä¸€çº§èœå• --&gt;</span><br><span class="line">  &lt;el-submenu :index=&quot;item.id+&#x27;&#x27;&quot; v-for=&quot;item in menuList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">    &lt;!-- ä¸€çº§èœå•æ¨¡æ¿ --&gt;</span><br><span class="line">    &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">      &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">      &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &lt;!-- æ–‡æœ¬ --&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;item.authName&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;!-- äºŒçº§å­èœå• --&gt;</span><br><span class="line">    &lt;el-menu-item :index=&quot;subItem.id+&#x27;&#x27;&quot; v-for=&quot;subItem in item.children&quot; :key=&quot;subItem.id&quot;&gt;</span><br><span class="line">      &lt;!-- äºŒçº§èœå•æ¨¡æ¿ --&gt;</span><br><span class="line">      &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">        &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">        &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;!-- æ–‡æœ¬ --&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;subItem.authName&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-menu-item&gt;</span><br><span class="line">  &lt;/el-submenu&gt;</span><br><span class="line">&lt;/el-menu&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-è®¾ç½®æ¿€æ´»å­èœå•æ ·å¼"><a href="#5-è®¾ç½®æ¿€æ´»å­èœå•æ ·å¼" class="headerlink" title="5.è®¾ç½®æ¿€æ´»å­èœå•æ ·å¼"></a>5.è®¾ç½®æ¿€æ´»å­èœå•æ ·å¼</h3><p>é€šè¿‡æ›´æ”¹el-menuçš„active-text-colorå±æ€§å¯ä»¥è®¾ç½®ä¾§è¾¹æ èœå•ä¸­ç‚¹å‡»çš„æ¿€æ´»é¡¹çš„æ–‡å­—é¢œè‰²<br>é€šè¿‡æ›´æ”¹èœå•é¡¹æ¨¡æ¿ï¼ˆtemplateï¼‰ä¸­çš„iæ ‡ç­¾çš„ç±»åï¼Œå¯ä»¥å°†å·¦ä¾§èœå•æ çš„å›¾æ ‡è¿›è¡Œè®¾ç½®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹å­—ä½“å›¾æ ‡<br>åœ¨æ•°æ®ä¸­æ·»åŠ ä¸€ä¸ªiconsObjï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">iconsObj</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;125&#x27;</span>:<span class="string">&#x27;iconfont icon-user&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;103&#x27;</span>:<span class="string">&#x27;iconfont icon-tijikongjian&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;101&#x27;</span>:<span class="string">&#x27;iconfont icon-shangpin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;102&#x27;</span>:<span class="string">&#x27;iconfont icon-danju&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;145&#x27;</span>:<span class="string">&#x27;iconfont icon-baobiao&#x27;</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°†å›¾æ ‡ç±»åè¿›è¡Œæ•°æ®ç»‘å®šï¼Œç»‘å®šiconsObjä¸­çš„æ•°æ®ï¼š</p>
<p>ä¸ºäº†ä¿æŒå·¦ä¾§èœå•æ¯æ¬¡åªèƒ½æ‰“å¼€ä¸€ä¸ªï¼Œæ˜¾ç¤ºå…¶ä¸­çš„å­èœå•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨el-menuä¸­æ·»åŠ ä¸€ä¸ªå±æ€§unique-opened<br>æˆ–è€…ä¹Ÿå¯ä»¥æ•°æ®ç»‘å®šè¿›è¡Œè®¾ç½®(æ­¤æ—¶trueè®¤ä¸ºæ˜¯ä¸€ä¸ªboolå€¼ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²) :unique-opened&#x3D;â€trueâ€</p>
<h3 id="6-åˆ¶ä½œä¾§è¾¹èœå•æ çš„ä¼¸ç¼©åŠŸèƒ½"><a href="#6-åˆ¶ä½œä¾§è¾¹èœå•æ çš„ä¼¸ç¼©åŠŸèƒ½" class="headerlink" title="6.åˆ¶ä½œä¾§è¾¹èœå•æ çš„ä¼¸ç¼©åŠŸèƒ½"></a>6.åˆ¶ä½œä¾§è¾¹èœå•æ çš„ä¼¸ç¼©åŠŸèƒ½</h3><p>åœ¨èœå•æ ä¸Šæ–¹æ·»åŠ ä¸€ä¸ªdiv</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ä¾§è¾¹æ ,å®½åº¦æ ¹æ®æ˜¯å¦æŠ˜å è¿›è¡Œè®¾ç½® --&gt;</span><br><span class="line">&lt;el-aside :width=&quot;isCollapse ? &#x27;64px&#x27;:&#x27;200px&#x27;&quot;&gt;</span><br><span class="line">  &lt;!-- ä¼¸ç¼©ä¾§è¾¹æ æŒ‰é’® --&gt;</span><br><span class="line">  &lt;div class=&quot;toggle-button&quot; @click=&quot;toggleCollapse&quot;&gt;|||&lt;/div&gt;</span><br><span class="line">  &lt;!-- ä¾§è¾¹æ èœå•ï¼Œ:collapse=&quot;isCollapse&quot;ï¼ˆè®¾ç½®æŠ˜å èœå•ä¸ºç»‘å®šçš„ isCollapse å€¼ï¼‰ï¼Œ:collapse-transition=&quot;false&quot;ï¼ˆå…³é—­é»˜è®¤çš„æŠ˜å åŠ¨ç”»ï¼‰ --&gt;</span><br><span class="line">  &lt;el-menu</span><br><span class="line">  :collapse=&quot;isCollapse&quot;</span><br><span class="line">  :collapse-transition=&quot;false&quot;</span><br><span class="line">  ......</span><br></pre></td></tr></table></figure>

<p>ç„¶åç»™divæ·»åŠ æ ·å¼ï¼Œç»™divæ·»åŠ äº‹ä»¶ï¼š</p>
<div class="toggle-button" @click="this.isCollapse ? '64px':'200px'">|||</div>

<h3 id="7-åœ¨åå°é¦–é¡µæ·»åŠ å­çº§è·¯ç”±"><a href="#7-åœ¨åå°é¦–é¡µæ·»åŠ å­çº§è·¯ç”±" class="headerlink" title="7.åœ¨åå°é¦–é¡µæ·»åŠ å­çº§è·¯ç”±"></a>7.åœ¨åå°é¦–é¡µæ·»åŠ å­çº§è·¯ç”±</h3><p>æ–°å¢å­çº§è·¯ç”±ç»„ä»¶Welcome.vue<br>åœ¨router.jsä¸­å¯¼å…¥å­çº§è·¯ç”±ç»„ä»¶ï¼Œå¹¶è®¾ç½®è·¯ç”±è§„åˆ™ä»¥åŠå­çº§è·¯ç”±çš„é»˜è®¤é‡å®šå‘<br>æ‰“å¼€Home.vueï¼Œåœ¨mainçš„ä¸»ä½“ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªè·¯ç”±å ä½ç¬¦</p>
<p>åˆ¶ä½œå¥½äº†Welcomeå­çº§è·¯ç”±ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„ä¾§è¾¹æ äºŒçº§èœå•éƒ½æ”¹é€ æˆå­çº§è·¯ç”±é“¾æ¥<br>æˆ‘ä»¬åªéœ€è¦å°†el-menuçš„routerå±æ€§è®¾ç½®ä¸ºtrueå°±å¯ä»¥äº†ï¼Œæ­¤æ—¶å½“æˆ‘ä»¬ç‚¹å‡»äºŒçº§èœå•çš„æ—¶å€™ï¼Œå°±ä¼šæ ¹æ®èœå•çš„index<br>å±æ€§è¿›è¡Œè·¯ç”±è·³è½¬,å¦‚: &#x2F;110,<br>ä½¿ç”¨index idæ¥ä½œä¸ºè·³è½¬çš„è·¯å¾„ä¸åˆé€‚ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°ç»‘å®šindexçš„å€¼ä¸º  :index&#x3D;â€â€˜&#x2F;â€˜+subItem.pathâ€</p>
<h3 id="8-å®Œæˆç”¨æˆ·åˆ—è¡¨ä¸»ä½“åŒºåŸŸ"><a href="#8-å®Œæˆç”¨æˆ·åˆ—è¡¨ä¸»ä½“åŒºåŸŸ" class="headerlink" title="8.å®Œæˆç”¨æˆ·åˆ—è¡¨ä¸»ä½“åŒºåŸŸ"></a>8.å®Œæˆç”¨æˆ·åˆ—è¡¨ä¸»ä½“åŒºåŸŸ</h3><p>æ–°å»ºç”¨æˆ·åˆ—è¡¨ç»„ä»¶  user&#x2F;Users.vue<br>åœ¨router.jsä¸­å¯¼å…¥å­çº§è·¯ç”±ç»„ä»¶Users.vueï¼Œå¹¶è®¾ç½®è·¯ç”±è§„åˆ™</p>
<p>å½“ç‚¹å‡»äºŒçº§èœå•çš„æ—¶å€™ï¼Œè¢«ç‚¹å‡»çš„äºŒçº§å­èœå•å¹¶æ²¡æœ‰é«˜äº®ï¼Œæˆ‘ä»¬éœ€è¦æ­£åœ¨è¢«ä½¿ç”¨çš„åŠŸèƒ½é«˜äº®æ˜¾ç¤º<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®el-menuçš„default-activeå±æ€§æ¥è®¾ç½®å½“å‰æ¿€æ´»èœå•çš„index<br>ä½†æ˜¯default-activeå±æ€§ä¹Ÿä¸èƒ½å†™æ­»ï¼Œå›ºå®šä¸ºæŸä¸ªèœå•å€¼<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆç»™æ‰€æœ‰çš„äºŒçº§èœå•æ·»åŠ ç‚¹å‡»äº‹ä»¶,å¹¶å°†pathå€¼ä½œä¸ºæ–¹æ³•çš„å‚æ•°<br>@click&#x3D;â€saveNavState(â€˜&#x2F;â€˜+subItem.path)â€<br>åœ¨saveNavStateæ–¹æ³•ä¸­å°†pathä¿å­˜åˆ°sessionStorageä¸­<br>saveNavState( path ){<br>  &#x2F;&#x2F;ç‚¹å‡»äºŒçº§èœå•çš„æ—¶å€™ä¿å­˜è¢«ç‚¹å‡»çš„äºŒçº§èœå•ä¿¡æ¯<br>  window.sessionStorage.setItem(â€œactivePathâ€,path);<br>  this.activePath &#x3D; path;<br>}<br>ç„¶ååœ¨æ•°æ®ä¸­æ·»åŠ ä¸€ä¸ªactivePathç»‘å®šæ•°æ®ï¼Œå¹¶å°†el-menuçš„default-activeå±æ€§è®¾ç½®ä¸ºactivePath<br>æœ€ååœ¨createdä¸­å°†sessionStorageä¸­çš„æ•°æ®èµ‹å€¼ç»™activePath<br>this.activePath &#x3D; window.sessionStorage.getItem(â€œactivePathâ€)</p>
<h3 id="9-ç»˜åˆ¶ç”¨æˆ·åˆ—è¡¨åŸºæœ¬ç»“æ„"><a href="#9-ç»˜åˆ¶ç”¨æˆ·åˆ—è¡¨åŸºæœ¬ç»“æ„" class="headerlink" title="9.ç»˜åˆ¶ç”¨æˆ·åˆ—è¡¨åŸºæœ¬ç»“æ„"></a>9.ç»˜åˆ¶ç”¨æˆ·åˆ—è¡¨åŸºæœ¬ç»“æ„</h3><p>A.ä½¿ç”¨element-uié¢åŒ…å±‘ç»„ä»¶å®Œæˆé¡¶éƒ¨å¯¼èˆªè·¯å¾„(å¤åˆ¶é¢åŒ…å±‘ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Breadcrumb,BreadcrumbItem)<br>B.ä½¿ç”¨element-uiå¡ç‰‡ç»„ä»¶å®Œæˆä¸»ä½“è¡¨æ ¼(å¤åˆ¶å¡ç‰‡ç»„ä»¶ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Card)ï¼Œå†ä½¿ç”¨element-uiè¾“å…¥æ¡†å®Œæˆæœç´¢æ¡†åŠæœç´¢æŒ‰é’®ï¼Œ<br>æ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ …æ ¼å¸ƒå±€æ¥åˆ’åˆ†ç»“æ„(å¤åˆ¶å¡ç‰‡ç»„ä»¶ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Rowï¼ŒCol)ï¼Œç„¶åå†ä½¿ç”¨el-buttonåˆ¶ä½œæ·»åŠ ç”¨æˆ·æŒ‰é’®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h3&gt;ç”¨æˆ·åˆ—è¡¨ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;ç”¨æˆ·ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;ç”¨æˆ·åˆ—è¡¨&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">        &lt;!-- æœç´¢ä¸æ·»åŠ åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">            &lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">                &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot;&gt;</span><br><span class="line">                    &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;/el-input&gt; </span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">                &lt;el-button type=&quot;primary&quot;&gt;æ·»åŠ ç”¨æˆ·&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt; </span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®"><a href="#10-è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®" class="headerlink" title="10.è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®"></a>10.è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //è·å–æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„å‚æ•°</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      //ä¿å­˜è¯·æ±‚å›æ¥çš„ç”¨æˆ·åˆ—è¡¨æ•°æ®</span><br><span class="line">      userList:[],</span><br><span class="line">      total:0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getUserList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getUserList() &#123;</span><br><span class="line">      //å‘é€è¯·æ±‚è·å–ç”¨æˆ·åˆ—è¡¨æ•°æ®</span><br><span class="line">      const &#123; res: data &#125; = await this.$http.get(&#x27;users&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span><br><span class="line">      if (res.meta.status !== 200)</span><br><span class="line">        return this.$message.error(&#x27;è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span><br><span class="line">      this.userList = res.data.users;</span><br><span class="line">      this.total = res.data.total;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11-å°†ç”¨æˆ·åˆ—è¡¨æ•°æ®å±•ç¤º"><a href="#11-å°†ç”¨æˆ·åˆ—è¡¨æ•°æ®å±•ç¤º" class="headerlink" title="11.å°†ç”¨æˆ·åˆ—è¡¨æ•°æ®å±•ç¤º"></a>11.å°†ç”¨æˆ·åˆ—è¡¨æ•°æ®å±•ç¤º</h3><p>ä½¿ç”¨è¡¨æ ¼æ¥å±•ç¤ºç”¨æˆ·åˆ—è¡¨æ•°æ®ï¼Œä½¿ç”¨element-uiè¡¨æ ¼ç»„ä»¶å®Œæˆåˆ—è¡¨å±•ç¤ºæ•°æ®(å¤åˆ¶è¡¨æ ¼ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Table,TableColumn)<br>åœ¨æ¸²æŸ“å±•ç¤ºçŠ¶æ€æ—¶ï¼Œä¼šä½¿ç”¨ä½œç”¨åŸŸæ’æ§½è·å–æ¯ä¸€è¡Œçš„æ•°æ®<br>å†ä½¿ç”¨switchå¼€å…³ç»„ä»¶å±•ç¤ºçŠ¶æ€ä¿¡æ¯(å¤åˆ¶å¼€å…³ç»„ä»¶ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Switch)<br>è€Œæ¸²æŸ“æ“ä½œåˆ—æ—¶ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½æ¥è¿›è¡Œæ¸²æŸ“çš„ï¼Œ<br>åœ¨æ“ä½œåˆ—ä¸­åŒ…å«äº†ä¿®æ”¹ï¼Œåˆ é™¤ï¼Œåˆ†é…è§’è‰²æŒ‰é’®ï¼Œå½“æˆ‘ä»¬æŠŠé¼ æ ‡æ”¾åˆ°åˆ†é…è§’è‰²æŒ‰é’®ä¸Šæ—¶<br>å¸Œæœ›èƒ½æœ‰ä¸€äº›æ–‡å­—æç¤ºï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–‡å­—æç¤ºç»„ä»¶(å¤åˆ¶æ–‡å­—æç¤ºç»„ä»¶ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Tooltip),å°†åˆ†é…è§’è‰²æŒ‰é’®åŒ…å«<br>ä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç”¨æˆ·åˆ—è¡¨(è¡¨æ ¼)åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-table :data=&quot;userList&quot; border stripe&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;å§“å&quot; prop=&quot;username&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;é‚®ç®±&quot; prop=&quot;email&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;ç”µè¯&quot; prop=&quot;mobile&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;è§’è‰²&quot; prop=&quot;role_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;çŠ¶æ€&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;el-switch v-model=&quot;scope.row.mg_state&quot;&gt;&lt;/el-switch&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;180px&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;!-- ä¿®æ”¹ --&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;!-- åˆ é™¤ --&gt;</span><br><span class="line">            &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;!-- åˆ†é…è§’è‰² --&gt;</span><br><span class="line">            &lt;el-tooltip class=&quot;item&quot; effect=&quot;dark&quot; content=&quot;åˆ†é…è§’è‰²&quot; placement=&quot;top&quot; :enterable=&quot;false&quot;&gt;</span><br><span class="line">                &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-setting&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure>

<h3 id="12-å®ç°ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ"><a href="#12-å®ç°ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ" class="headerlink" title="12.å®ç°ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ"></a>12.å®ç°ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ</h3><p>A.ä½¿ç”¨è¡¨æ ¼æ¥å±•ç¤ºç”¨æˆ·åˆ—è¡¨æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¡µç»„ä»¶å®Œæˆåˆ—è¡¨åˆ†é¡µå±•ç¤ºæ•°æ®(å¤åˆ¶åˆ†é¡µç»„ä»¶ä»£ç ï¼Œåœ¨element.jsä¸­å¯¼å…¥ç»„ä»¶Pagination)<br>B.æ›´æ”¹ç»„ä»¶ä¸­çš„ç»‘å®šæ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é¡µå¯¼èˆªåŒºåŸŸ </span><br><span class="line">@size-change(pagesizeæ”¹å˜æ—¶è§¦å‘) </span><br><span class="line">@current-change(é¡µç å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘)</span><br><span class="line">:current-page(è®¾ç½®å½“å‰é¡µç )</span><br><span class="line">:page-size(è®¾ç½®æ¯é¡µçš„æ•°æ®æ¡æ•°)</span><br><span class="line">:total(è®¾ç½®æ€»é¡µæ•°) --&gt;</span><br><span class="line">            &lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[1, 2, 5, 10]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">            &lt;/el-pagination&gt;</span><br></pre></td></tr></table></figure>

<p>C.æ·»åŠ ä¸¤ä¸ªäº‹ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°@size-changeï¼Œ@current-change</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">handleSizeChange</span>(<span class="params">newSize</span>) &#123;</span><br><span class="line">  <span class="comment">//pagesizeæ”¹å˜æ—¶è§¦å‘ï¼Œå½“pagesizeå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥</span></span><br><span class="line">  <span class="comment">//ä»¥æœ€æ–°çš„pagesizeæ¥è¯·æ±‚æ•°æ®å¹¶å±•ç¤ºæ•°æ®</span></span><br><span class="line">  <span class="comment">//   console.log(newSize)</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">queryInfo</span>.<span class="property">pagesize</span> = newSize;</span><br><span class="line">  <span class="comment">//é‡æ–°æŒ‰ç…§pagesizeå‘é€è¯·æ±‚ï¼Œè¯·æ±‚æœ€æ–°çš„æ•°æ®</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getUserList</span>();  </span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">handleCurrentChange</span>(<span class="params"> current </span>) &#123;</span><br><span class="line">  <span class="comment">//é¡µç å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘å½“currentå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥</span></span><br><span class="line">  <span class="comment">//ä»¥æœ€æ–°çš„currenté¡µç æ¥è¯·æ±‚æ•°æ®å¹¶å±•ç¤ºæ•°æ®</span></span><br><span class="line">  <span class="comment">//   console.log(current)</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">queryInfo</span>.<span class="property">pagenum</span> = current;</span><br><span class="line">  <span class="comment">//é‡æ–°æŒ‰ç…§pagenumå‘é€è¯·æ±‚ï¼Œè¯·æ±‚æœ€æ–°çš„æ•°æ®</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getUserList</span>();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-å®ç°æ›´æ–°ç”¨æˆ·çŠ¶æ€"><a href="#13-å®ç°æ›´æ–°ç”¨æˆ·çŠ¶æ€" class="headerlink" title="13.å®ç°æ›´æ–°ç”¨æˆ·çŠ¶æ€"></a>13.å®ç°æ›´æ–°ç”¨æˆ·çŠ¶æ€</h3><p>å½“ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨ä¸­çš„switchç»„ä»¶æ—¶ï¼Œç”¨æˆ·çš„çŠ¶æ€åº”è¯¥è·Ÿéšå‘ç”Ÿæ”¹å˜ã€‚<br>A.é¦–å…ˆç›‘å¬ç”¨æˆ·ç‚¹å‡»switchç»„ä»¶çš„äº‹ä»¶ï¼Œå¹¶å°†ä½œç”¨åŸŸæ’æ§½çš„æ•°æ®å½“åšäº‹ä»¶å‚æ•°è¿›è¡Œä¼ é€’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-switch v-model=&quot;scope.row.mg_state&quot; @change=&quot;userStateChanged(scope.row)&quot;&gt;&lt;/el-switch&gt;</span><br></pre></td></tr></table></figure>


<p>B.åœ¨äº‹ä»¶ä¸­å‘é€è¯·æ±‚å®ŒæˆçŠ¶æ€çš„æ›´æ”¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">userStateChanged</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  <span class="comment">//å‘é€è¯·æ±‚è¿›è¡ŒçŠ¶æ€ä¿®æ”¹</span></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">put</span>(</span><br><span class="line">    <span class="string">`users/<span class="subst">$&#123;row.id&#125;</span>/state/<span class="subst">$&#123;row.mg_state&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  <span class="comment">//å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">    row.<span class="property">mg_state</span> = !row.<span class="property">mg_state</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;ä¿®æ”¹çŠ¶æ€å¤±è´¥&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ›´æ–°çŠ¶æ€æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="14-å®ç°æœç´¢åŠŸèƒ½"><a href="#14-å®ç°æœç´¢åŠŸèƒ½" class="headerlink" title="14.å®ç°æœç´¢åŠŸèƒ½"></a>14.å®ç°æœç´¢åŠŸèƒ½</h3><p>æ·»åŠ æ•°æ®ç»‘å®šï¼Œæ·»åŠ æœç´¢æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶(å½“ç”¨æˆ·ç‚¹å‡»æœç´¢æŒ‰é’®çš„æ—¶å€™ï¼Œè°ƒç”¨getUserListæ–¹æ³•æ ¹æ®æ–‡æœ¬æ¡†å†…å®¹é‡æ–°è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®)<br>å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹å¹¶ç‚¹å‡»æœç´¢ä¹‹åï¼Œä¼šæŒ‰ç…§æœç´¢å…³é”®å­—æœç´¢ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæä¾›ä¸€ä¸ªXåˆ é™¤æœç´¢å…³é”®å­—å¹¶é‡æ–°è·å–æ‰€æœ‰çš„ç”¨æˆ·åˆ—è¡¨æ•°æ®ï¼Œåªéœ€è¦ç»™æ–‡æœ¬æ¡†æ·»åŠ clearableå±æ€§å¹¶æ·»åŠ clearäº‹ä»¶ï¼Œåœ¨clearäº‹ä»¶ä¸­é‡æ–°è¯·æ±‚æ•°æ®å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">    &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; v-model=&quot;queryInfo.query&quot; clearable @clear=&quot;getUserList&quot;&gt;</span><br><span class="line">        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;getUserList&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-input&gt;</span><br><span class="line">&lt;/el-col&gt;</span><br></pre></td></tr></table></figure>

<h3 id="15-å®ç°æ·»åŠ ç”¨æˆ·"><a href="#15-å®ç°æ·»åŠ ç”¨æˆ·" class="headerlink" title="15.å®ç°æ·»åŠ ç”¨æˆ·"></a>15.å®ç°æ·»åŠ ç”¨æˆ·</h3><p>A.å½“æˆ‘ä»¬ç‚¹å‡»æ·»åŠ ç”¨æˆ·æŒ‰é’®çš„æ—¶å€™ï¼Œå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†æ¥å®ç°æ·»åŠ ç”¨æˆ·çš„åŠŸèƒ½ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å¤åˆ¶å¯¹è¯æ¡†ç»„ä»¶çš„ä»£ç å¹¶åœ¨element.jsæ–‡ä»¶ä¸­å¼•å…¥Dialogç»„ä»¶</p>
<p>B.æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä¸ºâ€œæ·»åŠ ç”¨æˆ·â€æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨äº‹ä»¶ä¸­å°†addDialogVisibleè®¾ç½®ä¸ºtrueï¼Œå³æ˜¾ç¤ºå¯¹è¯æ¡†</p>
<p>C.æ›´æ”¹Dialogç»„ä»¶ä¸­çš„å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¯¹è¯æ¡†ç»„ä»¶  :visible.sync(è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¯¹è¯æ¡†) width(è®¾ç½®å¯¹è¯æ¡†çš„å®½åº¦)</span><br><span class="line">:before-close(åœ¨å¯¹è¯æ¡†å…³é—­å‰è§¦å‘çš„äº‹ä»¶) --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;æ·»åŠ ç”¨æˆ·&quot; :visible.sync=&quot;addDialogVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;!-- å¯¹è¯æ¡†ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;70px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;ç”¨æˆ·å&quot; prop=&quot;username&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.username&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;å¯†ç &quot; prop=&quot;password&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.password&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;é‚®ç®±&quot; prop=&quot;email&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;ç”µè¯&quot; prop=&quot;mobile&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.mobile&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- å¯¹è¯æ¡†åº•éƒ¨åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;addDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addDialogVisible = false&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>

<p>D.æ·»åŠ æ•°æ®ç»‘å®šå’Œæ ¡éªŒè§„åˆ™ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//éªŒè¯é‚®ç®±çš„è§„åˆ™</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">checkEmail</span> = (<span class="params">rule, value, cb</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> regEmail = <span class="regexp">/^\w+@\w+(\.\w+)+$/</span></span><br><span class="line">    <span class="keyword">if</span> (regEmail.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">cb</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªé”™è¯¯æç¤º</span></span><br><span class="line">    <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·è¾“å…¥åˆæ³•çš„é‚®ç®±&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//éªŒè¯æ‰‹æœºå·ç çš„è§„åˆ™</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">checkMobile</span> = (<span class="params">rule, value, cb</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> regMobile = <span class="regexp">/^1[34578]\d&#123;9&#125;$/</span></span><br><span class="line">    <span class="keyword">if</span> (regMobile.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">cb</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªé”™è¯¯æç¤º</span></span><br><span class="line">    <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·è¾“å…¥åˆæ³•çš„æ‰‹æœºå·ç &#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„å‚æ•°</span></span><br><span class="line">    <span class="attr">queryInfo</span>: &#123;</span><br><span class="line">      <span class="comment">// æŸ¥è¯¢çš„æ¡ä»¶</span></span><br><span class="line">      <span class="attr">query</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">// å½“å‰çš„é¡µæ•°ï¼Œå³é¡µç </span></span><br><span class="line">      <span class="attr">pagenum</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="comment">// æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®æ¡æ•°</span></span><br><span class="line">      <span class="attr">pagesize</span>: <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ä¿å­˜è¯·æ±‚å›æ¥çš„ç”¨æˆ·åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="attr">userList</span>: [],</span><br><span class="line">    <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//æ˜¯å¦æ˜¾ç¤ºæ·»åŠ ç”¨æˆ·å¼¹å‡ºçª—</span></span><br><span class="line">    <span class="attr">addDialogVisible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// æ·»åŠ ç”¨æˆ·çš„è¡¨å•æ•°æ®</span></span><br><span class="line">    <span class="attr">addForm</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ·»åŠ è¡¨å•çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line">    <span class="attr">addFormRules</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥ç”¨æˆ·åç§°&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;ç”¨æˆ·ååœ¨3~10ä¸ªå­—ç¬¦ä¹‹é—´&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">password</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">6</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;ç”¨æˆ·ååœ¨6~15ä¸ªå­—ç¬¦ä¹‹é—´&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">email</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥é‚®ç®±&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>:checkEmail, <span class="attr">message</span>: <span class="string">&#x27;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">mobile</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥æ‰‹æœºå·ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>:checkMobile, <span class="attr">message</span>: <span class="string">&#x27;æ‰‹æœºå·ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>E.å½“å…³é—­å¯¹è¯æ¡†æ—¶ï¼Œé‡ç½®è¡¨å•<br>ç»™el-dialogæ·»åŠ @closeäº‹ä»¶ï¼Œåœ¨äº‹ä»¶ä¸­æ·»åŠ é‡ç½®è¡¨å•çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="title function_">addDialogClosed</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">//å¯¹è¯æ¡†å…³é—­ä¹‹åï¼Œé‡ç½®è¡¨è¾¾</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addFormRef</span>.<span class="title function_">resetFields</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>F.ç‚¹å‡»å¯¹è¯æ¡†ä¸­çš„ç¡®å®šæŒ‰é’®ï¼Œå‘é€è¯·æ±‚å®Œæˆæ·»åŠ ç”¨æˆ·çš„æ“ä½œ<br>é¦–å…ˆç»™ç¡®å®šæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨ç‚¹å‡»äº‹ä»¶ä¸­å®Œæˆä¸šåŠ¡é€»è¾‘ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="title function_">addUser</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">//ç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œæ·»åŠ æ–°ç”¨æˆ·</span></span><br><span class="line">      <span class="comment">//è°ƒç”¨validateè¿›è¡Œè¡¨å•éªŒè¯</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addFormRef</span>.<span class="title function_">validate</span>( <span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span>(!valid) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;è¯·å¡«å†™å®Œæ•´ç”¨æˆ·ä¿¡æ¯&quot;</span>);</span><br><span class="line">          <span class="comment">//å‘é€è¯·æ±‚å®Œæˆæ·»åŠ ç”¨æˆ·çš„æ“ä½œ</span></span><br><span class="line">          <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(<span class="string">&quot;users&quot;</span>,<span class="variable language_">this</span>.<span class="property">addForm</span>)</span><br><span class="line">          <span class="comment">//åˆ¤æ–­å¦‚æœæ·»åŠ å¤±è´¥ï¼Œå°±åšæç¤º</span></span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">              <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ·»åŠ ç”¨æˆ·å¤±è´¥&#x27;</span>)</span><br><span class="line">          <span class="comment">//æ·»åŠ æˆåŠŸçš„æç¤º</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;æ·»åŠ ç”¨æˆ·æˆåŠŸ&quot;</span>)</span><br><span class="line">          <span class="comment">//å…³é—­å¯¹è¯æ¡†</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">addDialogVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="comment">//é‡æ–°è¯·æ±‚æœ€æ–°çš„æ•°æ®</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ä»Šæ—¥ç›®æ ‡"><a href="#ä¸‰ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä¸‰ã€ä»Šæ—¥ç›®æ ‡"></a>ä¸‰ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.ä¿®æ”¹ç”¨æˆ·,åˆ é™¤ç”¨æˆ· </p>
<p>2.æ¨é€ä»£ç åˆ°ç äº‘ </p>
<p>3.æƒé™åˆ—è¡¨ </p>
<p>4.è§’è‰²åˆ—è¡¨ </p>
<p>5.åˆ†é…è§’è‰²</p>
<h3 id="1-ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯"><a href="#1-ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="1.ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯"></a>1.ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</h3><p>A.ä¸ºç”¨æˆ·åˆ—è¡¨ä¸­çš„ä¿®æ”¹æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶<br>B.åœ¨é¡µé¢ä¸­æ·»åŠ ä¿®æ”¹ç”¨æˆ·å¯¹è¯æ¡†ï¼Œå¹¶ä¿®æ”¹å¯¹è¯æ¡†çš„å±æ€§<br>C.æ ¹æ®idæŸ¥è¯¢éœ€è¦ä¿®æ”¹çš„ç”¨æˆ·æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å±•ç¤ºç¼–è¾‘ç”¨æˆ·çš„å¯¹è¯æ¡†</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">showEditDialog</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="comment">//å‘é€è¯·æ±‚æ ¹æ®idè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;users/&#x27;</span> + id)</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¦‚æœæ·»åŠ å¤±è´¥ï¼Œå°±åšæç¤º</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥&#x27;</span>)</span><br><span class="line">    <span class="comment">//å°†è·å–åˆ°çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®editFormä¸­</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editForm</span> = res.<span class="property">data</span></span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºå¼¹å‡ºçª—</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editDialogVisible</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>D.åœ¨å¼¹å‡ºçª—ä¸­æ·»åŠ ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯çš„è¡¨å•å¹¶åšå“åº”çš„æ•°æ®ç»‘å®šä»¥åŠæ•°æ®éªŒè¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¯¹è¯æ¡†ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editFormRef&quot; label-width=&quot;70px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;ç”¨æˆ·å&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.username&quot; disabled&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;é‚®ç®±&quot; prop=&quot;email&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;ç”µè¯&quot; prop=&quot;mobile&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.mobile&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®ç»‘å®šä»¥åŠéªŒè¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ§åˆ¶ä¿®æ”¹ç”¨æˆ·å¯¹è¯æ¡†çš„æ˜¾ç¤ºä¸å¦</span></span><br><span class="line"><span class="attr">editDialogVisible</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//ä¿®æ”¹ç”¨æˆ·çš„è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="attr">editForm</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//ä¿®æ”¹è¡¨å•çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="attr">editFormRules</span>: &#123;</span><br><span class="line">    <span class="attr">email</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥é‚®ç®±&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">validator</span>: checkEmail,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;</span>,</span><br><span class="line">        <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">mobile</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥æ‰‹æœºå·ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">validator</span>: checkMobile,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;æ‰‹æœºå·ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;</span>,</span><br><span class="line">        <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>E.ç›‘å¬å¯¹è¯æ¡†å…³é—­äº‹ä»¶ï¼Œåœ¨å¯¹è¯æ¡†å…³é—­ä¹‹åï¼Œé‡ç½®è¡¨å•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-dialog title=&quot;ä¿®æ”¹ç”¨æˆ·&quot; :visible.sync=&quot;editDialogVisible&quot; width=&quot;50%&quot; @close=&quot;editDialogClosed&quot;&gt;</span><br><span class="line"></span><br><span class="line">editDialogClosed()&#123;</span><br><span class="line">    //å¯¹è¯æ¡†å…³é—­ä¹‹åï¼Œé‡ç½®è¡¨è¾¾</span><br><span class="line">    this.$refs.editFormRef.resetFields()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>F.åœ¨ç”¨æˆ·ç‚¹å‡»ç¡®å®šæŒ‰é’®çš„æ—¶å€™ï¼ŒéªŒè¯æ•°æ®æˆåŠŸä¹‹åå‘é€è¯·æ±‚å®Œæˆä¿®æ”¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">editUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//ç”¨æˆ·ç‚¹å‡»ä¿®æ”¹è¡¨å•ä¸­çš„ç¡®å®šæŒ‰é’®ä¹‹åï¼ŒéªŒè¯è¡¨å•æ•°æ®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">editFormRef</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!valid) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;è¯·å¡«å†™å®Œæ•´ç”¨æˆ·ä¿¡æ¯&#x27;</span>)</span><br><span class="line">    <span class="comment">//å‘é€è¯·æ±‚å®Œæˆä¿®æ”¹ç”¨æˆ·çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">put</span>(</span><br><span class="line">        <span class="string">&#x27;users/&#x27;</span> + <span class="variable language_">this</span>.<span class="property">editForm</span>.<span class="property">id</span>,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">editForm</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œå°±åšæç¤º</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;ä¿®æ”¹ç”¨æˆ·å¤±è´¥&#x27;</span>)</span><br><span class="line">    <span class="comment">//ä¿®æ”¹æˆåŠŸçš„æç¤º</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;ä¿®æ”¹ç”¨æˆ·æˆåŠŸ&#x27;</span>)</span><br><span class="line">    <span class="comment">//å…³é—­å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editDialogVisible</span> = <span class="literal">false</span></span><br><span class="line">    <span class="comment">//é‡æ–°è¯·æ±‚æœ€æ–°çš„æ•°æ®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ é™¤ç”¨æˆ·"><a href="#2-åˆ é™¤ç”¨æˆ·" class="headerlink" title="2.åˆ é™¤ç”¨æˆ·"></a>2.åˆ é™¤ç”¨æˆ·</h3><p>åœ¨ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥è·³å‡ºæç¤ºä¿¡æ¯æ¡†ï¼Œè®©ç”¨æˆ·ç¡®è®¤è¦è¿›è¡Œåˆ é™¤æ“ä½œã€‚<br>å¦‚æœæƒ³è¦ä½¿ç”¨ç¡®è®¤å–æ¶ˆæç¤ºæ¡†ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†æç¤ºä¿¡æ¯æ¡†æŒ‚è½½åˆ°vueä¸­ã€‚<br>A.å¯¼å…¥MessageBoxç»„ä»¶ï¼Œå¹¶å°†MessageBoxç»„ä»¶æŒ‚è½½åˆ°å®ä¾‹ã€‚<br>Vue.prototype.$confirm &#x3D; MessageBox.confirm<br>B.ç»™ç”¨æˆ·åˆ—è¡¨ä¸­çš„åˆ é™¤æŒ‰é’®æ·»åŠ äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å¼¹å‡ºç¡®å®šå–æ¶ˆçª—,æœ€åå†æ ¹æ®idå‘é€åˆ é™¤ç”¨æˆ·çš„è¯·æ±‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">removeUserById</span>(<span class="params">id</span>)&#123;</span><br><span class="line">    <span class="comment">//å¼¹å‡ºç¡®å®šå–æ¶ˆæ¡†ï¼Œæ˜¯å¦åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">const</span> confirmResult = <span class="keyword">await</span> <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;è¯·é—®æ˜¯å¦è¦æ°¸ä¹…åˆ é™¤è¯¥ç”¨æˆ·&#x27;</span>,<span class="string">&#x27;åˆ é™¤æç¤º&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>:<span class="string">&#x27;ç¡®è®¤åˆ é™¤&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>:<span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>err)</span><br><span class="line">    <span class="comment">//å¦‚æœç”¨æˆ·ç‚¹å‡»ç¡®è®¤ï¼Œåˆ™confirmResult ä¸º&#x27;confirm&#x27;</span></span><br><span class="line">    <span class="comment">//å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆ, åˆ™confirmResultè·å–çš„å°±æ˜¯catchçš„é”™è¯¯æ¶ˆæ¯&#x27;cancel&#x27;</span></span><br><span class="line">    <span class="keyword">if</span>(confirmResult != <span class="string">&quot;confirm&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;å·²ç»å–æ¶ˆåˆ é™¤&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‘é€è¯·æ±‚æ ¹æ®idå®Œæˆåˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">delete</span>(<span class="string">&#x27;users/&#x27;</span>+id)</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¦‚æœåˆ é™¤å¤±è´¥ï¼Œå°±åšæç¤º</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;åˆ é™¤ç”¨æˆ·å¤±è´¥&#x27;</span>)</span><br><span class="line">    <span class="comment">//ä¿®æ”¹æˆåŠŸçš„æç¤º</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;åˆ é™¤ç”¨æˆ·æˆåŠŸ&#x27;</span>)</span><br><span class="line">    <span class="comment">//é‡æ–°è¯·æ±‚æœ€æ–°çš„æ•°æ®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-æ¨é€ä»£ç "><a href="#3-æ¨é€ä»£ç " class="headerlink" title="3.æ¨é€ä»£ç "></a>3.æ¨é€ä»£ç </h3><p>åˆ›å»ºuserå­åˆ†æ”¯ï¼Œå¹¶å°†ä»£ç æ¨é€åˆ°ç äº‘<br>A.åˆ›å»ºuserå­åˆ†æ”¯  git checkout -b user<br>B.å°†ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒº git add .<br>C.å°†ä»£ç æäº¤å¹¶æ³¨é‡Š git commit -m â€˜æ·»åŠ å®Œæˆç”¨æˆ·åˆ—è¡¨åŠŸèƒ½â€™<br>D.å°†æœ¬åœ°çš„useråˆ†æ”¯æ¨é€åˆ°ç äº‘ git push -u origin user<br>E.å°†useråˆ†æ”¯ä»£ç åˆå¹¶åˆ°master:<br>åˆ‡æ¢åˆ°master   git checkout master<br>åˆå¹¶user       git merge user<br>F.å°†æœ¬åœ°masteråˆ†æ”¯çš„ä»£ç æ¨é€åˆ°ç äº‘  git push</p>
<p>åˆ›å»ºrightså­åˆ†æ”¯<br>A.åˆ›å»ºrightså­åˆ†æ”¯ git checkout -b rights<br>B.å°†æœ¬åœ°çš„rightsåˆ†æ”¯æ¨é€åˆ°ç äº‘ git push -u origin rights</p>
<h3 id="4-æƒé™åˆ—è¡¨"><a href="#4-æƒé™åˆ—è¡¨" class="headerlink" title="4.æƒé™åˆ—è¡¨"></a>4.æƒé™åˆ—è¡¨</h3><h4 id="A-æ·»åŠ æƒé™åˆ—è¡¨è·¯ç”±"><a href="#A-æ·»åŠ æƒé™åˆ—è¡¨è·¯ç”±" class="headerlink" title="A.æ·»åŠ æƒé™åˆ—è¡¨è·¯ç”±"></a>A.æ·»åŠ æƒé™åˆ—è¡¨è·¯ç”±</h4><p>åˆ›å»ºæƒé™ç®¡ç†ç»„ä»¶ï¼ˆRights.vueï¼‰ï¼Œå¹¶åœ¨router.jsæ·»åŠ å¯¹åº”çš„è·¯ç”±è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Rights</span> <span class="keyword">from</span> <span class="string">&#x27;./components/power/Rights.vue&#x27;</span></span><br><span class="line">......</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h4 id="B-æ·»åŠ é¢åŒ…å±‘å¯¼èˆª"><a href="#B-æ·»åŠ é¢åŒ…å±‘å¯¼èˆª" class="headerlink" title="B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª"></a>B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª</h4><p>åœ¨Rights.vueä¸­æ·»åŠ é¢åŒ…å±‘ç»„ä»¶å±•ç¤ºå¯¼èˆªè·¯å¾„</p>
<h4 id="C-æ˜¾ç¤ºæ•°æ®"><a href="#C-æ˜¾ç¤ºæ•°æ®" class="headerlink" title="C.æ˜¾ç¤ºæ•°æ®"></a>C.æ˜¾ç¤ºæ•°æ®</h4><p>åœ¨dataä¸­æ·»åŠ ä¸€ä¸ªrightsListæ•°æ®ï¼Œåœ¨methodsä¸­æä¾›ä¸€ä¸ªgetRightsListæ–¹æ³•å‘é€è¯·æ±‚è·å–æƒé™åˆ—è¡¨æ•°æ®ï¼Œåœ¨createdä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•è·å–æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-table :data=&quot;rightsList&quot; stripe&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;æƒé™åç§°&quot; prop=&quot;authName&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;è·¯å¾„&quot; prop=&quot;path&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;æƒé™ç­‰çº§&quot; prop=&quot;level&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt; </span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 0&quot;&gt;ä¸€çº§æƒé™&lt;/el-tag&gt;</span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 1&quot; type=&quot;success&quot;&gt;äºŒçº§æƒé™&lt;/el-tag&gt;</span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 2&quot; type=&quot;warning&quot;&gt;ä¸‰çº§æƒé™&lt;/el-tag&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            //åˆ—è¡¨å½¢å¼çš„æƒé™</span><br><span class="line">            rightsList:[]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">        this.getRightsList();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        async getRightsList()&#123;</span><br><span class="line">            const &#123;data:res&#125; = await this.$http.get(&#x27;rights/list&#x27;)</span><br><span class="line">            //å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span><br><span class="line">            if (res.meta.status !== 200)</span><br><span class="line">                return this.$message.error(&#x27;è·å–æƒé™åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">            //å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span><br><span class="line">            this.rightsList = res.data</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-è§’è‰²åˆ—è¡¨"><a href="#5-è§’è‰²åˆ—è¡¨" class="headerlink" title="5.è§’è‰²åˆ—è¡¨"></a>5.è§’è‰²åˆ—è¡¨</h3><h4 id="A-æ·»åŠ è§’è‰²åˆ—è¡¨è·¯ç”±"><a href="#A-æ·»åŠ è§’è‰²åˆ—è¡¨è·¯ç”±" class="headerlink" title="A.æ·»åŠ è§’è‰²åˆ—è¡¨è·¯ç”±"></a>A.æ·»åŠ è§’è‰²åˆ—è¡¨è·¯ç”±</h4><p>æ·»åŠ è§’è‰²åˆ—è¡¨å­ç»„ä»¶ï¼ˆpower&#x2F;Roles.vueï¼‰ï¼Œå¹¶æ·»åŠ å¯¹åº”çš„è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;</span><br><span class="line">      ]</span><br></pre></td></tr></table></figure>

<h4 id="B-æ·»åŠ é¢åŒ…å±‘å¯¼èˆª-1"><a href="#B-æ·»åŠ é¢åŒ…å±‘å¯¼èˆª-1" class="headerlink" title="B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª"></a>B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª</h4><p>åœ¨Roles.vueä¸­æ·»åŠ é¢åŒ…å±‘ç»„ä»¶å±•ç¤ºå¯¼èˆªè·¯å¾„</p>
<h4 id="C-æ˜¾ç¤ºæ•°æ®-1"><a href="#C-æ˜¾ç¤ºæ•°æ®-1" class="headerlink" title="C.æ˜¾ç¤ºæ•°æ®"></a>C.æ˜¾ç¤ºæ•°æ®</h4><p>åœ¨dataä¸­æ·»åŠ ä¸€ä¸ªroleListæ•°æ®ï¼Œåœ¨methodsä¸­æä¾›ä¸€ä¸ªgetRoleListæ–¹æ³•å‘é€è¯·æ±‚è·å–æƒé™åˆ—è¡¨æ•°æ®ï¼Œåœ¨createdä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•è·å–æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- è§’è‰²åˆ—è¡¨åŒºåŸŸ --&gt;</span><br><span class="line">&lt;!-- row-key=&quot;id&quot; æ˜¯2019å¹´3æœˆæä¾›çš„æ–°ç‰¹æ€§ï¼Œ</span><br><span class="line">if there&#x27;s nested data, rowKey is required.</span><br><span class="line">å¦‚æœè¿™æ˜¯ä¸€ä¸ªåµŒå¥—çš„æ•°æ®ï¼Œrowkey æ˜¯å¿…é¡»æ·»åŠ çš„å±æ€§ --&gt;</span><br><span class="line">&lt;el-table row-key=&quot;id&quot; :data=&quot;roleList&quot; border&gt;</span><br><span class="line">    &lt;!-- æ·»åŠ å±•å¼€åˆ— --&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;è§’è‰²åç§°&quot; prop=&quot;roleName&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;è§’è‰²æè¿°&quot; prop=&quot;roleDesc&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;300px&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt; </span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;warning&quot; icon=&quot;el-icon-setting&quot;&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            roleList:[]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,created()&#123;</span><br><span class="line">        this.getRoleList();</span><br><span class="line">    &#125;,methods:&#123;</span><br><span class="line">        async getRoleList()&#123;</span><br><span class="line">            const &#123;data:res&#125; = await this.$http.get(&#x27;roles&#x27;)</span><br><span class="line">            //å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span><br><span class="line">            // if (res.meta.status !== 200)</span><br><span class="line">            //     return this.$message.error(&#x27;è·å–è§’è‰²åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">            // //å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span><br><span class="line">            // this.roleList = res.data</span><br><span class="line">            console.log(res.data)</span><br><span class="line">            this.roleList = res.data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-è¡¥å……è¯´æ˜"><a href="#D-è¡¥å……è¯´æ˜" class="headerlink" title="D.è¡¥å……è¯´æ˜"></a>D.è¡¥å……è¯´æ˜</h4><p>ä¹‹å‰å­¦ä¹ è¿‡ç±»ä¼¼çš„æ·»åŠ è§’è‰²ï¼Œåˆ é™¤è§’è‰²ï¼Œç¼–è¾‘è§’è‰²è¯·å‚ç…§ä¹‹å‰ç¼–å†™è¿‡çš„ä»£ç è¿˜æœ‰æ¥å£æ–‡æ¡£å®Œæˆæ•ˆæœã€‚</p>
<h4 id="E-ç”Ÿæˆæƒé™åˆ—è¡¨"><a href="#E-ç”Ÿæˆæƒé™åˆ—è¡¨" class="headerlink" title="E.ç”Ÿæˆæƒé™åˆ—è¡¨"></a>E.ç”Ÿæˆæƒé™åˆ—è¡¨</h4><p>ä½¿ç”¨ä¸‰é‡åµŒå¥—forå¾ªç¯ç”Ÿæˆæƒé™ä¸‹æ‹‰åˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- æ·»åŠ å±•å¼€åˆ— --&gt;</span><br><span class="line">&lt;el-table-column type=&quot;expand&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-row :class=&quot;[&#x27;bdbottom&#x27;,i1===0?&#x27;bdtop&#x27;:&#x27;&#x27;]&quot; v-for=&quot;(item1,i1) in scope.row.children&quot; :key=&quot;item1.id&quot;&gt;</span><br><span class="line">            &lt;!-- æ¸²æŸ“ä¸€çº§æƒé™ --&gt;</span><br><span class="line">            &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">                &lt;el-tag&gt;</span><br><span class="line">                    &#123;&#123;item1.authName&#125;&#125;</span><br><span class="line">                &lt;/el-tag&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;!-- æ¸²æŸ“äºŒï¼Œä¸‰çº§æƒé™ --&gt;</span><br><span class="line">            &lt;el-col :span=&quot;19&quot;&gt;</span><br><span class="line">                &lt;!-- é€šè¿‡forå¾ªç¯åµŒå¥—æ¸²æŸ“äºŒçº§æƒé™  --&gt;</span><br><span class="line">                &lt;el-row :class=&quot;[i2===0?&#x27;&#x27;:&#x27;bdtop&#x27; ]&quot; v-for=&quot;(item2,i2) in item1.children&quot; :key=&quot;item2.id&quot;&gt;</span><br><span class="line">                    &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">                        &lt;el-tag type=&quot;success&quot;&gt;&#123;&#123;item2.authName&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">                        &lt;i class=&quot;el-icon-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;/el-col&gt;</span><br><span class="line">                    &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">                        &lt;el-tag type=&quot;warning&quot; v-for=&quot;(item3) in item2.children&quot; :key=&quot;item3.id&quot;&gt;</span><br><span class="line">                            &#123;&#123;item3.authName&#125;&#125;</span><br><span class="line">                        &lt;/el-tag&gt;</span><br><span class="line">                    &lt;/el-col&gt;</span><br><span class="line">                &lt;/el-row&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>

<h4 id="F-ç¾åŒ–æ ·å¼"><a href="#F-ç¾åŒ–æ ·å¼" class="headerlink" title="F.ç¾åŒ–æ ·å¼"></a>F.ç¾åŒ–æ ·å¼</h4><p>é€šè¿‡è®¾ç½®global.cssä¸­çš„#appæ ·å¼min-width:1366px è§£å†³ä¸‰çº§æƒé™æ¢è¡Œçš„é—®é¢˜<br>ï¼Œé€šè¿‡ç»™ä¸€çº§æƒé™el-rowæ·»åŠ display:flex,align-items:centerçš„æ–¹å¼è§£å†³ä¸€çº§æƒé™å‚ç›´å±…ä¸­çš„é—®é¢˜ï¼ŒäºŒçº§æƒé™ä¹Ÿç±»ä¼¼æ·»åŠ ï¼Œå› ä¸ºéœ€è¦ç»™å¤šä¸ªå†…å®¹æ·»åŠ ï¼Œå¯ä»¥å°†è¿™ä¸ªæ ·å¼è®¾ç½®ä¸ºä¸€ä¸ª.vcenter{display:flex;align-items:center}</p>
<h4 id="G-æ·»åŠ æƒé™åˆ é™¤åŠŸèƒ½"><a href="#G-æ·»åŠ æƒé™åˆ é™¤åŠŸèƒ½" class="headerlink" title="G.æ·»åŠ æƒé™åˆ é™¤åŠŸèƒ½"></a>G.æ·»åŠ æƒé™åˆ é™¤åŠŸèƒ½</h4><p>ç»™æ¯ä¸€ä¸ªæƒé™çš„el-tagæ·»åŠ closableå±æ€§ï¼Œæ˜¯çš„æƒé™å³ä¾§å‡ºç°â€œXâ€å›¾æ ‡<br>å†ç»™el-tagæ·»åŠ ç»‘å®šcloseäº‹ä»¶å¤„ç†å‡½æ•°removeRightById(scope.row,item1.id)<br>removeRightById(scope.row,item2.id)<br>removeRightById(scope.row,item3.id)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">removeRightById</span>(<span class="params">role,rightId</span>)&#123;</span><br><span class="line">    <span class="comment">//å¼¹çª—æç¤ºç”¨æˆ·æ˜¯å¦è¦åˆ é™¤</span></span><br><span class="line">    <span class="keyword">const</span> confirmResult = <span class="keyword">await</span> <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;è¯·é—®æ˜¯å¦è¦åˆ é™¤è¯¥æƒé™&#x27;</span>,<span class="string">&#x27;åˆ é™¤æç¤º&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>:<span class="string">&#x27;ç¡®è®¤åˆ é™¤&#x27;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>:<span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>err)</span><br><span class="line">    <span class="comment">//å¦‚æœç”¨æˆ·ç‚¹å‡»ç¡®è®¤ï¼Œåˆ™confirmResult ä¸º&#x27;confirm&#x27;</span></span><br><span class="line">    <span class="comment">//å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆ, åˆ™confirmResultè·å–çš„å°±æ˜¯catchçš„é”™è¯¯æ¶ˆæ¯&#x27;cancel&#x27;</span></span><br><span class="line">    <span class="keyword">if</span>(confirmResult != <span class="string">&quot;confirm&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;å·²ç»å–æ¶ˆåˆ é™¤&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®šè¡¨ç¤ºçœŸçš„è¦åˆ é™¤</span></span><br><span class="line">    <span class="comment">//å½“å‘é€deleteè¯·æ±‚ä¹‹åï¼Œè¿”å›çš„æ•°æ®å°±æ˜¯æœ€æ–°çš„è§’è‰²æƒé™ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">delete</span>(<span class="string">`roles/<span class="subst">$&#123;role.id&#125;</span>/rights/<span class="subst">$&#123;rightId&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;åˆ é™¤è§’è‰²æƒé™å¤±è´¥&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ— éœ€å†é‡æ–°åŠ è½½æ‰€æœ‰æƒé™</span></span><br><span class="line">    <span class="comment">//åªéœ€è¦å¯¹ç°æœ‰çš„è§’è‰²æƒé™è¿›è¡Œæ›´æ–°å³å¯</span></span><br><span class="line">    role.<span class="property">children</span> = res.<span class="property">data</span></span><br><span class="line">    <span class="comment">// this.getRoleList();</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="H-å®Œæˆæƒé™åˆ†é…åŠŸèƒ½"><a href="#H-å®Œæˆæƒé™åˆ†é…åŠŸèƒ½" class="headerlink" title="H.å®Œæˆæƒé™åˆ†é…åŠŸèƒ½"></a>H.å®Œæˆæƒé™åˆ†é…åŠŸèƒ½</h4><p>å…ˆç»™åˆ†é…æƒé™æŒ‰é’®æ·»åŠ äº‹ä»¶<br>&lt;el-button size&#x3D;â€miniâ€ type&#x3D;â€warningâ€ icon&#x3D;â€el-icon-settingâ€ @click&#x3D;â€showSetRightDialogâ€&gt;åˆ†é…æƒé™</el-button><br>åœ¨showSetRightDialogå‡½æ•°ä¸­è¯·æ±‚æƒé™æ ‘æ•°æ®å¹¶æ˜¾ç¤ºå¯¹è¯æ¡†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">showSetRightDialog</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//å½“ç‚¹å‡»åˆ†é…æƒé™æŒ‰é’®æ—¶ï¼Œå±•ç¤ºå¯¹åº”çš„å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setRightDialogVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰æƒé™çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;rights/tree&#x27;</span>)</span><br><span class="line">    <span class="comment">//å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–æƒé™æ ‘å¤±è´¥&#x27;</span>)</span><br><span class="line">    <span class="comment">//å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rightsList</span> = res.<span class="property">data</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ åˆ†é…æƒé™å¯¹è¯æ¡†ï¼Œå¹¶æ·»åŠ ç»‘å®šæ•°æ®setRightDialogVisible</p>
<!-- åˆ†é…æƒé™å¯¹è¯æ¡† -->
<el-dialog title="åˆ†é…æƒé™" :visible.sync="setRightDialogVisible" width="50%">
    <span>è¿™æ˜¯ä¸€æ®µä¿¡æ¯</span>
    <span slot="footer" class="dialog-footer">
        <el-button @click="setRightDialogVisible = false">å– æ¶ˆ</el-button>
        <el-button type="primary" @click="setRightDialogVisible = false">ç¡® å®š</el-button>
    </span>
</el-dialog>

<h4 id="I-å®Œæˆæ ‘å½¢ç»“æ„å¼¹çª—"><a href="#I-å®Œæˆæ ‘å½¢ç»“æ„å¼¹çª—" class="headerlink" title="I.å®Œæˆæ ‘å½¢ç»“æ„å¼¹çª—"></a>I.å®Œæˆæ ‘å½¢ç»“æ„å¼¹çª—</h4><p>åœ¨element.jsä¸­å¼•å…¥Treeï¼Œæ³¨å†ŒTree</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é…æƒé™å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;åˆ†é…æƒé™&quot; :visible.sync=&quot;setRightDialogVisible&quot; width=&quot;50%&quot; @close=&quot;setRightDialogClose&quot;&gt;</span><br><span class="line">    &lt;!-- æ ‘å½¢ç»„ä»¶</span><br><span class="line">    show-checkbox:æ˜¾ç¤ºå¤é€‰æ¡†</span><br><span class="line">    node-key:è®¾ç½®é€‰ä¸­èŠ‚ç‚¹å¯¹åº”çš„å€¼</span><br><span class="line">    default-expand-all:æ˜¯å¦é»˜è®¤å±•å¼€æ‰€æœ‰èŠ‚ç‚¹</span><br><span class="line">    :default-checked-keys è®¾ç½®é»˜è®¤é€‰ä¸­é¡¹çš„æ•°ç»„</span><br><span class="line">    ref:è®¾ç½®å¼•ç”¨ --&gt;</span><br><span class="line">    &lt;el-tree :data=&quot;rightsList&quot; :props=&quot;treeProps&quot; show-checkbox node-key=&quot;id&quot; default-expand-all :default-checked-keys=&quot;defKeys&quot; ref=&quot;treeRef&quot;&gt;&lt;/el-tree&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;setRightDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;allotRights&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //è§’è‰²åˆ—è¡¨æ•°æ®</span><br><span class="line">      roleList: [],</span><br><span class="line">      //æ§åˆ¶åˆ†é…æƒé™å¯¹è¯æ¡†çš„æ˜¾ç¤º</span><br><span class="line">      setRightDialogVisible: false,</span><br><span class="line">      //æƒé™æ ‘æ•°æ®</span><br><span class="line">      rightsList: [],</span><br><span class="line">      //æ ‘å½¢æ§ä»¶çš„å±æ€§ç»‘å®šå¯¹è±¡</span><br><span class="line">      treeProps: &#123;</span><br><span class="line">        //é€šè¿‡labelè®¾ç½®æ ‘å½¢èŠ‚ç‚¹æ–‡æœ¬å±•ç¤ºauthName</span><br><span class="line">        label: &#x27;authName&#x27;,</span><br><span class="line">        //è®¾ç½®é€šè¿‡childrenå±æ€§å±•ç¤ºå­èŠ‚ç‚¹ä¿¡æ¯</span><br><span class="line">        children: &#x27;children&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //è®¾ç½®æ ‘å½¢æ§ä»¶ä¸­é»˜è®¤é€‰ä¸­çš„å†…å®¹</span><br><span class="line">      defKeys: [],</span><br><span class="line">      //ä¿å­˜æ­£åœ¨æ“ä½œçš„è§’è‰²id</span><br><span class="line">      roleId:&#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getRoleList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getRoleList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;roles&#x27;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span><br><span class="line">      if (res.meta.status !== 200)</span><br><span class="line">        return this.$message.error(&#x27;è·å–è§’è‰²åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span><br><span class="line">      // this.roleList = res.data</span><br><span class="line">      console.log(res.data)</span><br><span class="line">      this.roleList = res.data</span><br><span class="line">    &#125;,</span><br><span class="line">    async removeRightById(role, rightId) &#123;</span><br><span class="line">      //å¼¹çª—æç¤ºç”¨æˆ·æ˜¯å¦è¦åˆ é™¤</span><br><span class="line">      const confirmResult = await this.$confirm(</span><br><span class="line">        &#x27;è¯·é—®æ˜¯å¦è¦åˆ é™¤è¯¥æƒé™&#x27;,</span><br><span class="line">        &#x27;åˆ é™¤æç¤º&#x27;,</span><br><span class="line">        &#123;</span><br><span class="line">          confirmButtonText: &#x27;ç¡®è®¤åˆ é™¤&#x27;,</span><br><span class="line">          cancelButtonText: &#x27;å–æ¶ˆ&#x27;,</span><br><span class="line">          type: &#x27;warning&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      ).catch(err =&gt; err)</span><br><span class="line">      //å¦‚æœç”¨æˆ·ç‚¹å‡»ç¡®è®¤ï¼Œåˆ™confirmResult ä¸º&#x27;confirm&#x27;</span><br><span class="line">      //å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆ, åˆ™confirmResultè·å–çš„å°±æ˜¯catchçš„é”™è¯¯æ¶ˆæ¯&#x27;cancel&#x27;</span><br><span class="line">      if (confirmResult != &#x27;confirm&#x27;) &#123;</span><br><span class="line">        return this.$message.info(&#x27;å·²ç»å–æ¶ˆåˆ é™¤&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      //ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®šè¡¨ç¤ºçœŸçš„è¦åˆ é™¤</span><br><span class="line">      //å½“å‘é€deleteè¯·æ±‚ä¹‹åï¼Œè¿”å›çš„æ•°æ®å°±æ˜¯æœ€æ–°çš„è§’è‰²æƒé™ä¿¡æ¯</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.delete(</span><br><span class="line">        `roles/$&#123;role.id&#125;/rights/$&#123;rightId&#125;`</span><br><span class="line">      )</span><br><span class="line">      if (res.meta.status !== 200)</span><br><span class="line">        return this.$message.error(&#x27;åˆ é™¤è§’è‰²æƒé™å¤±è´¥&#x27;)</span><br><span class="line"></span><br><span class="line">      //æ— éœ€å†é‡æ–°åŠ è½½æ‰€æœ‰æƒé™</span><br><span class="line">      //åªéœ€è¦å¯¹ç°æœ‰çš„è§’è‰²æƒé™è¿›è¡Œæ›´æ–°å³å¯</span><br><span class="line">      role.children = res.data</span><br><span class="line">      // this.getRoleList();</span><br><span class="line">    &#125;,</span><br><span class="line">    async showSetRightDialog(role) &#123;</span><br><span class="line">      //å°†role.idä¿å­˜èµ·æ¥ä»¥ä¾›ä¿å­˜æƒé™æ—¶ä½¿ç”¨</span><br><span class="line">      this.roleId = role.id;  </span><br><span class="line">      //è·å–æ‰€æœ‰æƒé™çš„æ•°æ®</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;rights/tree&#x27;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€ä¸ºå¼‚å¸¸çŠ¶æ€åˆ™æŠ¥é”™å¹¶è¿”å›</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;è·å–æƒé™æ ‘å¤±è´¥&#x27;)</span><br><span class="line">      //å¦‚æœè¿”å›çŠ¶æ€æ­£å¸¸ï¼Œå°†è¯·æ±‚çš„æ•°æ®ä¿å­˜åœ¨dataä¸­</span><br><span class="line">      this.rightsList = res.data</span><br><span class="line"></span><br><span class="line">      //è°ƒç”¨getLeafKeysè¿›è¡Œé€’å½’ï¼Œå°†ä¸‰çº§æƒé™æ·»åŠ åˆ°æ•°ç»„ä¸­</span><br><span class="line">      this.getLeafKeys(role, this.defKeys)</span><br><span class="line">      //å½“ç‚¹å‡»åˆ†é…æƒé™æŒ‰é’®æ—¶ï¼Œå±•ç¤ºå¯¹åº”çš„å¯¹è¯æ¡†</span><br><span class="line">      this.setRightDialogVisible = true</span><br><span class="line">      console.log(this.defKeys)</span><br><span class="line">    &#125;,</span><br><span class="line">    getLeafKeys(node, arr) &#123;</span><br><span class="line">      //è¯¥å‡½æ•°ä¼šè·å–åˆ°å½“å‰è§’è‰²çš„æ‰€æœ‰ä¸‰çº§æƒé™idå¹¶æ·»åŠ åˆ°defKeysä¸­</span><br><span class="line">      //å¦‚æœå½“å‰èŠ‚ç‚¹ä¸åŒ…å«childrenå±æ€§ï¼Œåˆ™è¡¨ç¤ºnodeä¸ºä¸‰çº§æƒé™</span><br><span class="line">      if (!node.children) &#123;</span><br><span class="line">        return arr.push(node.id)</span><br><span class="line">      &#125;</span><br><span class="line">      //é€’å½’è°ƒç”¨</span><br><span class="line">      node.children.forEach(item =&gt; this.getLeafKeys(item, arr))</span><br><span class="line">    &#125;,</span><br><span class="line">    setRightDialogClose() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·å…³é—­æ ‘å½¢æƒé™å¯¹è¯æ¡†çš„æ—¶å€™ï¼Œæ¸…é™¤æ‰æ‰€æœ‰é€‰ä¸­çŠ¶æ€</span><br><span class="line">      this.defKeys = []</span><br><span class="line">    &#125;,</span><br><span class="line">    async allotRights() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·åœ¨æ ‘å½¢æƒé™å¯¹è¯æ¡†ä¸­ç‚¹å‡»ç¡®å®šï¼Œå°†ç”¨æˆ·é€‰æ‹©çš„</span><br><span class="line">      //æƒé™å‘é€è¯·æ±‚è¿›è¡Œæ›´æ–°</span><br><span class="line"></span><br><span class="line">      //è·å–æ‰€æœ‰é€‰ä¸­åŠåŠé€‰çš„å†…å®¹</span><br><span class="line">      const keys = [</span><br><span class="line">        ...this.$refs.treeRef.getCheckedKeys(),</span><br><span class="line">        ...this.$refs.treeRef.getHalfCheckedKeys()</span><br><span class="line">      ]</span><br><span class="line">      //å°†æ•°ç»„è½¬æ¢ä¸º , æ‹¼æ¥çš„å­—ç¬¦ä¸²</span><br><span class="line">      const idStr = keys.join(&#x27;,&#x27;)</span><br><span class="line"></span><br><span class="line">      //å‘é€è¯·æ±‚å®Œæˆæ›´æ–°</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.post(</span><br><span class="line">        `roles/$&#123;this.roleId&#125;/rights`,</span><br><span class="line">        &#123; rids:idStr &#125;</span><br><span class="line">      )</span><br><span class="line">      if (res.meta.status !== 200)</span><br><span class="line">        return this.$message.error(&#x27;åˆ†é…æƒé™å¤±è´¥&#x27;)</span><br><span class="line"></span><br><span class="line">      this.$message.success(&quot;åˆ†é…æƒé™æˆåŠŸ&quot;)</span><br><span class="line">      this.getRoleList();</span><br><span class="line">      //å…³é—­å¯¹è¯æ¡†</span><br><span class="line">      this.setRightDialogVisible = false;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-åˆ†é…è§’è‰²"><a href="#6-åˆ†é…è§’è‰²" class="headerlink" title="6.åˆ†é…è§’è‰²"></a>6.åˆ†é…è§’è‰²</h3><p>æ‰“å¼€Users.vueï¼Œå®Œæˆåˆ†é…è§’è‰²çš„åŠŸèƒ½<br>A.æ·»åŠ åˆ†é…è§’è‰²å¯¹è¯æ¡†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é…è§’è‰²å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;åˆ†é…è§’è‰²&quot; :visible.sync=&quot;setRoleDialogVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;p&gt;å½“å‰çš„ç”¨æˆ·:&#123;&#123;userInfo.username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;å½“å‰çš„è§’è‰²:&#123;&#123;userInfo.role_name&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;åˆ†é…æ–°è§’è‰²:&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;setRoleDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;setRoleDialogVisible = false&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>

<p>B.ç»™åˆ†é…è§’è‰²æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ä¹‹åå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¿›è¡Œè§’è‰²åˆ†é…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é…è§’è‰² --&gt;</span><br><span class="line">&lt;el-tooltip class=&quot;item&quot; effect=&quot;dark&quot; content=&quot;åˆ†é…è§’è‰²&quot; placement=&quot;top&quot; :enterable=&quot;false&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-setting&quot; size=&#x27;mini&#x27; @click=&quot;setRole(scope.row)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/el-tooltip&gt;</span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">    ......</span><br><span class="line">    //æ§åˆ¶æ˜¾ç¤ºåˆ†é…è§’è‰²å¯¹è¯æ¡†</span><br><span class="line">    setRoleDialogVisible:false,</span><br><span class="line">    //ä¿å­˜æ­£åœ¨æ“ä½œçš„é‚£ä¸ªç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    userInfo:&#123;&#125;,</span><br><span class="line">    //ä¿å­˜æ‰€æœ‰çš„è§’è‰²ä¿¡æ¯</span><br><span class="line">    rolesList:[],</span><br><span class="line">    //ä¿å­˜ç”¨æˆ·é€‰ä¸­çš„è§’è‰²id</span><br><span class="line">    selectedRoleId:&#x27;&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    async setRole( userInfo )&#123;</span><br><span class="line">      //ä¿å­˜èµ·æ¥ä»¥ä¾›åç»­ä½¿ç”¨</span><br><span class="line">      this.userInfo = userInfo;</span><br><span class="line">      //è·å–æ‰€æœ‰çš„è§’è‰²ä¿¡æ¯ï¼Œä»¥å¤‡ä¸‹æ‹‰åˆ—è¡¨ä½¿ç”¨</span><br><span class="line">      //å‘é€è¯·æ±‚æ ¹æ®idå®Œæˆåˆ é™¤æ“ä½œ</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;roles&#x27;)</span><br><span class="line">      //åˆ¤æ–­å¦‚æœåˆ é™¤å¤±è´¥ï¼Œå°±åšæç¤º</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;è·å–è§’è‰²åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">      </span><br><span class="line">      this.rolesList = res.data;</span><br><span class="line">      //å±•ç¤ºåˆ†é…è§’è‰²å¯¹è¯æ¡†</span><br><span class="line">      this.setRoleDialogVisible = true;</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>C.åœ¨element.jsä¸­å¼•å…¥Selectï¼ŒOptionï¼Œæ³¨å†ŒSelectï¼ŒOption</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- è§’è‰²é€‰æ‹©ä¸‹æ‹‰æ¡†</span><br><span class="line">v-modelï¼šè®¾ç½®ç”¨æˆ·é€‰ä¸­è§’è‰²ä¹‹åçš„idç»‘å®šæ•°æ®</span><br><span class="line">--&gt;</span><br><span class="line">&lt;el-select v-model=&quot;selectedRoleId&quot; placeholder=&quot;è¯·é€‰æ‹©è§’è‰²&quot;&gt;</span><br><span class="line">&lt;!-- :label æ˜¾ç¤ºæ–‡æœ¬ï¼Œ:value é€‰ä¸­å€¼ --&gt;</span><br><span class="line">&lt;el-option v-for=&quot;item in rolesList&quot; :key=&quot;item.id&quot; :label=&quot;item.roleName&quot; :value=&quot;item.id&quot;&gt;</span><br><span class="line">&lt;/el-option&gt;</span><br><span class="line">&lt;/el-select&gt;</span><br></pre></td></tr></table></figure>

<p>D.å½“ç”¨æˆ·ç‚¹å‡»å¯¹è¯æ¡†ä¸­çš„ç¡®å®šä¹‹åï¼Œå®Œæˆåˆ†é…è§’è‰²çš„æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é…è§’è‰²å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;åˆ†é…è§’è‰²&quot; :visible.sync=&quot;setRoleDialogVisible&quot; width=&quot;50%&quot; @close=&quot;setRoleDialogClosed&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;p&gt;å½“å‰çš„ç”¨æˆ·:&#123;&#123;userInfo.username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;å½“å‰çš„è§’è‰²:&#123;&#123;userInfo.role_name&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;åˆ†é…æ–°è§’è‰²:</span><br><span class="line">        &lt;!-- è§’è‰²é€‰æ‹©ä¸‹æ‹‰æ¡†</span><br><span class="line">        v-modelï¼šè®¾ç½®ç”¨æˆ·é€‰ä¸­è§’è‰²ä¹‹åçš„idç»‘å®šæ•°æ®</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;el-select v-model=&quot;selectedRoleId&quot; placeholder=&quot;è¯·é€‰æ‹©è§’è‰²&quot;&gt;</span><br><span class="line">        &lt;!-- :label æ˜¾ç¤ºæ–‡æœ¬ï¼Œ:value é€‰ä¸­å€¼ --&gt;</span><br><span class="line">        &lt;el-option v-for=&quot;item in rolesList&quot; :key=&quot;item.id&quot; :label=&quot;item.roleName&quot; :value=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;setRoleDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;saveRoleInfo&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">    .......</span><br><span class="line">    async saveRoleInfo()&#123;</span><br><span class="line">      //å½“ç”¨æˆ·ç‚¹å‡»ç¡®å®šæŒ‰é’®ä¹‹å</span><br><span class="line">      //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†éœ€è¦åˆ†é…çš„è§’è‰²</span><br><span class="line">      if(!this.selectedRoleId)&#123;</span><br><span class="line">        return this.$message.error(&#x27;è¯·é€‰æ‹©éœ€è¦åˆ†é…çš„è§’è‰²&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      //å‘é€è¯·æ±‚å®Œæˆåˆ†é…è§’è‰²çš„æ“ä½œ</span><br><span class="line">      const &#123;data:res&#125; = await this.$http.put(`users/$&#123;this.userInfo.id&#125;/role`,&#123;rid:this.selectedRoleId&#125;)</span><br><span class="line"></span><br><span class="line">      //åˆ¤æ–­å¦‚æœåˆ é™¤å¤±è´¥ï¼Œå°±åšæç¤º</span><br><span class="line">      if (res.meta.status !== 200)</span><br><span class="line">        return this.$message.error(&#x27;åˆ†é…è§’è‰²å¤±è´¥&#x27;)</span><br><span class="line"></span><br><span class="line">      this.$message.success(&#x27;åˆ†é…è§’è‰²æˆåŠŸ&#x27;)</span><br><span class="line">      this.getUserList();</span><br><span class="line">      //å…³é—­å¯¹è¯æ¡†</span><br><span class="line">      this.setRoleDialogVisible = false</span><br><span class="line">    &#125;,</span><br><span class="line">    setRoleDialogClosed()&#123;</span><br><span class="line">      //å½“å…³é—­å¯¹è¯æ¡†çš„æ—¶å€™ï¼Œé‡ç½®ä¸‹æ‹‰æ¡†ä¸­çš„å†…å®¹</span><br><span class="line">      this.selectedRoleId = &#x27;&#x27;</span><br><span class="line">      this.userInfo = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-å°†ä»£ç æ¨é€åˆ°ç äº‘"><a href="#7-å°†ä»£ç æ¨é€åˆ°ç äº‘" class="headerlink" title="7.å°†ä»£ç æ¨é€åˆ°ç äº‘"></a>7.å°†ä»£ç æ¨é€åˆ°ç äº‘</h3><p>A.å°†ä»£ç æ¨é€åˆ°æš‚å­˜åŒº git add .<br>B.å°†ä»£ç æäº¤åˆ°ä»“åº“ git commit -m â€˜å®Œæˆäº†æƒé™åŠŸèƒ½å¼€å‘â€™<br>C.å°†rightsåˆ†æ”¯ä»£ç æ¨é€åˆ°ç äº‘ git push<br>D.å°†ä»£ç åˆå¹¶åˆ°master<br>    git checkout master<br>    git merge rights<br>E.å°†masterä»£ç æ¨é€åˆ°ç äº‘<br>    git push</p>
<h2 id="å››ã€ä»Šæ—¥ç›®æ ‡"><a href="#å››ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="å››ã€ä»Šæ—¥ç›®æ ‡"></a>å››ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.å®Œæˆå•†å“åˆ†ç±» </p>
<p>2.å®Œæˆå‚æ•°ç®¡ç† </p>
<h3 id="1-å•†å“åˆ†ç±»"><a href="#1-å•†å“åˆ†ç±»" class="headerlink" title="1.å•†å“åˆ†ç±»"></a>1.å•†å“åˆ†ç±»</h3><h4 id="A-æ–°å»ºåˆ†æ”¯goods-cate"><a href="#A-æ–°å»ºåˆ†æ”¯goods-cate" class="headerlink" title="A.æ–°å»ºåˆ†æ”¯goods_cate"></a>A.æ–°å»ºåˆ†æ”¯goods_cate</h4><p>æ–°å»ºåˆ†æ”¯goods_cateå¹¶æ¨é€åˆ°ç äº‘<br>git checkout -b goods_cate<br>git push -u origin goods_cate</p>
<h4 id="B-åˆ›å»ºå­çº§è·¯ç”±"><a href="#B-åˆ›å»ºå­çº§è·¯ç”±" class="headerlink" title="B.åˆ›å»ºå­çº§è·¯ç”±"></a>B.åˆ›å»ºå­çº§è·¯ç”±</h4><p>åˆ›å»ºcategorieså­çº§è·¯ç”±ç»„ä»¶å¹¶è®¾ç½®è·¯ç”±è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Cate</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Cate.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-æ·»åŠ ç»„ä»¶åŸºæœ¬å¸ƒå±€"><a href="#C-æ·»åŠ ç»„ä»¶åŸºæœ¬å¸ƒå±€" class="headerlink" title="C.æ·»åŠ ç»„ä»¶åŸºæœ¬å¸ƒå±€"></a>C.æ·»åŠ ç»„ä»¶åŸºæœ¬å¸ƒå±€</h4><p>åœ¨Cate.vueç»„ä»¶ä¸­æ·»åŠ é¢åŒ…å±‘å¯¼èˆªä»¥åŠå¡ç‰‡è§†å›¾ä¸­çš„æ·»åŠ åˆ†ç±»æŒ‰é’®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;å•†å“åˆ†ç±»&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“åˆ†ç±»&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;!-- æ·»åŠ åˆ†ç±»æŒ‰é’®åŒºåŸŸ --&gt;</span><br><span class="line">            &lt;el-row&gt;</span><br><span class="line">                &lt;el-col&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;æ·»åŠ åˆ†ç±»&lt;/el-button&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">            &lt;!-- åˆ†ç±»è¡¨æ ¼  --&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- åˆ†é¡µ --&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-è¯·æ±‚åˆ†ç±»æ•°æ®"><a href="#D-è¯·æ±‚åˆ†ç±»æ•°æ®" class="headerlink" title="D.è¯·æ±‚åˆ†ç±»æ•°æ®"></a>D.è¯·æ±‚åˆ†ç±»æ•°æ®</h4><p>è¯·æ±‚åˆ†ç±»æ•°æ®å¹¶å°†æ•°æ®ä¿å­˜åœ¨dataä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // å•†å“åˆ†ç±»æ•°æ®åˆ—è¡¨</span><br><span class="line">      cateList: [],</span><br><span class="line">      //æŸ¥è¯¢åˆ†ç±»æ•°æ®çš„æ¡ä»¶</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        type: 3,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 5</span><br><span class="line">      &#125;,</span><br><span class="line">      //ä¿å­˜æ€»æ•°æ®æ¡æ•°</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      //è·å–å•†å“åˆ†ç±»æ•°æ®</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;, &#123;</span><br><span class="line">        params: queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–å•†å“åˆ—è¡¨æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      //å°†æ•°æ®åˆ—è¡¨èµ‹å€¼ç»™cateList</span><br><span class="line">      this.cateList = res.data.result</span><br><span class="line">      //ä¿å­˜æ€»æ•°æ®æ¡æ•°</span><br><span class="line">      this.total = res.data.total</span><br><span class="line">      //   console.log(res.data);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="E-ä½¿ç”¨æ’ä»¶å±•ç¤ºæ•°æ®"><a href="#E-ä½¿ç”¨æ’ä»¶å±•ç¤ºæ•°æ®" class="headerlink" title="E.ä½¿ç”¨æ’ä»¶å±•ç¤ºæ•°æ®"></a>E.ä½¿ç”¨æ’ä»¶å±•ç¤ºæ•°æ®</h4><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶vue-table-with-tree-gridå±•ç¤ºåˆ†ç±»æ•°æ®<br>    1).åœ¨vue æ§åˆ¶å°ä¸­ç‚¹å‡»ä¾èµ–-&gt;å®‰è£…ä¾èµ–-&gt;è¿è¡Œä¾èµ–-&gt;è¾“å…¥vue-table-with-tree-gird-&gt;ç‚¹å‡»å®‰è£…<br>    2).æ‰“å¼€main.jsï¼Œå¯¼å…¥vue-table-with-tree-grid<br>    import TreeTable from â€˜vue-table-with-tree-gridâ€™<br>    â€¦..<br>    Vue.config.productionTip &#x3D; false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;tree-table&#x27;</span>, <span class="title class_">TreeTable</span>)</span><br><span class="line"><span class="number">3</span>).ä½¿ç”¨ç»„ä»¶å±•ç¤ºåˆ†ç±»æ•°æ®</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†ç±»è¡¨æ ¼</span><br><span class="line">:data(è®¾ç½®æ•°æ®æº) :columns(è®¾ç½®è¡¨æ ¼ä¸­åˆ—é…ç½®ä¿¡æ¯) :selection-type(æ˜¯å¦æœ‰å¤é€‰æ¡†)</span><br><span class="line">:expand-type(æ˜¯å¦å±•å¼€æ•°æ®) show-index(æ˜¯å¦è®¾ç½®ç´¢å¼•åˆ—) index-text(è®¾ç½®ç´¢å¼•åˆ—å¤´)</span><br><span class="line">border(æ˜¯å¦æ·»åŠ çºµå‘è¾¹æ¡†) :show-row-hover(æ˜¯å¦é¼ æ ‡æ‚¬åœé«˜äº®) --&gt;</span><br><span class="line">&lt;tree-table :data=&quot;cateList&quot; :columns=&quot;columns&quot; :selection-type=&quot;false&quot;</span><br><span class="line">:expand-type=&quot;false&quot; show-index index-text=&quot;#&quot; border :show-row-hover=&quot;false&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/tree-table&gt;</span><br><span class="line"></span><br><span class="line">åœ¨æ•°æ®ä¸­æ·»åŠ columns:</span><br><span class="line">columns: [</span><br><span class="line">    &#123;label:&#x27;åˆ†ç±»åç§°&#x27;,prop:&#x27;cat_name&#x27;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="F-è‡ªå®šä¹‰æ•°æ®åˆ—"><a href="#F-è‡ªå®šä¹‰æ•°æ®åˆ—" class="headerlink" title="F.è‡ªå®šä¹‰æ•°æ®åˆ—"></a>F.è‡ªå®šä¹‰æ•°æ®åˆ—</h4><p>ä½¿ç”¨vue-table-with-tree-gridå®šä¹‰æ¨¡æ¿åˆ—å¹¶æ·»åŠ è‡ªå®šä¹‰åˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å…ˆåœ¨columnsä¸­æ·»åŠ ä¸€ä¸ªåˆ—</span><br><span class="line">columns: [</span><br><span class="line">    &#123;label:&#x27;åˆ†ç±»åç§°&#x27;,prop:&#x27;cat_name&#x27;&#125;,</span><br><span class="line">    //type:&#x27;template&#x27;(å°†è¯¥åˆ—è®¾ç½®ä¸ºæ¨¡æ¿åˆ—)ï¼Œtemplate:&#x27;isok&#x27;(è®¾ç½®è¯¥åˆ—æ¨¡æ¿çš„åç§°ä¸ºisok)</span><br><span class="line">    &#123;label:&#x27;æ˜¯å¦æœ‰æ•ˆ&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;isok&#x27;&#125;,</span><br><span class="line">    &#123;label:&#x27;æ’åº&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;order&#x27;&#125;,</span><br><span class="line">    &#123;label:&#x27;æ“ä½œ&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;opt&#x27;&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&lt;!-- æ˜¯å¦æœ‰æ•ˆåŒºåŸŸï¼Œ è®¾ç½®å¯¹åº”çš„æ¨¡æ¿åˆ—ï¼š slot=&quot;isok&quot;(ä¸columnsä¸­è®¾ç½®çš„templateä¸€è‡´) --&gt;</span><br><span class="line">&lt;template slot=&quot;isok&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;i class=&quot;el-icon-success&quot; v-if=&quot;scope.row.cat_deleted === false&quot; style=&quot;color:lightgreen&quot;&gt;&lt;/i&gt;</span><br><span class="line">  &lt;i class=&quot;el-icon-error&quot; v-else style=&quot;color:red&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!-- æ’åº --&gt;</span><br><span class="line">&lt;template slot=&quot;order&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; v-if=&quot;scope.row.cat_level===0&quot;&gt;ä¸€çº§&lt;/el-tag&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; type=&quot;success&quot; v-else-if=&quot;scope.row.cat_level===1&quot;&gt;äºŒçº§&lt;/el-tag&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; type=&quot;warning&quot; v-else&gt;ä¸‰çº§&lt;/el-tag&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ“ä½œ --&gt;</span><br><span class="line">&lt;template slot=&quot;opt&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;åˆ é™¤&lt;/el-button&gt; </span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="G-å®Œæˆåˆ†é¡µåŠŸèƒ½"><a href="#G-å®Œæˆåˆ†é¡µåŠŸèƒ½" class="headerlink" title="G.å®Œæˆåˆ†é¡µåŠŸèƒ½"></a>G.å®Œæˆåˆ†é¡µåŠŸèƒ½</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é¡µ --&gt;</span><br><span class="line">&lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">&lt;/el-pagination&gt;</span><br><span class="line"></span><br><span class="line">//æ·»åŠ å¯¹åº”çš„äº‹ä»¶å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">  .......</span><br><span class="line">  handleSizeChange(newSize)&#123;</span><br><span class="line">    //å½“pagesizeå‘ç”Ÿæ”¹å˜æ—¶è§¦å‘</span><br><span class="line">    this.queryInfo.pagesize = newSize;</span><br><span class="line">    this.getCateList();</span><br><span class="line">  &#125;,</span><br><span class="line">  handleCurrentChange(newPage)&#123;</span><br><span class="line">    //å½“pagenumå‘ç”Ÿæ”¹å˜æ—¶è§¦å‘</span><br><span class="line">    this.queryInfo.pagenum = newPage;</span><br><span class="line">    this.getCateList();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="H-å®Œæˆæ·»åŠ åˆ†ç±»"><a href="#H-å®Œæˆæ·»åŠ åˆ†ç±»" class="headerlink" title="H.å®Œæˆæ·»åŠ åˆ†ç±»"></a>H.å®Œæˆæ·»åŠ åˆ†ç±»</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;!-- æ·»åŠ åˆ†ç±»æŒ‰é’®åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-row&gt;</span><br><span class="line">  &lt;el-col&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;showAddCateDialog&quot;&gt;æ·»åŠ åˆ†ç±»&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-col&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line">......</span><br><span class="line">&lt;!-- æ·»åŠ åˆ†ç±»å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;æ·»åŠ åˆ†ç±»&quot; :visible.sync=&quot;addCateDialogVisible&quot; width=&quot;50%&quot;  @close=&quot;addCateDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ åˆ†ç±»è¡¨å• --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;addCateForm&quot; :rules=&quot;addCateFormRules&quot; ref=&quot;addCateFormRuleForm&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;åˆ†ç±»åç§°&quot; prop=&quot;cat_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;addCateForm.cat_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;çˆ¶çº§åˆ†ç±»&quot; prop=&quot;cat_pid&quot;&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;addCateDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;addCate&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ç”¨æ¥æ˜¾ç¤ºæˆ–éšè—æ·»åŠ åˆ†ç±»å¯¹è¯æ¡†</span><br><span class="line">addCateDialogVisible: false,</span><br><span class="line">//æ·»åŠ åˆ†ç±»çš„è¡¨å•æ•°æ®å¯¹è±¡</span><br><span class="line">addCateForm:&#123;</span><br><span class="line">  //åˆ†ç±»åç§°</span><br><span class="line">  cat_name:&#x27;&#x27;,</span><br><span class="line">  //æ·»åŠ åˆ†ç±»çš„çˆ¶çº§idï¼Œ0åˆ™è¡¨ç¤ºçˆ¶çº§ä¸º0.æ·»åŠ ä¸€çº§åˆ†ç±»</span><br><span class="line">  cat_pid:0,</span><br><span class="line">  //æ·»åŠ åˆ†ç±»çš„ç­‰çº§ï¼Œ0åˆ™è¡¨ç¤ºæ·»åŠ ä¸€çº§åˆ†ç±»</span><br><span class="line">  cat_level:0</span><br><span class="line">&#125;,</span><br><span class="line">//æ·»åŠ åˆ†ç±»æ ¡éªŒè§„åˆ™</span><br><span class="line">addCateFormRules:&#123;</span><br><span class="line">  //éªŒè¯è§„åˆ™</span><br><span class="line">  cat_name:[ &#123;required:true , message:&#x27;è¯·è¾“å…¥åˆ†ç±»åç§°&#x27;,trigger:&#x27;blur&#x27;&#125; ]</span><br><span class="line">&#125;,</span><br><span class="line">//ä¿å­˜1,2çº§çˆ¶çº§åˆ†ç±»çš„åˆ—è¡¨</span><br><span class="line">parentCateList:[]</span><br><span class="line">.......</span><br><span class="line">showAddCateDialog() &#123;</span><br><span class="line">  //è°ƒç”¨getParentCateListè·å–åˆ†ç±»åˆ—è¡¨</span><br><span class="line">  this.getParentCateList()</span><br><span class="line">  //æ˜¾ç¤ºæ·»åŠ åˆ†ç±»å¯¹è¯æ¡†</span><br><span class="line">  this.addCateDialogVisible = true</span><br><span class="line">&#125;,</span><br><span class="line">async getParentCateList()&#123;</span><br><span class="line">  //è·å–çˆ¶çº§åˆ†ç±»æ•°æ®åˆ—è¡¨</span><br><span class="line">  const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;, &#123;</span><br><span class="line">    params: &#123;type:2&#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  if (res.meta.status !== 200) &#123;</span><br><span class="line">    return this.$message.error(&#x27;è·å–å•†å“åˆ†ç±»åˆ—è¡¨æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  this.parentCateList = res.data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ çº§è”èœå•æ˜¾ç¤ºçˆ¶çº§åˆ†ç±»<br>å…ˆå¯¼å…¥Cascaderç»„ä»¶ï¼Œå¹¶æ³¨å†Œ<br>ç„¶åæ·»åŠ ä½¿ç”¨çº§è”èœå•ç»„ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;çˆ¶çº§åˆ†ç±»&quot; prop=&quot;cat_pid&quot;&gt;</span><br><span class="line">  &lt;!-- expandTrigger=&#x27;hover&#x27;(é¼ æ ‡æ‚¬åœè§¦å‘çº§è”) v-model(è®¾ç½®çº§è”èœå•ç»‘å®šæ•°æ®) :options(æŒ‡å®šçº§è”èœå•æ•°æ®æº)  :props(ç”¨æ¥é…ç½®æ•°æ®æ˜¾ç¤ºçš„è§„åˆ™) </span><br><span class="line">  clearable(æä¾›â€œXâ€å·å®Œæˆåˆ é™¤æ–‡æœ¬åŠŸèƒ½) change-on-select(æ˜¯å¦å¯ä»¥é€‰ä¸­ä»»æ„ä¸€çº§çš„èœå•) --&gt;</span><br><span class="line">  &lt;el-cascader expandTrigger=&#x27;hover&#x27; v-model=&quot;selectedKeys&quot; :options=&quot;parentCateList&quot; :props=&quot;cascaderProps&quot; @change=&quot;parentCateChange&quot; clearable change-on-select&gt;&lt;/el-cascader&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">æ·»åŠ æ•°æ®</span><br><span class="line">//é…ç½®çº§è”èœå•ä¸­æ•°æ®å¦‚ä½•å±•ç¤º</span><br><span class="line">cascaderProps:&#123;</span><br><span class="line">  value:&#x27;cat_id&#x27;,</span><br><span class="line">  label:&#x27;cat_name&#x27;,</span><br><span class="line">  children:&#x27;children&#x27;,</span><br><span class="line">  expandTrigger:&#x27;hover&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">//ç»‘å®šç”¨æˆ·é€‰æ‹©çš„åˆ†ç±»å€¼</span><br><span class="line">selectedKeys:[]</span><br><span class="line">.....</span><br><span class="line">methods:&#123;</span><br><span class="line">  .....</span><br><span class="line">  parentCateChange()&#123;</span><br><span class="line">    //çº§è”èœå•ä¸­é€‰æ‹©é¡¹å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘</span><br><span class="line">    console.log(this.selectedKeys)</span><br><span class="line">    //å¦‚æœç”¨æˆ·é€‰æ‹©äº†çˆ¶çº§åˆ†ç±»</span><br><span class="line">    if(this.selectedKeys.length &gt; 0)&#123;</span><br><span class="line">      //åˆ™å°†æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹è®¾ç½®ä¸ºçˆ¶çº§åˆ†ç±»</span><br><span class="line">      this.addCateForm.cat_pid = this.selectedKeys[this.selectedKeys.length - 1]</span><br><span class="line">      //levelä¹Ÿè¦è·Ÿç€å‘ç”Ÿå˜åŒ–</span><br><span class="line">      this.addCateForm.cat_level = this.selectedKeys.length</span><br><span class="line">      return</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      this.addCateForm.cat_pid = 0</span><br><span class="line">      this.addCateForm.cat_level = 0</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  addCateDialogClosed()&#123;</span><br><span class="line">    //å½“å…³é—­æ·»åŠ åˆ†ç±»å¯¹è¯æ¡†æ—¶ï¼Œé‡ç½®è¡¨å•</span><br><span class="line">    this.$refs.addCateFormRef.resetFields()</span><br><span class="line">    this.selectedKeys = [];</span><br><span class="line">    this.addCateForm.cat_pid = 0</span><br><span class="line">    this.addCateForm.cat_level = 0</span><br><span class="line">  &#125;,</span><br><span class="line">  addCate() &#123;</span><br><span class="line">    //ç‚¹å‡»ç¡®å®šï¼Œå®Œæˆæ·»åŠ åˆ†ç±»</span><br><span class="line">    console.log(this.addCateForm)</span><br><span class="line">    this.$refs.addCateFormRef.validate(async valid =&gt; &#123;</span><br><span class="line">      if (!valid) return</span><br><span class="line">      //å‘é€è¯·æ±‚å®Œæˆæ·»åŠ åˆ†ç±»</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.post(</span><br><span class="line">        &#x27;categories&#x27;,</span><br><span class="line">        this.addCateForm</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 201) &#123;</span><br><span class="line">        return this.$message.error(&#x27;æ·»åŠ åˆ†ç±»å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.$message.success(&#x27;æ·»åŠ åˆ†ç±»æˆåŠŸ&#x27;)</span><br><span class="line">      this.getCateList()</span><br><span class="line">      this.addCateDialogVisible = false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="I-æ¨é€ä»£ç "><a href="#I-æ¨é€ä»£ç " class="headerlink" title="I.æ¨é€ä»£ç "></a>I.æ¨é€ä»£ç </h4><p>åˆ¶ä½œå®Œæ·»åŠ åˆ†ç±»ä¹‹åï¼Œå°†ä»£ç æäº¤åˆ°ä»“åº“ï¼Œæ¨é€åˆ°ç äº‘,å°†goods_cateåˆ†æ”¯åˆå¹¶åˆ°master<br>git add .<br>git commit -m â€˜å®Œæˆå•†å“åˆ†ç±»â€™<br>git push<br>git checkout master<br>git merge goods_cate</p>
<h3 id="2-å‚æ•°ç®¡ç†"><a href="#2-å‚æ•°ç®¡ç†" class="headerlink" title="2.å‚æ•°ç®¡ç†"></a>2.å‚æ•°ç®¡ç†</h3><p>åªå…è®¸ç»™ä¸‰çº§åˆ†ç±»å†…å®¹è®¾ç½®å‚æ•°ï¼Œå‚æ•°åˆ†ä¸ºåŠ¨æ€å‚æ•°å’Œé™æ€å‚æ•°å±æ€§</p>
<h4 id="A-æ·»åŠ å­çº§ç»„ä»¶"><a href="#A-æ·»åŠ å­çº§ç»„ä»¶" class="headerlink" title="A.æ·»åŠ å­çº§ç»„ä»¶"></a>A.æ·»åŠ å­çº§ç»„ä»¶</h4><p>æ·»åŠ Params.vueå­ç»„ä»¶ï¼Œå¹¶åœ¨router.jsä¸­å¼•å…¥è¯¥ç»„ä»¶å¹¶è®¾ç½®è·¯ç”±è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Params</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Params.vue&#x27;</span></span><br><span class="line">......</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="B-å®Œæˆç»„ä»¶åŸºæœ¬å¸ƒå±€"><a href="#B-å®Œæˆç»„ä»¶åŸºæœ¬å¸ƒå±€" class="headerlink" title="B.å®Œæˆç»„ä»¶åŸºæœ¬å¸ƒå±€"></a>B.å®Œæˆç»„ä»¶åŸºæœ¬å¸ƒå±€</h4><p>å®ŒæˆParams.vueç»„ä»¶çš„åŸºæœ¬å¸ƒå±€<br>å…¶ä¸­è­¦å‘Šæç¤ºä¿¡æ¯ä½¿ç”¨äº†el-alertï¼Œåœ¨element.jså¼•å…¥è¯¥ç»„ä»¶å¹¶æ³¨å†Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;åˆ†ç±»å‚æ•°&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;åˆ†ç±»å‚æ•°&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;!-- è­¦å‘ŠåŒºåŸŸ :closable=&quot;false&quot;(æ˜¯å¦å±•ç¤ºâ€œXâ€å·) show-icon(æ˜¾ç¤ºå›¾æ ‡) --&gt;</span><br><span class="line">            &lt;el-alert title=&quot;æ³¨æ„ï¼šåªå…è®¸ä¸ºç¬¬ä¸‰çº§åˆ†ç±»è®¾ç½®ç›¸å…³å‚æ•°&quot; type=&quot;warning&quot; :closable=&quot;false&quot; show-icon&gt;</span><br><span class="line">            &lt;/el-alert&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- é€‰æ‹©å•†å“åˆ†ç±»åŒºåŸŸ --&gt;</span><br><span class="line">            &lt;el-row class=&quot;cat_opt&quot;&gt;</span><br><span class="line">                &lt;el-col&gt;</span><br><span class="line">                    &lt;span&gt;é€‰æ‹©å•†å“åˆ†ç±»ï¼š&lt;/span&gt;</span><br><span class="line">                    &lt;!-- é€‰æ‹©å•†å“åˆ†ç±»çš„çº§è”é€‰æ‹©æ¡† --&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">                &lt;el-col&gt;&lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-å®Œæˆçº§è”é€‰æ‹©æ¡†"><a href="#C-å®Œæˆçº§è”é€‰æ‹©æ¡†" class="headerlink" title="C.å®Œæˆçº§è”é€‰æ‹©æ¡†"></a>C.å®Œæˆçº§è”é€‰æ‹©æ¡†</h4><p>å®Œæˆå•†å“åˆ†ç±»çº§è”é€‰æ‹©æ¡†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- é€‰æ‹©å•†å“åˆ†ç±»åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-row class=&quot;cat_opt&quot;&gt;</span><br><span class="line">    &lt;el-col&gt;</span><br><span class="line">        &lt;span&gt;é€‰æ‹©å•†å“åˆ†ç±»ï¼š&lt;/span&gt;</span><br><span class="line">        &lt;!-- é€‰æ‹©å•†å“åˆ†ç±»çš„çº§è”é€‰æ‹©æ¡† --&gt;</span><br><span class="line">        &lt;el-cascader expandTrigger=&#x27;hover&#x27; v-model=&quot;selectedCateKeys&quot; :options=&quot;cateList&quot; :props=&quot;cateProps&quot; @change=&quot;handleChange&quot; clearable&gt;&lt;/el-cascader&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col&gt;&lt;/el-col&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line">......</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //åˆ†ç±»åˆ—è¡¨</span><br><span class="line">        cateList:[],</span><br><span class="line">        //ç”¨æˆ·åœ¨çº§è”ä¸‹æ‹‰èœå•ä¸­é€‰ä¸­çš„åˆ†ç±»id</span><br><span class="line">        selectedCateKeys:[],</span><br><span class="line">        //é…ç½®çº§è”èœå•ä¸­æ•°æ®å¦‚ä½•å±•ç¤º</span><br><span class="line">        cateProps: &#123;</span><br><span class="line">            value: &#x27;cat_id&#x27;,</span><br><span class="line">            label: &#x27;cat_name&#x27;,</span><br><span class="line">            children: &#x27;children&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">      this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      async getCateList()&#123;</span><br><span class="line">        //è·å–æ‰€æœ‰çš„å•†å“åˆ†ç±»åˆ—è¡¨</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;)</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">            return this.$message.error(&#x27;è·å–åˆ†ç±»æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        //å°†æ•°æ®åˆ—è¡¨èµ‹å€¼ç»™cateList</span><br><span class="line">        this.cateList = res.data</span><br><span class="line">        // //ä¿å­˜æ€»æ•°æ®æ¡æ•°</span><br><span class="line">        // this.total = res.data.total</span><br><span class="line">        //   console.log(res.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      handleChange()&#123;</span><br><span class="line">        //å½“ç”¨æˆ·åœ¨çº§è”èœå•ä¸­é€‰æ‹©å†…å®¹æ”¹å˜æ—¶è§¦å‘</span><br><span class="line">        console.log(this.selectedCateKeys);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-å±•ç¤ºå‚æ•°"><a href="#D-å±•ç¤ºå‚æ•°" class="headerlink" title="D.å±•ç¤ºå‚æ•°"></a>D.å±•ç¤ºå‚æ•°</h4><p>å±•ç¤ºåŠ¨æ€å‚æ•°æ•°æ®ä»¥åŠé™æ€å±æ€§æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- tabé¡µç­¾åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-tabs v-model=&quot;activeName&quot; @tab-click=&quot;handleTabClick&quot;&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ åŠ¨æ€å‚æ•°çš„é¢æ¿ å°†æ ‡ç­¾é¡µæ”¹ä¸ºmany --&gt;</span><br><span class="line">  &lt;el-tab-pane label=&quot;åŠ¨æ€å‚æ•°&quot; name=&quot;many&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; :disabled=&quot;isButtonDisabled&quot;&gt;æ·»åŠ å‚æ•°&lt;/el-button&gt;</span><br><span class="line">    &lt;!-- åŠ¨æ€å‚æ•°è¡¨æ ¼ --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;manyTableData&quot; border stripe&gt;</span><br><span class="line">      &lt;!-- å±•å¼€è¡Œ --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;!-- ç´¢å¼•åˆ— --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;å‚æ•°åç§°&quot; prop=&quot;attr_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;æ“ä½œ&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">  &lt;/el-tab-pane&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ é™æ€å±æ€§çš„é¢æ¿ å°†æ ‡ç­¾é¡µæ”¹ä¸ºonly --&gt;</span><br><span class="line">  &lt;el-tab-pane label=&quot;é™æ€å±æ€§&quot; name=&quot;only&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; :disabled=&quot;isButtonDisabled&quot;&gt;æ·»åŠ å±æ€§&lt;/el-button&gt;</span><br><span class="line">    &lt;!-- é™æ€å±æ€§è¡¨æ ¼ --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;onlyTableData&quot; border stripe&gt;</span><br><span class="line">      &lt;!-- å±•å¼€è¡Œ --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;!-- ç´¢å¼•åˆ— --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;å±æ€§åç§°&quot; prop=&quot;attr_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;æ“ä½œ&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">  &lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">&lt;/el-tabs&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //tabé¡µç­¾æ¿€æ´»æ˜¾ç¤ºçš„é¡µç­¾é¡¹</span><br><span class="line">      activeName: &#x27;many&#x27;,</span><br><span class="line">      //ç”¨æ¥ä¿å­˜åŠ¨æ€å‚æ•°æ•°æ®</span><br><span class="line">      manyTableData: [],</span><br><span class="line">      //ç”¨æ¥ä¿å­˜é™æ€å±æ€§æ•°æ®</span><br><span class="line">      onlyTableData: []  </span><br><span class="line">    &#125;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    async handleChange() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·åœ¨çº§è”èœå•ä¸­é€‰æ‹©å†…å®¹æ”¹å˜æ—¶è§¦å‘</span><br><span class="line">      console.log(this.selectedCateKeys)</span><br><span class="line">      //å‘é€è¯·æ±‚ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„ä¸‰çº§åˆ†ç±»å’Œé¢æ¿è·å–å‚æ•°æ•°æ®</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">        `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">        &#123; params: &#123; sel: this.activeName &#125; &#125;</span><br><span class="line">      )</span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–å‚æ•°åˆ—è¡¨æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      console.log(res.data)</span><br><span class="line">      if (this.activeName === &#x27;many&#x27;) &#123;</span><br><span class="line">        //è·å–çš„æ˜¯åŠ¨æ€å‚æ•°</span><br><span class="line">        this.manyTableData = res.data</span><br><span class="line">      &#125; else if (this.activeName === &#x27;only&#x27;) &#123;</span><br><span class="line">        //è·å–çš„æ˜¯é™æ€å±æ€§</span><br><span class="line">        this.onlyTableData = res.data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleTabClick() &#123;</span><br><span class="line">      console.log(this.activeName)</span><br><span class="line">      this.handleChange()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    //æ·»åŠ è®¡ç®—å±æ€§ç”¨æ¥è·å–æŒ‰é’®ç¦ç”¨ä¸å¦</span><br><span class="line">    isButtonDisabled() &#123;</span><br><span class="line">      return this.selectedCateKeys.length !== 3</span><br><span class="line">    &#125;,</span><br><span class="line">    //è·å–é€‰ä¸­çš„ä¸‰çº§åˆ†ç±»id</span><br><span class="line">    cateId() &#123;</span><br><span class="line">      if (this.selectedCateKeys.length === 3) &#123;</span><br><span class="line">        return this.selectedCateKeys[this.selectedCateKeys.length - 1]</span><br><span class="line">      &#125;</span><br><span class="line">      return null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="E-æ·»åŠ å‚æ•°"><a href="#E-æ·»åŠ å‚æ•°" class="headerlink" title="E.æ·»åŠ å‚æ•°"></a>E.æ·»åŠ å‚æ•°</h4><p>å®Œæˆæ·»åŠ å‚æ•°æˆ–å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- æ·»åŠ å‚æ•°æˆ–å±æ€§å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog :title=&quot;&#x27;æ·»åŠ &#x27;+titleText&quot; :visible.sync=&quot;addDialogVisible&quot; width=&quot;50%&quot; @close=&quot;addDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ è¡¨å• --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item :label=&quot;titleText&quot; prop=&quot;attr_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;addForm.attr_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;addDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;addParams&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      .......</span><br><span class="line">      //æ§åˆ¶æ·»åŠ å‚æ•°.å±æ€§å¯¹è¯æ¡†çš„æ˜¾ç¤ºæˆ–éšè—</span><br><span class="line">      addDialogVisible: false,</span><br><span class="line">      //æ·»åŠ å‚æ•°çš„è¡¨å•æ•°æ®å¯¹è±¡</span><br><span class="line">      addForm: &#123;</span><br><span class="line">        attr_name: &#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //æ·»åŠ è¡¨å•éªŒè¯è§„åˆ™</span><br><span class="line">      addFormRules: &#123;</span><br><span class="line">        attr_name: [&#123; required: true, message: &#x27;è¯·è¾“å…¥åç§°&#x27;, trigger: &#x27;blur&#x27; &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    addParams() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·ç‚¹å‡»å¯¹è¯æ¡†ä¸­çš„ç¡®å®šæ—¶ï¼Œæ ¡éªŒè¡¨å•</span><br><span class="line">      this.$refs.addFormRef.validate(async valid =&gt; &#123;</span><br><span class="line">        //æ ¡éªŒä¸é€šè¿‡ï¼Œreturn</span><br><span class="line">        if (!valid) return</span><br><span class="line">        //æ ¡éªŒé€šè¿‡ï¼Œå‘é€è¯·æ±‚å®Œæˆæ·»åŠ å‚æ•°æˆ–è€…å±æ€§</span><br><span class="line">        const &#123; data: res &#125; = this.$http.post(`categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">          &#123; </span><br><span class="line">            attr_name: this.addForm.attr_name, </span><br><span class="line">            attr_sel: this.activeName,</span><br><span class="line">            attr_vals: &quot;a,b,c&quot; </span><br><span class="line">          &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        console.log(res)</span><br><span class="line">        if (res.meta.status !== 201) &#123;</span><br><span class="line">          return this.$message.error(&#x27;æ·»åŠ &#x27; + this.titleText + &#x27;æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        this.$message.success(&#x27;æ·»åŠ &#x27; + this.titleText + &#x27;æ•°æ®æˆåŠŸ&#x27;)</span><br><span class="line">        this.addDialogVisible = false</span><br><span class="line">        this.getCateList()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="F-ç¼–è¾‘å‚æ•°"><a href="#F-ç¼–è¾‘å‚æ•°" class="headerlink" title="F.ç¼–è¾‘å‚æ•°"></a>F.ç¼–è¾‘å‚æ•°</h4><p>å®Œæˆç¼–è¾‘å‚æ•°æˆ–å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ä¿®æ”¹å‚æ•°æˆ–å±æ€§å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog :title=&quot;&#x27;ä¿®æ”¹&#x27;+titleText&quot; :visible.sync=&quot;editDialogVisible&quot; width=&quot;50%&quot; @close=&quot;editDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ è¡¨å• --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item :label=&quot;titleText&quot; prop=&quot;attr_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;editForm.attr_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;editDialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;editParams&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      .......</span><br><span class="line">      //æ§åˆ¶ä¿®æ”¹å‚æ•°.å±æ€§å¯¹è¯æ¡†çš„æ˜¾ç¤ºæˆ–éšè—</span><br><span class="line">      editDialogVisible:false,</span><br><span class="line">      //ä¿®æ”¹å‚æ•°.å±æ€§å¯¹è¯æ¡†ä¸­çš„è¡¨å•</span><br><span class="line">      editForm:&#123;</span><br><span class="line">        attr_name:&#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //ä¿®æ”¹è¡¨å•çš„éªŒè¯è§„åˆ™</span><br><span class="line">      editFormRules:&#123;</span><br><span class="line">        attr_name:[</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥åç§°&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    async showEditDialog(attr_id)&#123;</span><br><span class="line">      //å‘èµ·è¯·æ±‚è·å–éœ€è¦ä¿®æ”¹çš„é‚£ä¸ªå‚æ•°æ•°æ®</span><br><span class="line">      const &#123;data:res&#125; = await this.$http.get(`categories/$&#123;this.cateId&#125;/attributes/$&#123;attr_id&#125;`,</span><br><span class="line">      &#123;params:&#123; attr_sel:this.activeName &#125;&#125;)</span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–å‚æ•°æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.editForm = res.data;</span><br><span class="line">      //æ˜¾ç¤ºä¿®æ”¹å‚æ•°.å±æ€§å¯¹è¯æ¡†</span><br><span class="line">      this.editDialogVisible = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    editDialogClosed()&#123;</span><br><span class="line">      //å½“å…³é—­ä¿®æ”¹å‚æ•°.å±æ€§å¯¹è¯æ¡†æ—¶</span><br><span class="line">      this.$refs.editFormRef.resetFields()</span><br><span class="line">    &#125;,</span><br><span class="line">    editParams()&#123;</span><br><span class="line">      //éªŒè¯è¡¨å•</span><br><span class="line">      this.$refs.editFormRef.validate(async valid =&gt; &#123;</span><br><span class="line">        if(!valid) return;</span><br><span class="line"></span><br><span class="line">        //å‘é€è¯·æ±‚å®Œæˆä¿®æ”¹</span><br><span class="line">        const &#123;data:res&#125; = await this.$http.put(`categories/$&#123;this.cateId&#125;/attributes/$&#123;this.editForm.attr_id&#125;`,</span><br><span class="line">        &#123;attr_name:this.editForm.attr_name,attr_sel:this.activeName&#125;)</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;è·å–å‚æ•°æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        this.$message.success(&#x27;ä¿®æ”¹&#x27; + this.titleText + &#x27;æ•°æ®æˆåŠŸ&#x27;)</span><br><span class="line">        this.editDialogVisible = false</span><br><span class="line">        this.handleChange();</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="G-åˆ é™¤å‚æ•°"><a href="#G-åˆ é™¤å‚æ•°" class="headerlink" title="G.åˆ é™¤å‚æ•°"></a>G.åˆ é™¤å‚æ•°</h4><p>åˆ é™¤å‚æ•°æˆ–å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç»™ä¸¤ä¸ªåˆ é™¤æŒ‰é’®æ·»åŠ äº‹ä»¶</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeParams(scope.row.attr_id)&quot;&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeParams(scope.row.attr_id)&quot;&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">æ·»åŠ å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">async removeParams(attr_id)&#123;</span><br><span class="line">  //æ ¹æ®idåˆ é™¤å¯¹åº”çš„å‚æ•°æˆ–å±æ€§</span><br><span class="line">  //å¼¹çª—æç¤ºç”¨æˆ·æ˜¯å¦è¦åˆ é™¤</span><br><span class="line">  const confirmResult = await this.$confirm(</span><br><span class="line">    &#x27;è¯·é—®æ˜¯å¦è¦åˆ é™¤è¯¥&#x27;+this.titleText,</span><br><span class="line">    &#x27;åˆ é™¤æç¤º&#x27;,</span><br><span class="line">    &#123;</span><br><span class="line">      confirmButtonText: &#x27;ç¡®è®¤åˆ é™¤&#x27;,</span><br><span class="line">      cancelButtonText: &#x27;å–æ¶ˆ&#x27;,</span><br><span class="line">      type: &#x27;warning&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  ).catch(err =&gt; err)</span><br><span class="line">  //å¦‚æœç”¨æˆ·ç‚¹å‡»ç¡®è®¤ï¼Œåˆ™confirmResult ä¸º&#x27;confirm&#x27;</span><br><span class="line">  //å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆ, åˆ™confirmResultè·å–çš„å°±æ˜¯catchçš„é”™è¯¯æ¶ˆæ¯&#x27;cancel&#x27;</span><br><span class="line">  if (confirmResult != &#x27;confirm&#x27;) &#123;</span><br><span class="line">    return this.$message.info(&#x27;å·²ç»å–æ¶ˆåˆ é™¤&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //æ²¡æœ‰å–æ¶ˆå°±æ˜¯è¦åˆ é™¤ï¼Œå‘é€è¯·æ±‚å®Œæˆåˆ é™¤</span><br><span class="line">  const &#123;data:res&#125; = await this.$http.delete(`categories/$&#123;this.cateId&#125;/attributes/$&#123;attr_id&#125;`)</span><br><span class="line"></span><br><span class="line">  if (res.meta.status !== 200) &#123;</span><br><span class="line">    return this.$message.error(&#x27;åˆ é™¤å‚æ•°æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  this.$message.success(&#x27;åˆ é™¤&#x27; + this.titleText + &#x27;æ•°æ®æˆåŠŸ&#x27;)</span><br><span class="line">  this.handleChange()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€ä»Šæ—¥ç›®æ ‡"><a href="#äº”ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="äº”ã€ä»Šæ—¥ç›®æ ‡"></a>äº”ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.å®Œæˆå‚æ•°ç®¡ç†<br>2.æ¨é€ä»£ç åˆ°ç äº‘<br>3.åˆ¶ä½œå•†å“åˆ—è¡¨é¡µé¢<br>4.åˆ¶ä½œå•†å“æ·»åŠ é¡µé¢</p>
<h3 id="1-å‚æ•°ç®¡ç†"><a href="#1-å‚æ•°ç®¡ç†" class="headerlink" title="1.å‚æ•°ç®¡ç†"></a>1.å‚æ•°ç®¡ç†</h3><h4 id="A-å±•ç¤ºåŠ¨æ€å‚æ•°å¯é€‰é¡¹"><a href="#A-å±•ç¤ºåŠ¨æ€å‚æ•°å¯é€‰é¡¹" class="headerlink" title="A.å±•ç¤ºåŠ¨æ€å‚æ•°å¯é€‰é¡¹"></a>A.å±•ç¤ºåŠ¨æ€å‚æ•°å¯é€‰é¡¹</h4><p>åŠ¨æ€å‚æ•°å¯é€‰é¡¹å±•ç¤ºåŠæ“ä½œ<br>åœ¨è·å–åŠ¨æ€å‚æ•°çš„æ–¹æ³•ä¸­è¿›è¡Œå¤„ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å°†è·å–åˆ°çš„æ•°æ®ä¸­çš„attr_valså­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„</span><br><span class="line">res.data.forEach(item =&gt; &#123;</span><br><span class="line">  item.attr_vals = item.attr_vals ? item.attr_vals.split(&#x27; &#x27;) : []</span><br><span class="line">  //æ·»åŠ ä¸€ä¸ªboolå€¼æ§åˆ¶æ–‡æœ¬æ¡†çš„æ˜¾ç¤ºæˆ–è€…éšè—</span><br><span class="line">  item.inputVisible = false</span><br><span class="line">  //æ·»åŠ ä¸€ä¸ªinputValueä¿å­˜æ–‡æœ¬æ¡†å€¼</span><br><span class="line">  item.inputValue = &#x27;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//ç„¶åå†ä¿®æ”¹å±•å¼€è¡Œä¸­çš„ä»£ç ï¼Œç”Ÿæˆel-tagå’Œæ–‡æœ¬æ¡†ä»¥åŠæ·»åŠ æŒ‰é’®</span><br><span class="line">&lt;!-- å±•å¼€è¡Œ --&gt;</span><br><span class="line">&lt;el-table-column type=&quot;expand&quot;&gt;</span><br><span class="line">  &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;!-- å¾ªç¯ç”Ÿæˆçš„el-tag --&gt;</span><br><span class="line">    &lt;el-tag v-for=&quot;(item,i) in scope.row.attr_vals&quot; :key=&quot;i&quot; closable&gt;&#123;&#123;item&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">    &lt;!-- è¾“å…¥æ¡† --&gt;</span><br><span class="line">    &lt;el-input class=&quot;input-new-tag&quot; v-if=&quot;scope.row.inputVisible&quot; v-model=&quot;scope.row.inputValue&quot; ref=&quot;saveTagInput&quot; size=&quot;small&quot; @keyup.enter.native=&quot;handleInputConfirm(scope.row)&quot; @blur=&quot;handleInputConfirm(scope.row)&quot;&gt;</span><br><span class="line">    &lt;/el-input&gt;</span><br><span class="line">    &lt;!-- æ·»åŠ æŒ‰é’® --&gt;</span><br><span class="line">    &lt;el-button v-else class=&quot;button-new-tag&quot; size=&quot;small&quot; @click=&quot;showInput(scope.row)&quot;&gt;+ New Tag&lt;/el-button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æœ€åå¯¹åº”æ–‡æœ¬æ¡†çš„äº‹ä»¶å’ŒæŒ‰é’®çš„äº‹ä»¶æ·»åŠ å¤„ç†å‡½æ•°</span><br><span class="line">handleInputConfirm(row)&#123;</span><br><span class="line">  //å½“ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­æŒ‰ä¸‹enteré”®æˆ–è€…ç„¦ç‚¹ç¦»å¼€æ—¶éƒ½ä¼šè§¦å‘æ‰§è¡Œ</span><br><span class="line">  //åˆ¤æ–­ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å†…å®¹æ˜¯å¦åˆæ³•</span><br><span class="line">  if(row.inputValue.trim().length===0)&#123;</span><br><span class="line">    row.inputValue = &#x27;&#x27;</span><br><span class="line">    row.inputVisible = false</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // row.inputVisible = false</span><br><span class="line">  //å¦‚æœç”¨æˆ·è¾“å…¥äº†çœŸå®åˆæ³•çš„æ•°æ®ï¼Œéœ€è¦ä¿å­˜èµ·æ¥</span><br><span class="line">&#125;,</span><br><span class="line">showInput(row)&#123;</span><br><span class="line">  //ç”¨æˆ·ç‚¹å‡»æ·»åŠ æŒ‰é’®æ—¶è§¦å‘</span><br><span class="line">  row.inputVisible = true</span><br><span class="line">  //$nextTick:åœ¨é¡µé¢ä¸Šå…ƒç´ è¢«é‡æ–°æ¸²æŸ“ä¹‹åï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç </span><br><span class="line">  this.$nextTick(_=&gt;&#123;</span><br><span class="line">    //è®©æ–‡æœ¬æ¡†è‡ªåŠ¨è·å¾—ç„¦ç‚¹</span><br><span class="line">    this.$refs.saveTagInput.$refs.input.focus()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="B-æ·»åŠ -x2F-åˆ é™¤å¯é€‰é¡¹"><a href="#B-æ·»åŠ -x2F-åˆ é™¤å¯é€‰é¡¹" class="headerlink" title="B.æ·»åŠ &#x2F;åˆ é™¤å¯é€‰é¡¹"></a>B.æ·»åŠ &#x2F;åˆ é™¤å¯é€‰é¡¹</h4><p>æ·»åŠ &#x2F;åˆ é™¤åŠ¨æ€å‚æ•°å¯é€‰é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç»™el-tagæ·»åŠ åˆ é™¤äº‹ä»¶</span><br><span class="line">&lt;el-tag v-for=&quot;(item,i) in scope.row.attr_vals&quot; :key=&quot;i&quot; closable @close=&quot;handleClose(i,scope.row)&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line"></span><br><span class="line">åœ¨methodsä¸­æ·»åŠ æ–°å¢ï¼Œåˆ é™¤äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">handleInputConfirm(row)&#123;</span><br><span class="line">  //å½“ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­æŒ‰ä¸‹enteré”®æˆ–è€…ç„¦ç‚¹ç¦»å¼€æ—¶éƒ½ä¼šè§¦å‘æ‰§è¡Œ</span><br><span class="line">  //åˆ¤æ–­ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å†…å®¹æ˜¯å¦åˆæ³•</span><br><span class="line">  if(row.inputValue.trim().length===0)&#123;</span><br><span class="line">    row.inputValue = &#x27;&#x27;</span><br><span class="line">    row.inputVisible = false</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // row.inputVisible = false</span><br><span class="line">  //å¦‚æœç”¨æˆ·è¾“å…¥äº†çœŸå®åˆæ³•çš„æ•°æ®ï¼Œéœ€è¦ä¿å­˜èµ·æ¥</span><br><span class="line">  row.attr_vals.push(row.inputValue.trim())</span><br><span class="line">  row.inputValue = &#x27;&#x27;</span><br><span class="line">  row.inputVisible = false</span><br><span class="line"></span><br><span class="line">  this.saveAttrVals(row)</span><br><span class="line">&#125;,</span><br><span class="line">handleClose(index,row)&#123;</span><br><span class="line">  //åˆ é™¤å¯¹åº”ç´¢å¼•çš„å‚æ•°å¯é€‰é¡¹</span><br><span class="line">  row.attr_vals.splice(index,1)</span><br><span class="line">  //è°ƒç”¨å‡½æ•°ï¼Œå®Œæˆä¿å­˜å¯é€‰é¡¹çš„æ“ä½œ</span><br><span class="line">  this.saveAttrVals(row)</span><br><span class="line">&#125;,</span><br><span class="line">async saveAttrVals(row)&#123;</span><br><span class="line">  //å°è£…å‡½æ•°ï¼Œå®Œæˆä¿å­˜å¯é€‰é¡¹çš„æ“ä½œ</span><br><span class="line">  //å‘èµ·è¯·æ±‚ï¼Œä¿å­˜å‚æ•°ç»†é¡¹</span><br><span class="line">  const &#123;data:res&#125; = await this.$http.put(`categories/$&#123;this.cateId&#125;/attributes/$&#123;row.attr_id&#125;`,</span><br><span class="line">  &#123;attr_name:row.attr_name,attr_sel:row.attr_sel,attr_vals:row.attr_vals.join(&#x27; &#x27;)&#125;)</span><br><span class="line"></span><br><span class="line">  if (res.meta.status !== 200) &#123;</span><br><span class="line">    return this.$message.error(&#x27;ä¿®æ”¹å‚æ•°é¡¹å¤±è´¥&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  this.$message.success(&#x27;ä¿®æ”¹å‚æ•°é¡¹æˆåŠŸ&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¥å……ï¼šå½“ç”¨æˆ·åœ¨çº§è”é€‰æ‹©æ¡†ä¸­é€‰ä¸­äº†éä¸‰çº§åˆ†ç±»æ—¶ï¼Œéœ€è¦æ¸…ç©ºè¡¨æ ¼ä¸­æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">handleChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//å¦‚æœç”¨æˆ·é€‰æ‹©çš„ä¸æ˜¯ä¸‰çº§åˆ†ç±»</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">selectedCateKeys</span>.<span class="property">length</span> !== <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selectedCateKeys</span> = []</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">manyTableData</span> = []</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onlyTableData</span> = []</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      ......</span><br></pre></td></tr></table></figure>

<p>è¡¥å……2ï¼šå½“å®Œæˆäº†åŠ¨æ€å‚æ•°å¯é€‰é¡¹çš„åŠŸèƒ½ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€æ ·çš„æ–¹å¼å®Œæˆé™æ€å±æ€§å¯é€‰é¡¹çš„åŠŸèƒ½ã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å°†åŠ¨æ€å‚æ•°å¯é€‰é¡¹ä¸­çš„å±•å¼€è¡Œå¤åˆ¶åˆ°é™æ€å±æ€§çš„è¡¨æ ¼ä¸­å³å¯</p>
<h3 id="2-æ¨é€ä»£ç åˆ°ç äº‘"><a href="#2-æ¨é€ä»£ç åˆ°ç äº‘" class="headerlink" title="2.æ¨é€ä»£ç åˆ°ç äº‘"></a>2.æ¨é€ä»£ç åˆ°ç äº‘</h3><p>æ·»åŠ åˆ°æš‚å­˜æ±‚ï¼š git add .<br>æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š  git commit -m â€˜å®Œæˆäº†åˆ†ç±»å‚æ•°å¼€å‘â€™<br>æ¨é€åˆ°ç äº‘ï¼š  git push<br>åˆ‡æ¢åˆ°master ï¼š git checkout master<br>åˆå¹¶åˆ°master ï¼š git merge goods_params</p>
<p>åˆ›å»ºå­åˆ†æ”¯<br>git checkout -b goods_list<br>æ¨é€è‡³ç äº‘ git push -u origin goods_list</p>
<h3 id="3-å•†å“åˆ—è¡¨"><a href="#3-å•†å“åˆ—è¡¨" class="headerlink" title="3.å•†å“åˆ—è¡¨"></a>3.å•†å“åˆ—è¡¨</h3><h4 id="A-åˆ¶ä½œå•†å“åˆ—è¡¨åŸºæœ¬ç»“æ„"><a href="#A-åˆ¶ä½œå•†å“åˆ—è¡¨åŸºæœ¬ç»“æ„" class="headerlink" title="A.åˆ¶ä½œå•†å“åˆ—è¡¨åŸºæœ¬ç»“æ„"></a>A.åˆ¶ä½œå•†å“åˆ—è¡¨åŸºæœ¬ç»“æ„</h4><p>æ·»åŠ å­çº§è·¯ç”±ç»„ä»¶ä»¥åŠå¯¹åº”çš„è§„åˆ™,å¹¶è®¾ç½®ç»„ä»¶çš„åŸºæœ¬æœºæ„<br>æ‰“å¼€router.js,æ·»åŠ ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GoodList</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/List.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodList</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€List.vueç»„ä»¶ï¼Œæ·»åŠ ä¸‹åˆ—ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;å•†å“åˆ—è¡¨&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“åˆ—è¡¨&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">                &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">                    &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot;&gt;</span><br><span class="line">                        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;/el-input&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">                &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;æ·»åŠ å•†å“&lt;/el-button&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="B-æ•°æ®å±•ç¤º"><a href="#B-æ•°æ®å±•ç¤º" class="headerlink" title="B.æ•°æ®å±•ç¤º"></a>B.æ•°æ®å±•ç¤º</h4><p>æ·»åŠ æ•°æ®è¡¨æ ¼å±•ç¤ºæ•°æ®ä»¥åŠåˆ†é¡µåŠŸèƒ½çš„å®ç°,æœç´¢åŠŸèƒ½çš„å®ç°<br>åœ¨main.jsä¸­æ·»åŠ è¿‡æ»¤å™¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºè¿‡æ»¤å™¨å°†ç§’æ•°è¿‡æ»¤ä¸ºå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;dateFormat&#x27;</span>,<span class="keyword">function</span>(<span class="params">originVal</span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(originVal)</span><br><span class="line">  <span class="keyword">const</span> y = dt.<span class="title function_">getFullYear</span>()</span><br><span class="line">  <span class="keyword">const</span> m = (dt.<span class="title function_">getMonth</span>()+<span class="number">1</span>+<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> d = (dt.<span class="title function_">getDate</span>()+<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> hh = (dt.<span class="title function_">getHours</span>()+<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> mm = (dt.<span class="title function_">getMinutes</span>()+<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> ss = (dt.<span class="title function_">getSeconds</span>()+<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-card&gt;</span><br><span class="line">    &lt;!-- æœç´¢æ  --&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">            &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; v-model=&quot;queryInfo.query&quot; clearable @clear=&quot;getGoodsList&quot;&gt;</span><br><span class="line">                &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;getGoodsList&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot;&gt;æ·»åŠ å•†å“&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- è¡¨æ ¼åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;goodsList&quot; border stripe&gt;</span><br><span class="line">        &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;å•†å“åç§°&quot; prop=&quot;goods_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;å•†å“ä»·æ ¼(å…ƒ)&quot; prop=&quot;goods_price&quot; width=&quot;95px&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;å•†å“é‡é‡&quot; prop=&quot;goods_weight&quot; width=&quot;95px&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;åˆ›å»ºæ—¶é—´&quot; prop=&quot;add_time&quot; width=&quot;140px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &#123;&#123;scope.row.add_time | dateFormat&#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;125px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- åˆ†é¡µ --&gt;</span><br><span class="line">    &lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">    &lt;/el-pagination&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">//ç»‘å®šæ•°æ®ä»¥åŠæ·»åŠ æ–¹æ³•</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //æŸ¥è¯¢å‚æ•°</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      //ä¿å­˜å•†å“åˆ—è¡¨ä¿¡æ¯</span><br><span class="line">      goodsList: [],</span><br><span class="line">      //æ€»æ•°æ®æ¡æ•°</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getGoodsList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getGoodsList() &#123;</span><br><span class="line">      //   æ ¹æ®åˆ†é¡µè·å–å¯¹åº”çš„å•†å“åˆ—è¡¨</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;goods&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–å•†å“åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(res.data)</span><br><span class="line">      this.$message.success(&#x27;è·å–å•†å“åˆ—è¡¨æˆåŠŸ&#x27;)</span><br><span class="line">      this.goodsList = res.data.goods</span><br><span class="line">      this.total = res.data.total</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange(newSize)&#123;</span><br><span class="line">        //å½“é¡µå·å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ›´æ”¹pagesizeï¼Œé‡æ–°è¯·æ±‚</span><br><span class="line">        this.queryInfo.pagesize = newSize</span><br><span class="line">        this.getGoodsList();</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(newPage)&#123;</span><br><span class="line">        //å½“é¡µç å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ›´æ”¹pagesizeï¼Œé‡æ–°è¯·æ±‚</span><br><span class="line">        this.queryInfo.pagenum = newPage</span><br><span class="line">        this.getGoodsList();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-å®ç°åˆ é™¤å•†å“"><a href="#C-å®ç°åˆ é™¤å•†å“" class="headerlink" title="C.å®ç°åˆ é™¤å•†å“"></a>C.å®ç°åˆ é™¤å•†å“</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeGoods(scope.row.goods_id)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">//äº‹ä»¶å‡½æ•°ä»£ç ç¼–å†™</span><br><span class="line">async removeGoods(goods_id) &#123;</span><br><span class="line">  //æ ¹æ®idåˆ é™¤å¯¹åº”çš„å‚æ•°æˆ–å±æ€§</span><br><span class="line">  //å¼¹çª—æç¤ºç”¨æˆ·æ˜¯å¦è¦åˆ é™¤</span><br><span class="line">  const confirmResult = await this.$confirm(</span><br><span class="line">    &#x27;è¯·é—®æ˜¯å¦è¦åˆ é™¤è¯¥å•†å“&#x27;,</span><br><span class="line">    &#x27;åˆ é™¤æç¤º&#x27;,</span><br><span class="line">    &#123;</span><br><span class="line">      confirmButtonText: &#x27;ç¡®è®¤åˆ é™¤&#x27;,</span><br><span class="line">      cancelButtonText: &#x27;å–æ¶ˆ&#x27;,</span><br><span class="line">      type: &#x27;warning&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  ).catch(err =&gt; err)</span><br><span class="line">  //å¦‚æœç”¨æˆ·ç‚¹å‡»ç¡®è®¤ï¼Œåˆ™confirmResult ä¸º&#x27;confirm&#x27;</span><br><span class="line">  //å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆ, åˆ™confirmResultè·å–çš„å°±æ˜¯catchçš„é”™è¯¯æ¶ˆæ¯&#x27;cancel&#x27;</span><br><span class="line">  if (confirmResult != &#x27;confirm&#x27;) &#123;</span><br><span class="line">    return this.$message.info(&#x27;å·²ç»å–æ¶ˆåˆ é™¤&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //æ²¡æœ‰å–æ¶ˆå°±æ˜¯è¦åˆ é™¤ï¼Œå‘é€è¯·æ±‚å®Œæˆåˆ é™¤</span><br><span class="line">  const &#123;data:res&#125; = await this.$http.delete(`goods/$&#123;goods_id&#125;`)</span><br><span class="line"></span><br><span class="line">  if (res.meta.status !== 200) &#123;</span><br><span class="line">    return this.$message.error(&#x27;åˆ é™¤å•†å“å¤±è´¥&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  this.$message.success(&#x27;åˆ é™¤å•†å“æˆåŠŸ&#x27;)</span><br><span class="line">  this.getGoodsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-æ·»åŠ å•†å“"><a href="#4-æ·»åŠ å•†å“" class="headerlink" title="4.æ·»åŠ å•†å“"></a>4.æ·»åŠ å•†å“</h3><h4 id="A-æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª"><a href="#A-æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="A.æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª"></a>A.æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª</h4><p>åœ¨List.vueä¸­æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆªï¼Œå¹¶åˆ›å»ºæ·»åŠ å•†å“è·¯ç”±ç»„ä»¶åŠè§„åˆ™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åœ¨List.vueä¸­æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª</span><br><span class="line">&lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;goAddPage&quot;&gt;æ·»åŠ å•†å“&lt;/el-button&gt;</span><br><span class="line">&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">goAddPage()&#123;</span><br><span class="line">    this.$router.push(&#x27;/goods/add&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨router.jsä¸­å¼•å…¥goods&#x2F;Add.vue,å¹¶æ·»åŠ è·¯ç”±è§„åˆ™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GoodAdd</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Add.vue&#x27;</span></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodList</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods/add&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodAdd</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="B-å¸ƒå±€Add-vueç»„ä»¶"><a href="#B-å¸ƒå±€Add-vueç»„ä»¶" class="headerlink" title="B.å¸ƒå±€Add.vueç»„ä»¶"></a>B.å¸ƒå±€Add.vueç»„ä»¶</h4><p>å¸ƒå±€è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨Stepsç»„ä»¶ï¼Œåœ¨element.jsä¸­å¼•å…¥å¹¶æ³¨å†Œè¯¥ç»„ä»¶ï¼Œå¹¶åœ¨global.cssä¸­ç»™ç»„ä»¶è®¾ç½®å…¨å±€æ ·å¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Steps</span>,<span class="title class_">Step</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Step</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Steps</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//global.css</span></span><br><span class="line">.<span class="property">el</span>-steps&#123;</span><br><span class="line">    <span class="attr">margin</span>:15px <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">el</span>-step__title&#123;</span><br><span class="line">    font-<span class="attr">size</span>: 13px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†åœ¨Add.vueä¸­è¿›è¡Œé¡µé¢å¸ƒå±€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;æ·»åŠ å•†å“&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;å•†å“ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;æ·»åŠ å•†å“&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;!-- æ¶ˆæ¯æç¤º --&gt;</span><br><span class="line">            &lt;el-alert title=&quot;æ·»åŠ å•†å“ä¿¡æ¯&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;</span><br><span class="line">            &lt;/el-alert&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- æ­¥éª¤æ¡ç»„ä»¶ --&gt;</span><br><span class="line">            &lt;!-- align-center(å±…ä¸­æ•ˆæœ) --&gt;</span><br><span class="line">            &lt;el-steps :space=&quot;200&quot; :active=&quot;activeIndex - 0&quot; finish-status=&quot;success&quot; align-center&gt;</span><br><span class="line">                &lt;el-step title=&quot;åŸºæœ¬ä¿¡æ¯&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">                &lt;el-step title=&quot;å•†å“å‚æ•°&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">                &lt;el-step title=&quot;å•†å“å±æ€§&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">                &lt;el-step title=&quot;å•†å“å›¾ç‰‡&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">                &lt;el-step title=&quot;å•†å“å†…å®¹&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">                &lt;el-step title=&quot;å®Œæˆ&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">            &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- tabæ åŒºåŸŸ:el-tab-paneå¿…é¡»æ˜¯el-tabsçš„å­èŠ‚ç‚¹</span><br><span class="line">            :tab-position=&quot;&#x27;left&#x27;&quot;(è®¾ç½®tabæ ä¸ºå·¦å³ç»“æ„tabæ ) --&gt;</span><br><span class="line">            &lt;!-- è¡¨å•ï¼šlabel-position=&quot;top&quot;(è®¾ç½®labelåœ¨æ–‡æœ¬æ¡†ä¸Šæ–¹) --&gt;</span><br><span class="line">            &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;100px&quot; label-position=&quot;top&quot;&gt;</span><br><span class="line">                &lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot;&gt;</span><br><span class="line">                    &lt;el-tab-pane label=&quot;åŸºæœ¬ä¿¡æ¯&quot; name=&quot;0&quot;&gt;</span><br><span class="line">                        &lt;el-form-item label=&quot;å•†å“åç§°&quot; prop=&quot;goods_name&quot;&gt;</span><br><span class="line">                            &lt;el-input v-model=&quot;addForm.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                        &lt;/el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item label=&quot;å•†å“ä»·æ ¼&quot; prop=&quot;goods_price&quot;&gt;</span><br><span class="line">                            &lt;el-input v-model=&quot;addForm.goods_price&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                        &lt;/el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item label=&quot;å•†å“é‡é‡&quot; prop=&quot;goods_weight&quot;&gt;</span><br><span class="line">                            &lt;el-input v-model=&quot;addForm.goods_weight&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                        &lt;/el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item label=&quot;å•†å“æ•°é‡&quot; prop=&quot;goods_number&quot;&gt;</span><br><span class="line">                            &lt;el-input v-model=&quot;addForm.goods_number&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                        &lt;/el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item label=&quot;å•†å“åˆ†ç±»&quot; prop=&quot;goods_cat&quot;&gt;</span><br><span class="line">                            &lt;!-- é€‰æ‹©å•†å“åˆ†ç±»çš„çº§è”é€‰æ‹©æ¡† --&gt;</span><br><span class="line">                            &lt;el-cascader expandTrigger=&#x27;hover&#x27; v-model=&quot;addForm.goods_cat&quot; :options=&quot;cateList&quot; :props=&quot;cateProps&quot; @change=&quot;handleChange&quot; clearable&gt;&lt;/el-cascader&gt;</span><br><span class="line">                        &lt;/el-form-item&gt;</span><br><span class="line">                    &lt;/el-tab-pane&gt;</span><br><span class="line">                    &lt;el-tab-pane label=&quot;å•†å“å‚æ•°&quot; name=&quot;1&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-tab-pane&gt;</span><br><span class="line">                    &lt;el-tab-pane label=&quot;å•†å“å±æ€§&quot; name=&quot;2&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-tab-pane&gt;</span><br><span class="line">                    &lt;el-tab-pane label=&quot;å•†å“å›¾ç‰‡&quot; name=&quot;3&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-tab-pane&gt;</span><br><span class="line">                    &lt;el-tab-pane label=&quot;å•†å“å†…å®¹&quot; name=&quot;4&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-tab-pane&gt;</span><br><span class="line">                &lt;/el-tabs&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //ä¿å­˜æ­¥éª¤æ¡æ¿€æ´»é¡¹ç´¢å¼•</span><br><span class="line">      activeIndex: &#x27;0&#x27;,</span><br><span class="line">      //æ·»åŠ å•†å“çš„è¡¨å•æ•°æ®å¯¹è±¡</span><br><span class="line">      addForm: &#123;</span><br><span class="line">        goods_name: &#x27;&#x27;,</span><br><span class="line">        goods_price: 0,</span><br><span class="line">        goods_weight: 0,</span><br><span class="line">        goods_number: 0,</span><br><span class="line">        goods_cat:[]</span><br><span class="line">      &#125;,</span><br><span class="line">      //éªŒè¯è§„åˆ™</span><br><span class="line">      addFormRules: &#123;</span><br><span class="line">        goods_name: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥å•†å“åç§°&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ],</span><br><span class="line">        goods_price: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥å•†å“ä»·æ ¼&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ],</span><br><span class="line">        goods_weight: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥å•†å“é‡é‡&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ],</span><br><span class="line">        goods_number: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·è¾“å…¥å•†å“æ•°é‡&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ],</span><br><span class="line">        goods_cat: [</span><br><span class="line">          &#123; required: true, message: &#x27;è¯·é€‰æ‹©å•†å“åˆ†ç±»&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      //ç”¨æ¥ä¿å­˜åˆ†ç±»æ•°æ®</span><br><span class="line">      cateList: [],</span><br><span class="line">      //é…ç½®çº§è”èœå•ä¸­æ•°æ®å¦‚ä½•å±•ç¤º</span><br><span class="line">      cateProps: &#123;</span><br><span class="line">        value: &#x27;cat_id&#x27;,</span><br><span class="line">        label: &#x27;cat_name&#x27;,</span><br><span class="line">        children: &#x27;children&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–å•†å“åˆ†ç±»æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.cateList = res.data</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange()&#123;</span><br><span class="line">      //å¦‚æœç”¨æˆ·é€‰æ‹©çš„ä¸æ˜¯ä¸‰çº§åˆ†ç±»,è¯¥æ¬¡é€‰æ‹©æ— æ•ˆï¼Œå› ä¸ºå¿…é¡»é€‰æ‹©ä¸‰çº§åˆ†ç±»</span><br><span class="line">      if(this.addForm.goods_cat.length !== 3)&#123;</span><br><span class="line">        this.addForm.goods_cat = []</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-æ·»åŠ tabæ åˆ‡æ¢éªŒè¯"><a href="#C-æ·»åŠ tabæ åˆ‡æ¢éªŒè¯" class="headerlink" title="C.æ·»åŠ tabæ åˆ‡æ¢éªŒè¯"></a>C.æ·»åŠ tabæ åˆ‡æ¢éªŒè¯</h4><p>ä¹Ÿå°±æ˜¯è¯´ä¸è¾“å…¥æŸäº›å†…å®¹ï¼Œæ— æ³•åˆ‡æ¢åˆ°åˆ«çš„tabæ </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//é¦–å…ˆç»™tabsæ·»åŠ tabåˆ‡æ¢å‰äº‹ä»¶</span><br><span class="line">&lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot; :before-leave=&quot;beforeTabLeave&quot;&gt;</span><br><span class="line">......</span><br><span class="line">&lt;/el-tabs&gt;</span><br><span class="line"></span><br><span class="line">//å†åˆ°methodsç¼–å†™äº‹ä»¶å‡½æ•°beforeTabLeave</span><br><span class="line">beforeTabLeave(activeName,oldActiveName)&#123;</span><br><span class="line">  //åœ¨tabæ åˆ‡æ¢ä¹‹å‰è§¦å‘ï¼Œä¸¤ä¸ªå½¢å‚ä¸ºåˆ‡æ¢å‰ï¼Œåçš„tabæ name</span><br><span class="line">  if(oldActiveName === &#x27;0&#x27;)&#123;</span><br><span class="line">      //åœ¨ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µçš„æ—¶å€™</span><br><span class="line">      if(this.addForm.goods_cat.length !== 3)&#123;</span><br><span class="line">          this.$message.error(&#x27;è¯·é€‰æ‹©å•†å“çš„åˆ†ç±»&#x27;)</span><br><span class="line">          return false</span><br><span class="line">      &#125;else if(this.addForm.goods_name.trim() === &#x27;&#x27;)&#123;</span><br><span class="line">          this.$message.error(&#x27;è¯·è¾“å…¥å•†å“åç§°&#x27;)</span><br><span class="line">          return false</span><br><span class="line">      &#125;else if(this.addForm.goods_price.trim() === &#x27;0&#x27;)&#123;</span><br><span class="line">          this.$message.error(&#x27;è¯·è¾“å…¥å•†å“ä»·æ ¼&#x27;)</span><br><span class="line">          return false</span><br><span class="line">      &#125;else if(this.addForm.goods_weight.trim() === &#x27;0&#x27;)&#123;</span><br><span class="line">          this.$message.error(&#x27;è¯·è¾“å…¥å•†å“é‡é‡&#x27;)</span><br><span class="line">          return false</span><br><span class="line">      &#125;else if(this.addForm.goods_number.trim() === &#x27;0&#x27;)&#123;</span><br><span class="line">          this.$message.error(&#x27;è¯·è¾“å…¥å•†å“æ•°é‡&#x27;)</span><br><span class="line">          return false</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="D-å±•ç¤ºä¿¡æ¯"><a href="#D-å±•ç¤ºä¿¡æ¯" class="headerlink" title="D.å±•ç¤ºä¿¡æ¯"></a>D.å±•ç¤ºä¿¡æ¯</h4><p>å±•ç¤ºå•†å“å‚æ•°ä¿¡æ¯,å•†å“å±æ€§ä¿¡æ¯<br>åœ¨å•†å“å‚æ•°ä¿¡æ¯å±•ç¤ºä¸­ä½¿ç”¨çš„el-checkbox,el-checkbox-groupç»„ä»¶ï¼Œæ‰“å¼€element.jså¼•å…¥ç»„ä»¶å¹¶æ³¨å†Œç»„ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åœ¨ç”¨æˆ·ç‚¹å‡»tabæ æ—¶è§¦å‘äº‹ä»¶</span><br><span class="line">&lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot; :before-leave=&quot;beforeTabLeave&quot; @tab-click=&quot;tabClicked&quot;&gt;</span><br><span class="line">........</span><br><span class="line"></span><br><span class="line">//åœ¨å‚æ•°ä¿¡æ¯ï¼Œå•†å“å±æ€§é¢æ¿ä¸­æ·»åŠ å¾ªç¯ç”Ÿæˆç»“æ„çš„ä»£ç </span><br><span class="line">&lt;el-tab-pane label=&quot;å•†å“å‚æ•°&quot; name=&quot;1&quot;&gt;</span><br><span class="line">  &lt;!-- æ¸²æŸ“è¡¨å•itemé¡¹ --&gt;</span><br><span class="line">  &lt;el-form-item :label=&quot;item.attr_name&quot; :key=&quot;item.attr_id&quot; v-for=&quot;item in manyTableData&quot;&gt;</span><br><span class="line">      &lt;!-- ä½¿ç”¨æ•°ç»„æ¸²æŸ“å¤é€‰æ¡†ç»„ --&gt;</span><br><span class="line">      &lt;el-checkbox-group v-model=&quot;item.attr_vals&quot;&gt;</span><br><span class="line">          &lt;el-checkbox border :label=&quot;val&quot; v-for=&quot;(val,i) in item.attr_vals&quot; :key=&quot;i&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">      &lt;/el-checkbox-group&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">&lt;el-tab-pane label=&quot;å•†å“å±æ€§&quot; name=&quot;2&quot;&gt;</span><br><span class="line">  &lt;!-- å¾ªç¯ç”Ÿæˆé™æ€å±æ€§ --&gt;</span><br><span class="line">  &lt;el-form-item :label=&quot;item.attr_name&quot; v-for=&quot;item in onlyTableData&quot; :key=&quot;item.attr_id&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;item.attr_vals&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">//åœ¨dataæ•°æ®ä¸­æ·»åŠ ä¿å­˜åŠ¨æ€å‚æ•°å’Œé™æ€å±æ€§çš„æ•°ç»„</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //åŠ¨æ€å‚æ•°åˆ—è¡¨</span><br><span class="line">      manyTableData: [],</span><br><span class="line">      //é™æ€å±æ€§åˆ—è¡¨</span><br><span class="line">      onlyTableData:[]</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    async tabClicked() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·ç‚¹å‡»åˆ‡æ¢tabæ æ—¶è§¦å‘</span><br><span class="line">      if (this.activeIndex === &#x27;1&#x27;) &#123;</span><br><span class="line">        //å‘é€è¯·æ±‚è·å–åŠ¨æ€å‚æ•°</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">          `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">          &#123; params: &#123; sel: &#x27;many&#x27; &#125; &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;è·å–åŠ¨æ€å‚æ•°åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        //å°†attr_valså­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„</span><br><span class="line">        res.data.forEach(item =&gt; &#123;</span><br><span class="line">          item.attr_vals =</span><br><span class="line">            item.attr_vals.length === 0 ? [] : item.attr_vals.split(&#x27; &#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.manyTableData = res.data</span><br><span class="line">      &#125; else if (this.activeIndex === &#x27;2&#x27;) &#123;</span><br><span class="line">        //å‘é€è¯·æ±‚è·å–é™æ€å±æ€§</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">          `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">          &#123; params: &#123; sel: &#x27;only&#x27; &#125; &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;è·å–é™æ€å±æ€§åˆ—è¡¨å¤±è´¥&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.onlyTableData = res.data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //æ·»åŠ  è®¡ç®—å±æ€§è·å–ä¸‰çº§åˆ†ç±»</span><br><span class="line">  computed: &#123;</span><br><span class="line">    cateId() &#123;</span><br><span class="line">      if (this.addForm.goods_cat.length === 3) &#123;</span><br><span class="line">        return this.addForm.goods_cat[2]</span><br><span class="line">      &#125;</span><br><span class="line">      return null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€ä»Šæ—¥ç›®æ ‡"><a href="#å…­ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="å…­ã€ä»Šæ—¥ç›®æ ‡"></a>å…­ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.å®Œæˆå•†å“æ·»åŠ <br>2.å®Œæˆè®¢å•åˆ—è¡¨<br>3.å®Œæˆæ•°æ®ç»Ÿè®¡å±•ç¤º</p>
<h3 id="1-æ·»åŠ å•†å“"><a href="#1-æ·»åŠ å•†å“" class="headerlink" title="1.æ·»åŠ å•†å“"></a>1.æ·»åŠ å•†å“</h3><h4 id="A-å®Œæˆå›¾ç‰‡ä¸Šä¼ "><a href="#A-å®Œæˆå›¾ç‰‡ä¸Šä¼ " class="headerlink" title="A.å®Œæˆå›¾ç‰‡ä¸Šä¼ "></a>A.å®Œæˆå›¾ç‰‡ä¸Šä¼ </h4><p>ä½¿ç”¨uploadç»„ä»¶å®Œæˆå›¾ç‰‡ä¸Šä¼ <br>åœ¨element.jsä¸­å¼•å…¥uploadç»„ä»¶ï¼Œå¹¶æ³¨å†Œ<br>å› ä¸ºuploadç»„ä»¶è¿›è¡Œå›¾ç‰‡ä¸Šä¼ çš„æ—¶å€™å¹¶ä¸æ˜¯ä½¿ç”¨axioså‘é€è¯·æ±‚<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¸ºä¸Šä¼ å›¾ç‰‡çš„è¯·æ±‚æ·»åŠ tokenï¼Œå³ä¸ºuploadç»„ä»¶æ·»åŠ headerså±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åœ¨é¡µé¢ä¸­æ·»åŠ uploadç»„ä»¶ï¼Œå¹¶è®¾ç½®å¯¹åº”çš„äº‹ä»¶å’Œå±æ€§</span><br><span class="line">&lt;el-tab-pane label=&quot;å•†å“å›¾ç‰‡&quot; name=&quot;3&quot;&gt;</span><br><span class="line">  &lt;!-- å•†å“å›¾ç‰‡ä¸Šä¼ </span><br><span class="line">  action:æŒ‡å®šå›¾ç‰‡ä¸Šä¼ apiæ¥å£</span><br><span class="line">  :on-preview ï¼š å½“ç‚¹å‡»å›¾ç‰‡æ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶è¿›è¡Œé¢„è§ˆæ“ä½œ,å¤„ç†å›¾ç‰‡é¢„è§ˆ</span><br><span class="line">  :on-remove : å½“ç”¨æˆ·ç‚¹å‡»å›¾ç‰‡å³ä¸Šè§’çš„Xå·æ—¶è§¦å‘æ‰§è¡Œ</span><br><span class="line">  :on-successï¼šå½“ç”¨æˆ·ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡å¹¶æˆåŠŸä¸Šä¼ æ—¶è§¦å‘</span><br><span class="line">  list-type ï¼šè®¾ç½®é¢„è§ˆå›¾ç‰‡çš„æ–¹å¼</span><br><span class="line">  :headers ï¼šè®¾ç½®ä¸Šä¼ å›¾ç‰‡çš„è¯·æ±‚å¤´ --&gt;</span><br><span class="line">  &lt;el-upload :action=&quot;uploadURL&quot; :on-preview=&quot;handlePreview&quot; :on-remove=&quot;handleRemove&quot; :on-success=&quot;handleSuccess&quot; list-type=&quot;picture&quot; :headers=&quot;headerObj&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;ç‚¹å‡»ä¸Šä¼ &lt;/el-button&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">//åœ¨el-cardå¡ç‰‡è§†å›¾ä¸‹é¢æ·»åŠ å¯¹è¯æ¡†ç”¨æ¥é¢„è§ˆå›¾ç‰‡</span><br><span class="line">&lt;!-- é¢„è§ˆå›¾ç‰‡å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;å›¾ç‰‡é¢„è§ˆ&quot; :visible.sync=&quot;previewVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">  &lt;img :src=&quot;previewPath&quot; class=&quot;previewImg&quot; /&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">//åœ¨dataä¸­æ·»åŠ æ•°æ®</span><br><span class="line">data()&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    ......</span><br><span class="line">    //æ·»åŠ å•†å“çš„è¡¨å•æ•°æ®å¯¹è±¡</span><br><span class="line">    addForm: &#123;</span><br><span class="line">      goods_name: &#x27;&#x27;,</span><br><span class="line">      goods_price: 0,</span><br><span class="line">      goods_weight: 0,</span><br><span class="line">      goods_number: 0,</span><br><span class="line">      goods_cat: [],</span><br><span class="line">      //ä¸Šä¼ å›¾ç‰‡æ•°ç»„</span><br><span class="line">      pics: []</span><br><span class="line">    &#125;,</span><br><span class="line">    //ä¸Šä¼ å›¾ç‰‡çš„urlåœ°å€</span><br><span class="line">    uploadURL: &#x27;http://127.0.0.1:8888/api/private/v1/upload&#x27;,</span><br><span class="line">    //å›¾ç‰‡ä¸Šä¼ ç»„ä»¶çš„headersè¯·æ±‚å¤´å¯¹è±¡</span><br><span class="line">    headerObj: &#123; Authorization: window.sessionStorage.getItem(&#x27;token&#x27;) &#125;,</span><br><span class="line">    //ä¿å­˜é¢„è§ˆå›¾ç‰‡çš„urlåœ°å€</span><br><span class="line">    previewPath: &#x27;&#x27;,</span><br><span class="line">    //æ§åˆ¶é¢„è§ˆå›¾ç‰‡å¯¹è¯æ¡†çš„æ˜¾ç¤ºå’Œéšè—</span><br><span class="line">    previewVisible:false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">//åœ¨methodsä¸­æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">  .......</span><br><span class="line">  handlePreview(file) &#123;</span><br><span class="line">    //å½“ç”¨æˆ·ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆæ—¶æ‰§è¡Œï¼Œå¤„ç†å›¾ç‰‡é¢„è§ˆ</span><br><span class="line">    //å½¢å‚fileå°±æ˜¯ç”¨æˆ·é¢„è§ˆçš„é‚£ä¸ªæ–‡ä»¶</span><br><span class="line">    this.previewPath = file.response.data.url</span><br><span class="line">    //æ˜¾ç¤ºé¢„è§ˆå›¾ç‰‡å¯¹è¯æ¡†</span><br><span class="line">    this.previewVisible = true</span><br><span class="line">  &#125;,</span><br><span class="line">  handleRemove(file) &#123;</span><br><span class="line">    //å½“ç”¨æˆ·ç‚¹å‡»Xå·åˆ é™¤æ—¶æ‰§è¡Œ</span><br><span class="line">    //å½¢å‚fileå°±æ˜¯ç”¨æˆ·ç‚¹å‡»åˆ é™¤çš„æ–‡ä»¶</span><br><span class="line">    //è·å–ç”¨æˆ·ç‚¹å‡»åˆ é™¤çš„é‚£ä¸ªå›¾ç‰‡çš„ä¸´æ—¶è·¯å¾„</span><br><span class="line">    const filePath = file.response.data.tmp_path</span><br><span class="line">    //ä½¿ç”¨findIndexæ¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•</span><br><span class="line">    const index = this.addForm.pics.findIndex(item =&gt; item.pic === filePath)</span><br><span class="line">    //ç§»é™¤ç´¢å¼•å¯¹åº”çš„å›¾ç‰‡</span><br><span class="line">    this.addForm.pics.splice(index, 1)</span><br><span class="line">  &#125;,</span><br><span class="line">  handleSuccess(response) &#123;</span><br><span class="line">    //å½“ä¸Šä¼ æˆåŠŸæ—¶è§¦å‘æ‰§è¡Œ</span><br><span class="line">    //å½¢å‚responseå°±æ˜¯ä¸Šä¼ æˆåŠŸä¹‹åæœåŠ¡å™¨è¿”å›çš„ç»“æœ</span><br><span class="line">    //å°†æœåŠ¡å™¨è¿”å›çš„ä¸´æ—¶è·¯å¾„ä¿å­˜åˆ°addFormè¡¨å•çš„picsæ•°ç»„ä¸­</span><br><span class="line">    this.addForm.pics.push(&#123; pic: response.data.tmp_path &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="B-ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶"><a href="#B-ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶" class="headerlink" title="B.ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶"></a>B.ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶</h4><p>æƒ³è¦ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶vue-quill-editorï¼Œå°±å¿…é¡»å…ˆä»ä¾èµ–å®‰è£…è¯¥æ’ä»¶<br>å¼•å…¥å¹¶æ³¨å†Œvue-quill-editorï¼Œæ‰“å¼€main.jsï¼Œç¼–å†™å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å¯¼å…¥vue-quill-editorï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</span><br><span class="line">import VueQuillEditor from &#x27;vue-quill-editor&#x27;</span><br><span class="line">//å¯¼å…¥vue-quill-editorçš„æ ·å¼</span><br><span class="line">import &#x27;quill/dist/quill.core.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.snow.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.bubble.css&#x27;</span><br><span class="line">......</span><br><span class="line">//å…¨å±€æ³¨å†Œç»„ä»¶</span><br><span class="line">Vue.component(&#x27;tree-table&#x27;, TreeTable)</span><br><span class="line">//å…¨å±€æ³¨å†Œå¯Œæ–‡æœ¬ç»„ä»¶</span><br><span class="line">Vue.use(VueQuillEditor)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶vue-quill-editor</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶ --&gt;</span><br><span class="line">&lt;el-tab-pane label=&quot;å•†å“å†…å®¹&quot; name=&quot;4&quot;&gt;</span><br><span class="line">  &lt;!-- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶ --&gt;</span><br><span class="line">  &lt;quill-editor v-model=&quot;addForm.goods_introduce&quot;&gt;&lt;/quill-editor&gt;</span><br><span class="line">  &lt;!-- æ·»åŠ å•†å“æŒ‰é’® --&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; class=&quot;btnAdd&quot;&gt;æ·»åŠ å•†å“&lt;/el-button&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">//åœ¨æ•°æ®ä¸­æ·»åŠ goods_introduce</span><br><span class="line">//æ·»åŠ å•†å“çš„è¡¨å•æ•°æ®å¯¹è±¡</span><br><span class="line">addForm: &#123;</span><br><span class="line">  goods_name: &#x27;&#x27;,</span><br><span class="line">  goods_price: 0,</span><br><span class="line">  goods_weight: 0,</span><br><span class="line">  goods_number: 0,</span><br><span class="line">  goods_cat: [],</span><br><span class="line">  //ä¸Šä¼ å›¾ç‰‡æ•°ç»„</span><br><span class="line">  pics: [],</span><br><span class="line">  //å•†å“çš„è¯¦æƒ…ä»‹ç»</span><br><span class="line">  goods_introduce:&#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//åœ¨global.cssæ ·å¼ä¸­æ·»åŠ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„æœ€å°é«˜åº¦</span><br><span class="line">.ql-editor&#123;</span><br><span class="line">    min-height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">//ç»™æ·»åŠ å•†å“æŒ‰é’®æ·»åŠ é—´è·</span><br><span class="line">.btnAdd&#123;</span><br><span class="line">  margin-top:15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="C-æ·»åŠ å•†å“"><a href="#C-æ·»åŠ å•†å“" class="headerlink" title="C.æ·»åŠ å•†å“"></a>C.æ·»åŠ å•†å“</h4><p>å®Œæˆæ·»åŠ å•†å“çš„æ“ä½œ<br>åœ¨æ·»åŠ å•†å“ä¹‹å‰ï¼Œä¸ºäº†é¿å…goods_catæ•°ç»„è½¬æ¢å­—ç¬¦ä¸²ä¹‹åå¯¼è‡´çº§è”é€‰æ‹©å™¨æŠ¥é”™<br>æˆ‘ä»¬éœ€è¦æ‰“å¼€vueæ§åˆ¶æ¡ï¼Œç‚¹å‡»ä¾èµ–ï¼Œå®‰è£…lodashï¼ŒæŠŠaddFormè¿›è¡Œæ·±æ‹·è´</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//æ‰“å¼€Add.vueï¼Œå¯¼å…¥lodash</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//å®˜æ–¹æ¨èå°†lodashå¯¼å…¥ä¸º_</span><br><span class="line">import _ from &#x27;lodash&#x27;</span><br><span class="line"></span><br><span class="line">//ç»™æ·»åŠ å•†å“æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶</span><br><span class="line">&lt;!-- æ·»åŠ å•†å“æŒ‰é’® --&gt;</span><br><span class="line">&lt;el-button type=&quot;primary&quot; class=&quot;btnAdd&quot; @click=&quot;add&quot;&gt;æ·»åŠ å•†å“&lt;/el-button&gt;</span><br><span class="line">//ç¼–å†™ç‚¹å‡»äº‹ä»¶å®Œæˆå•†å“æ·»åŠ </span><br><span class="line">add()&#123;</span><br><span class="line">  this.$refs.addFormRef.validate(async valid=&gt;&#123;</span><br><span class="line">    if(!valid) return this.$message.error(&quot;è¯·å¡«å†™å¿…è¦çš„è¡¨å•é¡¹!&quot;)</span><br><span class="line"></span><br><span class="line">    //å°†addFormè¿›è¡Œæ·±æ‹·è´ï¼Œé¿å…goods_catæ•°ç»„è½¬æ¢å­—ç¬¦ä¸²ä¹‹åå¯¼è‡´çº§è”é€‰æ‹©å™¨æŠ¥é”™</span><br><span class="line">    const form = _.cloneDeep(this.addForm)</span><br><span class="line">    //å°†goods_catä»æ•°ç»„è½¬æ¢ä¸º&quot;1,2,3&quot;å­—ç¬¦ä¸²å½¢å¼</span><br><span class="line">    form.goods_cat = form.goods_cat.join(&quot;,&quot;)</span><br><span class="line">    //å¤„ç†attrsæ•°ç»„ï¼Œæ•°ç»„ä¸­éœ€è¦åŒ…å«å•†å“çš„åŠ¨æ€å‚æ•°å’Œé™æ€å±æ€§</span><br><span class="line">    //å°†manyTableDataï¼ˆåŠ¨æ€å‚æ•°ï¼‰å¤„ç†æ·»åŠ åˆ°attrs</span><br><span class="line">    this.manyTableData.forEach(item=&gt;&#123;</span><br><span class="line">      form.attrs.push(&#123; attr_id:item.attr_id, attr_value:item.attr_vals.join(&quot; &quot;) &#125;) </span><br><span class="line">    &#125;)</span><br><span class="line">    //å°†onlyTableDataï¼ˆé™æ€å±æ€§ï¼‰å¤„ç†æ·»åŠ åˆ°attrs</span><br><span class="line">    this.onlyTableData.forEach(item=&gt;&#123;</span><br><span class="line">      form.attrs.push(&#123; attr_id:item.attr_id, attr_value:item.attr_vals &#125;) </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    //å‘é€è¯·æ±‚å®Œæˆå•†å“çš„æ·»åŠ ,å•†å“åç§°å¿…é¡»æ˜¯å”¯ä¸€çš„</span><br><span class="line">    const &#123;data:res&#125; = await this.$http.post(&#x27;goods&#x27;,form)</span><br><span class="line">    if(res.meta.status !== 201)&#123;</span><br><span class="line">      return this.$message.error(&#x27;æ·»åŠ å•†å“å¤±è´¥&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    this.$message.success(&#x27;æ·»åŠ å•†å“æˆåŠŸ&#x27;)</span><br><span class="line">    //ç¼–ç¨‹å¼å¯¼èˆªè·³è½¬åˆ°å•†å“åˆ—è¡¨</span><br><span class="line">    this.$router.push(&#x27;/goods&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-æ¨é€ä»£ç "><a href="#D-æ¨é€ä»£ç " class="headerlink" title="D.æ¨é€ä»£ç "></a>D.æ¨é€ä»£ç </h4><p>æ¨é€goods_liståˆ†æ”¯åˆ°ç äº‘<br>å°†ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼š  git add .<br>å°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š git commit -m â€œå®Œæˆå•†å“åŠŸèƒ½å¼€å‘â€<br>å°†ä»£ç æ¨é€åˆ°ç äº‘ï¼š  git push<br>åˆ‡æ¢åˆ°masterä¸»åˆ†æ”¯ï¼š git checkout master<br>å°†goods_liståˆ†æ”¯ä»£ç åˆå¹¶åˆ°master: git merge goods_list<br>å°†masteræ¨é€åˆ°ç äº‘ï¼š  git push</p>
<h3 id="2-è®¢å•åˆ—è¡¨"><a href="#2-è®¢å•åˆ—è¡¨" class="headerlink" title="2.è®¢å•åˆ—è¡¨"></a>2.è®¢å•åˆ—è¡¨</h3><h4 id="A-åˆ›å»ºåˆ†æ”¯"><a href="#A-åˆ›å»ºåˆ†æ”¯" class="headerlink" title="A.åˆ›å»ºåˆ†æ”¯"></a>A.åˆ›å»ºåˆ†æ”¯</h4><p>åˆ›å»ºorderå­åˆ†æ”¯å¹¶æ¨é€åˆ°ç äº‘<br>åˆ›å»ºorderå­åˆ†æ”¯: git checkout -b order<br>å°†orderåˆ†æ”¯æ¨é€åˆ°ç äº‘ï¼š git push -u origin order</p>
<h4 id="B-åˆ›å»ºè·¯ç”±"><a href="#B-åˆ›å»ºè·¯ç”±" class="headerlink" title="B.åˆ›å»ºè·¯ç”±"></a>B.åˆ›å»ºè·¯ç”±</h4><p>åˆ›å»ºè®¢å•åˆ—è¡¨è·¯ç”±ç»„ä»¶å¹¶æ·»åŠ è·¯ç”±è§„åˆ™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åœ¨componentsä¸­æ–°å»ºorderæ–‡ä»¶å¤¹ï¼Œæ–°å»ºOrder.vueç»„ä»¶ï¼Œç»„ä»¶ä¸­æ·»åŠ ä»£ç å¦‚ä¸‹</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;è®¢å•åˆ—è¡¨&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;è®¢å•ç®¡ç†&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;è®¢å•åˆ—è¡¨&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;!-- æœç´¢æ  --&gt;</span><br><span class="line">            &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">                &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">                    &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; v-model=&quot;queryInfo.query&quot; clearable&gt;</span><br><span class="line">                        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; &gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;/el-input&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //æŸ¥è¯¢æ¡ä»¶</span><br><span class="line">        queryInfo:&#123;</span><br><span class="line">            query:&#x27;&#x27;,</span><br><span class="line">            pagenum:1,</span><br><span class="line">            pagesize:10</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">      </span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">//æ‰“å¼€router.jså¯¼å…¥Order.vueå¹¶æ·»åŠ è§„åˆ™</span><br><span class="line">import Order from &#x27;./components/order/Order.vue&#x27;</span><br><span class="line"></span><br><span class="line">path: &#x27;/home&#x27;, component: Home, redirect: &#x27;/welcome&#x27;, children: [</span><br><span class="line">  &#123; path: &quot;/welcome&quot;, component: Welcome &#125;,</span><br><span class="line">  &#123; path: &quot;/users&quot;, component: Users &#125;,</span><br><span class="line">  &#123; path: &quot;/rights&quot;, component: Rights &#125;,</span><br><span class="line">  &#123; path: &quot;/roles&quot;, component: Roles  &#125;,</span><br><span class="line">  &#123; path: &quot;/categories&quot;, component: Cate  &#125;,</span><br><span class="line">  &#123; path: &quot;/params&quot;, component: Params  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods&quot;, component: GoodList  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods/add&quot;, component: GoodAdd  &#125;,</span><br><span class="line">  &#123; path: &quot;/orders&quot;, component: Order  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-å®ç°æ•°æ®å±•ç¤ºåŠåˆ†é¡µ"><a href="#C-å®ç°æ•°æ®å±•ç¤ºåŠåˆ†é¡µ" class="headerlink" title="C.å®ç°æ•°æ®å±•ç¤ºåŠåˆ†é¡µ"></a>C.å®ç°æ•°æ®å±•ç¤ºåŠåˆ†é¡µ</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">&lt;el-card&gt;</span><br><span class="line">    &lt;!-- æœç´¢æ  --&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">            &lt;el-input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; v-model=&quot;queryInfo.query&quot; clearable&gt;</span><br><span class="line">                &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- è®¢å•è¡¨æ ¼ --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;orderList&quot; border stripe&gt;</span><br><span class="line">        &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;è®¢å•ç¼–å·&quot; prop=&quot;order_number&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;è®¢å•ä»·æ ¼&quot; prop=&quot;order_price&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;æ˜¯å¦ä»˜æ¬¾&quot; prop=&quot;pay_status&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-tag type=&quot;success&quot; v-if=&quot;scope.row.pay_status === &#x27;1&#x27;&quot;&gt;å·²ä»˜æ¬¾&lt;/el-tag&gt;</span><br><span class="line">                &lt;el-tag type=&quot;danger&quot; v-else&gt;æœªä»˜æ¬¾&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;æ˜¯å¦å‘è´§&quot; prop=&quot;is_send&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;ä¸‹å•æ—¶é—´&quot; prop=&quot;create_time&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &#123;&#123;scope.row.create_time | dateFormat&#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;125px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;success&quot; icon=&quot;el-icon-location&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- åˆ†é¡µ --&gt;</span><br><span class="line">    &lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">    &lt;/el-pagination&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //æŸ¥è¯¢æ¡ä»¶</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      //è®¢å•åˆ—è¡¨æ•°æ®</span><br><span class="line">      orderList: [],</span><br><span class="line">      //æ•°æ®æ€»æ¡æ•°</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getOrderList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getOrderList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;orders&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–è®¢å•åˆ—è¡¨æ•°æ®å¤±è´¥!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.total = res.data.total</span><br><span class="line">      this.orderList = res.data.goods</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange(newSize)&#123;</span><br><span class="line">        this.queryInfo.pagesize = newSize</span><br><span class="line">        this.getOrderList()</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(newPage)&#123;</span><br><span class="line">        this.queryInfo.pagenum = newPage</span><br><span class="line">        this.getOrderList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-åˆ¶ä½œçœå¸‚åŒºå¿è”åŠ¨"><a href="#D-åˆ¶ä½œçœå¸‚åŒºå¿è”åŠ¨" class="headerlink" title="D.åˆ¶ä½œçœå¸‚åŒºå¿è”åŠ¨"></a>D.åˆ¶ä½œçœå¸‚åŒºå¿è”åŠ¨</h4><p>æ‰“å¼€ä»Šå¤©çš„èµ„æ–™ï¼Œæ‰¾åˆ°ç´ ææ–‡ä»¶å¤¹ï¼Œå¤åˆ¶citydata.jsæ–‡ä»¶åˆ°components&#x2F;orderæ–‡ä»¶å¤¹ä¸­<br>ç„¶åå¯¼å…¥citydata.jsæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import cityData from &quot;./citydata.js&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ç»™ä¿®æ”¹åœ°å€æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; @click=&quot;showEditAddress&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">//æ·»åŠ ä¿®æ”¹åœ°å€å¯¹è¯æ¡†,åœ¨å¡ç‰‡è§†å›¾ä¸‹æ–¹æ·»åŠ </span><br><span class="line">&lt;!-- ä¿®æ”¹åœ°å€å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;ä¿®æ”¹æ”¶è´§åœ°å€&quot; :visible.sync=&quot;addressVisible&quot; width=&quot;50%&quot; @close=&quot;addressDialogClosed&quot;&gt;</span><br><span class="line">    &lt;!-- æ·»åŠ è¡¨å• --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;addressForm&quot; :rules=&quot;addressFormRules&quot; ref=&quot;addressFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;çœå¸‚åŒºå¿&quot; prop=&quot;address1&quot;&gt;</span><br><span class="line">            &lt;el-cascader :options=&quot;cityData&quot; v-model=&quot;addressForm.address1&quot;&gt;&lt;/el-cascader&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;è¯¦ç»†åœ°å€&quot; prop=&quot;address2&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addressForm.address2&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;addressVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addressVisible = false&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">//jséƒ¨åˆ†çš„ä»£ç </span><br><span class="line">&lt;script&gt;</span><br><span class="line">import cityData from &quot;./citydata.js&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //æ§åˆ¶ä¿®æ”¹åœ°å€å¯¹è¯æ¡†çš„æ˜¾ç¤ºå’Œéšè—</span><br><span class="line">      addressVisible:false,</span><br><span class="line">      //ä¿®æ”¹æ”¶è´§åœ°å€çš„è¡¨å•</span><br><span class="line">      addressForm:&#123;</span><br><span class="line">          address1:[],</span><br><span class="line">          address2:&#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      addressFormRules:&#123;</span><br><span class="line">          address1:[&#123; required: true, message: &#x27;è¯·é€‰æ‹©çœå¸‚åŒºå¿&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">          address2:[&#123; required: true, message: &#x27;è¯·è¾“å…¥è¯¦ç»†åœ°å€&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">      &#125;,</span><br><span class="line">      //å°†å¯¼å…¥çš„cityDataæ•°æ®ä¿å­˜èµ·æ¥</span><br><span class="line">      cityData:cityData</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    ......</span><br><span class="line">    showEditAddress() &#123;</span><br><span class="line">      //å½“ç”¨æˆ·ç‚¹å‡»ä¿®æ”¹æ”¶è´§åœ°å€æŒ‰é’®æ—¶è§¦å‘</span><br><span class="line">      this.addressVisible = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    addressDialogClosed()&#123;</span><br><span class="line">        this.$refs.addressFormRef.resetFields()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.el-cascader&#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="E-åˆ¶ä½œç‰©æµè¿›åº¦å¯¹è¯æ¡†"><a href="#E-åˆ¶ä½œç‰©æµè¿›åº¦å¯¹è¯æ¡†" class="headerlink" title="E.åˆ¶ä½œç‰©æµè¿›åº¦å¯¹è¯æ¡†"></a>E.åˆ¶ä½œç‰©æµè¿›åº¦å¯¹è¯æ¡†</h4><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯element-uiä¸­æä¾›çš„Timelineç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦å¯¼å…¥å¹¶æ³¨å†Œç»„ä»¶<br>æ‰“å¼€element.js,ç¼–å†™ä»£ç ä¼šè¿›è¡Œå¯¼å…¥å’Œæ³¨å†Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    Timeline,TimelineItem</span><br><span class="line">&#125; from &#x27;element-ui&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Timeline)</span><br><span class="line">Vue.use(TimelineItem)</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€Order.vueæ–‡ä»¶ï¼Œæ·»åŠ ä»£ç å®ç°ç‰©æµè¿›åº¦å¯¹è¯æ¡†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç‰©æµä¿¡æ¯è¿›åº¦å¯¹è¯æ¡† --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;ç‰©æµè¿›åº¦&quot; :visible.sync=&quot;progressVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;!-- æ—¶é—´çº¿ç»„ä»¶  --&gt;</span><br><span class="line">    &lt;el-timeline&gt;</span><br><span class="line">        &lt;el-timeline-item v-for=&quot;(activity, index) in progressInfo&quot; </span><br><span class="line">        :key=&quot;index&quot; :timestamp=&quot;activity.time&quot;&gt;</span><br><span class="line">            &#123;&#123;activity.context&#125;&#125;</span><br><span class="line">        &lt;/el-timeline-item&gt;</span><br><span class="line">    &lt;/el-timeline&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import cityData from &#x27;./citydata.js&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //æ§åˆ¶ç‰©æµè¿›åº¦å¯¹è¯æ¡†çš„æ˜¾ç¤ºå’Œéšè—</span><br><span class="line">      progressVisible: false,</span><br><span class="line">      //ä¿å­˜ç‰©æµä¿¡æ¯</span><br><span class="line">      progressInfo: []</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    ......</span><br><span class="line">    async showProgress() &#123;</span><br><span class="line">      //å‘é€è¯·æ±‚è·å–ç‰©æµæ•°æ®</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;/kuaidi/804909574412544580&#x27;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;è·å–ç‰©æµè¿›åº¦å¤±è´¥!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.progressInfo = res.data</span><br><span class="line">      //æ˜¾ç¤ºå¯¹è¯æ¡†</span><br><span class="line">      this.progressVisible = true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="F-æ¨é€ä»£ç "><a href="#F-æ¨é€ä»£ç " class="headerlink" title="F.æ¨é€ä»£ç "></a>F.æ¨é€ä»£ç </h4><p>å°†orderåˆ†æ”¯ä»£ç æ¨é€è‡³ç äº‘<br>å°†ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼š  git add .<br>å°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š git commit -m â€œå®Œæˆè®¢å•åˆ—è¡¨åŠŸèƒ½å¼€å‘â€<br>å°†ä»£ç æ¨é€åˆ°ç äº‘ï¼š  git push<br>åˆ‡æ¢åˆ°masterä¸»åˆ†æ”¯ï¼š git checkout master<br>å°†goods_liståˆ†æ”¯ä»£ç åˆå¹¶åˆ°master: git merge order<br>å°†masteræ¨é€åˆ°ç äº‘ï¼š  git push</p>
<h3 id="3-æ•°æ®ç»Ÿè®¡"><a href="#3-æ•°æ®ç»Ÿè®¡" class="headerlink" title="3.æ•°æ®ç»Ÿè®¡"></a>3.æ•°æ®ç»Ÿè®¡</h3><h4 id="A-åˆ›å»ºå­åˆ†æ”¯"><a href="#A-åˆ›å»ºå­åˆ†æ”¯" class="headerlink" title="A.åˆ›å»ºå­åˆ†æ”¯"></a>A.åˆ›å»ºå­åˆ†æ”¯</h4><p>åˆ›å»ºreportå­åˆ†æ”¯å¹¶æ¨é€åˆ°ç äº‘<br>åˆ›å»ºreportå­åˆ†æ”¯: git checkout -b report<br>å°†reportåˆ†æ”¯æ¨é€åˆ°ç äº‘ï¼š git push -u origin report</p>
<h4 id="B-åˆ›å»ºè·¯ç”±-1"><a href="#B-åˆ›å»ºè·¯ç”±-1" class="headerlink" title="B.åˆ›å»ºè·¯ç”±"></a>B.åˆ›å»ºè·¯ç”±</h4><p>åˆ›å»ºæ•°æ®ç»Ÿè®¡è·¯ç”±ç»„ä»¶å¹¶æ·»åŠ è·¯ç”±è§„åˆ™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åœ¨componentsä¸­æ–°å»ºreportæ–‡ä»¶å¤¹ï¼Œæ–°å»ºReport.vueç»„ä»¶ï¼Œç»„ä»¶ä¸­æ·»åŠ ä»£ç å¦‚ä¸‹</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;æ•°æ®æŠ¥è¡¨&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;æ•°æ®ç»Ÿè®¡&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;æ•°æ®æŠ¥è¡¨&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;&lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,created()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,methods:&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€router.jsï¼Œå¯¼å…¥Report.vueå¹¶è®¾ç½®è·¯ç”±è§„åˆ™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Report from &#x27;./components/report/Report.vue&#x27;</span><br><span class="line">path: &#x27;/home&#x27;, component: Home, redirect: &#x27;/welcome&#x27;, children: [</span><br><span class="line">  &#123; path: &quot;/welcome&quot;, component: Welcome &#125;,</span><br><span class="line">  &#123; path: &quot;/users&quot;, component: Users &#125;,</span><br><span class="line">  &#123; path: &quot;/rights&quot;, component: Rights &#125;,</span><br><span class="line">  &#123; path: &quot;/roles&quot;, component: Roles  &#125;,</span><br><span class="line">  &#123; path: &quot;/categories&quot;, component: Cate  &#125;,</span><br><span class="line">  &#123; path: &quot;/params&quot;, component: Params  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods&quot;, component: GoodList  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods/add&quot;, component: GoodAdd  &#125;,</span><br><span class="line">  &#123; path: &quot;/orders&quot;, component: Order  &#125;,</span><br><span class="line">  &#123; path: &quot;/reports&quot;, component: Report  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-å¯¼å…¥EChartså¹¶ä½¿ç”¨"><a href="#C-å¯¼å…¥EChartså¹¶ä½¿ç”¨" class="headerlink" title="C.å¯¼å…¥EChartså¹¶ä½¿ç”¨"></a>C.å¯¼å…¥EChartså¹¶ä½¿ç”¨</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;æ•°æ®æŠ¥è¡¨&lt;/h3&gt;</span><br><span class="line">        &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;æ•°æ®ç»Ÿè®¡&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;æ•°æ®æŠ¥è¡¨&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- å¡ç‰‡è§†å›¾åŒºåŸŸ --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;div id=&quot;main&quot; style=&quot;width:750px;height:400px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">//å¯¼å…¥echarts</span><br><span class="line">import echarts from &#x27;echarts&#x27;</span><br><span class="line">//å¯¼å…¥lodash</span><br><span class="line">import _ from &#x27;lodash&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //éœ€è¦è·Ÿè¯·æ±‚çš„æŠ˜çº¿å›¾æ•°æ®åˆå¹¶çš„options</span><br><span class="line">      options: &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">          text: &#x27;ç”¨æˆ·æ¥æº&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          trigger: &#x27;axis&#x27;,</span><br><span class="line">          axisPointer: &#123;</span><br><span class="line">            type: &#x27;cross&#x27;,</span><br><span class="line">            label: &#123;</span><br><span class="line">              backgroundColor: &#x27;#E9EEF3&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        grid: &#123;</span><br><span class="line">          left: &#x27;3%&#x27;,</span><br><span class="line">          right: &#x27;4%&#x27;,</span><br><span class="line">          bottom: &#x27;3%&#x27;,</span><br><span class="line">          containLabel: true</span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            boundaryGap: false</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        yAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            type: &#x27;value&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">  async mounted() &#123;</span><br><span class="line">    //åœ¨é¡µé¢domå…ƒç´ åŠ è½½å®Œæ¯•ä¹‹åæ‰§è¡Œçš„é’©å­å‡½æ•°mounted</span><br><span class="line">    // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹</span><br><span class="line">    var myChart = echarts.init(document.getElementById(&#x27;main&#x27;))</span><br><span class="line">    //å‡†å¤‡æ•°æ®å’Œé…ç½®é¡¹</span><br><span class="line">    //å‘é€è¯·æ±‚è·å–æŠ˜çº¿å›¾æ•°æ®</span><br><span class="line">    const &#123; data: res &#125; = await this.$http.get(&#x27;reports/type/1&#x27;)</span><br><span class="line"></span><br><span class="line">    if (res.meta.status !== 200) &#123;</span><br><span class="line">      return this.$message.error(&#x27;è·å–æŠ˜çº¿å›¾æ•°æ®å¤±è´¥&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //åˆå¹¶res.dataå’Œthis.options</span><br><span class="line">    const result = _.merge(res.data,this.options)</span><br><span class="line"></span><br><span class="line">    // ä½¿ç”¨è·å–çš„æ•°æ®å±•ç¤ºå›¾è¡¨</span><br><span class="line">    myChart.setOption(result)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-æ¨é€ä»£ç -1"><a href="#D-æ¨é€ä»£ç -1" class="headerlink" title="D.æ¨é€ä»£ç "></a>D.æ¨é€ä»£ç </h4><p>æ¨é€reportåˆ†æ”¯åˆ°ç äº‘<br>å°†ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼š  git add .<br>å°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š git commit -m â€œå®Œæˆæ•°æ®æŠ¥è¡¨åŠŸèƒ½å¼€å‘â€<br>å°†ä»£ç æ¨é€åˆ°ç äº‘ï¼š  git push<br>åˆ‡æ¢åˆ°masterä¸»åˆ†æ”¯ï¼š git checkout master<br>å°†reportåˆ†æ”¯ä»£ç åˆå¹¶åˆ°master: git merge report<br>å°†masteræ¨é€åˆ°ç äº‘ï¼š  git push</p>
<h2 id="ä¸ƒã€ä»Šæ—¥ç›®æ ‡"><a href="#ä¸ƒã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="ä¸ƒã€ä»Šæ—¥ç›®æ ‡"></a>ä¸ƒã€ä»Šæ—¥ç›®æ ‡</h2><p>1.å®Œæˆé¡¹ç›®ä¼˜åŒ–<br>2.å®Œæˆé¡¹ç›®ä¸Šçº¿</p>
<h3 id="1-é¡¹ç›®ä¼˜åŒ–"><a href="#1-é¡¹ç›®ä¼˜åŒ–" class="headerlink" title="1.é¡¹ç›®ä¼˜åŒ–"></a>1.é¡¹ç›®ä¼˜åŒ–</h3><p>å®ç°æ­¥éª¤ï¼š<br>A.ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Šï¼Œæ ¹æ®æŠ¥å‘Šä¼˜åŒ–é¡¹ç›®<br>B.ç¬¬ä¸‰æ–¹åº“å¯ç”¨CDN<br>C.Element-UIç»„ä»¶æŒ‰éœ€åŠ è½½<br>D.è·¯ç”±æ‡’åŠ è½½<br>E.é¦–é¡µå†…å®¹å®šåˆ¶</p>
<h3 id="2-æ·»åŠ è¿›åº¦æ¡"><a href="#2-æ·»åŠ è¿›åº¦æ¡" class="headerlink" title="2.æ·»åŠ è¿›åº¦æ¡"></a>2.æ·»åŠ è¿›åº¦æ¡</h3><p>ç»™é¡¹ç›®æ·»åŠ è¿›åº¦æ¡æ•ˆæœï¼Œå…ˆæ‰“å¼€é¡¹ç›®æ§åˆ¶å°ï¼Œæ‰“å¼€ä¾èµ–ï¼Œå®‰è£…nprogress<br>æ‰“å¼€main.jsï¼Œç¼–å†™å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å¯¼å…¥è¿›åº¦æ¡æ’ä»¶</span><br><span class="line">import NProgress from &#x27;nprogress&#x27;</span><br><span class="line">//å¯¼å…¥è¿›åº¦æ¡æ ·å¼</span><br><span class="line">import &#x27;nprogress/nprogress.css&#x27;</span><br><span class="line">.....</span><br><span class="line">//è¯·æ±‚åœ¨åˆ°è¾¾æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆä¼šè°ƒç”¨useä¸­çš„è¿™ä¸ªå›è°ƒå‡½æ•°æ¥æ·»åŠ è¯·æ±‚å¤´ä¿¡æ¯</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  //å½“è¿›å…¥requestæ‹¦æˆªå™¨ï¼Œè¡¨ç¤ºå‘é€äº†è¯·æ±‚ï¼Œæˆ‘ä»¬å°±å¼€å¯è¿›åº¦æ¡</span><br><span class="line">  NProgress.start()</span><br><span class="line">  //ä¸ºè¯·æ±‚å¤´å¯¹è±¡ï¼Œæ·»åŠ tokenéªŒè¯çš„Authorizationå­—æ®µ</span><br><span class="line">  config.headers.Authorization = window.sessionStorage.getItem(&quot;token&quot;)</span><br><span class="line">  //å¿…é¡»è¿”å›config</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">//åœ¨responseæ‹¦æˆªå™¨ä¸­ï¼Œéšè—è¿›åº¦æ¡</span><br><span class="line">axios.interceptors.response.use(config =&gt;&#123;</span><br><span class="line">  //å½“è¿›å…¥responseæ‹¦æˆªå™¨ï¼Œè¡¨ç¤ºè¯·æ±‚å·²ç»ç»“æŸï¼Œæˆ‘ä»¬å°±ç»“æŸè¿›åº¦æ¡</span><br><span class="line">  NProgress.done()</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-æ ¹æ®æŠ¥é”™ä¿®æ”¹ä»£ç "><a href="#3-æ ¹æ®æŠ¥é”™ä¿®æ”¹ä»£ç " class="headerlink" title="3.æ ¹æ®æŠ¥é”™ä¿®æ”¹ä»£ç "></a>3.æ ¹æ®æŠ¥é”™ä¿®æ”¹ä»£ç </h3><p>æ ¹æ®ESLintçš„è­¦å‘Šæç¤ºæ›´æ”¹å¯¹åº”çš„ä»£ç <br>åœ¨.prettierrcæ–‡ä»¶ä¸­æ›´æ”¹è®¾ç½®â€printWidthâ€:200,  å°†æ¯è¡Œä»£ç çš„æ–‡å­—æ•°é‡æ›´æ”¹ä¸º200</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;semi&quot;:false,</span><br><span class="line">    &quot;singleQuote&quot;:true,</span><br><span class="line">    &quot;printWidth&quot;:200</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-æ‰§è¡Œbuild"><a href="#4-æ‰§è¡Œbuild" class="headerlink" title="4.æ‰§è¡Œbuild"></a>4.æ‰§è¡Œbuild</h3><p>å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼ˆbabel-plugin-transform-remove-consoleï¼‰åœ¨é¡¹ç›®buildé˜¶æ®µç§»é™¤æ‰€æœ‰çš„consoleä¿¡æ¯<br>æ‰“å¼€é¡¹ç›®æ§åˆ¶å°ï¼Œç‚¹å‡»ä¾èµ–-&gt;å¼€å‘ä¾èµ–ï¼Œè¾“å…¥babel-plugin-transform-remove-consoleï¼Œå®‰è£…<br>æ‰“å¼€babel.config.jsï¼Œç¼–è¾‘ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//é¡¹ç›®å‘å¸ƒé˜¶æ®µéœ€è¦ç”¨åˆ°çš„babelæ’ä»¶</span><br><span class="line">const productPlugins = []</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­æ˜¯å¼€å‘è¿˜æ˜¯å‘å¸ƒé˜¶æ®µ</span><br><span class="line">if(process.env.NODE_ENV === &#x27;production&#x27;)&#123;</span><br><span class="line">  //å‘å¸ƒé˜¶æ®µ</span><br><span class="line">  productPlugins.push(&quot;transform-remove-console&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;@vue/app&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;component&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;libraryName&quot;: &quot;element-ui&quot;,</span><br><span class="line">        &quot;styleLibraryName&quot;: &quot;theme-chalk&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...productPlugins</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š"><a href="#5-ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š" class="headerlink" title="5.ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š"></a>5.ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š</h3><p>A.å‘½ä»¤è¡Œå½¢å¼ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š<br>vue-cli-service build â€“report<br>B.åœ¨vueæ§åˆ¶å°ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š<br>ç‚¹å‡»â€œä»»åŠ¡â€&#x3D;&gt;â€œbuildâ€&#x3D;&gt;â€œè¿è¡Œâ€<br>è¿è¡Œå®Œæ¯•ä¹‹åç‚¹å‡»å³ä¾§â€œåˆ†æâ€ï¼Œâ€œæ§åˆ¶å°â€é¢æ¿æŸ¥çœ‹æŠ¥å‘Š</p>
<h3 id="6-ä¿®æ”¹webpackçš„é»˜è®¤é…ç½®"><a href="#6-ä¿®æ”¹webpackçš„é»˜è®¤é…ç½®" class="headerlink" title="6.ä¿®æ”¹webpackçš„é»˜è®¤é…ç½®"></a>6.ä¿®æ”¹webpackçš„é»˜è®¤é…ç½®</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œvue-cli 3.0ç”Ÿæˆçš„é¡¹ç›®ï¼Œéšè—äº†webpacké…ç½®é¡¹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦é…ç½®webpack<br>éœ€è¦é€šè¿‡vue.config.jsæ¥é…ç½®ã€‚<br>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºvue.config.jsæ–‡ä»¶ï¼Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        //å‘å¸ƒæ¨¡å¼</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            //entryæ‰¾åˆ°é»˜è®¤çš„æ‰“åŒ…å…¥å£ï¼Œè°ƒç”¨clearåˆ™æ˜¯åˆ é™¤é»˜è®¤çš„æ‰“åŒ…å…¥å£</span><br><span class="line">            //addæ·»åŠ æ–°çš„æ‰“åŒ…å…¥å£</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-prod.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        //å¼€å‘æ¨¡å¼</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¥å……ï¼š<br>chainWebpackå¯ä»¥é€šè¿‡é“¾å¼ç¼–ç¨‹çš„å½¢å¼ï¼Œä¿®æ”¹webpacké…ç½®<br>configureWebpackå¯ä»¥é€šè¿‡æ“ä½œå¯¹è±¡çš„å½¢å¼ï¼Œä¿®æ”¹webpacké…ç½®</p>
<h3 id="7-åŠ è½½å¤–éƒ¨CDN"><a href="#7-åŠ è½½å¤–éƒ¨CDN" class="headerlink" title="7.åŠ è½½å¤–éƒ¨CDN"></a>7.åŠ è½½å¤–éƒ¨CDN</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¾èµ–é¡¹çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åŒ…éƒ½ä¼šè¢«æ‰“åŒ…åˆ°js&#x2F;chunk-vendors.<strong><strong><strong>.jsæ–‡ä»¶ä¸­ï¼Œå¯¼è‡´è¯¥jsæ–‡ä»¶è¿‡å¤§<br>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡externalsæ’é™¤è¿™äº›åŒ…ï¼Œä½¿å®ƒä»¬ä¸è¢«æ‰“åŒ…åˆ°js&#x2F;chunk-vendors.</strong></strong></strong>.jsæ–‡ä»¶ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        //å‘å¸ƒæ¨¡å¼</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            //entryæ‰¾åˆ°é»˜è®¤çš„æ‰“åŒ…å…¥å£ï¼Œè°ƒç”¨clearåˆ™æ˜¯åˆ é™¤é»˜è®¤çš„æ‰“åŒ…å…¥å£</span><br><span class="line">            //addæ·»åŠ æ–°çš„æ‰“åŒ…å…¥å£</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-prod.js&#x27;)</span><br><span class="line"></span><br><span class="line">            //ä½¿ç”¨externalsè®¾ç½®æ’é™¤é¡¹</span><br><span class="line">            config.set(&#x27;externals&#x27;,&#123;</span><br><span class="line">                vue:&#x27;Vue&#x27;,</span><br><span class="line">                &#x27;vue-router&#x27;:&#x27;VueRouter&#x27;,</span><br><span class="line">                axios:&#x27;axios&#x27;,</span><br><span class="line">                lodash:&#x27;_&#x27;,</span><br><span class="line">                echarts:&#x27;echarts&#x27;,</span><br><span class="line">                nprogress:&#x27;NProgress&#x27;,</span><br><span class="line">                &#x27;vue-quill-editor&#x27;:&#x27;VueQuillEditor&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        //å¼€å‘æ¨¡å¼</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å¥½æ’é™¤ä¹‹åï¼Œä¸ºäº†ä½¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨vueï¼Œaxiosç­‰å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½å¤–éƒ¨CDNçš„å½¢å¼è§£å†³å¼•å…¥ä¾èµ–é¡¹ã€‚<br>æ‰“å¼€å¼€å‘å…¥å£æ–‡ä»¶main-prod.js,åˆ é™¤æ‰é»˜è®¤çš„å¼•å…¥ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">// import &#x27;./plugins/element.js&#x27;</span><br><span class="line">//å¯¼å…¥å­—ä½“å›¾æ ‡</span><br><span class="line">import &#x27;./assets/fonts/iconfont.css&#x27;</span><br><span class="line">//å¯¼å…¥å…¨å±€æ ·å¼</span><br><span class="line">import &#x27;./assets/css/global.css&#x27;</span><br><span class="line">//å¯¼å…¥ç¬¬ä¸‰æ–¹ç»„ä»¶vue-table-with-tree-grid</span><br><span class="line">import TreeTable from &#x27;vue-table-with-tree-grid&#x27;</span><br><span class="line">//å¯¼å…¥è¿›åº¦æ¡æ’ä»¶</span><br><span class="line">import NProgress from &#x27;nprogress&#x27;</span><br><span class="line">//å¯¼å…¥è¿›åº¦æ¡æ ·å¼</span><br><span class="line">// import &#x27;nprogress/nprogress.css&#x27;</span><br><span class="line">// //å¯¼å…¥axios</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">// //å¯¼å…¥vue-quill-editorï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</span><br><span class="line">import VueQuillEditor from &#x27;vue-quill-editor&#x27;</span><br><span class="line">// //å¯¼å…¥vue-quill-editorçš„æ ·å¼</span><br><span class="line">// import &#x27;quill/dist/quill.core.css&#x27;</span><br><span class="line">// import &#x27;quill/dist/quill.snow.css&#x27;</span><br><span class="line">// import &#x27;quill/dist/quill.bubble.css&#x27;</span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL = &#x27;http://127.0.0.1:8888/api/private/v1/&#x27;</span><br><span class="line">//è¯·æ±‚åœ¨åˆ°è¾¾æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆä¼šè°ƒç”¨useä¸­çš„è¿™ä¸ªå›è°ƒå‡½æ•°æ¥æ·»åŠ è¯·æ±‚å¤´ä¿¡æ¯</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  //å½“è¿›å…¥requestæ‹¦æˆªå™¨ï¼Œè¡¨ç¤ºå‘é€äº†è¯·æ±‚ï¼Œæˆ‘ä»¬å°±å¼€å¯è¿›åº¦æ¡</span><br><span class="line">  NProgress.start()</span><br><span class="line">  //ä¸ºè¯·æ±‚å¤´å¯¹è±¡ï¼Œæ·»åŠ tokenéªŒè¯çš„Authorizationå­—æ®µ</span><br><span class="line">  config.headers.Authorization = window.sessionStorage.getItem(&quot;token&quot;)</span><br><span class="line">  //å¿…é¡»è¿”å›config</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">//åœ¨responseæ‹¦æˆªå™¨ä¸­ï¼Œéšè—è¿›åº¦æ¡</span><br><span class="line">axios.interceptors.response.use(config =&gt;&#123;</span><br><span class="line">  //å½“è¿›å…¥responseæ‹¦æˆªå™¨ï¼Œè¡¨ç¤ºè¯·æ±‚å·²ç»ç»“æŸï¼Œæˆ‘ä»¬å°±ç»“æŸè¿›åº¦æ¡</span><br><span class="line">  NProgress.done()</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">Vue.prototype.$http = axios</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">//å…¨å±€æ³¨å†Œç»„ä»¶</span><br><span class="line">Vue.component(&#x27;tree-table&#x27;, TreeTable)</span><br><span class="line">//å…¨å±€æ³¨å†Œå¯Œæ–‡æœ¬ç»„ä»¶</span><br><span class="line">Vue.use(VueQuillEditor)</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºè¿‡æ»¤å™¨å°†ç§’æ•°è¿‡æ»¤ä¸ºå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’</span><br><span class="line">Vue.filter(&#x27;dateFormat&#x27;,function(originVal)&#123;</span><br><span class="line">  const dt = new Date(originVal)</span><br><span class="line">  const y = dt.getFullYear()</span><br><span class="line">  const m = (dt.getMonth()+1+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const d = (dt.getDate()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line"></span><br><span class="line">  const hh = (dt.getHours()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const mm = (dt.getMinutes()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const ss = (dt.getSeconds()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line"></span><br><span class="line">  return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€public&#x2F;index.htmlæ·»åŠ å¤–éƒ¨cdnå¼•å…¥ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</span><br><span class="line">    &lt;title&gt;ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- nprogress çš„æ ·å¼è¡¨æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot; /&gt;</span><br><span class="line">    &lt;!-- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ çš„æ ·å¼è¡¨æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.core.min.css&quot; /&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.snow.min.css&quot; /&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.bubble.min.css&quot; /&gt;</span><br><span class="line">    &lt;!-- element-ui çš„æ ·å¼è¡¨æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/element-ui/2.8.2/theme-chalk/index.css&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/vue/2.5.22/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/axios/0.18.0/axios.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/lodash.js/4.17.11/lodash.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/echarts/4.1.0/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„ js æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue-quill-editor@3.0.4/dist/vue-quill-editor.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- element-ui çš„ js æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/element-ui/2.8.2/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;noscript&gt;</span><br><span class="line">      &lt;strong&gt;We&#x27;re sorry but vue_shop doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;</span><br><span class="line">    &lt;/noscript&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- built files will be auto injected --&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8-å®šåˆ¶é¦–é¡µå†…å®¹"><a href="#8-å®šåˆ¶é¦–é¡µå†…å®¹" class="headerlink" title="8.å®šåˆ¶é¦–é¡µå†…å®¹"></a>8.å®šåˆ¶é¦–é¡µå†…å®¹</h3><p>å¼€å‘ç¯å¢ƒçš„é¦–é¡µå’Œå‘å¸ƒç¯å¢ƒçš„é¦–é¡µå±•ç¤ºå†…å®¹çš„å½¢å¼æœ‰æ‰€ä¸åŒ<br>å¦‚å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨çš„æ˜¯importåŠ è½½ç¬¬ä¸‰æ–¹åŒ…ï¼Œè€Œå‘å¸ƒç¯å¢ƒåˆ™æ˜¯ä½¿ç”¨CDNï¼Œé‚£ä¹ˆé¦–é¡µä¹Ÿéœ€æ ¹æ®ç¯å¢ƒä¸åŒæ¥è¿›è¡Œä¸åŒçš„å®ç°<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶çš„æ–¹å¼æ¥å®šåˆ¶é¦–é¡µå†…å®¹ï¼Œæ‰“å¼€vue.config.jsï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            ......</span><br><span class="line">            </span><br><span class="line">            //ä½¿ç”¨æ’ä»¶</span><br><span class="line">            config.plugin(&#x27;html&#x27;).tap(args=&gt;&#123;</span><br><span class="line">                //æ·»åŠ å‚æ•°isProd</span><br><span class="line">                args[0].isProd = true</span><br><span class="line">                return args</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line"></span><br><span class="line">            //ä½¿ç”¨æ’ä»¶</span><br><span class="line">            config.plugin(&#x27;html&#x27;).tap(args=&gt;&#123;</span><br><span class="line">                //æ·»åŠ å‚æ•°isProd</span><br><span class="line">                args[0].isProd = false</span><br><span class="line">                return args</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨public&#x2F;index.htmlä¸­ä½¿ç”¨æ’ä»¶åˆ¤æ–­æ˜¯å¦ä¸ºå‘å¸ƒç¯å¢ƒå¹¶å®šåˆ¶é¦–é¡µå†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</span><br><span class="line">    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.isProd ? &#x27;&#x27; : &#x27;dev - &#x27; %&gt;ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;% if(htmlWebpackPlugin.options.isProd)&#123; %&gt;</span><br><span class="line">    &lt;!-- nprogress çš„æ ·å¼è¡¨æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot; /&gt;</span><br><span class="line">    ........</span><br><span class="line">    &lt;!-- element-ui çš„ js æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/element-ui/2.8.2/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  .......</span><br></pre></td></tr></table></figure>

<h3 id="9-è·¯ç”±æ‡’åŠ è½½"><a href="#9-è·¯ç”±æ‡’åŠ è½½" class="headerlink" title="9.è·¯ç”±æ‡’åŠ è½½"></a>9.è·¯ç”±æ‡’åŠ è½½</h3><p>å½“è·¯ç”±è¢«è®¿é—®æ—¶æ‰åŠ è½½å¯¹åº”çš„è·¯ç”±æ–‡ä»¶ï¼Œå°±æ˜¯è·¯ç”±æ‡’åŠ è½½ã€‚<br>è·¯ç”±æ‡’åŠ è½½å®ç°æ­¥éª¤ï¼š<br>1.å®‰è£… @babel&#x2F;plugin-syntax-dynamic-import<br>æ‰“å¼€vueæ§åˆ¶å°ï¼Œç‚¹å‡»ä¾èµ–-&gt;å®‰è£…ä¾èµ–-&gt;å¼€å‘ä¾èµ–-&gt;æœç´¢@babel&#x2F;plugin-syntax-dynamic-import<br>ç‚¹å‡»å®‰è£…ã€‚</p>
<p>2.åœ¨babel.config.jsä¸­å£°æ˜è¯¥æ’ä»¶ï¼Œæ‰“å¼€babel.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//é¡¹ç›®å‘å¸ƒé˜¶æ®µéœ€è¦ç”¨åˆ°çš„babelæ’ä»¶</span><br><span class="line">const productPlugins = []</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­æ˜¯å¼€å‘è¿˜æ˜¯å‘å¸ƒé˜¶æ®µ</span><br><span class="line">if(process.env.NODE_ENV === &#x27;production&#x27;)&#123;</span><br><span class="line">  //å‘å¸ƒé˜¶æ®µ</span><br><span class="line">  productPlugins.push(&quot;transform-remove-console&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;@vue/app&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;component&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;libraryName&quot;: &quot;element-ui&quot;,</span><br><span class="line">        &quot;styleLibraryName&quot;: &quot;theme-chalk&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...productPlugins,</span><br><span class="line">    //é…ç½®è·¯ç”±æ‡’åŠ è½½æ’ä»¶</span><br><span class="line">    &quot;@babel/plugin-syntax-dynamic-import&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.å°†è·¯ç”±æ›´æ”¹ä¸ºæŒ‰éœ€åŠ è½½çš„å½¢å¼ï¼Œæ‰“å¼€router.jsï¼Œæ›´æ”¹å¼•å…¥ç»„ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Router from &#x27;vue-router&#x27;</span><br><span class="line">const Login = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Login.vue&#x27;)</span><br><span class="line">// import Login from &#x27;./components/Login.vue&#x27;</span><br><span class="line">const Home = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Home.vue&#x27;)</span><br><span class="line">// import Home from &#x27;./components/Home.vue&#x27;</span><br><span class="line">const Welcome = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Welcome.vue&#x27;)</span><br><span class="line">// import Welcome from &#x27;./components/Welcome.vue&#x27;</span><br><span class="line">const Users = () =&gt; import(/* webpackChunkName:&quot;user&quot; */ &#x27;./components/user/Users.vue&#x27;)</span><br><span class="line">// import Users from &#x27;./components/user/Users.vue&#x27;</span><br><span class="line">const Rights = () =&gt; import(/* webpackChunkName:&quot;power&quot; */ &#x27;./components/power/Rights.vue&#x27;)</span><br><span class="line">// import Rights from &#x27;./components/power/Rights.vue&#x27;</span><br><span class="line">const Roles = () =&gt; import(/* webpackChunkName:&quot;power&quot; */ &#x27;./components/power/Roles.vue&#x27;)</span><br><span class="line">// import Roles from &#x27;./components/power/Roles.vue&#x27;</span><br><span class="line">const Cate = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Cate.vue&#x27;)</span><br><span class="line">// import Cate from &#x27;./components/goods/Cate.vue&#x27;</span><br><span class="line">const Params = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Params.vue&#x27;)</span><br><span class="line">// import Params from &#x27;./components/goods/Params.vue&#x27;</span><br><span class="line">const GoodList = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/List.vue&#x27;)</span><br><span class="line">// import GoodList from &#x27;./components/goods/List.vue&#x27;</span><br><span class="line">const GoodAdd = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Add.vue&#x27;)</span><br><span class="line">// import GoodAdd from &#x27;./components/goods/Add.vue&#x27;</span><br><span class="line">const Order = () =&gt; import(/* webpackChunkName:&quot;order&quot; */ &#x27;./components/order/Order.vue&#x27;)</span><br><span class="line">// import Order from &#x27;./components/order/Order.vue&#x27;</span><br><span class="line">const Report = () =&gt; import(/* webpackChunkName:&quot;report&quot; */ &#x27;./components/report/Report.vue&#x27;)</span><br><span class="line">// import Report from &#x27;./components/report/Report.vue&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="10-é¡¹ç›®ä¸Šçº¿"><a href="#10-é¡¹ç›®ä¸Šçº¿" class="headerlink" title="10.é¡¹ç›®ä¸Šçº¿"></a>10.é¡¹ç›®ä¸Šçº¿</h3><h4 id="A-é€šè¿‡nodeåˆ›å»ºæœåŠ¡å™¨"><a href="#A-é€šè¿‡nodeåˆ›å»ºæœåŠ¡å™¨" class="headerlink" title="A.é€šè¿‡nodeåˆ›å»ºæœåŠ¡å™¨"></a>A.é€šè¿‡nodeåˆ›å»ºæœåŠ¡å™¨</h4><p>åœ¨vue_shopåŒçº§åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹vue_shop_serverå­˜æ”¾nodeæœåŠ¡å™¨<br>ä½¿ç”¨ç»ˆç«¯æ‰“å¼€vue_shop_serveræ–‡ä»¶å¤¹ï¼Œè¾“å…¥å‘½ä»¤ npm init -y<br>åˆå§‹åŒ–åŒ…ä¹‹åï¼Œè¾“å…¥å‘½ä»¤ npm i express -S<br>æ‰“å¼€vue_shopç›®å½•ï¼Œå¤åˆ¶distæ–‡ä»¶å¤¹ï¼Œç²˜è´´åˆ°vue_shop_serverä¸­<br>åœ¨vue_shop_serveræ–‡ä»¶å¤¹ä¸­åˆ›å»ºapp.jsæ–‡ä»¶,ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">app.listen(8998,()=&gt;&#123;</span><br><span class="line">    console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†æ¬¡åœ¨ç»ˆç«¯ä¸­è¾“å…¥  node app.js</p>
<h4 id="B-å¼€å¯gzipå‹ç¼©"><a href="#B-å¼€å¯gzipå‹ç¼©" class="headerlink" title="B.å¼€å¯gzipå‹ç¼©"></a>B.å¼€å¯gzipå‹ç¼©</h4><p>æ‰“å¼€vue_shop_serveræ–‡ä»¶å¤¹çš„ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼šnpm i compression -D<br>æ‰“å¼€app.js,ç¼–å†™ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line"></span><br><span class="line">const compression = require(&#x27;compression&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">app.use(compression())</span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">app.listen(8998,()=&gt;&#123;</span><br><span class="line">    console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="C-é…ç½®httpsæœåŠ¡"><a href="#C-é…ç½®httpsæœåŠ¡" class="headerlink" title="C.é…ç½®httpsæœåŠ¡"></a>C.é…ç½®httpsæœåŠ¡</h4><p>é…ç½®httpsæœåŠ¡ä¸€èˆ¬æ˜¯åå°è¿›è¡Œå¤„ç†ï¼Œå‰ç«¯å¼€å‘äººå‘˜äº†è§£å³å¯ã€‚<br>é¦–å…ˆï¼Œéœ€è¦ç”³è¯·SSLè¯ä¹¦ï¼Œè¿›å…¥<a target="_blank" rel="noopener" href="https://freessl.cnå®˜ç½‘/">https://freessl.cnå®˜ç½‘</a><br>åœ¨åå°å¯¼å…¥è¯ä¹¦ï¼Œæ‰“å¼€ä»Šå¤©èµ„æ–™&#x2F;ç´ æï¼Œå¤åˆ¶ç´ æä¸­çš„ä¸¤ä¸ªæ–‡ä»¶åˆ°vue_shop_serverä¸­<br>æ‰“å¼€app.jsæ–‡ä»¶ï¼Œç¼–å†™ä»£ç å¯¼å…¥è¯ä¹¦ï¼Œå¹¶å¼€å¯httpsæœåŠ¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const compression = require(&#x27;compression&#x27;)</span><br><span class="line">const https = require(&#x27;https&#x27;)</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line">//åˆ›å»ºé…ç½®å¯¹è±¡è®¾ç½®å…¬é’¥å’Œç§é’¥</span><br><span class="line">const options = &#123;</span><br><span class="line">    cert:fs.readFileSync(&#x27;./full_chain.pem&#x27;),</span><br><span class="line">    key:fs.readFileSync(&#x27;./private.key&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.use(compression())</span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">// app.listen(8998,()=&gt;&#123;</span><br><span class="line">//     console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">//å¯åŠ¨httpsæœåŠ¡</span><br><span class="line">https.createServer(options,app).listen(443)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„è¯ä¹¦æœ‰é—®é¢˜ï¼Œæ‰€ä»¥æ— æ³•æ­£å¸¸ä½¿ç”¨httpsæœåŠ¡</p>
<h4 id="D-ä½¿ç”¨pm2ç®¡ç†åº”ç”¨"><a href="#D-ä½¿ç”¨pm2ç®¡ç†åº”ç”¨" class="headerlink" title="D.ä½¿ç”¨pm2ç®¡ç†åº”ç”¨"></a>D.ä½¿ç”¨pm2ç®¡ç†åº”ç”¨</h4><p>æ‰“å¼€vue_shop_serveræ–‡ä»¶å¤¹çš„ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼šnpm i pm2 -g<br>ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼špm2 start app.js â€“name è‡ªå®šä¹‰åç§°<br>æŸ¥çœ‹é¡¹ç›®åˆ—è¡¨å‘½ä»¤ï¼špm2 ls<br>é‡å¯é¡¹ç›®ï¼špm2 restart è‡ªå®šä¹‰åç§°<br>åœæ­¢é¡¹ç›®ï¼špm2 stop è‡ªå®šä¹‰åç§°<br>åˆ é™¤é¡¹ç›®ï¼špm2 delete è‡ªå®šä¹‰åç§°</p>
<h2 id="å…«ã€ä»Šæ—¥ç›®æ ‡"><a href="#å…«ã€ä»Šæ—¥ç›®æ ‡" class="headerlink" title="å…«ã€ä»Šæ—¥ç›®æ ‡"></a>å…«ã€ä»Šæ—¥ç›®æ ‡</h2><p>1.Vuexæ¦‚è¿°</p>
<p>2.VuexåŸºæœ¬ä½¿ç”¨</p>
<p>3.ä½¿ç”¨Vuexå®Œæˆtodoæ¡ˆä¾‹</p>
<h3 id="1-Vuexæ¦‚è¿°"><a href="#1-Vuexæ¦‚è¿°" class="headerlink" title="1.Vuexæ¦‚è¿°"></a>1.Vuexæ¦‚è¿°</h3><p>Vuexæ˜¯å®ç°ç»„ä»¶å…¨å±€çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«</p>
<p>ä½¿ç”¨Vuexç®¡ç†æ•°æ®çš„å¥½å¤„ï¼š<br>A.èƒ½å¤Ÿåœ¨vuexä¸­é›†ä¸­ç®¡ç†å…±äº«çš„æ•°æ®ï¼Œä¾¿äºå¼€å‘å’ŒåæœŸè¿›è¡Œç»´æŠ¤<br>B.èƒ½å¤Ÿé«˜æ•ˆçš„å®ç°ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ï¼Œæé«˜å¼€å‘æ•ˆç‡<br>C.å­˜å‚¨åœ¨vuexä¸­çš„æ•°æ®æ˜¯å“åº”å¼çš„ï¼Œå½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé¡µé¢ä¸­çš„æ•°æ®ä¹Ÿä¼šåŒæ­¥æ›´æ–°</p>
<h3 id="2-Vuexçš„åŸºæœ¬ä½¿ç”¨"><a href="#2-Vuexçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.Vuexçš„åŸºæœ¬ä½¿ç”¨"></a>2.Vuexçš„åŸºæœ¬ä½¿ç”¨</h3><p>åˆ›å»ºå¸¦æœ‰vuexçš„vueé¡¹ç›®ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼švue ui<br>å½“é¡¹ç›®ä»ªè¡¨ç›˜æ‰“å¼€ä¹‹åï¼Œæˆ‘ä»¬ç‚¹å‡»é¡µé¢å·¦ä¸Šè§’çš„é¡¹ç›®ç®¡ç†ä¸‹æ‹‰åˆ—è¡¨ï¼Œå†ç‚¹å‡»Vueé¡¹ç›®ç®¡ç†å™¨<br>ç‚¹å‡»åˆ›å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º<br>ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®é¡¹ç›®åç§°å’ŒåŒ…ç®¡ç†å™¨<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE01.png"><br>ç¬¬äºŒæ­¥ï¼Œè®¾ç½®æ‰‹åŠ¨é…ç½®é¡¹ç›®<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE02.png"><br>ç¬¬ä¸‰æ­¥ï¼Œè®¾ç½®åŠŸèƒ½é¡¹<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE03.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE04.png"><br>ç¬¬å››æ­¥ï¼Œåˆ›å»ºé¡¹ç›®<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/article/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE05.png"></p>
<h3 id="3-ä½¿ç”¨Vuexå®Œæˆè®¡æ•°å™¨æ¡ˆä¾‹"><a href="#3-ä½¿ç”¨Vuexå®Œæˆè®¡æ•°å™¨æ¡ˆä¾‹" class="headerlink" title="3.ä½¿ç”¨Vuexå®Œæˆè®¡æ•°å™¨æ¡ˆä¾‹"></a>3.ä½¿ç”¨Vuexå®Œæˆè®¡æ•°å™¨æ¡ˆä¾‹</h3><p>æ‰“å¼€åˆšåˆšåˆ›å»ºçš„vuexé¡¹ç›®ï¼Œæ‰¾åˆ°srcç›®å½•ä¸­çš„App.vueç»„ä»¶ï¼Œå°†ä»£ç é‡æ–°ç¼–å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;my-addition&gt;&lt;/my-addition&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;----------------------------------------&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;my-subtraction&gt;&lt;/my-subtraction&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Addition from &#x27;./components/Addition.vue&#x27;</span><br><span class="line">import Subtraction from &#x27;./components/Subtraction.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    &#x27;my-subtraction&#x27;: Subtraction,</span><br><span class="line">    &#x27;my-addition&#x27;: Addition</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨componentsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºAddition.vueç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;å½“å‰æœ€æ–°çš„countå€¼ä¸ºï¼š&lt;/h3&gt;</span><br><span class="line">        &lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨componentsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºSubtraction.vueç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;å½“å‰æœ€æ–°çš„countå€¼ä¸ºï¼š&lt;/h3&gt;</span><br><span class="line">        &lt;button&gt;-1&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>æœ€ååœ¨é¡¹ç›®æ ¹ç›®å½•(ä¸srcå¹³çº§)ä¸­åˆ›å»º .prettierrc æ–‡ä»¶ï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;semi&quot;:false,</span><br><span class="line">    &quot;singleQuote&quot;:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-Vuexä¸­çš„æ ¸å¿ƒç‰¹æ€§"><a href="#4-Vuexä¸­çš„æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="4.Vuexä¸­çš„æ ¸å¿ƒç‰¹æ€§"></a>4.Vuexä¸­çš„æ ¸å¿ƒç‰¹æ€§</h3><h4 id="A-State"><a href="#A-State" class="headerlink" title="A.State"></a>A.State</h4><p>â€‹    Stateæä¾›å”¯ä¸€çš„å…¬å…±æ•°æ®æºï¼Œæ‰€æœ‰å…±äº«çš„æ•°æ®éƒ½è¦ç»Ÿä¸€æ”¾åˆ°Storeä¸­çš„Stateä¸­å­˜å‚¨<br>â€‹    ä¾‹å¦‚ï¼Œæ‰“å¼€é¡¹ç›®ä¸­çš„store.jsæ–‡ä»¶ï¼Œåœ¨Stateå¯¹è±¡ä¸­å¯ä»¥æ·»åŠ æˆ‘ä»¬è¦å…±äº«çš„æ•°æ®ï¼Œå¦‚ï¼šcount:0<br>â€‹    </p>
<pre><code>åœ¨ç»„ä»¶ä¸­è®¿é—®Stateçš„æ–¹å¼ï¼š
1).this.$store.state.å…¨å±€æ•°æ®åç§°  å¦‚ï¼šthis.$store.state.count
2).å…ˆæŒ‰éœ€å¯¼å…¥mapStateå‡½æ•°ï¼š import &#123; mapState &#125; from &#39;vuex&#39;
ç„¶åæ•°æ®æ˜ å°„ä¸ºè®¡ç®—å±æ€§ï¼š computed:&#123; ...mapState([&#39;å…¨å±€æ•°æ®åç§°&#39;]) &#125;
</code></pre>
<h4 id="B-Mutation"><a href="#B-Mutation" class="headerlink" title="B.Mutation"></a>B.Mutation</h4><p>Mutationç”¨äºä¿®æ”¹å˜æ›´$storeä¸­çš„æ•°æ®<br>ä½¿ç”¨æ–¹å¼ï¼š<br>æ‰“å¼€store.jsæ–‡ä»¶ï¼Œåœ¨mutationsä¸­æ·»åŠ ä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">    add(state,step)&#123;</span><br><span class="line">      //ç¬¬ä¸€ä¸ªå½¢å‚æ°¸è¿œéƒ½æ˜¯stateä¹Ÿå°±æ˜¯$stateå¯¹è±¡</span><br><span class="line">      //ç¬¬äºŒä¸ªå½¢å‚æ˜¯è°ƒç”¨addæ—¶ä¼ é€’çš„å‚æ•°</span><br><span class="line">      state.count+=step;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨Addition.vueä¸­ç»™æŒ‰é’®æ·»åŠ äº‹ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;Add&quot;&gt;+1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">  Add()&#123;</span><br><span class="line">    //ä½¿ç”¨commitå‡½æ•°è°ƒç”¨mutationsä¸­çš„å¯¹åº”å‡½æ•°ï¼Œ</span><br><span class="line">    //ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬è¦è°ƒç”¨çš„mutationsä¸­çš„å‡½æ•°å</span><br><span class="line">    //ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¼ é€’ç»™addå‡½æ•°çš„å‚æ•°</span><br><span class="line">    this.$store.commit(&#x27;add&#x27;,10)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨mutationsçš„ç¬¬äºŒç§æ–¹å¼ï¼š<br>import { mapMutations } from â€˜vuexâ€™</p>
<p>methods:{<br>  â€¦mapMutations([â€˜addâ€™])<br>}<br>å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapState,mapMutations &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">      //è·å¾—mapMutationsæ˜ å°„çš„subå‡½æ•°</span><br><span class="line">      ...mapMutations([&#x27;sub&#x27;]),</span><br><span class="line">      //å½“ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘Subå‡½æ•°</span><br><span class="line">      Sub()&#123;</span><br><span class="line">          //è°ƒç”¨subå‡½æ•°å®Œæˆå¯¹æ•°æ®çš„æ“ä½œ</span><br><span class="line">          this.sub(10);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">      ...mapState([&#x27;count&#x27;])</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="C-Action"><a href="#C-Action" class="headerlink" title="C.Action"></a>C.Action</h4><p>åœ¨mutationsä¸­ä¸èƒ½ç¼–å†™å¼‚æ­¥çš„ä»£ç ï¼Œä¼šå¯¼è‡´vueè°ƒè¯•å™¨çš„æ˜¾ç¤ºå‡ºé”™ã€‚<br>åœ¨vuexä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Actionæ¥æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚<br>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š<br>æ‰“å¼€store.jsæ–‡ä»¶ï¼Œä¿®æ”¹Actionï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  addAsync(context,step)&#123;</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">      context.commit(&#x27;add&#x27;,step);</span><br><span class="line">    &#125;,2000)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨Addition.vueä¸­ç»™æŒ‰é’®æ·»åŠ äº‹ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;AddAsync&quot;&gt;...+1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">  AddAsync()&#123;</span><br><span class="line">    this.$store.dispatch(&#x27;addAsync&#x27;,5)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼ï¼š<br>import { mapActions } from â€˜vuexâ€™</p>
<p>methods:{<br>  â€¦mapMutations([â€˜subAsyncâ€™])<br>}<br>å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapState,mapMutations,mapActions &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">      //è·å¾—mapMutationsæ˜ å°„çš„subå‡½æ•°</span><br><span class="line">      ...mapMutations([&#x27;sub&#x27;]),</span><br><span class="line">      //å½“ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘Subå‡½æ•°</span><br><span class="line">      Sub()&#123;</span><br><span class="line">          //è°ƒç”¨subå‡½æ•°å®Œæˆå¯¹æ•°æ®çš„æ“ä½œ</span><br><span class="line">          this.sub(10);</span><br><span class="line">      &#125;,</span><br><span class="line">      //è·å¾—mapActionsæ˜ å°„çš„addAsyncå‡½æ•°</span><br><span class="line">      ...mapActions([&#x27;subAsync&#x27;]),</span><br><span class="line">      asyncSub()&#123;</span><br><span class="line">          this.subAsync(5);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">      ...mapState([&#x27;count&#x27;])</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="D-Getter"><a href="#D-Getter" class="headerlink" title="D.Getter"></a>D.Getter</h4><p>Getterç”¨äºå¯¹Storeä¸­çš„æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†å½¢æˆæ–°çš„æ•°æ®<br>å®ƒåªä¼šåŒ…è£…Storeä¸­ä¿å­˜çš„æ•°æ®ï¼Œå¹¶ä¸ä¼šä¿®æ”¹Storeä¸­ä¿å­˜çš„æ•°æ®ï¼Œå½“Storeä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒGetterç”Ÿæˆçš„å†…å®¹ä¹Ÿä¼šéšä¹‹å˜åŒ–<br>æ‰“å¼€store.jsæ–‡ä»¶ï¼Œæ·»åŠ gettersï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  .......</span><br><span class="line">  getters:&#123;</span><br><span class="line">    //æ·»åŠ äº†ä¸€ä¸ªshowNumçš„å±æ€§</span><br><span class="line">    showNum : state =&gt;&#123;</span><br><span class="line">      return &#x27;æœ€æ–°çš„countå€¼ä¸ºï¼š&#x27;+state.count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€Addition.vueä¸­ï¼Œæ·»åŠ æ’å€¼è¡¨è¾¾å¼ä½¿ç”¨getters</p>
<h3></h3>

<p>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨Addition.vueä¸­ï¼Œå¯¼å…¥mapGettersï¼Œå¹¶å°†ä¹‹æ˜ å°„ä¸ºè®¡ç®—å±æ€§<br>import { mapGetters } from â€˜vuexâ€™<br>computed:{<br>  â€¦mapGetters([â€˜showNumâ€™])<br>}</p>
<h3 id="5-vuexæ¡ˆä¾‹"><a href="#5-vuexæ¡ˆä¾‹" class="headerlink" title="5.vuexæ¡ˆä¾‹"></a>5.vuexæ¡ˆä¾‹</h3><h4 id="A-åˆå§‹åŒ–æ¡ˆä¾‹"><a href="#A-åˆå§‹åŒ–æ¡ˆä¾‹" class="headerlink" title="A.åˆå§‹åŒ–æ¡ˆä¾‹"></a>A.åˆå§‹åŒ–æ¡ˆä¾‹</h4><p>é¦–å…ˆä½¿ç”¨vue uiåˆå§‹åŒ–ä¸€ä¸ªä½¿ç”¨vuexçš„æ¡ˆä¾‹<br>ç„¶åæ‰“å¼€publicæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªlist.jsonæ–‡ä»¶ï¼Œæ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 0,</span><br><span class="line">        &quot;info&quot;: &quot;Racing car sprays burning fuel into crowd.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;info&quot;: &quot;Japanese princess to wed commoner.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;info&quot;: &quot;Australian walks 100km after outback crash.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 3,</span><br><span class="line">        &quot;info&quot;: &quot;Man charged over missing wedding girl.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 4,</span><br><span class="line">        &quot;info&quot;: &quot;Los Angeles battles huge wildfires.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>å†æ¥ç€ï¼Œæ‰“å¼€main.js,æ·»åŠ store.jsçš„å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import store from &#x27;./store.js&#x27;</span><br><span class="line"></span><br><span class="line">// 1. å¯¼å…¥ ant-design-vue ç»„ä»¶åº“</span><br><span class="line">import Antd from &#x27;ant-design-vue&#x27;</span><br><span class="line">// 2. å¯¼å…¥ç»„ä»¶åº“çš„æ ·å¼è¡¨</span><br><span class="line">import &#x27;ant-design-vue/dist/antd.css&#x27;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line">// 3. å®‰è£…ç»„ä»¶åº“</span><br><span class="line">Vue.use(Antd)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  store,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>å†æ¥ç€æ‰“å¼€store.jsï¼Œæ·»åŠ axiosè¯·æ±‚jsonæ–‡ä»¶è·å–æ•°æ®çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    //æ‰€æœ‰ä»»åŠ¡åˆ—è¡¨</span><br><span class="line">    list: [],</span><br><span class="line">    //æ–‡æœ¬è¾“å…¥æ¡†ä¸­çš„å€¼</span><br><span class="line">    inputValue: &#x27;AAA&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    initList(state, list) &#123;</span><br><span class="line">      state.list = list</span><br><span class="line">    &#125;,</span><br><span class="line">    setInputValue(state,value)&#123;</span><br><span class="line">      state.inputValue = value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    getList(context) &#123;</span><br><span class="line">      axios.get(&#x27;/list.json&#x27;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        console.log(data);</span><br><span class="line">        context.commit(&#x27;initList&#x27;, data)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œä»£å¼€App.vueæ–‡ä»¶ï¼Œå°†storeä¸­çš„æ•°æ®è·å–å¹¶å±•ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;a-input placeholder=&quot;è¯·è¾“å…¥ä»»åŠ¡&quot; class=&quot;my_ipt&quot; :value=&quot;inputValue&quot; @change=&quot;handleInputChange&quot; /&gt;</span><br><span class="line">    &lt;a-button type=&quot;primary&quot;&gt;æ·»åŠ äº‹é¡¹&lt;/a-button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a-list bordered :dataSource=&quot;list&quot; class=&quot;dt_list&quot;&gt;</span><br><span class="line">      &lt;a-list-item slot=&quot;renderItem&quot; slot-scope=&quot;item&quot;&gt;</span><br><span class="line">        &lt;!-- å¤é€‰æ¡† --&gt;</span><br><span class="line">        &lt;a-checkbox :checked=&quot;item.done&quot;&gt;&#123;&#123;item.info&#125;&#125;&lt;/a-checkbox&gt;</span><br><span class="line">        &lt;!-- åˆ é™¤é“¾æ¥ --&gt;</span><br><span class="line">        &lt;a slot=&quot;actions&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">      &lt;/a-list-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- footeråŒºåŸŸ --&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;footer&quot;&gt;</span><br><span class="line">        &lt;!-- æœªå®Œæˆçš„ä»»åŠ¡ä¸ªæ•° --&gt;</span><br><span class="line">        &lt;span&gt;0æ¡å‰©ä½™&lt;/span&gt;</span><br><span class="line">        &lt;!-- æ“ä½œæŒ‰é’® --&gt;</span><br><span class="line">        &lt;a-button-group&gt;</span><br><span class="line">          &lt;a-button type=&quot;primary&quot;&gt;å…¨éƒ¨&lt;/a-button&gt;</span><br><span class="line">          &lt;a-button&gt;æœªå®Œæˆ&lt;/a-button&gt;</span><br><span class="line">          &lt;a-button&gt;å·²å®Œæˆ&lt;/a-button&gt;</span><br><span class="line">        &lt;/a-button-group&gt;</span><br><span class="line">        &lt;!-- æŠŠå·²ç»å®Œæˆçš„ä»»åŠ¡æ¸…ç©º --&gt;</span><br><span class="line">        &lt;a&gt;æ¸…é™¤å·²å®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/a-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // list:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">    // console.log(this.$store);</span><br><span class="line">    this.$store.dispatch(&#x27;getList&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    handleInputChange(e)&#123;</span><br><span class="line">      // console.log(e.target.value)</span><br><span class="line">      this.$store.commit(&#x27;setInputValue&#x27;,e.target.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_ipt &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dt_list &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footer &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="B-å®Œæˆæ·»åŠ äº‹é¡¹"><a href="#B-å®Œæˆæ·»åŠ äº‹é¡¹" class="headerlink" title="B.å®Œæˆæ·»åŠ äº‹é¡¹"></a>B.å®Œæˆæ·»åŠ äº‹é¡¹</h4><p>é¦–å…ˆï¼Œæ‰“å¼€App.vueæ–‡ä»¶ï¼Œç»™â€œæ·»åŠ äº‹é¡¹â€æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¼–å†™å¤„ç†å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ç»‘å®šäº‹ä»¶</span><br><span class="line">&lt;a-button type=&quot;primary&quot; @click=&quot;addItemToList&quot;&gt;æ·»åŠ äº‹é¡¹&lt;/a-button&gt;</span><br><span class="line"></span><br><span class="line">//ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    addItemToList()&#123;</span><br><span class="line">      //å‘åˆ—è¡¨ä¸­æ–°å¢äº‹é¡¹</span><br><span class="line">      if(this.inputValue.trim().length &lt;= 0)&#123;</span><br><span class="line">        return this.$message.warning(&#x27;æ–‡æœ¬æ¡†å†…å®¹ä¸èƒ½ä¸ºç©º&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.$store.commit(&#x27;addItem&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€store.jsç¼–å†™addItem</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    //æ‰€æœ‰ä»»åŠ¡åˆ—è¡¨</span><br><span class="line">    list: [],</span><br><span class="line">    //æ–‡æœ¬è¾“å…¥æ¡†ä¸­çš„å€¼</span><br><span class="line">    inputValue: &#x27;AAA&#x27;,</span><br><span class="line">    //ä¸‹ä¸€ä¸ªid</span><br><span class="line">    nextId:5</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    //æ·»åŠ åˆ—è¡¨é¡¹</span><br><span class="line">    addItem(state)&#123;</span><br><span class="line">      const obj = &#123;</span><br><span class="line">        id :state.nextId,</span><br><span class="line">        info: state.inputValue.trim(),</span><br><span class="line">        done:false</span><br><span class="line">      &#125;</span><br><span class="line">      //å°†åˆ›å»ºå¥½çš„äº‹é¡¹æ·»åŠ åˆ°æ•°ç»„listä¸­</span><br><span class="line">      state.list.push(obj)</span><br><span class="line">      //å°†nextIdå€¼è‡ªå¢</span><br><span class="line">      state.nextId++</span><br><span class="line">      state.inputValue = &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="C-å®Œæˆåˆ é™¤äº‹é¡¹"><a href="#C-å®Œæˆåˆ é™¤äº‹é¡¹" class="headerlink" title="C.å®Œæˆåˆ é™¤äº‹é¡¹"></a>C.å®Œæˆåˆ é™¤äº‹é¡¹</h4><p>é¦–å…ˆï¼Œæ‰“å¼€App.vueæ–‡ä»¶ï¼Œç»™â€œåˆ é™¤â€æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¼–å†™å¤„ç†å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ç»‘å®šäº‹ä»¶</span><br><span class="line">&lt;a slot=&quot;actions&quot; @click=&quot;removeItemById(item.id)&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">//ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    removeItemById(id)&#123;</span><br><span class="line">      //æ ¹æ®idåˆ é™¤äº‹é¡¹</span><br><span class="line">      this.$store.commit(&#x27;removeItem&#x27;,id)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€store.jsç¼–å†™addItem</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    removeItem(state,id)&#123;</span><br><span class="line">      //æ ¹æ®idåˆ é™¤äº‹é¡¹æ•°æ®</span><br><span class="line">      const index = state.list.findIndex( x =&gt; x.id === id )</span><br><span class="line">      // console.log(index);</span><br><span class="line">      if(index != -1) state.list.splice(index,1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="D-å®Œæˆé€‰ä¸­çŠ¶æ€çš„æ”¹å˜"><a href="#D-å®Œæˆé€‰ä¸­çŠ¶æ€çš„æ”¹å˜" class="headerlink" title="D.å®Œæˆé€‰ä¸­çŠ¶æ€çš„æ”¹å˜"></a>D.å®Œæˆé€‰ä¸­çŠ¶æ€çš„æ”¹å˜</h4><p>é¦–å…ˆï¼Œæ‰“å¼€App.vueæ–‡ä»¶ï¼Œç»™â€œå¤é€‰â€æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¼–å†™å¤„ç†å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ç»‘å®šäº‹ä»¶</span><br><span class="line">&lt;a-checkbox :checked=&quot;item.done&quot; @change=&quot;cbStateChanged(item.id,$event)&quot;&gt;&#123;&#123;item.info&#125;&#125;&lt;/a-checkbox&gt;</span><br><span class="line"></span><br><span class="line">//ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    cbStateChanged(id,e)&#123;</span><br><span class="line">      //å¤é€‰æ¡†çŠ¶æ€æ”¹å˜æ—¶è§¦å‘</span><br><span class="line">      const param = &#123;</span><br><span class="line">        id:id,</span><br><span class="line">        status:e.target.checked</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      //æ ¹æ®idæ›´æ”¹äº‹é¡¹çŠ¶æ€</span><br><span class="line">      this.$store.commit(&#x27;changeStatus&#x27;,param)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€store.jsç¼–å†™addItem</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    changeStatus(state,param)&#123;</span><br><span class="line">      //æ ¹æ®idæ”¹å˜å¯¹åº”äº‹é¡¹çš„çŠ¶æ€</span><br><span class="line">      const index = state.list.findIndex( x =&gt; x.id === param.id )</span><br><span class="line">      if(index != -1) state.list[index].done = param.status</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="E-å‰©ä½™é¡¹ç»Ÿè®¡"><a href="#E-å‰©ä½™é¡¹ç»Ÿè®¡" class="headerlink" title="E.å‰©ä½™é¡¹ç»Ÿè®¡"></a>E.å‰©ä½™é¡¹ç»Ÿè®¡</h4><p>æ‰“å¼€store.jsï¼Œæ·»åŠ getterså®Œæˆå‰©ä½™é¡¹ç»Ÿè®¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">getters:&#123;</span><br><span class="line">  unDoneLength(state)&#123;</span><br><span class="line">    const temp = state.list.filter( x =&gt; x.done === false )</span><br><span class="line">    console.log(temp)</span><br><span class="line">    return temp.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€App.vueï¼Œä½¿ç”¨getterså±•ç¤ºå‰©ä½™é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ä½¿ç”¨æ˜ å°„å¥½çš„è®¡ç®—å±æ€§å±•ç¤ºå‰©ä½™é¡¹</span><br><span class="line">&lt;!-- æœªå®Œæˆçš„ä»»åŠ¡ä¸ªæ•° --&gt;</span><br><span class="line">&lt;span&gt;&#123;&#123;unDoneLength&#125;&#125;æ¡å‰©ä½™&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">//å¯¼å…¥getters</span><br><span class="line">import &#123; mapState,mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">//æ˜ å°„</span><br><span class="line">computed:&#123;</span><br><span class="line">  ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;]),</span><br><span class="line">  ...mapGetters([&#x27;unDoneLength&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="F-æ¸…é™¤å®Œæˆäº‹é¡¹"><a href="#F-æ¸…é™¤å®Œæˆäº‹é¡¹" class="headerlink" title="F.æ¸…é™¤å®Œæˆäº‹é¡¹"></a>F.æ¸…é™¤å®Œæˆäº‹é¡¹</h4><p>é¦–å…ˆï¼Œæ‰“å¼€App.vueæ–‡ä»¶ï¼Œç»™â€œæ¸…é™¤å·²å®Œæˆâ€æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¼–å†™å¤„ç†å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- æŠŠå·²ç»å®Œæˆçš„ä»»åŠ¡æ¸…ç©º --&gt;</span><br><span class="line">&lt;a @click=&quot;clean&quot;&gt;æ¸…é™¤å·²å®Œæˆ&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">//ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="line">methods:&#123;</span><br><span class="line">  ......</span><br><span class="line">  clean()&#123;</span><br><span class="line">    //æ¸…é™¤å·²ç»å®Œæˆçš„äº‹é¡¹</span><br><span class="line">    this.$store.commit(&#x27;cleanDone&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€store.jsç¼–å†™addItem</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    cleanDone(state)&#123;</span><br><span class="line">      state.list = state.list.filter( x =&gt; x.done === false )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="G-ç‚¹å‡»é€‰é¡¹å¡åˆ‡æ¢äº‹é¡¹"><a href="#G-ç‚¹å‡»é€‰é¡¹å¡åˆ‡æ¢äº‹é¡¹" class="headerlink" title="G.ç‚¹å‡»é€‰é¡¹å¡åˆ‡æ¢äº‹é¡¹"></a>G.ç‚¹å‡»é€‰é¡¹å¡åˆ‡æ¢äº‹é¡¹</h4><p>æ‰“å¼€App.vueï¼Œç»™â€œå…¨éƒ¨â€ï¼Œâ€œæœªå®Œæˆâ€ï¼Œâ€œå·²å®Œæˆâ€ä¸‰ä¸ªé€‰é¡¹å¡ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¼–å†™å¤„ç†å‡½æ•°<br>å¹¶å°†åˆ—è¡¨æ•°æ®æ¥æºæ›´æ”¹ä¸ºä¸€ä¸ªgettersã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a-list bordered :dataSource=&quot;infoList&quot; class=&quot;dt_list&quot;&gt;</span><br><span class="line">  ......</span><br><span class="line">  &lt;!-- æ“ä½œæŒ‰é’® --&gt;</span><br><span class="line">  &lt;a-button-group&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;all&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;all&#x27;)&quot;&gt;å…¨éƒ¨&lt;/a-button&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;undone&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;undone&#x27;)&quot;&gt;æœªå®Œæˆ&lt;/a-button&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;done&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;done&#x27;)&quot;&gt;å·²å®Œæˆ&lt;/a-button&gt;</span><br><span class="line">  &lt;/a-button-group&gt;</span><br><span class="line">  ......</span><br><span class="line">&lt;/a-list&gt;</span><br><span class="line"></span><br><span class="line">//ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ä»¥åŠæ˜ å°„è®¡ç®—å±æ€§</span><br><span class="line">methods:&#123;</span><br><span class="line">  ......</span><br><span class="line">  changeList( key )&#123;</span><br><span class="line">    //ç‚¹å‡»â€œå…¨éƒ¨â€ï¼Œâ€œå·²å®Œæˆâ€ï¼Œâ€œæœªå®Œæˆâ€æ—¶è§¦å‘</span><br><span class="line">    this.$store.commit(&#x27;changeKey&#x27;,key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">computed:&#123;</span><br><span class="line">  ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;,&#x27;viewKey&#x27;]),</span><br><span class="line">  ...mapGetters([&#x27;unDoneLength&#x27;,&#x27;infoList&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€store.jsï¼Œæ·»åŠ gettersï¼Œmutationsï¼Œstate</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    ......</span><br><span class="line">    //ä¿å­˜é»˜è®¤çš„é€‰é¡¹å¡å€¼</span><br><span class="line">    viewKey:&#x27;all&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ......</span><br><span class="line">    changeKey(state,key)&#123;</span><br><span class="line">      //å½“ç”¨æˆ·ç‚¹å‡»â€œå…¨éƒ¨â€ï¼Œâ€œå·²å®Œæˆâ€ï¼Œâ€œæœªå®Œæˆâ€é€‰é¡¹å¡æ—¶è§¦å‘</span><br><span class="line">      state.viewKey = key</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ......</span><br><span class="line">  getters:&#123;</span><br><span class="line">    .......</span><br><span class="line">    infoList(state)&#123;</span><br><span class="line">      if(state.viewKey === &#x27;all&#x27;)&#123;</span><br><span class="line">        return state.list</span><br><span class="line">      &#125;</span><br><span class="line">      if(state.viewKey === &#x27;undone&#x27;)&#123;</span><br><span class="line">        return state.list.filter( x =&gt; x.done === false )</span><br><span class="line">      &#125;</span><br><span class="line">      if(state.viewKey === &#x27;done&#x27;)&#123;</span><br><span class="line">        return state.list.filter( x =&gt; x.done === true )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://ramsayi.github.io">Ramsayi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://ramsayi.github.io/posts/1386d0b9/">https://ramsayi.github.io/posts/1386d0b9/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://ramsayi.github.io" target="_blank">ğ™ğ™–ğ™¢ğ™¨ğ™–ğ™®ğ™'ğ™¨ ğ˜½ğ™¡ğ™¤ğ™œ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue2/">Vue2</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/vuejs.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/c386cf1b/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/Python-Spider.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Pythonçˆ¬è™«</div></div></a></div><div class="next-post pull-right"><a href="/posts/c6d7328c/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/react.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">reactåŸºç¡€Day02-å—æ§ç»„ä»¶&amp;è¯„è®ºæ¡ˆä¾‹&amp;props&amp;context</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/9b1b7604/" title="é»‘é©¬å•†åŸ"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/uniapp.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-23</div><div class="title">é»‘é©¬å•†åŸ</div></div></a></div><div><a href="/posts/de6e7ab8/" title="uni-appåŸºç¡€çŸ¥è¯†"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/uniapp.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-23</div><div class="title">uni-appåŸºç¡€çŸ¥è¯†</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">ä¸€ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%B5%E5%95%86%E4%B8%9A%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="toc-text">1.ç”µå•†ä¸šåŠ¡æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">2.é¡¹ç›®åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%A0%81%E4%BA%91%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-text">3.ç äº‘ç›¸å…³æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE"><span class="toc-text">4.é…ç½®åå°é¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-text">5.å®ç°ç™»å½•åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">6.ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-text">è¡¥å……</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">äºŒã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-text">1.åå°é¦–é¡µåŸºæœ¬å¸ƒå±€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B6%E9%83%A8%E5%B8%83%E5%B1%80%EF%BC%8C%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%B8%83%E5%B1%80"><span class="toc-text">2.é¡¶éƒ¨å¸ƒå±€ï¼Œä¾§è¾¹æ å¸ƒå±€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-axios%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">3.axiosè¯·æ±‚æ‹¦æˆªå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AF%B7%E6%B1%82%E4%BE%A7%E8%BE%B9%E6%A0%8F%E6%95%B0%E6%8D%AE"><span class="toc-text">4.è¯·æ±‚ä¾§è¾¹æ æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AE%E6%BF%80%E6%B4%BB%E5%AD%90%E8%8F%9C%E5%8D%95%E6%A0%B7%E5%BC%8F"><span class="toc-text">5.è®¾ç½®æ¿€æ´»å­èœå•æ ·å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%B6%E4%BD%9C%E4%BE%A7%E8%BE%B9%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84%E4%BC%B8%E7%BC%A9%E5%8A%9F%E8%83%BD"><span class="toc-text">6.åˆ¶ä½œä¾§è¾¹èœå•æ çš„ä¼¸ç¼©åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9C%A8%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-text">7.åœ¨åå°é¦–é¡µæ·»åŠ å­çº§è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%8C%E6%88%90%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E4%B8%BB%E4%BD%93%E5%8C%BA%E5%9F%9F"><span class="toc-text">8.å®Œæˆç”¨æˆ·åˆ—è¡¨ä¸»ä½“åŒºåŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%BB%98%E5%88%B6%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">9.ç»˜åˆ¶ç”¨æˆ·åˆ—è¡¨åŸºæœ¬ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%AF%B7%E6%B1%82%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">10.è¯·æ±‚ç”¨æˆ·åˆ—è¡¨æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%B0%86%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-text">11.å°†ç”¨æˆ·åˆ—è¡¨æ•°æ®å±•ç¤º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%88%86%E9%A1%B5"><span class="toc-text">12.å®ç°ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%AE%9E%E7%8E%B0%E6%9B%B4%E6%96%B0%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81"><span class="toc-text">13.å®ç°æ›´æ–°ç”¨æˆ·çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-text">14.å®ç°æœç´¢åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-text">15.å®ç°æ·»åŠ ç”¨æˆ·</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">ä¸‰ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-text">1.ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-text">2.åˆ é™¤ç”¨æˆ·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-text">3.æ¨é€ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8"><span class="toc-text">4.æƒé™åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8%E8%B7%AF%E7%94%B1"><span class="toc-text">A.æ·»åŠ æƒé™åˆ—è¡¨è·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA"><span class="toc-text">B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-text">C.æ˜¾ç¤ºæ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8"><span class="toc-text">5.è§’è‰²åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E8%B7%AF%E7%94%B1"><span class="toc-text">A.æ·»åŠ è§’è‰²åˆ—è¡¨è·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA-1"><span class="toc-text">B.æ·»åŠ é¢åŒ…å±‘å¯¼èˆª</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE-1"><span class="toc-text">C.æ˜¾ç¤ºæ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E"><span class="toc-text">D.è¡¥å……è¯´æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E7%94%9F%E6%88%90%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8"><span class="toc-text">E.ç”Ÿæˆæƒé™åˆ—è¡¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E7%BE%8E%E5%8C%96%E6%A0%B7%E5%BC%8F"><span class="toc-text">F.ç¾åŒ–æ ·å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-text">G.æ·»åŠ æƒé™åˆ é™¤åŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#H-%E5%AE%8C%E6%88%90%E6%9D%83%E9%99%90%E5%88%86%E9%85%8D%E5%8A%9F%E8%83%BD"><span class="toc-text">H.å®Œæˆæƒé™åˆ†é…åŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-%E5%AE%8C%E6%88%90%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E5%BC%B9%E7%AA%97"><span class="toc-text">I.å®Œæˆæ ‘å½¢ç»“æ„å¼¹çª—</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2"><span class="toc-text">6.åˆ†é…è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%B0%86%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%E5%88%B0%E7%A0%81%E4%BA%91"><span class="toc-text">7.å°†ä»£ç æ¨é€åˆ°ç äº‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">å››ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB"><span class="toc-text">1.å•†å“åˆ†ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%96%B0%E5%BB%BA%E5%88%86%E6%94%AFgoods-cate"><span class="toc-text">A.æ–°å»ºåˆ†æ”¯goods_cate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E5%AD%90%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-text">B.åˆ›å»ºå­çº§è·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0%E7%BB%84%E4%BB%B6%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-text">C.æ·»åŠ ç»„ä»¶åŸºæœ¬å¸ƒå±€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E8%AF%B7%E6%B1%82%E5%88%86%E7%B1%BB%E6%95%B0%E6%8D%AE"><span class="toc-text">D.è¯·æ±‚åˆ†ç±»æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-text">E.ä½¿ç”¨æ’ä»¶å±•ç¤ºæ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E5%88%97"><span class="toc-text">F.è‡ªå®šä¹‰æ•°æ®åˆ—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E5%AE%8C%E6%88%90%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-text">G.å®Œæˆåˆ†é¡µåŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#H-%E5%AE%8C%E6%88%90%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB"><span class="toc-text">H.å®Œæˆæ·»åŠ åˆ†ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-text">I.æ¨é€ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%82%E6%95%B0%E7%AE%A1%E7%90%86"><span class="toc-text">2.å‚æ•°ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%BA%A7%E7%BB%84%E4%BB%B6"><span class="toc-text">A.æ·»åŠ å­çº§ç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%AE%8C%E6%88%90%E7%BB%84%E4%BB%B6%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-text">B.å®Œæˆç»„ä»¶åŸºæœ¬å¸ƒå±€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%8C%E6%88%90%E7%BA%A7%E8%81%94%E9%80%89%E6%8B%A9%E6%A1%86"><span class="toc-text">C.å®Œæˆçº§è”é€‰æ‹©æ¡†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%B1%95%E7%A4%BA%E5%8F%82%E6%95%B0"><span class="toc-text">D.å±•ç¤ºå‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0"><span class="toc-text">E.æ·»åŠ å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E7%BC%96%E8%BE%91%E5%8F%82%E6%95%B0"><span class="toc-text">F.ç¼–è¾‘å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E5%88%A0%E9%99%A4%E5%8F%82%E6%95%B0"><span class="toc-text">G.åˆ é™¤å‚æ•°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">äº”ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%82%E6%95%B0%E7%AE%A1%E7%90%86"><span class="toc-text">1.å‚æ•°ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%B1%95%E7%A4%BA%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0%E5%8F%AF%E9%80%89%E9%A1%B9"><span class="toc-text">A.å±•ç¤ºåŠ¨æ€å‚æ•°å¯é€‰é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0-x2F-%E5%88%A0%E9%99%A4%E5%8F%AF%E9%80%89%E9%A1%B9"><span class="toc-text">B.æ·»åŠ &#x2F;åˆ é™¤å¯é€‰é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81%E5%88%B0%E7%A0%81%E4%BA%91"><span class="toc-text">2.æ¨é€ä»£ç åˆ°ç äº‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8"><span class="toc-text">3.å•†å“åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%B6%E4%BD%9C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">A.åˆ¶ä½œå•†å“åˆ—è¡¨åŸºæœ¬ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-text">B.æ•°æ®å±•ç¤º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4%E5%95%86%E5%93%81"><span class="toc-text">C.å®ç°åˆ é™¤å•†å“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-text">4.æ·»åŠ å•†å“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-text">A.æ·»åŠ ç¼–ç¨‹å¼å¯¼èˆª</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%B8%83%E5%B1%80Add-vue%E7%BB%84%E4%BB%B6"><span class="toc-text">B.å¸ƒå±€Add.vueç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0tab%E6%A0%8F%E5%88%87%E6%8D%A2%E9%AA%8C%E8%AF%81"><span class="toc-text">C.æ·»åŠ tabæ åˆ‡æ¢éªŒè¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%B1%95%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">D.å±•ç¤ºä¿¡æ¯</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">å…­ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-text">1.æ·»åŠ å•†å“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%AE%8C%E6%88%90%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-text">A.å®Œæˆå›¾ç‰‡ä¸Šä¼ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E4%BD%BF%E7%94%A8%E5%AF%8C%E6%96%87%E6%9C%AC%E6%8F%92%E4%BB%B6"><span class="toc-text">B.ä½¿ç”¨å¯Œæ–‡æœ¬æ’ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-text">C.æ·»åŠ å•†å“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-text">D.æ¨é€ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8"><span class="toc-text">2.è®¢å•åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="toc-text">A.åˆ›å»ºåˆ†æ”¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="toc-text">B.åˆ›å»ºè·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%E5%8F%8A%E5%88%86%E9%A1%B5"><span class="toc-text">C.å®ç°æ•°æ®å±•ç¤ºåŠåˆ†é¡µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%88%B6%E4%BD%9C%E7%9C%81%E5%B8%82%E5%8C%BA%E5%8E%BF%E8%81%94%E5%8A%A8"><span class="toc-text">D.åˆ¶ä½œçœå¸‚åŒºå¿è”åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E5%88%B6%E4%BD%9C%E7%89%A9%E6%B5%81%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-text">E.åˆ¶ä½œç‰©æµè¿›åº¦å¯¹è¯æ¡†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-text">F.æ¨é€ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1"><span class="toc-text">3.æ•°æ®ç»Ÿè®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9B%E5%BB%BA%E5%AD%90%E5%88%86%E6%94%AF"><span class="toc-text">A.åˆ›å»ºå­åˆ†æ”¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1-1"><span class="toc-text">B.åˆ›å»ºè·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AF%BC%E5%85%A5ECharts%E5%B9%B6%E4%BD%BF%E7%94%A8"><span class="toc-text">C.å¯¼å…¥EChartså¹¶ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81-1"><span class="toc-text">D.æ¨é€ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">ä¸ƒã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="toc-text">1.é¡¹ç›®ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-text">2.æ·»åŠ è¿›åº¦æ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E6%8A%A5%E9%94%99%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81"><span class="toc-text">3.æ ¹æ®æŠ¥é”™ä¿®æ”¹ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%89%A7%E8%A1%8Cbuild"><span class="toc-text">4.æ‰§è¡Œbuild</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%94%9F%E6%88%90%E6%89%93%E5%8C%85%E6%8A%A5%E5%91%8A"><span class="toc-text">5.ç”Ÿæˆæ‰“åŒ…æŠ¥å‘Š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9webpack%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-text">6.ä¿®æ”¹webpackçš„é»˜è®¤é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%8A%A0%E8%BD%BD%E5%A4%96%E9%83%A8CDN"><span class="toc-text">7.åŠ è½½å¤–éƒ¨CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%9A%E5%88%B6%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9"><span class="toc-text">8.å®šåˆ¶é¦–é¡µå†…å®¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-text">9.è·¯ç”±æ‡’åŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF"><span class="toc-text">10.é¡¹ç›®ä¸Šçº¿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E9%80%9A%E8%BF%87node%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">A.é€šè¿‡nodeåˆ›å»ºæœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%BC%80%E5%90%AFgzip%E5%8E%8B%E7%BC%A9"><span class="toc-text">B.å¼€å¯gzipå‹ç¼©</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E9%85%8D%E7%BD%AEhttps%E6%9C%8D%E5%8A%A1"><span class="toc-text">C.é…ç½®httpsæœåŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E4%BD%BF%E7%94%A8pm2%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8"><span class="toc-text">D.ä½¿ç”¨pm2ç®¡ç†åº”ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">å…«ã€ä»Šæ—¥ç›®æ ‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vuex%E6%A6%82%E8%BF%B0"><span class="toc-text">1.Vuexæ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vuex%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2.Vuexçš„åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8Vuex%E5%AE%8C%E6%88%90%E8%AE%A1%E6%95%B0%E5%99%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">3.ä½¿ç”¨Vuexå®Œæˆè®¡æ•°å™¨æ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Vuex%E4%B8%AD%E7%9A%84%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-text">4.Vuexä¸­çš„æ ¸å¿ƒç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-State"><span class="toc-text">A.State</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-Mutation"><span class="toc-text">B.Mutation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-Action"><span class="toc-text">C.Action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-Getter"><span class="toc-text">D.Getter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-vuex%E6%A1%88%E4%BE%8B"><span class="toc-text">5.vuexæ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A1%88%E4%BE%8B"><span class="toc-text">A.åˆå§‹åŒ–æ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%AE%8C%E6%88%90%E6%B7%BB%E5%8A%A0%E4%BA%8B%E9%A1%B9"><span class="toc-text">B.å®Œæˆæ·»åŠ äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%8C%E6%88%90%E5%88%A0%E9%99%A4%E4%BA%8B%E9%A1%B9"><span class="toc-text">C.å®Œæˆåˆ é™¤äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%AE%8C%E6%88%90%E9%80%89%E4%B8%AD%E7%8A%B6%E6%80%81%E7%9A%84%E6%94%B9%E5%8F%98"><span class="toc-text">D.å®Œæˆé€‰ä¸­çŠ¶æ€çš„æ”¹å˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E5%89%A9%E4%BD%99%E9%A1%B9%E7%BB%9F%E8%AE%A1"><span class="toc-text">E.å‰©ä½™é¡¹ç»Ÿè®¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E6%B8%85%E9%99%A4%E5%AE%8C%E6%88%90%E4%BA%8B%E9%A1%B9"><span class="toc-text">F.æ¸…é™¤å®Œæˆäº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E7%82%B9%E5%87%BB%E9%80%89%E9%A1%B9%E5%8D%A1%E5%88%87%E6%8D%A2%E4%BA%8B%E9%A1%B9"><span class="toc-text">G.ç‚¹å‡»é€‰é¡¹å¡åˆ‡æ¢äº‹é¡¹</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/ramsayi/src/img/post/vuejs.webp')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By Ramsayi</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://www.gushici.com/t_782">æ»¡å ‚èŠ±é†‰ä¸‰åƒå®¢ï¼Œä¸€å‰‘éœœå¯’åå››å·</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="èŠå¤©"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'hYhAkaCoGek8gsKP8H2vLfmS-gzGzoHsz',
      appKey: '8Cxp5qHQuHTnuUIsOuPqWoQk',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="//code.tidio.co/fxk9glqedvgfb9eqhzyajcc3o4oupxbo.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && location.pathname =='/'){
    
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo-theme-butterfly.webp" alt="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo-theme-butterfly.webp"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-09-08</span><a class="blog-slider__title" href="posts/23ce82cf/">Butterflyä¸»é¢˜é…ç½®</a><div class="blog-slider__text">Butterflyä¸»é¢˜é…ç½®</div><a class="blog-slider__button" href="posts/23ce82cf/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo.webp" alt="https://cdn.jsdelivr.net/gh/ramsayi/src/img/bg/hexo.webp"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-07-07</span><a class="blog-slider__title" href="posts/b8f4bd70/">Hexoåšå®¢æ­å»º</a><div class="blog-slider__text">Hexoåšå®¢æ­å»º</div><a class="blog-slider__button" href="posts/b8f4bd70/">è¯¦æƒ…</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½swiper')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script>
<style></style> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='all'|| 'all' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/è¸©å‘è®°å½•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“š Ramsayiã®è¸©å‘è®°å½• (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/å‚è€ƒæ‰‹å†Œ/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ® Ramsayiã®å‚è€ƒæ‰‹å†Œ (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/æŠ€æœ¯å­¦ä¹ /"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ Ramsayiã®æŠ€æœ¯å­¦ä¹  (103)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/å»ºç«™åšå®¢/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‘©â€ğŸ’» Ramsayiã®å»ºç«™åšå®¢ (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/é€†å‘ç ´è§£/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“’ Ramsayiã®é€†å‘ç ´è§£ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ramsayi.github.io/categories/æ•ˆç‡åŠå…¬/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ’¡ Ramsayiã®æ•ˆç‡åŠå…¬ (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://ramsayi.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #304ffe}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style>
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?ramsayi";
            var git_color =['#f3f5ff', '#ccd4ff', '#a5b3ff', '#7e91fe', '#5770fe', '#304ffe', '#092efe', '#0122de', '#011cb7', '#011690', '#011069'];
            var git_user ="ramsayi";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('å·²æŒ‚è½½github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>