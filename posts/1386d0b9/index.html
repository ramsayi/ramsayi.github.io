<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Vue全家桶-项目实战 | Ramsayi</title><meta name="keywords" content="Vue2"><meta name="author" content="Ramsayi"><meta name="copyright" content="Ramsayi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Vue全家桶-项目实战"><meta name="application-name" content="Vue全家桶-项目实战"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Vue全家桶-项目实战"><meta property="og:url" content="https://ramsayi.asia/posts/1386d0b9/index.html"><meta property="og:site_name" content="Ramsayi"><meta property="og:description" content="一、今日目标1.初始化项目 2.基于 Vue 技术栈进行项目开发 3.使用 Vue 的第三方组件进行项目开发 4.理解前后端分离开发模式 1.电商业务概述客户使用的业务服务：PC 端，小程序，移动 web，移动 app管理员使用的业务服务：PC 后台管理端。PC 后台管理端的功能：管理用户账号（登录"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/vue2.png"><meta property="article:author" content="Ramsayi"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/vue2.png"><meta name="description" content="一、今日目标1.初始化项目 2.基于 Vue 技术栈进行项目开发 3.使用 Vue 的第三方组件进行项目开发 4.理解前后端分离开发模式 1.电商业务概述客户使用的业务服务：PC 端，小程序，移动 web，移动 app管理员使用的业务服务：PC 后台管理端。PC 后台管理端的功能：管理用户账号（登录"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://ramsayi.asia/posts/1386d0b9/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-h131i132g-ramsayi.vercel.app/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"cb0fb2efb97f23bb1079a6fbcca42a53","mailMd5":"8a66d758d102fb88"},
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"这篇文章已经有","messageNext":"天了，信息可能已经有所发展，内容仅供参考。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Ramsayi","link":"链接: ","source":"来源: Ramsayi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Ramsayi',
  title: 'Vue全家桶-项目实战',
  postAI: '',
  pageFillDescription: '一、今日目标, 1.电商业务概述, 2.项目初始化, 3.码云相关操作, 4.配置后台项目, 5.实现登录功能, 6.登录成功之后的操作, 补充, 二、今日目标, 1.后台首页基本布局, 2.顶部布局侧边栏布局, 3.axios 请求拦截器, 4.请求侧边栏数据, 5.设置激活子菜单样式, 6.制作侧边菜单栏的伸缩功能, 7.在后台首页添加子级路由, 8.完成用户列表主体区域, 9.绘制用户列表基本结构, 10.请求用户列表数据, 11.将用户列表数据展示, 12.实现用户列表分页, 13.实现更新用户状态, 14.实现搜索功能, 15.实现添加用户, 三、今日目标, 1.修改用户信息, 2.删除用户, 3.推送代码, 4.权限列表, A.添加权限列表路由, B.添加面包屑导航, C.显示数据, 5.角色列表, A.添加角色列表路由, B.添加面包屑导航, C.显示数据, D.补充说明, E.生成权限列表, F.美化样式, G.添加权限删除功能, H.完成权限分配功能, I.完成树形结构弹窗, 6.分配角色, 7.将代码推送到码云, 四、今日目标, 1.商品分类, A.新建分支 goods_cate, B.创建子级路由, C.添加组件基本布局, D.请求分类数据, E.使用插件展示数据, F.自定义数据列, G.完成分页功能, H.完成添加分类, I.推送代码, 2.参数管理, A.添加子级组件, B.完成组件基本布局, C.完成级联选择框, D.展示参数, E.添加参数, F.编辑参数, G.删除参数, 五、今日目标, 1.参数管理, A.展示动态参数可选项, B.添加x2F删除可选项, 2.推送代码到码云, 3.商品列表, A.制作商品列表基本结构, B.数据展示, C.实现删除商品, 4.添加商品, A.添加编程式导航, B.布局 Add.vue 组件, C.添加 tab 栏切换验证, D.展示信息, 六、今日目标, 1.添加商品, A.完成图片上传, B.使用富文本插件, C.添加商品, D.推送代码, 2.订单列表, A.创建分支, B.创建路由, C.实现数据展示及分页, D.制作省市区县联动, E.制作物流进度对话框, F.推送代码, 3.数据统计, A.创建子分支, B.创建路由, C.导入 ECharts 并使用, D.推送代码, 七、今日目标, 1.项目优化, 2.添加进度条, 3.根据报错修改代码, 4.执行 build, 5.生成打包报告, 6.修改 webpack 的默认配置, 7.加载外部 CDN, 8.定制首页内容, 9.路由懒加载, 10.项目上线, A.通过 node 创建服务器, B.开启 gzip 压缩, C.配置 https 服务, D.使用 pm2 管理应用, 八、今日目标, 1.Vuex 概述, 2.Vuex 的基本使用, 3.使用 Vuex 完成计数器案例, 4.Vuex 中的核心特性, A.State, B.Mutation, C.Action, D.Getter, , 5.vuex 案例, A.初始化案例, B.完成添加事项, C.完成删除事项, D.完成选中状态的改变, E.剩余项统计, F.清除完成事项, G.点击选项卡切换事项一今日目标初始化项目基于技术栈进行项目开发使用的第三方组件进行项目开发理解前后端分离开发模式电商业务概述客户使用的业务服务端小程序移动移动管理员使用的业务服务后台管理端后台管理端的功能管理用户账号登录退出用户管理权限管理商品管理商品分类分类参数商品信息订单数据统计电商后台管理系统采用前后端分离的开发模式前端项目是基于的单页应用程序项目前端技术栈后端技术栈模拟操作数据库的框架项目初始化安装脚手架通过脚手架创建项目配置路由配置在插件中安装搜索配置在依赖中安装搜索运行依赖初始化仓库将本地项目托管到或者码云中码云相关操作注册登录码云账号安装在上使用可以从官网直接下载安装程序进行安装测试命令点击网站右上角登录登录码云并进行账号设置在本地创建公钥在终端运行找到公钥地址当我们创建公钥完毕之后请注意打印出来的信息盘下面的下面的下面的下面的就是我们创建好的公钥了打开文件复制文件中的所有代码点击码云中的公钥将生成的公钥复制到公钥中测试公钥打开终端输入命令将本地代码托管到码云中点击码云右上角的号新建仓库进行配置打开项目所在位置的终端进行仓库关联配置后台项目安装并导入数据库数据安装配置后台项目从终端打开后台项目然后在终端中输入命令安装项目依赖包使用测试接口实现登录功能登录状态保持如果服务器和客户端同源建议可以使用或者来保持登录状态如果客户端和服务器跨域了建议使用进行维持登录状态登录逻辑在登录页面输入账号和密码进行登录将数据发送给服务器服务器返回登录的结果登录成功则返回数据中带有客户端得到并进行保存后续的请求都需要将此发送给服务器服务器会验证以保证用户身份添加新分支在分支中开发当前项目打开终端使用确定当前项目状态确定当前工作目录是干净的之后创建一个分支进行开发开发完毕之后将其合并到然后查看新创建的分支确定我们正在使用分支进行开发然后执行命令打开界面然后运行运行查看当前项目效果发现现在是一个默认页面我们需要进行更改打开项目的目录点击文件入口文件再打开根组件将根组件的内容进行操作梳理中留下根节点中留下默认导出去掉组件中去掉所有样式再打开路由将数组中的路由规则清除然后将删除将中的删除在文件夹中新建组件添加标签标签中的可以防止组件之间的样式冲突没有则样式是全局的在中导入组件并设置规则在中添加路由占位符当我们给中的内容添加样式的时候会报错缺少需要配置加载器开发依赖安装开发依赖然后需要添加公共样式在文件夹下面添加文件夹创建文件添加全局样式全局样式表在中导入使得全局样式生效然后中的根元素也需要设置撑满全屏最终文件中的代码如下登录盒子头像登录表单用户名密码按钮登录重置数据绑定表单验证规则请输入登录名登录名长度在到个字符请输入密码密码长度在到个字符添加行为添加表单重置方法当前组件对象其中的属性包含了设置的表单点击登录的时候先调用方法验证表单内容是否有误如果参数为则验证通过发送请求进行登录登录失败登录失败登录成功保存导航至其中我们有用到一下内容需要进行进一步处理添加的表单组件在文件夹中打开文件进行的按需导入添加第三方字体复制素材中的文件夹到中在入口文件中导入然后直接在接着添加登录盒子添加表单验证的步骤给添加属性是一堆验证规则定义在中在中添加请输入活动名称长度在到个字符请选择活动区域通过的属性设置验证规则活动名称导入以发送请求打开设置请求的根路径挂载配置弹窗提示在文件夹中打开文件进行的按需导入进行全局挂载在组件中编写弹窗代码登录失败登录成功之后的操作登录成功之后需要将后台返回的保存到中操作完毕之后需要跳转到点击登录的时候先调用方法验证表单内容是否有误如果参数为则验证通过发送请求进行登录登录失败登录失败登录成功保存导航至添加一个组件并为之添加规则退出添加路由规则添加路由守卫如果用户没有登录不能访问如果用户通过地址直接访问则强制跳转到登录页面打开挂载路由导航守卫表示将要访问的路径表示从哪里来是下一个要做的操作获取实现退出功能在组件中添加一个退出功能按钮给退出按钮添加点击事件添加事件处理代码如下补充处理警告打开脚手架面板查看警告信息图片默认情况下和格式化工具有冲突需要添加配置文件解决冲突在项目根目录添加文件打开文件禁用对的检查合并按需导入的进行全局挂载将代码提交到码云新建一个项目终端输入命令查看修改过的与新增的文件内容将所有文件添加到暂存区将所有代码提交到本地仓库添加登录功能以及的基本结构查看分支发现所有代码都被提交到了分支将分支代码合并到主分支先切换到在分支进行代码合并将本地的推送到远端的码云推送本地的子分支到码云先切换到子分支分支名然后推送到码云远端分支名二今日目标实现后台首页的基本布局实现左侧菜单栏实现用户列表展示实现添加用户后台首页基本布局打开组件进行布局头部区域退出页面主体区域侧边栏主体结构默认情况下跟组件同名的类名可以帮助我们快速的给对应的组件添加样式如顶部布局侧边栏布局头部区域黑马顶部标题电商后台管理系统退出页面主体区域侧边栏侧边栏菜单一级菜单一级菜单模板图标文本导航一二级子菜单二级菜单模板图标文本子菜单一主体结构请求拦截器后台除了登录接口之外都需要权限验证我们可以通过添加请求拦截器来添加以保证拥有获取数据的权限在中添加代码在将挂载到原型之前添加下面的代码请求在到达服务器之前先会调用中的这个回调函数来添加请求头信息为请求头对象添加验证的字段请求侧边栏数据左侧菜单数据在阶段请求左侧菜单数据发送请求获取左侧菜单数据通过双重循环渲染左侧菜单一级菜单一级菜单模板图标文本二级子菜单二级菜单模板图标文本设置激活子菜单样式通过更改的属性可以设置侧边栏菜单中点击的激活项的文字颜色通过更改菜单项模板中的标签的类名可以将左侧菜单栏的图标进行设置我们需要在项目中使用第三方字体图标在数据中添加一个然后将图标类名进行数据绑定绑定中的数据为了保持左侧菜单每次只能打开一个显示其中的子菜单我们可以在中添加一个属性或者也可以数据绑定进行设置此时认为是一个值而不是字符串制作侧边菜单栏的伸缩功能在菜单栏上方添加一个侧边栏宽度根据是否折叠进行设置伸缩侧边栏按钮侧边栏菜单设置折叠菜单为绑定的值关闭默认的折叠动画然后给添加样式给添加事件在后台首页添加子级路由新增子级路由组件在中导入子级路由组件并设置路由规则以及子级路由的默认重定向打开在的主体结构中添加一个路由占位符制作好了子级路由之后我们需要将所有的侧边栏二级菜单都改造成子级路由链接我们只需要将的属性设置为就可以了此时当我们点击二级菜单的时候就会根据菜单的属性进行路由跳转如使用来作为跳转的路径不合适我们可以重新绑定的值为完成用户列表主体区域新建用户列表组件在中导入子级路由组件并设置路由规则当点击二级菜单的时候被点击的二级子菜单并没有高亮我们需要正在被使用的功能高亮显示我们可以通过设置的属性来设置当前激活菜单的但是属性也不能写死固定为某个菜单值所以我们可以先给所有的二级菜单添加点击事件并将值作为方法的参数在方法中将保存到中点击二级菜单的时候保存被点击的二级菜单信息然后在数据中添加一个绑定数据并将的属性设置为最后在中将中的数据赋值给绘制用户列表基本结构使用面包屑组件完成顶部导航路径复制面包屑代码在中导入组件使用卡片组件完成主体表格复制卡片组件代码在中导入组件再使用输入框完成搜索框及搜索按钮此时我们需要使用栅格布局来划分结构复制卡片组件代码在中导入组件然后再使用制作添加用户按钮用户列表组件面包屑导航首页用户管理用户列表卡片视图区域搜索与添加区域请输入内容添加用户请求用户列表数据获取查询用户信息的参数保存请求回来的用户列表数据发送请求获取用户列表数据如果返回状态为异常状态则报错并返回获取用户列表失败如果返回状态正常将请求的数据保存在中将用户列表数据展示使用表格来展示用户列表数据使用表格组件完成列表展示数据复制表格代码在中导入组件在渲染展示状态时会使用作用域插槽获取每一行的数据再使用开关组件展示状态信息复制开关组件代码在中导入组件而渲染操作列时也是使用作用域插槽来进行渲染的在操作列中包含了修改删除分配角色按钮当我们把鼠标放到分配角色按钮上时希望能有一些文字提示此时我们需要使用文字提示组件复制文字提示组件代码在中导入组件将分配角色按钮包含代码结构如下用户列表表格区域姓名邮箱电话角色状态操作修改删除分配角色分配角色实现用户列表分页使用表格来展示用户列表数据可以使用分页组件完成列表分页展示数据复制分页组件代码在中导入组件更改组件中的绑定数据分页导航区域改变时触发页码发生改变时触发设置当前页码设置每页的数据条数设置总页数添加两个事件的事件处理函数改变时触发当发生改变的时候我们应该以最新的来请求数据并展示数据重新按照发送请求请求最新的数据页码发生改变时触发当发生改变的时候我们应该以最新的页码来请求数据并展示数据重新按照发送请求请求最新的数据实现更新用户状态当用户点击列表中的组件时用户的状态应该跟随发生改变首先监听用户点击组件的事件并将作用域插槽的数据当做事件参数进行传递在事件中发送请求完成状态的更改发送请求进行状态修改如果返回状态为异常状态则报错并返回修改状态失败更新状态成功实现搜索功能添加数据绑定添加搜索按钮的点击事件当用户点击搜索按钮的时候调用方法根据文本框内容重新请求用户列表数据当我们在输入框中输入内容并点击搜索之后会按照搜索关键字搜索我们希望能够提供一个删除搜索关键字并重新获取所有的用户列表数据只需要给文本框添加属性并添加事件在事件中重新请求数据即可请输入内容实现添加用户当我们点击添加用户按钮的时候弹出一个对话框来实现添加用户的功能首先我们需要复制对话框组件的代码并在文件中引入组件接下来我们要为添加用户按钮添加点击事件在事件中将设置为即显示对话框更改组件中的内容对话框组件设置是否显示对话框设置对话框的宽度在对话框关闭前触发的事件添加用户对话框主体区域用户名密码邮箱电话对话框底部区域取消确定添加数据绑定和校验规则验证邮箱的规则返回一个错误提示请输入合法的邮箱验证手机号码的规则返回一个错误提示请输入合法的手机号码获取查询用户信息的参数查询的条件当前的页数即页码每页显示的数据条数保存请求回来的用户列表数据是否显示添加用户弹出窗添加用户的表单数据添加表单的验证规则对象请输入用户名称用户名在个字符之间请输入密码用户名在个字符之间请输入邮箱邮箱格式不正确请重新输入请输入手机号码手机号码不正确请重新输入当关闭对话框时重置表单给添加事件在事件中添加重置表单的代码对话框关闭之后重置表达点击对话框中的确定按钮发送请求完成添加用户的操作首先给确定按钮添加点击事件在点击事件中完成业务逻辑代码点击确定按钮添加新用户调用进行表单验证请填写完整用户信息发送请求完成添加用户的操作判断如果添加失败就做提示添加用户失败添加成功的提示添加用户成功关闭对话框重新请求最新的数据三今日目标修改用户删除用户推送代码到码云权限列表角色列表分配角色修改用户信息为用户列表中的修改按钮绑定点击事件在页面中添加修改用户对话框并修改对话框的属性根据查询需要修改的用户数据展示编辑用户的对话框发送请求根据获取用户信息判断如果添加失败就做提示获取用户信息失败将获取到的数据保存到数据中显示弹出窗在弹出窗中添加修改用户信息的表单并做响应的数据绑定以及数据验证对话框主体区域用户名邮箱电话数据绑定以及验证控制修改用户对话框的显示与否修改用户的表单数据修改表单的验证规则对象请输入邮箱邮箱格式不正确请重新输入请输入手机号码手机号码不正确请重新输入监听对话框关闭事件在对话框关闭之后重置表单修改用户对话框关闭之后重置表达在用户点击确定按钮的时候验证数据成功之后发送请求完成修改用户点击修改表单中的确定按钮之后验证表单数据请填写完整用户信息发送请求完成修改用户的操作判断如果修改失败就做提示修改用户失败修改成功的提示修改用户成功关闭对话框重新请求最新的数据删除用户在点击删除按钮的时候我们应该跳出提示信息框让用户确认要进行删除操作如果想要使用确认取消提示框我们需要先将提示信息框挂载到中导入组件并将组件挂载到实例给用户列表中的删除按钮添加事件并在事件处理函数中弹出确定取消窗最后再根据发送删除用户的请求弹出确定取消框是否删除用户请问是否要永久删除该用户删除提示确认删除取消如果用户点击确认则为如果用户点击取消则获取的就是的错误消息已经取消删除发送请求根据完成删除操作判断如果删除失败就做提示删除用户失败修改成功的提示删除用户成功重新请求最新的数据推送代码创建子分支并将代码推送到码云创建子分支将代码添加到暂存区将代码提交并注释添加完成用户列表功能将本地的分支推送到码云将分支代码合并到切换到合并将本地分支的代码推送到码云创建子分支创建子分支将本地的分支推送到码云权限列表添加权限列表路由创建权限管理组件并在添加对应的路由规则添加面包屑导航在中添加面包屑组件展示导航路径显示数据在中添加一个数据在中提供一个方法发送请求获取权限列表数据在中调用这个方法获取数据权限名称路径权限等级一级权限二级权限三级权限列表形式的权限如果返回状态为异常状态则报错并返回获取权限列表失败如果返回状态正常将请求的数据保存在中角色列表添加角色列表路由添加角色列表子组件并添加对应的规则添加面包屑导航在中添加面包屑组件展示导航路径显示数据在中添加一个数据在中提供一个方法发送请求获取权限列表数据在中调用这个方法获取数据角色列表区域是年月提供的新特性如果这是一个嵌套的数据是必须添加的属性添加展开列角色名称角色描述操作编辑删除分配权限如果返回状态为异常状态则报错并返回获取角色列表失败如果返回状态正常将请求的数据保存在中补充说明之前学习过类似的添加角色删除角色编辑角色请参照之前编写过的代码还有接口文档完成效果生成权限列表使用三重嵌套循环生成权限下拉列表添加展开列渲染一级权限渲染二三级权限通过循环嵌套渲染二级权限美化样式通过设置中的样式解决三级权限换行的问题通过给一级权限添加的方式解决一级权限垂直居中的问题二级权限也类似添加因为需要给多个内容添加可以将这个样式设置为一个添加权限删除功能给每一个权限的添加属性是的权限右侧出现图标再给添加绑定事件处理函数弹窗提示用户是否要删除请问是否要删除该权限删除提示确认删除取消如果用户点击确认则为如果用户点击取消则获取的就是的错误消息已经取消删除用户点击了确定表示真的要删除当发送请求之后返回的数据就是最新的角色权限信息删除角色权限失败无需再重新加载所有权限只需要对现有的角色权限进行更新即可完成权限分配功能先给分配权限按钮添加事件分配权限在函数中请求权限树数据并显示对话框当点击分配权限按钮时展示对应的对话框获取所有权限的数据如果返回状态为异常状态则报错并返回获取权限树失败如果返回状态正常将请求的数据保存在中添加分配权限对话框并添加绑定数据这是一段信息取消确定完成树形结构弹窗在中引入注册分配权限对话框分配权限树形组件显示复选框设置选中节点对应的值是否默认展开所有节点设置默认选中项的数组设置引用取消确定角色列表数据控制分配权限对话框的显示权限树数据树形控件的属性绑定对象通过设置树形节点文本展示设置通过属性展示子节点信息设置树形控件中默认选中的内容保存正在操作的角色如果返回状态为异常状态则报错并返回获取角色列表失败如果返回状态正常将请求的数据保存在中弹窗提示用户是否要删除请问是否要删除该权限删除提示确认删除取消如果用户点击确认则为如果用户点击取消则获取的就是的错误消息已经取消删除用户点击了确定表示真的要删除当发送请求之后返回的数据就是最新的角色权限信息删除角色权限失败无需再重新加载所有权限只需要对现有的角色权限进行更新即可将保存起来以供保存权限时使用获取所有权限的数据如果返回状态为异常状态则报错并返回获取权限树失败如果返回状态正常将请求的数据保存在中调用进行递归将三级权限添加到数组中当点击分配权限按钮时展示对应的对话框该函数会获取到当前角色的所有三级权限并添加到中如果当前节点不包含属性则表示为三级权限递归调用当用户关闭树形权限对话框的时候清除掉所有选中状态当用户在树形权限对话框中点击确定将用户选择的权限发送请求进行更新获取所有选中及半选的内容将数组转换为拼接的字符串发送请求完成更新分配权限失败分配权限成功关闭对话框分配角色打开完成分配角色的功能添加分配角色对话框分配角色对话框分配角色当前的用户当前的角色分配新角色取消确定给分配角色按钮添加点击事件点击之后弹出一个对话框进行角色分配分配角色分配角色控制显示分配角色对话框保存正在操作的那个用户信息保存所有的角色信息保存用户选中的角色保存起来以供后续使用获取所有的角色信息以备下拉列表使用发送请求根据完成删除操作判断如果删除失败就做提示获取角色列表失败展示分配角色对话框在中引入注册角色选择下拉框设置用户选中角色之后的绑定数据请选择角色显示文本选中值当用户点击对话框中的确定之后完成分配角色的操作分配角色对话框分配角色当前的用户当前的角色分配新角色角色选择下拉框设置用户选中角色之后的绑定数据请选择角色显示文本选中值取消确定当用户点击确定按钮之后判断用户是否选择了需要分配的角色请选择需要分配的角色发送请求完成分配角色的操作判断如果删除失败就做提示分配角色失败分配角色成功关闭对话框当关闭对话框的时候重置下拉框中的内容将代码推送到码云将代码推送到暂存区将代码提交到仓库完成了权限功能开发将分支代码推送到码云将代码合并到将代码推送到码云四今日目标完成商品分类完成参数管理商品分类新建分支新建分支并推送到码云创建子级路由创建子级路由组件并设置路由规则添加组件基本布局在组件中添加面包屑导航以及卡片视图中的添加分类按钮商品分类面包屑导航首页商品管理商品分类卡片视图区域添加分类按钮区域添加分类分类表格分页请求分类数据请求分类数据并将数据保存在中商品分类数据列表查询分类数据的条件保存总数据条数获取商品分类数据获取商品列表数据失败将数据列表赋值给保存总数据条数使用插件展示数据使用第三方插件展示分类数据在控制台中点击依赖安装依赖运行依赖输入点击安装打开导入全局注册组件使用组件展示分类数据分类表格设置数据源设置表格中列配置信息是否有复选框是否展开数据是否设置索引列设置索引列头是否添加纵向边框是否鼠标悬停高亮在数据中添加分类名称自定义数据列使用定义模板列并添加自定义列先在中添加一个列分类名称将该列设置为模板列设置该列模板的名称为是否有效排序操作是否有效区域设置对应的模板列与中设置的一致排序一级二级三级操作编辑删除完成分页功能分页添加对应的事件函数当发生改变时触发当发生改变时触发完成添加分类添加分类按钮区域添加分类添加分类对话框添加分类添加分类表单分类名称父级分类取消确定用来显示或隐藏添加分类对话框添加分类的表单数据对象分类名称添加分类的父级则表示父级为添加一级分类添加分类的等级则表示添加一级分类添加分类校验规则验证规则请输入分类名称保存级父级分类的列表调用获取分类列表显示添加分类对话框获取父级分类数据列表获取商品分类列表数据失败添加级联菜单显示父级分类先导入组件并注册然后添加使用级联菜单组件父级分类鼠标悬停触发级联设置级联菜单绑定数据指定级联菜单数据源用来配置数据显示的规则提供号完成删除文本功能是否可以选中任意一级的菜单添加数据配置级联菜单中数据如何展示绑定用户选择的分类值级联菜单中选择项发生变化时触发如果用户选择了父级分类则将数组中的最后一项设置为父级分类也要跟着发生变化当关闭添加分类对话框时重置表单点击确定完成添加分类发送请求完成添加分类添加分类失败添加分类成功推送代码制作完添加分类之后将代码提交到仓库推送到码云将分支合并到完成商品分类参数管理只允许给三级分类内容设置参数参数分为动态参数和静态参数属性添加子级组件添加子组件并在中引入该组件并设置路由规则完成组件基本布局完成组件的基本布局其中警告提示信息使用了在引入该组件并注册分类参数面包屑导航首页商品管理分类参数卡片视图区域警告区域是否展示号显示图标注意只允许为第三级分类设置相关参数选择商品分类区域选择商品分类选择商品分类的级联选择框完成级联选择框完成商品分类级联选择框选择商品分类区域选择商品分类选择商品分类的级联选择框分类列表用户在级联下拉菜单中选中的分类配置级联菜单中数据如何展示获取所有的商品分类列表获取分类数据失败将数据列表赋值给保存总数据条数当用户在级联菜单中选择内容改变时触发展示参数展示动态参数数据以及静态属性数据页签区域添加动态参数的面板将标签页改为动态参数添加参数动态参数表格展开行索引列参数名称操作编辑删除添加静态属性的面板将标签页改为静态属性添加属性静态属性表格展开行索引列属性名称操作编辑删除页签激活显示的页签项用来保存动态参数数据用来保存静态属性数据当用户在级联菜单中选择内容改变时触发发送请求根据用户选择的三级分类和面板获取参数数据获取参数列表数据失败获取的是动态参数获取的是静态属性添加计算属性用来获取按钮禁用与否获取选中的三级分类添加参数完成添加参数或属性添加参数或属性对话框添加添加表单取消确定控制添加参数属性对话框的显示或隐藏添加参数的表单数据对象添加表单验证规则请输入名称当用户点击对话框中的确定时校验表单校验不通过校验通过发送请求完成添加参数或者属性添加数据失败添加数据成功编辑参数完成编辑参数或属性修改参数或属性对话框修改添加表单取消确定控制修改参数属性对话框的显示或隐藏修改参数属性对话框中的表单修改表单的验证规则请输入名称发起请求获取需要修改的那个参数数据获取参数数据失败显示修改参数属性对话框当关闭修改参数属性对话框时验证表单发送请求完成修改获取参数数据失败修改数据成功删除参数删除参数或属性给两个删除按钮添加事件删除删除添加对应的事件处理函数根据删除对应的参数或属性弹窗提示用户是否要删除请问是否要删除该删除提示确认删除取消如果用户点击确认则为如果用户点击取消则获取的就是的错误消息已经取消删除没有取消就是要删除发送请求完成删除删除参数数据失败删除数据成功五今日目标完成参数管理推送代码到码云制作商品列表页面制作商品添加页面参数管理展示动态参数可选项动态参数可选项展示及操作在获取动态参数的方法中进行处理将获取到的数据中的字符串转换为数组添加一个值控制文本框的显示或者隐藏添加一个保存文本框值然后再修改展开行中的代码生成和文本框以及添加按钮展开行循环生成的输入框添加按钮最后对应文本框的事件和按钮的事件添加处理函数当用户在文本框中按下键或者焦点离开时都会触发执行判断用户在文本框中输入的内容是否合法如果用户输入了真实合法的数据需要保存起来用户点击添加按钮时触发在页面上元素被重新渲染之后调用回调函数的代码让文本框自动获得焦点添加删除可选项添加删除动态参数可选项给添加删除事件在中添加新增删除事件处理函数当用户在文本框中按下键或者焦点离开时都会触发执行判断用户在文本框中输入的内容是否合法如果用户输入了真实合法的数据需要保存起来删除对应索引的参数可选项调用函数完成保存可选项的操作封装函数完成保存可选项的操作发起请求保存参数细项修改参数项失败修改参数项成功补充当用户在级联选择框中选中了非三级分类时需要清空表格中数据如果用户选择的不是三级分类补充当完成了动态参数可选项的功能之后我们也需要一样的方式完成静态属性可选项的功能此时我们只需要将动态参数可选项中的展开行复制到静态属性的表格中即可推送代码到码云添加到暂存求提交到本地仓库完成了分类参数开发推送到码云切换到合并到创建子分支推送至码云商品列表制作商品列表基本结构添加子级路由组件以及对应的规则并设置组件的基本机构打开添加下面的代码打开组件添加下列代码商品列表面包屑导航首页商品管理商品列表卡片视图区域请输入内容添加商品数据展示添加数据表格展示数据以及分页功能的实现搜索功能的实现在中添加过滤器创建过滤器将秒数过滤为年月日时分秒卡片视图区域搜索栏请输入内容添加商品表格区域商品名称商品价格元商品重量创建时间操作分页绑定数据以及添加方法查询参数保存商品列表信息总数据条数根据分页获取对应的商品列表获取商品列表失败获取商品列表成功当页号发生改变时更改重新请求当页码发生改变时更改重新请求实现删除商品绑定按钮点击事件事件函数代码编写根据删除对应的参数或属性弹窗提示用户是否要删除请问是否要删除该商品删除提示确认删除取消如果用户点击确认则为如果用户点击取消则获取的就是的错误消息已经取消删除没有取消就是要删除发送请求完成删除删除商品失败删除商品成功添加商品添加编程式导航在中添加编程式导航并创建添加商品路由组件及规则在中添加编程式导航添加商品在中引入并添加路由规则布局组件布局过程中需要使用组件在中引入并注册该组件并在中给组件设置全局样式然后再在中进行页面布局添加商品面包屑导航首页商品管理添加商品卡片视图区域消息提示添加商品信息步骤条组件居中效果基本信息商品参数商品属性商品图片商品内容完成栏区域必须是的子节点设置栏为左右结构栏表单设置在文本框上方基本信息商品名称商品价格商品重量商品数量商品分类选择商品分类的级联选择框商品参数商品属性商品图片商品内容保存步骤条激活项索引添加商品的表单数据对象验证规则请输入商品名称请输入商品价格请输入商品重量请输入商品数量请选择商品分类用来保存分类数据配置级联菜单中数据如何展示获取商品分类数据失败如果用户选择的不是三级分类该次选择无效因为必须选择三级分类添加栏切换验证也就是说不输入某些内容无法切换到别的栏首先给添加切换前事件再到编写事件函数在栏切换之前触发两个形参为切换前后的栏在第一个标签页的时候请选择商品的分类请输入商品名称请输入商品价格请输入商品重量请输入商品数量展示信息展示商品参数信息商品属性信息在商品参数信息展示中使用的组件打开引入组件并注册组件在用户点击栏时触发事件在参数信息商品属性面板中添加循环生成结构的代码商品参数渲染表单项使用数组渲染复选框组商品属性循环生成静态属性在数据中添加保存动态参数和静态属性的数组动态参数列表静态属性列表当用户点击切换栏时触发发送请求获取动态参数获取动态参数列表失败将字符串转换为数组发送请求获取静态属性获取静态属性列表失败添加计算属性获取三级分类六今日目标完成商品添加完成订单列表完成数据统计展示添加商品完成图片上传使用组件完成图片上传在中引入组件并注册因为组件进行图片上传的时候并不是使用发送请求所以我们需要手动为上传图片的请求添加即为组件添加属性在页面中添加组件并设置对应的事件和属性商品图片商品图片上传指定图片上传接口当点击图片时会触发该事件进行预览操作处理图片预览当用户点击图片右上角的号时触发执行当用户点击上传图片并成功上传时触发设置预览图片的方式设置上传图片的请求头点击上传在卡片视图下面添加对话框用来预览图片预览图片对话框图片预览在中添加数据添加商品的表单数据对象上传图片数组上传图片的地址图片上传组件的请求头对象保存预览图片的地址控制预览图片对话框的显示和隐藏在中添加事件处理函数当用户点击图片进行预览时执行处理图片预览形参就是用户预览的那个文件显示预览图片对话框当用户点击号删除时执行形参就是用户点击删除的文件获取用户点击删除的那个图片的临时路径使用来查找符合条件的索引移除索引对应的图片当上传成功时触发执行形参就是上传成功之后服务器返回的结果将服务器返回的临时路径保存到表单的数组中使用富文本插件想要使用富文本插件就必须先从依赖安装该插件引入并注册打开编写如下代码导入富文本编辑器导入的样式全局注册组件全局注册富文本组件使用富文本插件富文本编辑器组件商品内容富文本编辑器组件添加商品按钮添加商品在数据中添加添加商品的表单数据对象上传图片数组商品的详情介绍在样式中添加富文本编辑器的最小高度给添加商品按钮添加间距添加商品完成添加商品的操作在添加商品之前为了避免数组转换字符串之后导致级联选择器报错我们需要打开控制条点击依赖安装把进行深拷贝打开导入官方推荐将导入为给添加商品按钮绑定点击事件添加商品按钮添加商品编写点击事件完成商品添加请填写必要的表单项将进行深拷贝避免数组转换字符串之后导致级联选择器报错将从数组转换为字符串形式处理数组数组中需要包含商品的动态参数和静态属性将动态参数处理添加到将静态属性处理添加到发送请求完成商品的添加商品名称必须是唯一的添加商品失败添加商品成功编程式导航跳转到商品列表推送代码推送分支到码云将代码添加到暂存区将代码提交到本地仓库完成商品功能开发将代码推送到码云切换到主分支将分支代码合并到将推送到码云订单列表创建分支创建子分支并推送到码云创建子分支将分支推送到码云创建路由创建订单列表路由组件并添加路由规则在中新建文件夹新建组件组件中添加代码如下订单列表面包屑导航首页订单管理订单列表卡片视图区域搜索栏请输入内容查询条件打开导入并添加规则实现数据展示及分页卡片视图区域搜索栏请输入内容订单表格订单编号订单价格是否付款已付款未付款是否发货下单时间操作分页查询条件订单列表数据数据总条数获取订单列表数据失败制作省市区县联动打开今天的资料找到素材文件夹复制文件到文件夹中然后导入文件具体代码如下给修改地址按钮添加点击事件添加修改地址对话框在卡片视图下方添加修改地址对话框修改收货地址添加表单省市区县详细地址取消确定部分的代码控制修改地址对话框的显示和隐藏修改收货地址的表单请选择省市区县请输入详细地址将导入的数据保存起来当用户点击修改收货地址按钮时触发制作物流进度对话框因为我们使用的是中提供的组件所以需要导入并注册组件打开编写代码会进行导入和注册打开文件添加代码实现物流进度对话框物流信息进度对话框物流进度时间线组件控制物流进度对话框的显示和隐藏保存物流信息发送请求获取物流数据获取物流进度失败显示对话框推送代码将分支代码推送至码云将代码添加到暂存区将代码提交到本地仓库完成订单列表功能开发将代码推送到码云切换到主分支将分支代码合并到将推送到码云数据统计创建子分支创建子分支并推送到码云创建子分支将分支推送到码云创建路由创建数据统计路由组件并添加路由规则在中新建文件夹新建组件组件中添加代码如下数据报表面包屑导航首页数据统计数据报表卡片视图区域打开导入并设置路由规则导入并使用数据报表面包屑导航首页数据统计数据报表卡片视图区域导入导入需要跟请求的折线图数据合并的用户来源在页面元素加载完毕之后执行的钩子函数基于准备好的初始化实例准备数据和配置项发送请求获取折线图数据获取折线图数据失败合并和使用获取的数据展示图表推送代码推送分支到码云将代码添加到暂存区将代码提交到本地仓库完成数据报表功能开发将代码推送到码云切换到主分支将分支代码合并到将推送到码云七今日目标完成项目优化完成项目上线项目优化实现步骤生成打包报告根据报告优化项目第三方库启用组件按需加载路由懒加载首页内容定制添加进度条给项目添加进度条效果先打开项目控制台打开依赖安装打开编写如下代码导入进度条插件导入进度条样式请求在到达服务器之前先会调用中的这个回调函数来添加请求头信息当进入拦截器表示发送了请求我们就开启进度条为请求头对象添加验证的字段必须返回在拦截器中隐藏进度条当进入拦截器表示请求已经结束我们就结束进度条根据报错修改代码根据的警告提示更改对应的代码在文件中更改设置将每行代码的文字数量更改为执行安装一个插件在项目阶段移除所有的信息打开项目控制台点击依赖开发依赖输入安装打开编辑代码如下项目发布阶段需要用到的插件判断是开发还是发布阶段发布阶段生成打包报告命令行形式生成打包报告在控制台生成打包报告点击任务运行运行完毕之后点击右侧分析控制台面板查看报告修改的默认配置默认情况下生成的项目隐藏了配置项如果我们需要配置需要通过来配置在项目根目录中创建文件发布模式找到默认的打包入口调用则是删除默认的打包入口添加新的打包入口开发模式补充可以通过链式编程的形式修改配置可以通过操作对象的形式修改配置加载外部默认情况下依赖项的所有第三方包都会被打包到文件中导致该文件过大那么我们可以通过排除这些包使它们不被打包到文件中发布模式找到默认的打包入口调用则是删除默认的打包入口添加新的打包入口使用设置排除项开发模式设置好排除之后为了使我们可以使用等内容我们需要加载外部的形式解决引入依赖项打开开发入口文件删除掉默认的引入代码导入字体图标导入全局样式导入第三方组件导入进度条插件导入进度条样式导入导入富文本编辑器导入的样式请求在到达服务器之前先会调用中的这个回调函数来添加请求头信息当进入拦截器表示发送了请求我们就开启进度条为请求头对象添加验证的字段必须返回在拦截器中隐藏进度条当进入拦截器表示请求已经结束我们就结束进度条全局注册组件全局注册富文本组件创建过滤器将秒数过滤为年月日时分秒然后打开添加外部引入代码电商后台管理系统的样式表文件富文本编辑器的样式表文件的样式表文件富文本编辑器的文件的文件定制首页内容开发环境的首页和发布环境的首页展示内容的形式有所不同如开发环境中使用的是加载第三方包而发布环境则是使用那么首页也需根据环境不同来进行不同的实现我们可以通过插件的方式来定制首页内容打开编写代码如下使用插件添加参数使用插件添加参数然后在中使用插件判断是否为发布环境并定制首页内容电商后台管理系统的样式表文件的文件路由懒加载当路由被访问时才加载对应的路由文件就是路由懒加载路由懒加载实现步骤安装打开控制台点击依赖安装依赖开发依赖搜索点击安装在中声明该插件打开项目发布阶段需要用到的插件判断是开发还是发布阶段发布阶段配置路由懒加载插件将路由更改为按需加载的形式打开更改引入组件代码如下项目上线通过创建服务器在同级创建一个文件夹存放服务器使用终端打开文件夹输入命令初始化包之后输入命令打开目录复制文件夹粘贴到中在文件夹中创建文件编写代码如下然后再次在终端中输入开启压缩打开文件夹的终端输入命令打开编写代码配置服务配置服务一般是后台进行处理前端开发人员了解即可首先需要申请证书进入官网在后台导入证书打开今天资料素材复制素材中的两个文件到中打开文件编写代码导入证书并开启服务创建配置对象设置公钥和私钥启动服务注意因为我们使用的证书有问题所以无法正常使用服务使用管理应用打开文件夹的终端输入命令使用启动项目在终端中输入命令自定义名称查看项目列表命令重启项目自定义名称停止项目自定义名称删除项目自定义名称八今日目标概述基本使用使用完成案例概述是实现组件全局状态数据管理的一种机制可以方便的实现组件之间的数据共享使用管理数据的好处能够在中集中管理共享的数据便于开发和后期进行维护能够高效的实现组件之间的数据共享提高开发效率存储在中的数据是响应式的当数据发生改变时页面中的数据也会同步更新的基本使用创建带有的项目打开终端输入命令当项目仪表盘打开之后我们点击页面左上角的项目管理下拉列表再点击项目管理器点击创建项目如下图所示第一步设置项目名称和包管理器第二步设置手动配置项目第三步设置功能项第四步创建项目使用完成计数器案例打开刚刚创建的项目找到目录中的组件将代码重新编写如下在文件夹中创建组件代码如下当前最新的值为在文件夹中创建组件代码如下当前最新的值为最后在项目根目录与平级中创建文件编写代码如下中的核心特性提供唯一的公共数据源所有共享的数据都要统一放到中的中存储例如打开项目中的文件在对象中可以添加我们要共享的数据如在组件中访问的方式全局数据名称如先按需导入函数然后数据映射为计算属性全局数据名称用于修改变更中的数据使用方式打开文件在中添加代码如下第一个形参永远都是也就是对象第二个形参是调用时传递的参数然后在中给按钮添加事件代码如下使用函数调用中的对应函数第一个参数就是我们要调用的中的函数名第二个参数就是传递给函数的参数使用的第二种方式如下获得映射的函数当点击按钮时触发函数调用函数完成对数据的操作在中不能编写异步的代码会导致调试器的显示出错在中我们可以使用来执行异步操作操作步骤如下打开文件修改如下然后在中给按钮添加事件代码如下第二种方式如下获得映射的函数当点击按钮时触发函数调用函数完成对数据的操作获得映射的函数用于对中的数据进行加工处理形成新的数据它只会包装中保存的数据并不会修改中保存的数据当中的数据发生变化时生成的内容也会随之变化打开文件添加如下添加了一个的属性最新的值为然后打开中添加插值表达式使用或者也可以在中导入并将之映射为计算属性案例初始化案例首先使用初始化一个使用的案例然后打开文件夹创建一个文件文件代码如下再接着打开添加的引入如下导入组件库导入组件库的样式表安装组件库再接着打开添加请求文件获取数据的代码如下所有任务列表文本输入框中的值最后代开文件将中的数据获取并展示请输入任务添加事项复选框删除链接删除区域未完成的任务个数条剩余操作按钮全部未完成已完成把已经完成的任务清空清除已完成完成添加事项首先打开文件给添加事项按钮绑定点击事件编写处理函数绑定事件添加事项编写事件处理函数向列表中新增事项文本框内容不能为空然后打开编写所有任务列表文本输入框中的值下一个添加列表项将创建好的事项添加到数组中将值自增完成删除事项首先打开文件给删除按钮绑定点击事件编写处理函数绑定事件删除编写事件处理函数根据删除事项然后打开编写根据删除事项数据完成选中状态的改变首先打开文件给复选按钮绑定点击事件编写处理函数绑定事件编写事件处理函数复选框状态改变时触发根据更改事项状态然后打开编写根据改变对应事项的状态剩余项统计打开添加完成剩余项统计打开使用展示剩余项使用映射好的计算属性展示剩余项未完成的任务个数条剩余导入映射清除完成事项首先打开文件给清除已完成按钮绑定点击事件编写处理函数把已经完成的任务清空清除已完成编写事件处理函数清除已经完成的事项然后打开编写点击选项卡切换事项打开给全部未完成已完成三个选项卡绑定点击事件编写处理函数并将列表数据来源更改为一个操作按钮全部未完成已完成编写事件处理函数以及映射计算属性点击全部已完成未完成时触发打开添加保存默认的选项卡值当用户点击全部已完成未完成选项卡时触发',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-13 20:15:07',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/inject/custom.css"><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ramsayi.asia/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Ramsayi</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/wechat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/wechat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 1.05rem;">Axios<sup>1</sup></a><a href="/tags/Bilibili/" style="font-size: 1.05rem;">Bilibili<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>35</sup></a><a href="/tags/C-%E7%90%86%E8%AE%BA%E7%BB%BC%E5%90%88%E4%BD%9C%E4%B8%9A/" style="font-size: 1.05rem;">C++理论综合作业<sup>4</sup></a><a href="/tags/Curl/" style="font-size: 1.05rem;">Curl<sup>1</sup></a><a href="/tags/Dart/" style="font-size: 1.05rem;">Dart<sup>115</sup></a><a href="/tags/ECharts/" style="font-size: 1.05rem;">ECharts<sup>4</sup></a><a href="/tags/Excel/" style="font-size: 1.05rem;">Excel<sup>1</sup></a><a href="/tags/FFmpeg/" style="font-size: 1.05rem;">FFmpeg<sup>1</sup></a><a href="/tags/Flutter/" style="font-size: 1.05rem;">Flutter<sup>115</sup></a><a href="/tags/Getx/" style="font-size: 1.05rem;">Getx<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>7</sup></a><a href="/tags/Jupyter/" style="font-size: 1.05rem;">Jupyter<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>1</sup></a><a href="/tags/OneDrive/" style="font-size: 1.05rem;">OneDrive<sup>1</sup></a><a href="/tags/Powershell/" style="font-size: 1.05rem;">Powershell<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>10</sup></a><a href="/tags/React/" style="font-size: 1.05rem;">React<sup>9</sup></a><a href="/tags/SARscape/" style="font-size: 1.05rem;">SARscape<sup>1</sup></a><a href="/tags/Sentinel/" style="font-size: 1.05rem;">Sentinel<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>7</sup></a><a href="/tags/Ubuntu/" style="font-size: 1.05rem;">Ubuntu<sup>2</sup></a><a href="/tags/Unity3D/" style="font-size: 1.05rem;">Unity3D<sup>1</sup></a><a href="/tags/VMware/" style="font-size: 1.05rem;">VMware<sup>1</sup></a><a href="/tags/Vim/" style="font-size: 1.05rem;">Vim<sup>1</sup></a><a href="/tags/Vue2/" style="font-size: 1.05rem;">Vue2<sup>2</sup></a><a href="/tags/Vue3/" style="font-size: 1.05rem;">Vue3<sup>10</sup></a><a href="/tags/You-Get/" style="font-size: 1.05rem;">You-Get<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 1.05rem;">uniapp<sup>1</sup></a><a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 1.05rem;">下载<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>9</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem;">博客<sup>5</sup></a><a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 1.05rem;">快捷键<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 1.05rem;">终端<sup>3</sup></a><a href="/tags/%E8%99%9A%E5%B9%BB5/" style="font-size: 1.05rem;">虚幻5<sup>1</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.05rem;">虚拟机<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 1.05rem;">视频<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">19</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">113</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" itemprop="url">技术学习</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Vue/" itemprop="url">Vue</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Vue2/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Vue2</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Vue全家桶-项目实战</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-06-10T13:29:12.000Z" title="发表于 2022-06-10 21:29:12">2022-06-10</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-01-13T12:15:07.718Z" title="更新于 2024-01-13 20:15:07">2024-01-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">33.4k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>155分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="Vue全家桶-项目实战"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为江苏"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>江苏</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/1386d0b9/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/vue2.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://ramsayi.asia/posts/1386d0b9/"><header><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" itemprop="url">技术学习</a><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Vue/" itemprop="url">Vue</a><a href="/tags/Vue2/" tabindex="-1" itemprop="url">Vue2</a><h1 id="CrawlerTitle" itemprop="name headline">Vue全家桶-项目实战</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Ramsayi</span><time itemprop="dateCreated datePublished" datetime="2022-06-10T13:29:12.000Z" title="发表于 2022-06-10 21:29:12">2022-06-10</time><time itemprop="dateCreated datePublished" datetime="2024-01-13T12:15:07.718Z" title="更新于 2024-01-13 20:15:07">2024-01-13</time></header><h2 id="一、今日目标"><a href="#一、今日目标" class="headerlink" title="一、今日目标"></a>一、今日目标</h2><p>1.初始化项目 2.基于 Vue 技术栈进行项目开发 3.使用 Vue 的第三方组件进行项目开发 4.理解前后端分离开发模式</p>
<h3 id="1-电商业务概述"><a href="#1-电商业务概述" class="headerlink" title="1.电商业务概述"></a>1.电商业务概述</h3><p>客户使用的业务服务：PC 端，小程序，移动 web，移动 app<br>管理员使用的业务服务：PC 后台管理端。<br>PC 后台管理端的功能：管理用户账号（登录，退出，用户管理，权限管理），商品管理（商品分类，分类参数，商品信息，订单），数据统计<br>电商后台管理系统采用前后端分离的开发模式<br>前端项目是基于 Vue 的 SPA（单页应用程序）项目</p>
<p>前端技术栈:Vue,Vue-Router,Element-UI,Axios,Echarts<br>后端技术栈：Node.js,Express,Jwt(模拟 session),Mysql,Sequelize(操作数据库的框架)</p>
<h3 id="2-项目初始化"><a href="#2-项目初始化" class="headerlink" title="2.项目初始化"></a>2.项目初始化</h3><p>A.安装 Vue 脚手架<br>B.通过脚手架创建项目<br>C.配置路由<br>D.配置 Element-UI:在插件中安装，搜索 vue-cli-plugin-element<br>E.配置 Axios：在依赖中安装,搜索 axios(运行依赖)<br>F.初始化 git 仓库<br>G.将本地项目托管到 github 或者码云中</p>
<h3 id="3-码云相关操作"><a href="#3-码云相关操作" class="headerlink" title="3.码云相关操作"></a>3.码云相关操作</h3><p>A.注册登录码云账号<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E6%B3%A8%E5%86%8C%E7%A0%81%E4%BA%91.jpg"></p>
<p>B.安装 git<br>在 Windows 上使用 Git，可以从 Git 官网直接下载安装程序进行安装。<br>测试命令：git –version</p>
<p>C.点击网站右上角“登录”，登录码云，并进行账号设置<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E7%A0%81%E4%BA%91%E7%82%B9%E5%87%BB%E8%AE%BE%E7%BD%AE.jpg"></p>
<p>D.在本地创建公钥：在终端运行：ssh-keygen -t rsa -C “<a href="mailto:&#120;&#120;&#x78;&#64;&#120;&#120;&#120;&#46;&#x63;&#111;&#109;">&#120;&#120;&#x78;&#64;&#120;&#120;&#120;&#46;&#x63;&#111;&#109;</a>“<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BA%E5%85%AC%E9%92%A5.jpg"><br>E.找到公钥地址：<br>Your identification has been saved in &#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.<br>Your public key has been saved in &#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.pub.<br>当我们创建公钥完毕之后，请注意打印出来的信息“Your public key has been saved in”<br>&#x2F;c&#x2F;Users&#x2F;My&#x2F;.ssh&#x2F;id_rsa.pub : c 盘下面的 Users 下面的 My 下面的.ssh 下面的 id_rsa.pub 就是我们创建好的公钥了</p>
<p>E.打开 id_rsa.pub 文件，复制文件中的所有代码，点击码云中的 SSH 公钥，将生成的公钥复制到公钥中<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/pub%E6%96%87%E4%BB%B6.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/ssh%E5%85%AC%E9%92%A5.jpg"><br>G.测试公钥：打开终端，输入命令<br>ssh -T <a href="mailto:&#x67;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#x65;&#101;&#x2e;&#x63;&#111;&#109;">&#x67;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#x65;&#101;&#x2e;&#x63;&#111;&#109;</a><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/success.jpg"></p>
<p>H.将本地代码托管到码云中<br>点击码云右上角的+号-&gt;新建仓库<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93.jpg"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%932.jpg"></p>
<p>I.进行 git 配置：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/config.jpg"><br>打开项目所在位置的终端，进行 git 仓库关联<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E9%A1%B9%E7%9B%AE%E7%BB%88%E7%AB%AF%E6%89%A7%E8%A1%8C%E5%85%B3%E8%81%94.jpg"></p>
<h3 id="4-配置后台项目"><a href="#4-配置后台项目" class="headerlink" title="4.配置后台项目"></a>4.配置后台项目</h3><p>A.安装 phpStudy 并导入 mysql 数据库数据<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/phpStudy.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/mysql.jpg"><br>B.安装 nodeJS，配置后台项目,从终端打开后台项目 vue_api_server<br>然后在终端中输入命令安装项目依赖包：npm install</p>
<p>C.使用 postman 测试 api 接口<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/postman.jpg"></p>
<h3 id="5-实现登录功能"><a href="#5-实现登录功能" class="headerlink" title="5.实现登录功能"></a>5.实现登录功能</h3><p>A.登录状态保持<br>如果服务器和客户端同源，建议可以使用 cookie 或者 session 来保持登录状态<br>如果客户端和服务器跨域了，建议使用 token 进行维持登录状态。</p>
<p>B.登录逻辑：<br>在登录页面输入账号和密码进行登录，将数据发送给服务器<br>服务器返回登录的结果，登录成功则返回数据中带有 token<br>客户端得到 token 并进行保存，后续的请求都需要将此 token 发送给服务器，服务器会验证 token 以保证用户身份。</p>
<p>C.添加新分支 login，在 login 分支中开发当前项目 vue_shop：<br>打开 vue_shop 终端，使用 git status 确定当前项目状态。<br>确定当前工作目录是干净的之后，创建一个分支进行开发，开发完毕之后将其合并到 master<br>git checkout -b login<br>然后查看新创建的分支：git branch<br>确定我们正在使用 login 分支进行开发<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/branch.jpg"></p>
<p>然后执行 vue ui 命令打开 ui 界面，然后运行 serve，运行 app 查看当前项目效果<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/ui%E7%95%8C%E9%9D%A2%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE.jpg"></p>
<p>发现现在是一个默认页面，我们需要进行更改，打开项目的 src 目录，点击 main.js 文件（入口文件）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./plugins/element.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>再打开 App.vue(根组件)，将根组件的内容进行操作梳理(template 中留下根节点，script 中留下默认导出，去掉组件，style 中去掉所有样式)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>再打开 router.js(路由)，将 routes 数组中的路由规则清除，然后将 views 删除，将 components 中的 helloworld.vue 删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: []</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 components 文件夹中新建 Login.vue 组件,添加 template，script，style 标签,style 标签中的 scoped 可以防止组件之间的样式冲突，没有 scoped 则样式是全局的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login_container&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login_container &#123;</span><br><span class="line">  background-color: #2b5b6b;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在 router.js 中导入组件并设置规则<br>在 App.vue 中添加路由占位符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>当我们给 Login.vue 中的内容添加样式的时候，会报错“缺少 less-loader”，需要配置 less 加载器（开发依赖），安装 less(开发依赖)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/less.jpg"><br>然后需要添加公共样式，在 assets 文件夹下面添加 css 文件夹，创建 global.css 文件,添加全局样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局样式表 */</span></span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 main.js 中导入 global.css，使得全局样式生效 import “.&#x2F;css&#x2F;global.css”<br>然后 Login.vue 中的根元素也需要设置撑满全屏（height:100%）<br>最终 Login.vue 文件中的代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login_container&quot;&gt;</span><br><span class="line">    &lt;!-- 登录盒子  --&gt;</span><br><span class="line">    &lt;div class=&quot;login_box&quot;&gt;</span><br><span class="line">      &lt;!-- 头像 --&gt;</span><br><span class="line">      &lt;div class=&quot;avatar_box&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;../logo.png&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 登录表单 --&gt;</span><br><span class="line">      &lt;el-form :model=&quot;loginForm&quot; ref=&quot;LoginFormRef&quot; :rules=&quot;loginFormRules&quot; label-width=&quot;0px&quot; class=&quot;login_form&quot;&gt;</span><br><span class="line">        &lt;!-- 用户名 --&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;username&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;loginForm.username&quot; prefix-icon=&quot;iconfont icon-user&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- 密码 --&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">          &lt;el-input type=&quot;password&quot; v-model=&quot;loginForm.password&quot; prefix-icon=&quot;iconfont icon-3702mima&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- 按钮 --&gt;</span><br><span class="line">        &lt;el-form-item class=&quot;btns&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;login&quot;&gt;登录&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;info&quot; @click=&quot;resetLoginForm&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //数据绑定</span><br><span class="line">      loginForm: &#123;</span><br><span class="line">        username: &#x27;admin&#x27;,</span><br><span class="line">        password: &#x27;123456&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //表单验证规则</span><br><span class="line">      loginFormRules: &#123;</span><br><span class="line">        username: [</span><br><span class="line">          &#123; required: true, message: &#x27;请输入登录名&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            min: 3,</span><br><span class="line">            max: 10,</span><br><span class="line">            message: &#x27;登录名长度在 3 到 10 个字符&#x27;,</span><br><span class="line">            trigger: &#x27;blur&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        password: [</span><br><span class="line">          &#123; required: true, message: &#x27;请输入密码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            min: 6,</span><br><span class="line">            max: 15,</span><br><span class="line">            message: &#x27;密码长度在 6 到 15 个字符&#x27;,</span><br><span class="line">            trigger: &#x27;blur&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //添加行为，</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //添加表单重置方法</span><br><span class="line">    resetLoginForm() &#123;</span><br><span class="line">      //this=&gt;当前组件对象，其中的属性$refs包含了设置的表单ref</span><br><span class="line">      //   console.log(this)</span><br><span class="line">      this.$refs.LoginFormRef.resetFields()</span><br><span class="line">    &#125;,</span><br><span class="line">    login() &#123;</span><br><span class="line">      //点击登录的时候先调用validate方法验证表单内容是否有误</span><br><span class="line">      this.$refs.LoginFormRef.validate(async valid =&gt; &#123;</span><br><span class="line">        console.log(this.loginFormRules)</span><br><span class="line">        //如果valid参数为true则验证通过</span><br><span class="line">        if (!valid) &#123;</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //发送请求进行登录</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.post(&#x27;login&#x27;, this.loginForm)</span><br><span class="line">        //   console.log(res);</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;登录失败:&#x27; + res.meta.msg) //console.log(&quot;登录失败:&quot;+res.meta.msg)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.$message.success(&#x27;登录成功&#x27;)</span><br><span class="line">        console.log(res)</span><br><span class="line">        //保存token</span><br><span class="line">        window.sessionStorage.setItem(&#x27;token&#x27;, res.data.token)</span><br><span class="line">        // 导航至/home</span><br><span class="line">        this.$router.push(&#x27;/home&#x27;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login_container &#123;</span><br><span class="line">  background-color: #2b5b6b;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.login_box &#123;</span><br><span class="line">  width: 450px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  transform: translate(-50%, -50%);</span><br><span class="line">  .avatar_box &#123;</span><br><span class="line">    height: 130px;</span><br><span class="line">    width: 130px;</span><br><span class="line">    border: 1px solid #eee;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    box-shadow: 0 0 10px #ddd;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%, -50%);</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    img &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      background-color: #eee;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.login_form &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding: 0 20px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.btns &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>其中我们有用到一下内容，需要进行进一步处理：</p>
<p>A.添加 element-ui 的表单组件<br>在 plugins 文件夹中打开 element.js 文件，进行 elementui 的按需导入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Form</span>, <span class="title class_">FormItem</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Input</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Form</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">FormItem</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br></pre></td></tr></table></figure>

<p>B.添加第三方字体<br>复制素材中的 fonts 文件夹到 assets 中,在入口文件 main.js 中导入 import ‘.&#x2F;fonts&#x2F;iconfont.css’<br>然后直接在 <el-input prefix-icon="iconfont icon-3702mima"></el-input><br>接着添加登录盒子</p>
<p>C.添加表单验证的步骤<br>1).给<code>&lt;el-form&gt;</code>添加属性:rules&#x3D;”rules”，rules 是一堆验证规则，定义在 script、中<br>2).在 script 中添加 rules：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123; <span class="title function_">data</span>(<span class="params"></span>)&#123;<span class="keyword">return</span>&#123;......, <span class="attr">rules</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: [</span><br><span class="line">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入活动名称&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">min</span>: <span class="number">3</span>, <span class="attr">max</span>: <span class="number">5</span>, <span class="attr">message</span>: <span class="string">&#x27;长度在 3 到 5 个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">region</span>: [</span><br><span class="line">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请选择活动区域&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;change&#x27;</span> &#125;</span><br><span class="line">          ]</span><br><span class="line">&#125;......</span><br></pre></td></tr></table></figure>

<p>3).通过<code>&lt;el-form-item&gt;</code>的 prop 属性设置验证规则<code>&lt;el-form-item label=&quot;活动名称&quot; prop=&quot;name&quot;&gt;</code></p>
<p>4.导入 axios 以发送 ajax 请求<br>打开 main.js，<code>import axios from &#39;axios&#39;;</code><br>设置请求的根路径：<code>axios.defaults.baseURL = &#39;http://127.0.0.1:8888/api/private/v1/&#39;;</code><br>挂载 axios：<code>Vue.prototype.$http = axios;</code></p>
<p>5.配置弹窗提示：<br>在 plugins 文件夹中打开 element.js 文件，进行 elementui 的按需导入<br><code>import &#123;Message&#125; from &#39;element-ui&#39;</code><br>进行全局挂载：<code>Vue.prototype.$message = Message;</code><br>在 login.vue 组件中编写弹窗代码：<code>this.$message.error(&#39;登录失败&#39;)</code></p>
<h3 id="6-登录成功之后的操作"><a href="#6-登录成功之后的操作" class="headerlink" title="6.登录成功之后的操作"></a>6.登录成功之后的操作</h3><p>A.登录成功之后，需要将后台返回的 token 保存到 sessionStorage 中<br>操作完毕之后，需要跳转到&#x2F;home</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//点击登录的时候先调用validate方法验证表单内容是否有误</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">LoginFormRef</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">loginFormRules</span>)</span><br><span class="line">        <span class="comment">//如果valid参数为true则验证通过</span></span><br><span class="line">        <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//发送请求进行登录</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(<span class="string">&#x27;login&#x27;</span>, <span class="variable language_">this</span>.<span class="property">loginForm</span>)</span><br><span class="line">        <span class="comment">//   console.log(res);</span></span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;登录失败:&#x27;</span> + res.<span class="property">meta</span>.<span class="property">msg</span>) <span class="comment">//console.log(&quot;登录失败:&quot;+res.meta.msg)</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        <span class="comment">//保存token</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">        <span class="comment">// 导航至/home</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>添加一个组件 Home.vue，并为之添加规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    this is home</span><br><span class="line">    &lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; 退出 &lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    logout() &#123;</span><br><span class="line">      window.sessionStorage.clear()</span><br><span class="line">      this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>添加路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>添加路由守卫<br>如果用户没有登录，不能访问&#x2F;home,如果用户通过 url 地址直接访问，则强制跳转到登录页面<br>打开 router.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Login.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Home.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//挂载路由导航守卫,to表示将要访问的路径，from表示从哪里来，next是下一个要做的操作</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) <span class="keyword">return</span> <span class="title function_">next</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取token</span></span><br><span class="line">  <span class="keyword">const</span> tokenStr = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!tokenStr) <span class="keyword">return</span> <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>实现退出功能<br>在 Home 组件中添加一个退出功能按钮,给退出按钮添加点击事件，添加事件处理代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">clear</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>A.处理 ESLint 警告<br>打开脚手架面板，查看警告信息<br>[图片]<br>默认情况下，ESLint 和 vscode 格式化工具有冲突，需要添加配置文件解决冲突。<br>在项目根目录添加 .prettierrc 文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>打开.eslintrc.js 文件，禁用对 space-before-function-paren 的检查:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;space-before-function-paren&#x27;</span> : <span class="number">0</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>B.合并按需导入的 element-ui</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Form</span>, <span class="title class_">FormItem</span>, <span class="title class_">Input</span>, <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Form</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">FormItem</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br><span class="line"><span class="comment">// 进行全局挂载：</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$message</span> = <span class="title class_">Message</span></span><br></pre></td></tr></table></figure>

<p>C.将代码提交到码云<br>新建一个项目终端,输入命令‘git status’查看修改过的与新增的文件内容<br>将所有文件添加到暂存区：git add .<br>将所有代码提交到本地仓库：git commit -m “添加登录功能以及&#x2F;home 的基本结构”<br>查看分支： git branch 发现所有代码都被提交到了 login 分支<br>将 login 分支代码合并到 master 主分支，先切换到 master：git checkout master<br>在 master 分支进行代码合并：git merge login<br>将本地的 master 推送到远端的码云：git push</p>
<p>推送本地的子分支到码云，先切换到子分支：git checkout 分支名<br>然后推送到码云：git push -u origin 远端分支名</p>
<h2 id="二、今日目标"><a href="#二、今日目标" class="headerlink" title="二、今日目标"></a>二、今日目标</h2><p>1.实现后台首页的基本布局 2.实现左侧菜单栏 3.实现用户列表展示 4.实现添加用户</p>
<h3 id="1-后台首页基本布局"><a href="#1-后台首页基本布局" class="headerlink" title="1.后台首页基本布局"></a>1.后台首页基本布局</h3><p>打开 Home.vue 组件，进行布局：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-container class=&quot;home-container&quot;&gt;</span><br><span class="line">  &lt;!-- 头部区域 --&gt;</span><br><span class="line">  &lt;el-header&gt;Header&lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; 退出 &lt;/el-button&gt;&lt;/el-header&gt;</span><br><span class="line">  &lt;!-- 页面主体区域 --&gt;</span><br><span class="line">  &lt;el-container&gt;</span><br><span class="line">    &lt;!-- 侧边栏 --&gt;</span><br><span class="line">    &lt;el-aside width=&quot;200px&quot;&gt;Aside&lt;/el-aside&gt;</span><br><span class="line">    &lt;!-- 主体结构 --&gt;</span><br><span class="line">    &lt;el-main&gt;Main&lt;/el-main&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/el-container&gt;</span><br></pre></td></tr></table></figure>

<p>默认情况下，跟 element-ui 组件同名的类名可以帮助我们快速的给对应的组件添加样式，如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.home-container</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-header</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#373d41</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-aside</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#333744</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-main</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eaedf1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-顶部布局，侧边栏布局"><a href="#2-顶部布局，侧边栏布局" class="headerlink" title="2.顶部布局，侧边栏布局"></a>2.顶部布局，侧边栏布局</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-container class=&quot;home-container&quot;&gt;</span><br><span class="line">    &lt;!-- 头部区域 --&gt;</span><br><span class="line">    &lt;el-header&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;!-- 黑马logo --&gt;</span><br><span class="line">        &lt;img src=&quot;../heima.png&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">        &lt;!-- 顶部标题 --&gt;</span><br><span class="line">        &lt;span&gt;电商后台管理系统&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;el-button type=&quot;info&quot; @click=&quot;logout&quot;&gt; 退出 &lt;/el-button&gt;</span><br><span class="line">    &lt;/el-header&gt;</span><br><span class="line">    &lt;!-- 页面主体区域 --&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;!-- 侧边栏 --&gt;</span><br><span class="line">      &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">        &lt;!-- 侧边栏菜单 --&gt;</span><br><span class="line">        &lt;el-menu background-color=&quot;#333744&quot; text-color=&quot;#fff&quot; active-text-color=&quot;#ffd04b&quot;&gt;</span><br><span class="line">          &lt;!-- 一级菜单 --&gt;</span><br><span class="line">          &lt;el-submenu index=&quot;1&quot;&gt;</span><br><span class="line">            &lt;!-- 一级菜单模板 --&gt;</span><br><span class="line">            &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">              &lt;!-- 图标 --&gt;</span><br><span class="line">              &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">              &lt;!-- 文本 --&gt;</span><br><span class="line">              &lt;span&gt;导航一&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">            &lt;!-- 二级子菜单 --&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;1-4-1&quot;&gt;</span><br><span class="line">              &lt;!-- 二级菜单模板 --&gt;</span><br><span class="line">              &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                &lt;!-- 图标 --&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;!-- 文本 --&gt;</span><br><span class="line">                &lt;span&gt;子菜单一&lt;/span&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">          &lt;/el-submenu&gt;</span><br><span class="line">        &lt;/el-menu&gt;</span><br><span class="line">      &lt;/el-aside&gt;</span><br><span class="line">      &lt;!-- 主体结构 --&gt;</span><br><span class="line">      &lt;el-main&gt;Main&lt;/el-main&gt;</span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-axios-请求拦截器"><a href="#3-axios-请求拦截器" class="headerlink" title="3.axios 请求拦截器"></a>3.axios 请求拦截器</h3><p>后台除了登录接口之外，都需要 token 权限验证，我们可以通过添加 axios 请求拦截器来添加 token，以保证拥有获取数据的权限<br>在 main.js 中添加代码，在将 axios 挂载到 vue 原型之前添加下面的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求在到达服务器之前，先会调用use中的这个回调函数来添加请求头信息</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//为请求头对象，添加token验证的Authorization字段</span></span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-请求侧边栏数据"><a href="#4-请求侧边栏数据" class="headerlink" title="4.请求侧边栏数据"></a>4.请求侧边栏数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 左侧菜单数据</span><br><span class="line">      menuList: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    // 在created阶段请求左侧菜单数据</span><br><span class="line">    this.getMenuList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    logout() &#123;</span><br><span class="line">      window.sessionStorage.clear()</span><br><span class="line">      this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    async getMenuList() &#123;</span><br><span class="line">      // 发送请求获取左侧菜单数据</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;menus&#x27;)</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(res.meta.msg)</span><br><span class="line"></span><br><span class="line">      this.menuList = res.data</span><br><span class="line">      console.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>通过 v-for 双重循环渲染左侧菜单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-menu background-color=&quot;#333744&quot; text-color=&quot;#fff&quot; active-text-color=&quot;#ffd04b&quot;&gt;</span><br><span class="line">  &lt;!-- 一级菜单 --&gt;</span><br><span class="line">  &lt;el-submenu :index=&quot;item.id+&#x27;&#x27;&quot; v-for=&quot;item in menuList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">    &lt;!-- 一级菜单模板 --&gt;</span><br><span class="line">    &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">      &lt;!-- 图标 --&gt;</span><br><span class="line">      &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &lt;!-- 文本 --&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;item.authName&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;!-- 二级子菜单 --&gt;</span><br><span class="line">    &lt;el-menu-item :index=&quot;subItem.id+&#x27;&#x27;&quot; v-for=&quot;subItem in item.children&quot; :key=&quot;subItem.id&quot;&gt;</span><br><span class="line">      &lt;!-- 二级菜单模板 --&gt;</span><br><span class="line">      &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">        &lt;!-- 图标 --&gt;</span><br><span class="line">        &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;!-- 文本 --&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;subItem.authName&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-menu-item&gt;</span><br><span class="line">  &lt;/el-submenu&gt;</span><br><span class="line">&lt;/el-menu&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-设置激活子菜单样式"><a href="#5-设置激活子菜单样式" class="headerlink" title="5.设置激活子菜单样式"></a>5.设置激活子菜单样式</h3><p>通过更改 el-menu 的 active-text-color 属性可以设置侧边栏菜单中点击的激活项的文字颜色<br>通过更改菜单项模板（template）中的 i 标签的类名，可以将左侧菜单栏的图标进行设置，我们需要在项目中使用第三方字体图标<br>在数据中添加一个 iconsObj：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">iconsObj</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;125&#x27;</span>:<span class="string">&#x27;iconfont icon-user&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;103&#x27;</span>:<span class="string">&#x27;iconfont icon-tijikongjian&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;101&#x27;</span>:<span class="string">&#x27;iconfont icon-shangpin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;102&#x27;</span>:<span class="string">&#x27;iconfont icon-danju&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;145&#x27;</span>:<span class="string">&#x27;iconfont icon-baobiao&#x27;</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>然后将图标类名进行数据绑定，绑定 iconsObj 中的数据：</p>
<p>为了保持左侧菜单每次只能打开一个，显示其中的子菜单，我们可以在 el-menu 中添加一个属性 unique-opened<br>或者也可以数据绑定进行设置(此时 true 认为是一个 bool 值，而不是字符串) :unique-opened&#x3D;”true”</p>
<h3 id="6-制作侧边菜单栏的伸缩功能"><a href="#6-制作侧边菜单栏的伸缩功能" class="headerlink" title="6.制作侧边菜单栏的伸缩功能"></a>6.制作侧边菜单栏的伸缩功能</h3><p>在菜单栏上方添加一个 div</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 侧边栏,宽度根据是否折叠进行设置 --&gt;</span><br><span class="line">&lt;el-aside :width=&quot;isCollapse ? &#x27;64px&#x27;:&#x27;200px&#x27;&quot;&gt;</span><br><span class="line">  &lt;!-- 伸缩侧边栏按钮 --&gt;</span><br><span class="line">  &lt;div class=&quot;toggle-button&quot; @click=&quot;toggleCollapse&quot;&gt;|||&lt;/div&gt;</span><br><span class="line">  &lt;!-- 侧边栏菜单，:collapse=&quot;isCollapse&quot;（设置折叠菜单为绑定的 isCollapse 值），:collapse-transition=&quot;false&quot;（关闭默认的折叠动画） --&gt;</span><br><span class="line">  &lt;el-menu</span><br><span class="line">  :collapse=&quot;isCollapse&quot;</span><br><span class="line">  :collapse-transition=&quot;false&quot;</span><br><span class="line">  ......</span><br></pre></td></tr></table></figure>

<p>然后给 div 添加样式，给 div 添加事件：</p>
<p><code>&lt;div class=&quot;toggle-button&quot; @click=&quot;this.isCollapse ? &#39;64px&#39;:&#39;200px&#39;&quot;&gt;|||&lt;/div&gt;</code></p>
<h3 id="7-在后台首页添加子级路由"><a href="#7-在后台首页添加子级路由" class="headerlink" title="7.在后台首页添加子级路由"></a>7.在后台首页添加子级路由</h3><p>新增子级路由组件 Welcome.vue<br>在 router.js 中导入子级路由组件，并设置路由规则以及子级路由的默认重定向<br>打开 Home.vue，在 main 的主体结构中添加一个路由占位符</p>
<p>制作好了 Welcome 子级路由之后，我们需要将所有的侧边栏二级菜单都改造成子级路由链接<br>我们只需要将 el-menu 的 router 属性设置为 true 就可以了，此时当我们点击二级菜单的时候，就会根据菜单的 index<br>属性进行路由跳转,如: &#x2F;110,<br>使用 index id 来作为跳转的路径不合适，我们可以重新绑定 index 的值为 :index&#x3D;”‘&#x2F;‘+subItem.path”</p>
<h3 id="8-完成用户列表主体区域"><a href="#8-完成用户列表主体区域" class="headerlink" title="8.完成用户列表主体区域"></a>8.完成用户列表主体区域</h3><p>新建用户列表组件 user&#x2F;Users.vue<br>在 router.js 中导入子级路由组件 Users.vue，并设置路由规则</p>
<p>当点击二级菜单的时候，被点击的二级子菜单并没有高亮，我们需要正在被使用的功能高亮显示<br>我们可以通过设置 el-menu 的 default-active 属性来设置当前激活菜单的 index<br>但是 default-active 属性也不能写死，固定为某个菜单值<br>所以我们可以先给所有的二级菜单添加点击事件,并将 path 值作为方法的参数<br>@click&#x3D;”saveNavState(‘&#x2F;‘+subItem.path)”<br>在 saveNavState 方法中将 path 保存到 sessionStorage 中<br>saveNavState( path ){<br>&#x2F;&#x2F;点击二级菜单的时候保存被点击的二级菜单信息<br>window.sessionStorage.setItem(“activePath”,path);<br>this.activePath &#x3D; path;<br>}<br>然后在数据中添加一个 activePath 绑定数据，并将 el-menu 的 default-active 属性设置为 activePath<br>最后在 created 中将 sessionStorage 中的数据赋值给 activePath<br>this.activePath &#x3D; window.sessionStorage.getItem(“activePath”)</p>
<h3 id="9-绘制用户列表基本结构"><a href="#9-绘制用户列表基本结构" class="headerlink" title="9.绘制用户列表基本结构"></a>9.绘制用户列表基本结构</h3><p>A.使用 element-ui 面包屑组件完成顶部导航路径(复制面包屑代码，在 element.js 中导入组件 Breadcrumb,BreadcrumbItem)<br>B.使用 element-ui 卡片组件完成主体表格(复制卡片组件代码，在 element.js 中导入组件 Card)，再使用 element-ui 输入框完成搜索框及搜索按钮，<br>此时我们需要使用栅格布局来划分结构(复制卡片组件代码，在 element.js 中导入组件 Row，Col)，然后再使用 el-button 制作添加用户按钮</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h3&gt;用户列表组件&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;用户管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;用户列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">        &lt;!-- 搜索与添加区域 --&gt;</span><br><span class="line">        &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">            &lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">                &lt;el-input placeholder=&quot;请输入内容&quot;&gt;</span><br><span class="line">                    &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;/el-input&gt; </span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">                &lt;el-button type=&quot;primary&quot;&gt;添加用户&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt; </span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-请求用户列表数据"><a href="#10-请求用户列表数据" class="headerlink" title="10.请求用户列表数据"></a>10.请求用户列表数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //获取查询用户信息的参数</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      //保存请求回来的用户列表数据</span><br><span class="line">      userList: [],</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getUserList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getUserList() &#123;</span><br><span class="line">      //发送请求获取用户列表数据</span><br><span class="line">      const &#123; res: data &#125; = await this.$http.get(&#x27;users&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line">      //如果返回状态为异常状态则报错并返回</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;获取用户列表失败&#x27;)</span><br><span class="line">      //如果返回状态正常，将请求的数据保存在data中</span><br><span class="line">      this.userList = res.data.users</span><br><span class="line">      this.total = res.data.total</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11-将用户列表数据展示"><a href="#11-将用户列表数据展示" class="headerlink" title="11.将用户列表数据展示"></a>11.将用户列表数据展示</h3><p>使用表格来展示用户列表数据，使用 element-ui 表格组件完成列表展示数据(复制表格代码，在 element.js 中导入组件 Table,TableColumn)<br>在渲染展示状态时，会使用作用域插槽获取每一行的数据<br>再使用 switch 开关组件展示状态信息(复制开关组件代码，在 element.js 中导入组件 Switch)<br>而渲染操作列时，也是使用作用域插槽来进行渲染的，<br>在操作列中包含了修改，删除，分配角色按钮，当我们把鼠标放到分配角色按钮上时<br>希望能有一些文字提示，此时我们需要使用文字提示组件(复制文字提示组件代码，在 element.js 中导入组件 Tooltip),将分配角色按钮包含<br>代码结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 用户列表(表格)区域 --&gt;</span><br><span class="line">&lt;el-table :data=&quot;userList&quot; border stripe&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;姓名&quot; prop=&quot;username&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;邮箱&quot; prop=&quot;email&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;电话&quot; prop=&quot;mobile&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;角色&quot; prop=&quot;role_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;状态&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;el-switch v-model=&quot;scope.row.mg_state&quot;&gt;&lt;/el-switch&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot; width=&quot;180px&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;!-- 修改 --&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;!-- 删除 --&gt;</span><br><span class="line">            &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;!-- 分配角色 --&gt;</span><br><span class="line">            &lt;el-tooltip class=&quot;item&quot; effect=&quot;dark&quot; content=&quot;分配角色&quot; placement=&quot;top&quot; :enterable=&quot;false&quot;&gt;</span><br><span class="line">                &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-setting&quot; size=&#x27;mini&#x27;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure>

<h3 id="12-实现用户列表分页"><a href="#12-实现用户列表分页" class="headerlink" title="12.实现用户列表分页"></a>12.实现用户列表分页</h3><p>A.使用表格来展示用户列表数据，可以使用分页组件完成列表分页展示数据(复制分页组件代码，在 element.js 中导入组件 Pagination)<br>B.更改组件中的绑定数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分页导航区域 </span><br><span class="line">@size-change(pagesize改变时触发) </span><br><span class="line">@current-change(页码发生改变时触发)</span><br><span class="line">:current-page(设置当前页码)</span><br><span class="line">:page-size(设置每页的数据条数)</span><br><span class="line">:total(设置总页数) --&gt;</span><br><span class="line">&lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[1, 2, 5, 10]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">            &lt;/el-pagination&gt;</span><br></pre></td></tr></table></figure>

<p>C.添加两个事件的事件处理函数@size-change，@current-change</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleSizeChange</span>(<span class="params">newSize</span>) &#123;</span><br><span class="line">  <span class="comment">//pagesize改变时触发，当pagesize发生改变的时候，我们应该</span></span><br><span class="line">  <span class="comment">//以最新的pagesize来请求数据并展示数据</span></span><br><span class="line">  <span class="comment">//   console.log(newSize)</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">queryInfo</span>.<span class="property">pagesize</span> = newSize;</span><br><span class="line">  <span class="comment">//重新按照pagesize发送请求，请求最新的数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getUserList</span>();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">handleCurrentChange</span>(<span class="params"> current </span>) &#123;</span><br><span class="line">  <span class="comment">//页码发生改变时触发当current发生改变的时候，我们应该</span></span><br><span class="line">  <span class="comment">//以最新的current页码来请求数据并展示数据</span></span><br><span class="line">  <span class="comment">//   console.log(current)</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">queryInfo</span>.<span class="property">pagenum</span> = current;</span><br><span class="line">  <span class="comment">//重新按照pagenum发送请求，请求最新的数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getUserList</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-实现更新用户状态"><a href="#13-实现更新用户状态" class="headerlink" title="13.实现更新用户状态"></a>13.实现更新用户状态</h3><p>当用户点击列表中的 switch 组件时，用户的状态应该跟随发生改变。<br>A.首先监听用户点击 switch 组件的事件，并将作用域插槽的数据当做事件参数进行传递</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-switch v-model=&quot;scope.row.mg_state&quot; @change=&quot;userStateChanged(scope.row)&quot;&gt;&lt;/el-switch&gt;</span><br></pre></td></tr></table></figure>

<p>B.在事件中发送请求完成状态的更改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">userStateChanged</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  <span class="comment">//发送请求进行状态修改</span></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">put</span>(</span><br><span class="line">    <span class="string">`users/<span class="subst">$&#123;row.id&#125;</span>/state/<span class="subst">$&#123;row.mg_state&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  <span class="comment">//如果返回状态为异常状态则报错并返回</span></span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">    row.<span class="property">mg_state</span> = !row.<span class="property">mg_state</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;修改状态失败&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;更新状态成功&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="14-实现搜索功能"><a href="#14-实现搜索功能" class="headerlink" title="14.实现搜索功能"></a>14.实现搜索功能</h3><p>添加数据绑定，添加搜索按钮的点击事件(当用户点击搜索按钮的时候，调用 getUserList 方法根据文本框内容重新请求用户列表数据)<br>当我们在输入框中输入内容并点击搜索之后，会按照搜索关键字搜索，我们希望能够提供一个 X 删除搜索关键字并重新获取所有的用户列表数据，只需要给文本框添加 clearable 属性并添加 clear 事件，在 clear 事件中重新请求数据即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">    &lt;el-input placeholder=&quot;请输入内容&quot; v-model=&quot;queryInfo.query&quot; clearable @clear=&quot;getUserList&quot;&gt;</span><br><span class="line">        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;getUserList&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-input&gt;</span><br><span class="line">&lt;/el-col&gt;</span><br></pre></td></tr></table></figure>

<h3 id="15-实现添加用户"><a href="#15-实现添加用户" class="headerlink" title="15.实现添加用户"></a>15.实现添加用户</h3><p>A.当我们点击添加用户按钮的时候，弹出一个对话框来实现添加用户的功能，首先我们需要复制对话框组件的代码并在 element.js 文件中引入 Dialog 组件</p>
<p>B.接下来我们要为“添加用户”按钮添加点击事件，在事件中将 addDialogVisible 设置为 true，即显示对话框</p>
<p>C.更改 Dialog 组件中的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 对话框组件  :visible.sync(设置是否显示对话框) width(设置对话框的宽度)</span><br><span class="line">:before-close(在对话框关闭前触发的事件) --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;添加用户&quot; :visible.sync=&quot;addDialogVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;!-- 对话框主体区域 --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;70px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;用户名&quot; prop=&quot;username&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.username&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.password&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;邮箱&quot; prop=&quot;email&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;电话&quot; prop=&quot;mobile&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addForm.mobile&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- 对话框底部区域 --&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;addDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addDialogVisible = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>

<p>D.添加数据绑定和校验规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//验证邮箱的规则</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">checkEmail</span> = (<span class="params">rule, value, cb</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> regEmail = <span class="regexp">/^\w+@\w+(\.\w+)+$/</span></span><br><span class="line">    <span class="keyword">if</span> (regEmail.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">cb</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回一个错误提示</span></span><br><span class="line">    <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请输入合法的邮箱&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//验证手机号码的规则</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">checkMobile</span> = (<span class="params">rule, value, cb</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> regMobile = <span class="regexp">/^1[34578]\d&#123;9&#125;$/</span></span><br><span class="line">    <span class="keyword">if</span> (regMobile.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">cb</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回一个错误提示</span></span><br><span class="line">    <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请输入合法的手机号码&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//获取查询用户信息的参数</span></span><br><span class="line">    <span class="attr">queryInfo</span>: &#123;</span><br><span class="line">      <span class="comment">// 查询的条件</span></span><br><span class="line">      <span class="attr">query</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">// 当前的页数，即页码</span></span><br><span class="line">      <span class="attr">pagenum</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="comment">// 每页显示的数据条数</span></span><br><span class="line">      <span class="attr">pagesize</span>: <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//保存请求回来的用户列表数据</span></span><br><span class="line">    <span class="attr">userList</span>: [],</span><br><span class="line">    <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//是否显示添加用户弹出窗</span></span><br><span class="line">    <span class="attr">addDialogVisible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 添加用户的表单数据</span></span><br><span class="line">    <span class="attr">addForm</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 添加表单的验证规则对象</span></span><br><span class="line">    <span class="attr">addFormRules</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入用户名称&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;用户名在3~10个字符之间&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">password</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">6</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;用户名在6~15个字符之间&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">email</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入邮箱&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>:checkEmail, <span class="attr">message</span>: <span class="string">&#x27;邮箱格式不正确，请重新输入&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">mobile</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入手机号码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>:checkMobile, <span class="attr">message</span>: <span class="string">&#x27;手机号码不正确，请重新输入&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>E.当关闭对话框时，重置表单<br>给 el-dialog 添加@close 事件，在事件中添加重置表单的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="title function_">addDialogClosed</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">//对话框关闭之后，重置表达</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addFormRef</span>.<span class="title function_">resetFields</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>F.点击对话框中的确定按钮，发送请求完成添加用户的操作<br>首先给确定按钮添加点击事件，在点击事件中完成业务逻辑代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="title function_">addUser</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">//点击确定按钮，添加新用户</span></span><br><span class="line">      <span class="comment">//调用validate进行表单验证</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addFormRef</span>.<span class="title function_">validate</span>( <span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span>(!valid) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;请填写完整用户信息&quot;</span>);</span><br><span class="line">          <span class="comment">//发送请求完成添加用户的操作</span></span><br><span class="line">          <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(<span class="string">&quot;users&quot;</span>,<span class="variable language_">this</span>.<span class="property">addForm</span>)</span><br><span class="line">          <span class="comment">//判断如果添加失败，就做提示</span></span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">              <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;添加用户失败&#x27;</span>)</span><br><span class="line">          <span class="comment">//添加成功的提示</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;添加用户成功&quot;</span>)</span><br><span class="line">          <span class="comment">//关闭对话框</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">addDialogVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="comment">//重新请求最新的数据</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、今日目标"><a href="#三、今日目标" class="headerlink" title="三、今日目标"></a>三、今日目标</h2><p>1.修改用户,删除用户</p>
<p>2.推送代码到码云</p>
<p>3.权限列表</p>
<p>4.角色列表</p>
<p>5.分配角色</p>
<h3 id="1-修改用户信息"><a href="#1-修改用户信息" class="headerlink" title="1.修改用户信息"></a>1.修改用户信息</h3><p>A.为用户列表中的修改按钮绑定点击事件<br>B.在页面中添加修改用户对话框，并修改对话框的属性<br>C.根据 id 查询需要修改的用户数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//展示编辑用户的对话框</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">showEditDialog</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="comment">//发送请求根据id获取用户信息</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;users/&#x27;</span> + id)</span><br><span class="line">    <span class="comment">//判断如果添加失败，就做提示</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取用户信息失败&#x27;</span>)</span><br><span class="line">    <span class="comment">//将获取到的数据保存到数据editForm中</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editForm</span> = res.<span class="property">data</span></span><br><span class="line">    <span class="comment">//显示弹出窗</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editDialogVisible</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>D.在弹出窗中添加修改用户信息的表单并做响应的数据绑定以及数据验证</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 对话框主体区域 --&gt;</span><br><span class="line">&lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editFormRef&quot; label-width=&quot;70px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;用户名&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.username&quot; disabled&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;邮箱&quot; prop=&quot;email&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;电话&quot; prop=&quot;mobile&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;editForm.mobile&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure>

<p>数据绑定以及验证：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//控制修改用户对话框的显示与否</span></span><br><span class="line"><span class="attr">editDialogVisible</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//修改用户的表单数据</span></span><br><span class="line"><span class="attr">editForm</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//修改表单的验证规则对象</span></span><br><span class="line"><span class="attr">editFormRules</span>: &#123;</span><br><span class="line">    <span class="attr">email</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入邮箱&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">validator</span>: checkEmail,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;邮箱格式不正确，请重新输入&#x27;</span>,</span><br><span class="line">        <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">mobile</span>: [</span><br><span class="line">        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入手机号码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">validator</span>: checkMobile,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;手机号码不正确，请重新输入&#x27;</span>,</span><br><span class="line">        <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>E.监听对话框关闭事件，在对话框关闭之后，重置表单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=&quot;修改用户&quot; :visible.sync=&quot;editDialogVisible&quot; width=&quot;50%&quot; @close=&quot;editDialogClosed&quot;&gt;</span><br><span class="line"></span><br><span class="line">editDialogClosed()&#123;</span><br><span class="line">    //对话框关闭之后，重置表达</span><br><span class="line">    this.$refs.editFormRef.resetFields()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>F.在用户点击确定按钮的时候，验证数据成功之后发送请求完成修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">editUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//用户点击修改表单中的确定按钮之后，验证表单数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">editFormRef</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> valid =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!valid) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;请填写完整用户信息&#x27;</span>)</span><br><span class="line">    <span class="comment">//发送请求完成修改用户的操作</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">put</span>(</span><br><span class="line">        <span class="string">&#x27;users/&#x27;</span> + <span class="variable language_">this</span>.<span class="property">editForm</span>.<span class="property">id</span>,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">editForm</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//判断如果修改失败，就做提示</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;修改用户失败&#x27;</span>)</span><br><span class="line">    <span class="comment">//修改成功的提示</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;修改用户成功&#x27;</span>)</span><br><span class="line">    <span class="comment">//关闭对话框</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">editDialogVisible</span> = <span class="literal">false</span></span><br><span class="line">    <span class="comment">//重新请求最新的数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-删除用户"><a href="#2-删除用户" class="headerlink" title="2.删除用户"></a>2.删除用户</h3><p>在点击删除按钮的时候，我们应该跳出提示信息框，让用户确认要进行删除操作。<br>如果想要使用确认取消提示框，我们需要先将提示信息框挂载到 vue 中。<br>A.导入 MessageBox 组件，并将 MessageBox 组件挂载到实例。<br>Vue.prototype.$confirm &#x3D; MessageBox.confirm<br>B.给用户列表中的删除按钮添加事件，并在事件处理函数中弹出确定取消窗,最后再根据 id 发送删除用户的请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">removeUserById</span>(<span class="params">id</span>)&#123;</span><br><span class="line">    <span class="comment">//弹出确定取消框，是否删除用户</span></span><br><span class="line">    <span class="keyword">const</span> confirmResult = <span class="keyword">await</span> <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;请问是否要永久删除该用户&#x27;</span>,<span class="string">&#x27;删除提示&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>:<span class="string">&#x27;确认删除&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>:<span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>err)</span><br><span class="line">    <span class="comment">//如果用户点击确认，则confirmResult 为&#x27;confirm&#x27;</span></span><br><span class="line">    <span class="comment">//如果用户点击取消, 则confirmResult获取的就是catch的错误消息&#x27;cancel&#x27;</span></span><br><span class="line">    <span class="keyword">if</span>(confirmResult != <span class="string">&quot;confirm&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;已经取消删除&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//发送请求根据id完成删除操作</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">delete</span>(<span class="string">&#x27;users/&#x27;</span>+id)</span><br><span class="line">    <span class="comment">//判断如果删除失败，就做提示</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;删除用户失败&#x27;</span>)</span><br><span class="line">    <span class="comment">//修改成功的提示</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除用户成功&#x27;</span>)</span><br><span class="line">    <span class="comment">//重新请求最新的数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-推送代码"><a href="#3-推送代码" class="headerlink" title="3.推送代码"></a>3.推送代码</h3><p>创建 user 子分支，并将代码推送到码云<br>A.创建 user 子分支 git checkout -b user<br>B.将代码添加到暂存区 git add .<br>C.将代码提交并注释 git commit -m ‘添加完成用户列表功能’<br>D.将本地的 user 分支推送到码云 git push -u origin user<br>E.将 user 分支代码合并到 master:<br>切换到 master git checkout master<br>合并 user git merge user<br>F.将本地 master 分支的代码推送到码云 git push</p>
<p>创建 rights 子分支<br>A.创建 rights 子分支 git checkout -b rights<br>B.将本地的 rights 分支推送到码云 git push -u origin rights</p>
<h3 id="4-权限列表"><a href="#4-权限列表" class="headerlink" title="4.权限列表"></a>4.权限列表</h3><h4 id="A-添加权限列表路由"><a href="#A-添加权限列表路由" class="headerlink" title="A.添加权限列表路由"></a>A.添加权限列表路由</h4><p>创建权限管理组件（Rights.vue），并在 router.js 添加对应的路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Rights</span> <span class="keyword">from</span> <span class="string">&#x27;./components/power/Rights.vue&#x27;</span></span><br><span class="line">......</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h4 id="B-添加面包屑导航"><a href="#B-添加面包屑导航" class="headerlink" title="B.添加面包屑导航"></a>B.添加面包屑导航</h4><p>在 Rights.vue 中添加面包屑组件展示导航路径</p>
<h4 id="C-显示数据"><a href="#C-显示数据" class="headerlink" title="C.显示数据"></a>C.显示数据</h4><p>在 data 中添加一个 rightsList 数据，在 methods 中提供一个 getRightsList 方法发送请求获取权限列表数据，在 created 中调用这个方法获取数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data=&quot;rightsList&quot; stripe&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;权限名称&quot; prop=&quot;authName&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;路径&quot; prop=&quot;path&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;权限等级&quot; prop=&quot;level&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt; </span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 0&quot;&gt;一级权限&lt;/el-tag&gt;</span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 1&quot; type=&quot;success&quot;&gt;二级权限&lt;/el-tag&gt;</span><br><span class="line">            &lt;el-tag v-if=&quot;scope.row.level === 2&quot; type=&quot;warning&quot;&gt;三级权限&lt;/el-tag&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //列表形式的权限</span><br><span class="line">      rightsList: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getRightsList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getRightsList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;rights/list&#x27;)</span><br><span class="line">      //如果返回状态为异常状态则报错并返回</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;获取权限列表失败&#x27;)</span><br><span class="line">      //如果返回状态正常，将请求的数据保存在data中</span><br><span class="line">      this.rightsList = res.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-角色列表"><a href="#5-角色列表" class="headerlink" title="5.角色列表"></a>5.角色列表</h3><h4 id="A-添加角色列表路由"><a href="#A-添加角色列表路由" class="headerlink" title="A.添加角色列表路由"></a>A.添加角色列表路由</h4><p>添加角色列表子组件（power&#x2F;Roles.vue），并添加对应的规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;</span><br><span class="line">      ]</span><br></pre></td></tr></table></figure>

<h4 id="B-添加面包屑导航-1"><a href="#B-添加面包屑导航-1" class="headerlink" title="B.添加面包屑导航"></a>B.添加面包屑导航</h4><p>在 Roles.vue 中添加面包屑组件展示导航路径</p>
<h4 id="C-显示数据-1"><a href="#C-显示数据-1" class="headerlink" title="C.显示数据"></a>C.显示数据</h4><p>在 data 中添加一个 roleList 数据，在 methods 中提供一个 getRoleList 方法发送请求获取权限列表数据，在 created 中调用这个方法获取数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 角色列表区域 --&gt;</span><br><span class="line">&lt;!-- row-key=&quot;id&quot; 是2019年3月提供的新特性，</span><br><span class="line">if there&#x27;s nested data, rowKey is required.</span><br><span class="line">如果这是一个嵌套的数据，rowkey 是必须添加的属性 --&gt;</span><br><span class="line">&lt;el-table row-key=&quot;id&quot; :data=&quot;roleList&quot; border&gt;</span><br><span class="line">    &lt;!-- 添加展开列 --&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;角色名称&quot; prop=&quot;roleName&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;角色描述&quot; prop=&quot;roleDesc&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot; width=&quot;300px&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt; </span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;warning&quot; icon=&quot;el-icon-setting&quot;&gt;分配权限&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      roleList: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getRoleList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getRoleList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;roles&#x27;)</span><br><span class="line">      //如果返回状态为异常状态则报错并返回</span><br><span class="line">      // if (res.meta.status !== 200)</span><br><span class="line">      //     return this.$message.error(&#x27;获取角色列表失败&#x27;)</span><br><span class="line">      // //如果返回状态正常，将请求的数据保存在data中</span><br><span class="line">      // this.roleList = res.data</span><br><span class="line">      console.log(res.data)</span><br><span class="line">      this.roleList = res.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-补充说明"><a href="#D-补充说明" class="headerlink" title="D.补充说明"></a>D.补充说明</h4><p>之前学习过类似的添加角色，删除角色，编辑角色请参照之前编写过的代码还有接口文档完成效果。</p>
<h4 id="E-生成权限列表"><a href="#E-生成权限列表" class="headerlink" title="E.生成权限列表"></a>E.生成权限列表</h4><p>使用三重嵌套 for 循环生成权限下拉列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 添加展开列 --&gt;</span><br><span class="line">&lt;el-table-column type=&quot;expand&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-row :class=&quot;[&#x27;bdbottom&#x27;,i1===0?&#x27;bdtop&#x27;:&#x27;&#x27;]&quot; v-for=&quot;(item1,i1) in scope.row.children&quot; :key=&quot;item1.id&quot;&gt;</span><br><span class="line">            &lt;!-- 渲染一级权限 --&gt;</span><br><span class="line">            &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">                &lt;el-tag&gt;</span><br><span class="line">                    &#123;&#123;item1.authName&#125;&#125;</span><br><span class="line">                &lt;/el-tag&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;!-- 渲染二，三级权限 --&gt;</span><br><span class="line">            &lt;el-col :span=&quot;19&quot;&gt;</span><br><span class="line">                &lt;!-- 通过for循环嵌套渲染二级权限  --&gt;</span><br><span class="line">                &lt;el-row :class=&quot;[i2===0?&#x27;&#x27;:&#x27;bdtop&#x27; ]&quot; v-for=&quot;(item2,i2) in item1.children&quot; :key=&quot;item2.id&quot;&gt;</span><br><span class="line">                    &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">                        &lt;el-tag type=&quot;success&quot;&gt;&#123;&#123;item2.authName&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">                        &lt;i class=&quot;el-icon-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;/el-col&gt;</span><br><span class="line">                    &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">                        &lt;el-tag type=&quot;warning&quot; v-for=&quot;(item3) in item2.children&quot; :key=&quot;item3.id&quot;&gt;</span><br><span class="line">                            &#123;&#123;item3.authName&#125;&#125;</span><br><span class="line">                        &lt;/el-tag&gt;</span><br><span class="line">                    &lt;/el-col&gt;</span><br><span class="line">                &lt;/el-row&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>

<h4 id="F-美化样式"><a href="#F-美化样式" class="headerlink" title="F.美化样式"></a>F.美化样式</h4><p>通过设置 global.css 中的#app 样式 min-width:1366px 解决三级权限换行的问题<br>，通过给一级权限 el-row 添加 display:flex,align-items:center 的方式解决一级权限垂直居中的问题，二级权限也类似添加，因为需要给多个内容添加，可以将这个样式设置为一个.vcenter{display:flex;align-items:center}</p>
<h4 id="G-添加权限删除功能"><a href="#G-添加权限删除功能" class="headerlink" title="G.添加权限删除功能"></a>G.添加权限删除功能</h4><p>给每一个权限的 el-tag 添加 closable 属性，是的权限右侧出现“X”图标<br>再给 el-tag 添加绑定 close 事件处理函数 removeRightById(scope.row,item1.id)<br>removeRightById(scope.row,item2.id)<br>removeRightById(scope.row,item3.id)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">removeRightById</span>(<span class="params">role,rightId</span>)&#123;</span><br><span class="line">    <span class="comment">//弹窗提示用户是否要删除</span></span><br><span class="line">    <span class="keyword">const</span> confirmResult = <span class="keyword">await</span> <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;请问是否要删除该权限&#x27;</span>,<span class="string">&#x27;删除提示&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>:<span class="string">&#x27;确认删除&#x27;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>:<span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>err)</span><br><span class="line">    <span class="comment">//如果用户点击确认，则confirmResult 为&#x27;confirm&#x27;</span></span><br><span class="line">    <span class="comment">//如果用户点击取消, 则confirmResult获取的就是catch的错误消息&#x27;cancel&#x27;</span></span><br><span class="line">    <span class="keyword">if</span>(confirmResult != <span class="string">&quot;confirm&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;已经取消删除&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用户点击了确定表示真的要删除</span></span><br><span class="line">    <span class="comment">//当发送delete请求之后，返回的数据就是最新的角色权限信息</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">delete</span>(<span class="string">`roles/<span class="subst">$&#123;role.id&#125;</span>/rights/<span class="subst">$&#123;rightId&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;删除角色权限失败&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//无需再重新加载所有权限</span></span><br><span class="line">    <span class="comment">//只需要对现有的角色权限进行更新即可</span></span><br><span class="line">    role.<span class="property">children</span> = res.<span class="property">data</span></span><br><span class="line">    <span class="comment">// this.getRoleList();</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="H-完成权限分配功能"><a href="#H-完成权限分配功能" class="headerlink" title="H.完成权限分配功能"></a>H.完成权限分配功能</h4><p>先给分配权限按钮添加事件<br>&lt;el-button size&#x3D;”mini” type&#x3D;”warning” icon&#x3D;”el-icon-setting” @click&#x3D;”showSetRightDialog”&gt;分配权限</el-button><br>在 showSetRightDialog 函数中请求权限树数据并显示对话框</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">showSetRightDialog</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//当点击分配权限按钮时，展示对应的对话框</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setRightDialogVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//获取所有权限的数据</span></span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;rights/tree&#x27;</span>)</span><br><span class="line">    <span class="comment">//如果返回状态为异常状态则报错并返回</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">meta</span>.<span class="property">status</span> !== <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取权限树失败&#x27;</span>)</span><br><span class="line">    <span class="comment">//如果返回状态正常，将请求的数据保存在data中</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rightsList</span> = res.<span class="property">data</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加分配权限对话框，并添加绑定数据 setRightDialogVisible</p>
<!-- 分配权限对话框 -->
<el-dialog title="分配权限" :visible.sync="setRightDialogVisible" width="50%">
    <span>这是一段信息</span>
    <span slot="footer" class="dialog-footer">
        <el-button @click="setRightDialogVisible = false">取 消</el-button>
        <el-button type="primary" @click="setRightDialogVisible = false">确 定</el-button>
    </span>
</el-dialog>

<h4 id="I-完成树形结构弹窗"><a href="#I-完成树形结构弹窗" class="headerlink" title="I.完成树形结构弹窗"></a>I.完成树形结构弹窗</h4><p>在 element.js 中引入 Tree，注册 Tree</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分配权限对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;分配权限&quot; :visible.sync=&quot;setRightDialogVisible&quot; width=&quot;50%&quot; @close=&quot;setRightDialogClose&quot;&gt;</span><br><span class="line">    &lt;!-- 树形组件</span><br><span class="line">    show-checkbox:显示复选框</span><br><span class="line">    node-key:设置选中节点对应的值</span><br><span class="line">    default-expand-all:是否默认展开所有节点</span><br><span class="line">    :default-checked-keys 设置默认选中项的数组</span><br><span class="line">    ref:设置引用 --&gt;</span><br><span class="line">    &lt;el-tree :data=&quot;rightsList&quot; :props=&quot;treeProps&quot; show-checkbox node-key=&quot;id&quot; default-expand-all :default-checked-keys=&quot;defKeys&quot; ref=&quot;treeRef&quot;&gt;&lt;/el-tree&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;setRightDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;allotRights&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //角色列表数据</span><br><span class="line">      roleList: [],</span><br><span class="line">      //控制分配权限对话框的显示</span><br><span class="line">      setRightDialogVisible: false,</span><br><span class="line">      //权限树数据</span><br><span class="line">      rightsList: [],</span><br><span class="line">      //树形控件的属性绑定对象</span><br><span class="line">      treeProps: &#123;</span><br><span class="line">        //通过label设置树形节点文本展示authName</span><br><span class="line">        label: &#x27;authName&#x27;,</span><br><span class="line">        //设置通过children属性展示子节点信息</span><br><span class="line">        children: &#x27;children&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      //设置树形控件中默认选中的内容</span><br><span class="line">      defKeys: [],</span><br><span class="line">      //保存正在操作的角色id</span><br><span class="line">      roleId: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getRoleList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getRoleList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;roles&#x27;)</span><br><span class="line">      //如果返回状态为异常状态则报错并返回</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;获取角色列表失败&#x27;)</span><br><span class="line">      //如果返回状态正常，将请求的数据保存在data中</span><br><span class="line">      // this.roleList = res.data</span><br><span class="line">      console.log(res.data)</span><br><span class="line">      this.roleList = res.data</span><br><span class="line">    &#125;,</span><br><span class="line">    async removeRightById(role, rightId) &#123;</span><br><span class="line">      //弹窗提示用户是否要删除</span><br><span class="line">      const confirmResult = await this.$confirm(&#x27;请问是否要删除该权限&#x27;, &#x27;删除提示&#x27;, &#123;</span><br><span class="line">        confirmButtonText: &#x27;确认删除&#x27;,</span><br><span class="line">        cancelButtonText: &#x27;取消&#x27;,</span><br><span class="line">        type: &#x27;warning&#x27;</span><br><span class="line">      &#125;).catch(err =&gt; err)</span><br><span class="line">      //如果用户点击确认，则confirmResult 为&#x27;confirm&#x27;</span><br><span class="line">      //如果用户点击取消, 则confirmResult获取的就是catch的错误消息&#x27;cancel&#x27;</span><br><span class="line">      if (confirmResult != &#x27;confirm&#x27;) &#123;</span><br><span class="line">        return this.$message.info(&#x27;已经取消删除&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      //用户点击了确定表示真的要删除</span><br><span class="line">      //当发送delete请求之后，返回的数据就是最新的角色权限信息</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.delete(`roles/$&#123;role.id&#125;/rights/$&#123;rightId&#125;`)</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;删除角色权限失败&#x27;)</span><br><span class="line"></span><br><span class="line">      //无需再重新加载所有权限</span><br><span class="line">      //只需要对现有的角色权限进行更新即可</span><br><span class="line">      role.children = res.data</span><br><span class="line">      // this.getRoleList();</span><br><span class="line">    &#125;,</span><br><span class="line">    async showSetRightDialog(role) &#123;</span><br><span class="line">      //将role.id保存起来以供保存权限时使用</span><br><span class="line">      this.roleId = role.id</span><br><span class="line">      //获取所有权限的数据</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;rights/tree&#x27;)</span><br><span class="line">      //如果返回状态为异常状态则报错并返回</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;获取权限树失败&#x27;)</span><br><span class="line">      //如果返回状态正常，将请求的数据保存在data中</span><br><span class="line">      this.rightsList = res.data</span><br><span class="line"></span><br><span class="line">      //调用getLeafKeys进行递归，将三级权限添加到数组中</span><br><span class="line">      this.getLeafKeys(role, this.defKeys)</span><br><span class="line">      //当点击分配权限按钮时，展示对应的对话框</span><br><span class="line">      this.setRightDialogVisible = true</span><br><span class="line">      console.log(this.defKeys)</span><br><span class="line">    &#125;,</span><br><span class="line">    getLeafKeys(node, arr) &#123;</span><br><span class="line">      //该函数会获取到当前角色的所有三级权限id并添加到defKeys中</span><br><span class="line">      //如果当前节点不包含children属性，则表示node为三级权限</span><br><span class="line">      if (!node.children) &#123;</span><br><span class="line">        return arr.push(node.id)</span><br><span class="line">      &#125;</span><br><span class="line">      //递归调用</span><br><span class="line">      node.children.forEach(item =&gt; this.getLeafKeys(item, arr))</span><br><span class="line">    &#125;,</span><br><span class="line">    setRightDialogClose() &#123;</span><br><span class="line">      //当用户关闭树形权限对话框的时候，清除掉所有选中状态</span><br><span class="line">      this.defKeys = []</span><br><span class="line">    &#125;,</span><br><span class="line">    async allotRights() &#123;</span><br><span class="line">      //当用户在树形权限对话框中点击确定，将用户选择的</span><br><span class="line">      //权限发送请求进行更新</span><br><span class="line"></span><br><span class="line">      //获取所有选中及半选的内容</span><br><span class="line">      const keys = [...this.$refs.treeRef.getCheckedKeys(), ...this.$refs.treeRef.getHalfCheckedKeys()]</span><br><span class="line">      //将数组转换为 , 拼接的字符串</span><br><span class="line">      const idStr = keys.join(&#x27;,&#x27;)</span><br><span class="line"></span><br><span class="line">      //发送请求完成更新</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.post(`roles/$&#123;this.roleId&#125;/rights`, &#123; rids: idStr &#125;)</span><br><span class="line">      if (res.meta.status !== 200) return this.$message.error(&#x27;分配权限失败&#x27;)</span><br><span class="line"></span><br><span class="line">      this.$message.success(&#x27;分配权限成功&#x27;)</span><br><span class="line">      this.getRoleList()</span><br><span class="line">      //关闭对话框</span><br><span class="line">      this.setRightDialogVisible = false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-分配角色"><a href="#6-分配角色" class="headerlink" title="6.分配角色"></a>6.分配角色</h3><p>打开 Users.vue，完成分配角色的功能<br>A.添加分配角色对话框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分配角色对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;分配角色&quot; :visible.sync=&quot;setRoleDialogVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;p&gt;当前的用户:&#123;&#123;userInfo.username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;当前的角色:&#123;&#123;userInfo.role_name&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;分配新角色:&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;setRoleDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;setRoleDialogVisible = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>

<p>B.给分配角色按钮添加点击事件，点击之后弹出一个对话框进行角色分配</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分配角色 --&gt;</span><br><span class="line">&lt;el-tooltip class=&quot;item&quot; effect=&quot;dark&quot; content=&quot;分配角色&quot; placement=&quot;top&quot; :enterable=&quot;false&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-setting&quot; size=&#x27;mini&#x27; @click=&quot;setRole(scope.row)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/el-tooltip&gt;</span><br><span class="line"></span><br><span class="line">data()&#123; ...... //控制显示分配角色对话框 setRoleDialogVisible:false, //保存正在操作的那个用户信息 userInfo:&#123;&#125;, //保存所有的角色信息 rolesList:[], //保存用户选中的角色id selectedRoleId:&#x27;&#x27; &#125;, methods:&#123; ...... async setRole( userInfo )&#123; //保存起来以供后续使用 this.userInfo = userInfo;</span><br><span class="line">//获取所有的角色信息，以备下拉列表使用 //发送请求根据id完成删除操作 const &#123; data: res &#125; = await this.$http.get(&#x27;roles&#x27;) //判断如果删除失败，就做提示 if (res.meta.status !== 200) return this.$message.error(&#x27;获取角色列表失败&#x27;) this.rolesList = res.data; //展示分配角色对话框 this.setRoleDialogVisible =</span><br><span class="line">true; &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>C.在 element.js 中引入 Select，Option，注册 Select，Option</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 角色选择下拉框</span><br><span class="line">v-model：设置用户选中角色之后的id绑定数据</span><br><span class="line">--&gt;</span><br><span class="line">&lt;el-select v-model=&quot;selectedRoleId&quot; placeholder=&quot;请选择角色&quot;&gt;</span><br><span class="line">&lt;!-- :label 显示文本，:value 选中值 --&gt;</span><br><span class="line">&lt;el-option v-for=&quot;item in rolesList&quot; :key=&quot;item.id&quot; :label=&quot;item.roleName&quot; :value=&quot;item.id&quot;&gt;</span><br><span class="line">&lt;/el-option&gt;</span><br><span class="line">&lt;/el-select&gt;</span><br></pre></td></tr></table></figure>

<p>D.当用户点击对话框中的确定之后，完成分配角色的操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分配角色对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;分配角色&quot; :visible.sync=&quot;setRoleDialogVisible&quot; width=&quot;50%&quot; @close=&quot;setRoleDialogClosed&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;p&gt;当前的用户:&#123;&#123;userInfo.username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;当前的角色:&#123;&#123;userInfo.role_name&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;分配新角色:</span><br><span class="line">        &lt;!-- 角色选择下拉框</span><br><span class="line">        v-model：设置用户选中角色之后的id绑定数据</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;el-select v-model=&quot;selectedRoleId&quot; placeholder=&quot;请选择角色&quot;&gt;</span><br><span class="line">        &lt;!-- :label 显示文本，:value 选中值 --&gt;</span><br><span class="line">        &lt;el-option v-for=&quot;item in rolesList&quot; :key=&quot;item.id&quot; :label=&quot;item.roleName&quot; :value=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;setRoleDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;saveRoleInfo&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">methods:&#123; ....... async saveRoleInfo()&#123; //当用户点击确定按钮之后 //判断用户是否选择了需要分配的角色 if(!this.selectedRoleId)&#123; return this.$message.error(&#x27;请选择需要分配的角色&#x27;) &#125; //发送请求完成分配角色的操作 const &#123;data:res&#125; = await</span><br><span class="line">this.$http.put(`users/$&#123;this.userInfo.id&#125;/role`,&#123;rid:this.selectedRoleId&#125;) //判断如果删除失败，就做提示 if (res.meta.status !== 200) return this.$message.error(&#x27;分配角色失败&#x27;) this.$message.success(&#x27;分配角色成功&#x27;) this.getUserList(); //关闭对话框 this.setRoleDialogVisible = false &#125;,</span><br><span class="line">setRoleDialogClosed()&#123; //当关闭对话框的时候，重置下拉框中的内容 this.selectedRoleId = &#x27;&#x27; this.userInfo = &#123;&#125; &#125; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-将代码推送到码云"><a href="#7-将代码推送到码云" class="headerlink" title="7.将代码推送到码云"></a>7.将代码推送到码云</h3><p>A.将代码推送到暂存区 git add .<br>B.将代码提交到仓库 git commit -m ‘完成了权限功能开发’<br>C.将 rights 分支代码推送到码云 git push<br>D.将代码合并到 master<br>git checkout master<br>git merge rights<br>E.将 master 代码推送到码云<br>git push</p>
<h2 id="四、今日目标"><a href="#四、今日目标" class="headerlink" title="四、今日目标"></a>四、今日目标</h2><p>1.完成商品分类</p>
<p>2.完成参数管理</p>
<h3 id="1-商品分类"><a href="#1-商品分类" class="headerlink" title="1.商品分类"></a>1.商品分类</h3><h4 id="A-新建分支-goods-cate"><a href="#A-新建分支-goods-cate" class="headerlink" title="A.新建分支 goods_cate"></a>A.新建分支 goods_cate</h4><p>新建分支 goods_cate 并推送到码云<br>git checkout -b goods_cate<br>git push -u origin goods_cate</p>
<h4 id="B-创建子级路由"><a href="#B-创建子级路由" class="headerlink" title="B.创建子级路由"></a>B.创建子级路由</h4><p>创建 categories 子级路由组件并设置路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Cate</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Cate.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-添加组件基本布局"><a href="#C-添加组件基本布局" class="headerlink" title="C.添加组件基本布局"></a>C.添加组件基本布局</h4><p>在 Cate.vue 组件中添加面包屑导航以及卡片视图中的添加分类按钮</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;商品分类&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品分类&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;!-- 添加分类按钮区域 --&gt;</span><br><span class="line">      &lt;el-row&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot;&gt;添加分类&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- 分类表格  --&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-请求分类数据"><a href="#D-请求分类数据" class="headerlink" title="D.请求分类数据"></a>D.请求分类数据</h4><p>请求分类数据并将数据保存在 data 中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 商品分类数据列表</span><br><span class="line">      cateList: [],</span><br><span class="line">      //查询分类数据的条件</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        type: 3,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 5</span><br><span class="line">      &#125;,</span><br><span class="line">      //保存总数据条数</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      //获取商品分类数据</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;, &#123;</span><br><span class="line">        params: queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取商品列表数据失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      //将数据列表赋值给cateList</span><br><span class="line">      this.cateList = res.data.result</span><br><span class="line">      //保存总数据条数</span><br><span class="line">      this.total = res.data.total</span><br><span class="line">      //   console.log(res.data);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="E-使用插件展示数据"><a href="#E-使用插件展示数据" class="headerlink" title="E.使用插件展示数据"></a>E.使用插件展示数据</h4><p>使用第三方插件 vue-table-with-tree-grid 展示分类数据<br>1).在 vue 控制台中点击依赖-&gt;安装依赖-&gt;运行依赖-&gt;输入 vue-table-with-tree-gird-&gt;点击安装<br>2).打开 main.js，导入 vue-table-with-tree-grid<br>import TreeTable from ‘vue-table-with-tree-grid’<br>…..<br>Vue.config.productionTip &#x3D; false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局注册组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;tree-table&#x27;</span>, <span class="title class_">TreeTable</span>)</span><br><span class="line"><span class="number">3</span>).使用组件展示分类数据</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分类表格</span><br><span class="line">:data(设置数据源) :columns(设置表格中列配置信息) :selection-type(是否有复选框)</span><br><span class="line">:expand-type(是否展开数据) show-index(是否设置索引列) index-text(设置索引列头)</span><br><span class="line">border(是否添加纵向边框) :show-row-hover(是否鼠标悬停高亮) --&gt;</span><br><span class="line">&lt;tree-table :data=&quot;cateList&quot; :columns=&quot;columns&quot; :selection-type=&quot;false&quot; :expand-type=&quot;false&quot; show-index index-text=&quot;#&quot; border :show-row-hover=&quot;false&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/tree-table&gt;</span><br><span class="line"></span><br><span class="line">在数据中添加columns: columns: [ &#123;label:&#x27;分类名称&#x27;,prop:&#x27;cat_name&#x27;&#125; ]</span><br></pre></td></tr></table></figure>

<h4 id="F-自定义数据列"><a href="#F-自定义数据列" class="headerlink" title="F.自定义数据列"></a>F.自定义数据列</h4><p>使用 vue-table-with-tree-grid 定义模板列并添加自定义列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//先在columns中添加一个列 columns: [ &#123;label:&#x27;分类名称&#x27;,prop:&#x27;cat_name&#x27;&#125;, //type:&#x27;template&#x27;(将该列设置为模板列)，template:&#x27;isok&#x27;(设置该列模板的名称为isok) &#123;label:&#x27;是否有效&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;isok&#x27;&#125;, &#123;label:&#x27;排序&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;order&#x27;&#125;,</span><br><span class="line">&#123;label:&#x27;操作&#x27;,prop:&#x27;&#x27;,type:&#x27;template&#x27;,template:&#x27;opt&#x27;&#125; ]</span><br><span class="line"></span><br><span class="line">&lt;!-- 是否有效区域， 设置对应的模板列： slot=&quot;isok&quot;(与columns中设置的template一致) --&gt;</span><br><span class="line">&lt;template slot=&quot;isok&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;i class=&quot;el-icon-success&quot; v-if=&quot;scope.row.cat_deleted === false&quot; style=&quot;color:lightgreen&quot;&gt;&lt;/i&gt;</span><br><span class="line">  &lt;i class=&quot;el-icon-error&quot; v-else style=&quot;color:red&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!-- 排序 --&gt;</span><br><span class="line">&lt;template slot=&quot;order&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; v-if=&quot;scope.row.cat_level === 0&quot;&gt;一级&lt;/el-tag&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; type=&quot;success&quot; v-else-if=&quot;scope.row.cat_level === 1&quot;&gt;二级&lt;/el-tag&gt;</span><br><span class="line">  &lt;el-tag size=&quot;mini&quot; type=&quot;warning&quot; v-else&gt;三级&lt;/el-tag&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 操作 --&gt;</span><br><span class="line">&lt;template slot=&quot;opt&quot; slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="G-完成分页功能"><a href="#G-完成分页功能" class="headerlink" title="G.完成分页功能"></a>G.完成分页功能</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分页 --&gt;</span><br><span class="line">&lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">&lt;/el-pagination&gt;</span><br><span class="line"></span><br><span class="line">//添加对应的事件函数 methods:&#123; ....... handleSizeChange(newSize)&#123; //当pagesize发生改变时触发 this.queryInfo.pagesize = newSize; this.getCateList(); &#125;, handleCurrentChange(newPage)&#123; //当pagenum发生改变时触发 this.queryInfo.pagenum = newPage; this.getCateList(); &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="H-完成添加分类"><a href="#H-完成添加分类" class="headerlink" title="H.完成添加分类"></a>H.完成添加分类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;!-- 添加分类按钮区域 --&gt;</span><br><span class="line">&lt;el-row&gt;</span><br><span class="line">  &lt;el-col&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;showAddCateDialog&quot;&gt;添加分类&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-col&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line">......</span><br><span class="line">&lt;!-- 添加分类对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;添加分类&quot; :visible.sync=&quot;addCateDialogVisible&quot; width=&quot;50%&quot; @close=&quot;addCateDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- 添加分类表单 --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;addCateForm&quot; :rules=&quot;addCateFormRules&quot; ref=&quot;addCateFormRuleForm&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;分类名称&quot; prop=&quot;cat_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;addCateForm.cat_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;父级分类&quot; prop=&quot;cat_pid&quot;&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;addCateDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;addCate&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">//用来显示或隐藏添加分类对话框 addCateDialogVisible: false, //添加分类的表单数据对象 addCateForm:&#123; //分类名称 cat_name:&#x27;&#x27;, //添加分类的父级id，0则表示父级为0.添加一级分类 cat_pid:0, //添加分类的等级，0则表示添加一级分类 cat_level:0 &#125;, //添加分类校验规则 addCateFormRules:&#123; //验证规则 cat_name:[</span><br><span class="line">&#123;required:true , message:&#x27;请输入分类名称&#x27;,trigger:&#x27;blur&#x27;&#125; ] &#125;, //保存1,2级父级分类的列表 parentCateList:[] ....... showAddCateDialog() &#123; //调用getParentCateList获取分类列表 this.getParentCateList() //显示添加分类对话框 this.addCateDialogVisible = true &#125;, async getParentCateList()&#123;</span><br><span class="line">//获取父级分类数据列表 const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;, &#123; params: &#123;type:2&#125; &#125;) if (res.meta.status !== 200) &#123; return this.$message.error(&#x27;获取商品分类列表数据失败&#x27;) &#125; this.parentCateList = res.data &#125;</span><br></pre></td></tr></table></figure>

<p>添加级联菜单显示父级分类<br>先导入 Cascader 组件，并注册<br>然后添加使用级联菜单组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;父级分类&quot; prop=&quot;cat_pid&quot;&gt;</span><br><span class="line">  &lt;!-- expandTrigger=&#x27;hover&#x27;(鼠标悬停触发级联) v-model(设置级联菜单绑定数据) :options(指定级联菜单数据源)  :props(用来配置数据显示的规则) </span><br><span class="line">  clearable(提供“X”号完成删除文本功能) change-on-select(是否可以选中任意一级的菜单) --&gt;</span><br><span class="line">  &lt;el-cascader expandTrigger=&#x27;hover&#x27; v-model=&quot;selectedKeys&quot; :options=&quot;parentCateList&quot; :props=&quot;cascaderProps&quot; @change=&quot;parentCateChange&quot; clearable change-on-select&gt;&lt;/el-cascader&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">添加数据 //配置级联菜单中数据如何展示 cascaderProps:&#123; value:&#x27;cat_id&#x27;, label:&#x27;cat_name&#x27;, children:&#x27;children&#x27;, expandTrigger:&#x27;hover&#x27; &#125;, //绑定用户选择的分类值 selectedKeys:[] ..... methods:&#123; ..... parentCateChange()&#123; //级联菜单中选择项发生变化时触发 console.log(this.selectedKeys)</span><br><span class="line">//如果用户选择了父级分类 if(this.selectedKeys.length &gt; 0)&#123; //则将数组中的最后一项设置为父级分类 this.addCateForm.cat_pid = this.selectedKeys[this.selectedKeys.length - 1] //level也要跟着发生变化 this.addCateForm.cat_level = this.selectedKeys.length return &#125;else&#123; this.addCateForm.cat_pid = 0</span><br><span class="line">this.addCateForm.cat_level = 0 return &#125; &#125;, addCateDialogClosed()&#123; //当关闭添加分类对话框时，重置表单 this.$refs.addCateFormRef.resetFields() this.selectedKeys = []; this.addCateForm.cat_pid = 0 this.addCateForm.cat_level = 0 &#125;, addCate() &#123; //点击确定，完成添加分类 console.log(this.addCateForm)</span><br><span class="line">this.$refs.addCateFormRef.validate(async valid =&gt; &#123; if (!valid) return //发送请求完成添加分类 const &#123; data: res &#125; = await this.$http.post( &#x27;categories&#x27;, this.addCateForm ) if (res.meta.status !== 201) &#123; return this.$message.error(&#x27;添加分类失败&#x27;) &#125; this.$message.success(&#x27;添加分类成功&#x27;)</span><br><span class="line">this.getCateList() this.addCateDialogVisible = false &#125;) &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="I-推送代码"><a href="#I-推送代码" class="headerlink" title="I.推送代码"></a>I.推送代码</h4><p>制作完添加分类之后，将代码提交到仓库，推送到码云,将 goods_cate 分支合并到 master<br>git add .<br>git commit -m ‘完成商品分类’<br>git push<br>git checkout master<br>git merge goods_cate</p>
<h3 id="2-参数管理"><a href="#2-参数管理" class="headerlink" title="2.参数管理"></a>2.参数管理</h3><p>只允许给三级分类内容设置参数，参数分为动态参数和静态参数属性</p>
<h4 id="A-添加子级组件"><a href="#A-添加子级组件" class="headerlink" title="A.添加子级组件"></a>A.添加子级组件</h4><p>添加 Params.vue 子组件，并在 router.js 中引入该组件并设置路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Params</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Params.vue&#x27;</span></span><br><span class="line">......</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="B-完成组件基本布局"><a href="#B-完成组件基本布局" class="headerlink" title="B.完成组件基本布局"></a>B.完成组件基本布局</h4><p>完成 Params.vue 组件的基本布局<br>其中警告提示信息使用了 el-alert，在 element.js 引入该组件并注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;分类参数&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;分类参数&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;!-- 警告区域 :closable=&quot;false&quot;(是否展示“X”号) show-icon(显示图标) --&gt;</span><br><span class="line">      &lt;el-alert title=&quot;注意：只允许为第三级分类设置相关参数&quot; type=&quot;warning&quot; :closable=&quot;false&quot; show-icon&gt; &lt;/el-alert&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 选择商品分类区域 --&gt;</span><br><span class="line">      &lt;el-row class=&quot;cat_opt&quot;&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;span&gt;选择商品分类：&lt;/span&gt;</span><br><span class="line">          &lt;!-- 选择商品分类的级联选择框 --&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col&gt;&lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-完成级联选择框"><a href="#C-完成级联选择框" class="headerlink" title="C.完成级联选择框"></a>C.完成级联选择框</h4><p>完成商品分类级联选择框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 选择商品分类区域 --&gt;</span><br><span class="line">&lt;el-row class=&quot;cat_opt&quot;&gt;</span><br><span class="line">    &lt;el-col&gt;</span><br><span class="line">        &lt;span&gt;选择商品分类：&lt;/span&gt;</span><br><span class="line">        &lt;!-- 选择商品分类的级联选择框 --&gt;</span><br><span class="line">        &lt;el-cascader expandTrigger=&#x27;hover&#x27; v-model=&quot;selectedCateKeys&quot; :options=&quot;cateList&quot; :props=&quot;cateProps&quot; @change=&quot;handleChange&quot; clearable&gt;&lt;/el-cascader&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col&gt;&lt;/el-col&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line">......</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //分类列表</span><br><span class="line">      cateList: [],</span><br><span class="line">      //用户在级联下拉菜单中选中的分类id</span><br><span class="line">      selectedCateKeys: [],</span><br><span class="line">      //配置级联菜单中数据如何展示</span><br><span class="line">      cateProps: &#123;</span><br><span class="line">        value: &#x27;cat_id&#x27;,</span><br><span class="line">        label: &#x27;cat_name&#x27;,</span><br><span class="line">        children: &#x27;children&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      //获取所有的商品分类列表</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取分类数据失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      //将数据列表赋值给cateList</span><br><span class="line">      this.cateList = res.data</span><br><span class="line">      // //保存总数据条数</span><br><span class="line">      // this.total = res.data.total</span><br><span class="line">      //   console.log(res.data);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange() &#123;</span><br><span class="line">      //当用户在级联菜单中选择内容改变时触发</span><br><span class="line">      console.log(this.selectedCateKeys)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-展示参数"><a href="#D-展示参数" class="headerlink" title="D.展示参数"></a>D.展示参数</h4><p>展示动态参数数据以及静态属性数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- tab页签区域 --&gt;</span><br><span class="line">&lt;el-tabs v-model=&quot;activeName&quot; @tab-click=&quot;handleTabClick&quot;&gt;</span><br><span class="line">  &lt;!-- 添加动态参数的面板 将标签页改为many --&gt;</span><br><span class="line">  &lt;el-tab-pane label=&quot;动态参数&quot; name=&quot;many&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; :disabled=&quot;isButtonDisabled&quot;&gt;添加参数&lt;/el-button&gt;</span><br><span class="line">    &lt;!-- 动态参数表格 --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;manyTableData&quot; border stripe&gt;</span><br><span class="line">      &lt;!-- 展开行 --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;!-- 索引列 --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;参数名称&quot; prop=&quot;attr_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">  &lt;/el-tab-pane&gt;</span><br><span class="line">  &lt;!-- 添加静态属性的面板 将标签页改为only --&gt;</span><br><span class="line">  &lt;el-tab-pane label=&quot;静态属性&quot; name=&quot;only&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; :disabled=&quot;isButtonDisabled&quot;&gt;添加属性&lt;/el-button&gt;</span><br><span class="line">    &lt;!-- 静态属性表格 --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;onlyTableData&quot; border stripe&gt;</span><br><span class="line">      &lt;!-- 展开行 --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;expand&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;!-- 索引列 --&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;属性名称&quot; prop=&quot;attr_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">  &lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">&lt;/el-tabs&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //tab页签激活显示的页签项</span><br><span class="line">      activeName: &#x27;many&#x27;,</span><br><span class="line">      //用来保存动态参数数据</span><br><span class="line">      manyTableData: [],</span><br><span class="line">      //用来保存静态属性数据</span><br><span class="line">      onlyTableData: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    async handleChange() &#123;</span><br><span class="line">      //当用户在级联菜单中选择内容改变时触发</span><br><span class="line">      console.log(this.selectedCateKeys)</span><br><span class="line">      //发送请求，根据用户选择的三级分类和面板获取参数数据</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">        `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">        &#123; params: &#123; sel: this.activeName &#125; &#125;</span><br><span class="line">      )</span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取参数列表数据失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      console.log(res.data)</span><br><span class="line">      if (this.activeName === &#x27;many&#x27;) &#123;</span><br><span class="line">        //获取的是动态参数</span><br><span class="line">        this.manyTableData = res.data</span><br><span class="line">      &#125; else if (this.activeName === &#x27;only&#x27;) &#123;</span><br><span class="line">        //获取的是静态属性</span><br><span class="line">        this.onlyTableData = res.data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleTabClick() &#123;</span><br><span class="line">      console.log(this.activeName)</span><br><span class="line">      this.handleChange()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    //添加计算属性用来获取按钮禁用与否</span><br><span class="line">    isButtonDisabled() &#123;</span><br><span class="line">      return this.selectedCateKeys.length !== 3</span><br><span class="line">    &#125;,</span><br><span class="line">    //获取选中的三级分类id</span><br><span class="line">    cateId() &#123;</span><br><span class="line">      if (this.selectedCateKeys.length === 3) &#123;</span><br><span class="line">        return this.selectedCateKeys[this.selectedCateKeys.length - 1]</span><br><span class="line">      &#125;</span><br><span class="line">      return null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="E-添加参数"><a href="#E-添加参数" class="headerlink" title="E.添加参数"></a>E.添加参数</h4><p>完成添加参数或属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 添加参数或属性对话框 --&gt;</span><br><span class="line">&lt;el-dialog :title=&quot;&#x27;添加&#x27; + titleText&quot; :visible.sync=&quot;addDialogVisible&quot; width=&quot;50%&quot; @close=&quot;addDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- 添加表单 --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item :label=&quot;titleText&quot; prop=&quot;attr_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;addForm.attr_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;addDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;addParams&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">export default &#123; data() &#123; return &#123; ....... //控制添加参数.属性对话框的显示或隐藏 addDialogVisible: false, //添加参数的表单数据对象 addForm: &#123; attr_name: &#x27;&#x27; &#125;, //添加表单验证规则 addFormRules: &#123; attr_name: [&#123; required: true, message: &#x27;请输入名称&#x27;, trigger: &#x27;blur&#x27; &#125;] &#125; &#125; &#125;,methods: &#123; .......</span><br><span class="line">addParams() &#123; //当用户点击对话框中的确定时，校验表单 this.$refs.addFormRef.validate(async valid =&gt; &#123; //校验不通过，return if (!valid) return //校验通过，发送请求完成添加参数或者属性 const &#123; data: res &#125; = this.$http.post(`categories/$&#123;this.cateId&#125;/attributes`, &#123; attr_name: this.addForm.attr_name,</span><br><span class="line">attr_sel: this.activeName, attr_vals: &quot;a,b,c&quot; &#125; ) console.log(res) if (res.meta.status !== 201) &#123; return this.$message.error(&#x27;添加&#x27; + this.titleText + &#x27;数据失败&#x27;) &#125; this.$message.success(&#x27;添加&#x27; + this.titleText + &#x27;数据成功&#x27;) this.addDialogVisible = false this.getCateList() &#125;) &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="F-编辑参数"><a href="#F-编辑参数" class="headerlink" title="F.编辑参数"></a>F.编辑参数</h4><p>完成编辑参数或属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 修改参数或属性对话框 --&gt;</span><br><span class="line">&lt;el-dialog :title=&quot;&#x27;修改&#x27; + titleText&quot; :visible.sync=&quot;editDialogVisible&quot; width=&quot;50%&quot; @close=&quot;editDialogClosed&quot;&gt;</span><br><span class="line">  &lt;!-- 添加表单 --&gt;</span><br><span class="line">  &lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item :label=&quot;titleText&quot; prop=&quot;attr_name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;editForm.attr_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;editDialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;editParams&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">export default &#123; data() &#123; return &#123; ....... //控制修改参数.属性对话框的显示或隐藏 editDialogVisible:false, //修改参数.属性对话框中的表单 editForm:&#123; attr_name:&#x27;&#x27; &#125;, //修改表单的验证规则 editFormRules:&#123; attr_name:[ &#123; required: true, message: &#x27;请输入名称&#x27;, trigger: &#x27;blur&#x27; &#125; ] &#125; &#125; &#125;,methods: &#123; .......</span><br><span class="line">async showEditDialog(attr_id)&#123; //发起请求获取需要修改的那个参数数据 const &#123;data:res&#125; = await this.$http.get(`categories/$&#123;this.cateId&#125;/attributes/$&#123;attr_id&#125;`, &#123;params:&#123; attr_sel:this.activeName &#125;&#125;) if (res.meta.status !== 200) &#123; return this.$message.error(&#x27;获取参数数据失败&#x27;) &#125; this.editForm =</span><br><span class="line">res.data; //显示修改参数.属性对话框 this.editDialogVisible = true; &#125;, editDialogClosed()&#123; //当关闭修改参数.属性对话框时 this.$refs.editFormRef.resetFields() &#125;, editParams()&#123; //验证表单 this.$refs.editFormRef.validate(async valid =&gt; &#123; if(!valid) return; //发送请求完成修改 const &#123;data:res&#125; = await</span><br><span class="line">this.$http.put(`categories/$&#123;this.cateId&#125;/attributes/$&#123;this.editForm.attr_id&#125;`, &#123;attr_name:this.editForm.attr_name,attr_sel:this.activeName&#125;) if (res.meta.status !== 200) &#123; return this.$message.error(&#x27;获取参数数据失败&#x27;) &#125; this.$message.success(&#x27;修改&#x27; + this.titleText + &#x27;数据成功&#x27;)</span><br><span class="line">this.editDialogVisible = false this.handleChange(); &#125;) &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="G-删除参数"><a href="#G-删除参数" class="headerlink" title="G.删除参数"></a>G.删除参数</h4><p>删除参数或属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">给两个删除按钮添加事件</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeParams(scope.row.attr_id)&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeParams(scope.row.attr_id)&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">添加对应的事件处理函数 async removeParams(attr_id)&#123; //根据id删除对应的参数或属性 //弹窗提示用户是否要删除 const confirmResult = await this.$confirm( &#x27;请问是否要删除该&#x27;+this.titleText, &#x27;删除提示&#x27;, &#123; confirmButtonText: &#x27;确认删除&#x27;, cancelButtonText: &#x27;取消&#x27;, type: &#x27;warning&#x27; &#125; ).catch(err =&gt; err)</span><br><span class="line">//如果用户点击确认，则confirmResult 为&#x27;confirm&#x27; //如果用户点击取消, 则confirmResult获取的就是catch的错误消息&#x27;cancel&#x27; if (confirmResult != &#x27;confirm&#x27;) &#123; return this.$message.info(&#x27;已经取消删除&#x27;) &#125; //没有取消就是要删除，发送请求完成删除 const &#123;data:res&#125; = await</span><br><span class="line">this.$http.delete(`categories/$&#123;this.cateId&#125;/attributes/$&#123;attr_id&#125;`) if (res.meta.status !== 200) &#123; return this.$message.error(&#x27;删除参数数据失败&#x27;) &#125; this.$message.success(&#x27;删除&#x27; + this.titleText + &#x27;数据成功&#x27;) this.handleChange() &#125;</span><br></pre></td></tr></table></figure>

<h2 id="五、今日目标"><a href="#五、今日目标" class="headerlink" title="五、今日目标"></a>五、今日目标</h2><p>1.完成参数管理 2.推送代码到码云 3.制作商品列表页面 4.制作商品添加页面</p>
<h3 id="1-参数管理"><a href="#1-参数管理" class="headerlink" title="1.参数管理"></a>1.参数管理</h3><h4 id="A-展示动态参数可选项"><a href="#A-展示动态参数可选项" class="headerlink" title="A.展示动态参数可选项"></a>A.展示动态参数可选项</h4><p>动态参数可选项展示及操作<br>在获取动态参数的方法中进行处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//将获取到的数据中的attr_vals字符串转换为数组 res.data.forEach(item =&gt; &#123; item.attr_vals = item.attr_vals ? item.attr_vals.split(&#x27; &#x27;) : [] //添加一个bool值控制文本框的显示或者隐藏 item.inputVisible = false //添加一个inputValue保存文本框值 item.inputValue = &#x27;&#x27; &#125;)</span><br><span class="line">//然后再修改展开行中的代码，生成el-tag和文本框以及添加按钮</span><br><span class="line">&lt;!-- 展开行 --&gt;</span><br><span class="line">&lt;el-table-column type=&quot;expand&quot;&gt;</span><br><span class="line">  &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;!-- 循环生成的el-tag --&gt;</span><br><span class="line">    &lt;el-tag v-for=&quot;(item,i) in scope.row.attr_vals&quot; :key=&quot;i&quot; closable&gt;&#123;&#123;item&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">    &lt;!-- 输入框 --&gt;</span><br><span class="line">    &lt;el-input class=&quot;input-new-tag&quot; v-if=&quot;scope.row.inputVisible&quot; v-model=&quot;scope.row.inputValue&quot; ref=&quot;saveTagInput&quot; size=&quot;small&quot; @keyup.enter.native=&quot;handleInputConfirm(scope.row)&quot; @blur=&quot;handleInputConfirm(scope.row)&quot;&gt;</span><br><span class="line">    &lt;/el-input&gt;</span><br><span class="line">    &lt;!-- 添加按钮 --&gt;</span><br><span class="line">    &lt;el-button v-else class=&quot;button-new-tag&quot; size=&quot;small&quot; @click=&quot;showInput(scope.row)&quot;&gt;+ New Tag&lt;/el-button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">//最后对应文本框的事件和按钮的事件添加处理函数 handleInputConfirm(row)&#123; //当用户在文本框中按下enter键或者焦点离开时都会触发执行 //判断用户在文本框中输入的内容是否合法 if(row.inputValue.trim().length===0)&#123; row.inputValue = &#x27;&#x27; row.inputVisible = false return &#125; // row.inputVisible = false</span><br><span class="line">//如果用户输入了真实合法的数据，需要保存起来 &#125;, showInput(row)&#123; //用户点击添加按钮时触发 row.inputVisible = true //$nextTick:在页面上元素被重新渲染之后，调用回调函数的代码 this.$nextTick(_=&gt;&#123; //让文本框自动获得焦点 this.$refs.saveTagInput.$refs.input.focus() &#125;) &#125;</span><br></pre></td></tr></table></figure>

<h4 id="B-添加-删除可选项"><a href="#B-添加-删除可选项" class="headerlink" title="B.添加&#x2F;删除可选项"></a>B.添加&#x2F;删除可选项</h4><p>添加&#x2F;删除动态参数可选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">给el-tag添加删除事件</span><br><span class="line">&lt;el-tag v-for=&quot;(item, i) in scope.row.attr_vals&quot; :key=&quot;i&quot; closable @close=&quot;handleClose(i, scope.row)&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line"></span><br><span class="line">在methods中添加新增，删除事件处理函数 handleInputConfirm(row)&#123; //当用户在文本框中按下enter键或者焦点离开时都会触发执行 //判断用户在文本框中输入的内容是否合法 if(row.inputValue.trim().length===0)&#123; row.inputValue = &#x27;&#x27; row.inputVisible = false return &#125; // row.inputVisible = false</span><br><span class="line">//如果用户输入了真实合法的数据，需要保存起来 row.attr_vals.push(row.inputValue.trim()) row.inputValue = &#x27;&#x27; row.inputVisible = false this.saveAttrVals(row) &#125;, handleClose(index,row)&#123; //删除对应索引的参数可选项 row.attr_vals.splice(index,1) //调用函数，完成保存可选项的操作 this.saveAttrVals(row) &#125;,</span><br><span class="line">async saveAttrVals(row)&#123; //封装函数，完成保存可选项的操作 //发起请求，保存参数细项 const &#123;data:res&#125; = await this.$http.put(`categories/$&#123;this.cateId&#125;/attributes/$&#123;row.attr_id&#125;`, &#123;attr_name:row.attr_name,attr_sel:row.attr_sel,attr_vals:row.attr_vals.join(&#x27; &#x27;)&#125;) if (res.meta.status !== 200) &#123; return</span><br><span class="line">this.$message.error(&#x27;修改参数项失败&#x27;) &#125; this.$message.success(&#x27;修改参数项成功&#x27;) &#125;</span><br></pre></td></tr></table></figure>

<p>补充：当用户在级联选择框中选中了非三级分类时，需要清空表格中数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">handleChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//如果用户选择的不是三级分类</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">selectedCateKeys</span>.<span class="property">length</span> !== <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selectedCateKeys</span> = []</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">manyTableData</span> = []</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onlyTableData</span> = []</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      ......</span><br></pre></td></tr></table></figure>

<p>补充 2：当完成了动态参数可选项的功能之后，我们也需要一样的方式完成静态属性可选项的功能。</p>
<p>此时我们只需要将动态参数可选项中的展开行复制到静态属性的表格中即可</p>
<h3 id="2-推送代码到码云"><a href="#2-推送代码到码云" class="headerlink" title="2.推送代码到码云"></a>2.推送代码到码云</h3><p>添加到暂存求： git add .<br>提交到本地仓库： git commit -m ‘完成了分类参数开发’<br>推送到码云： git push<br>切换到 master ： git checkout master<br>合并到 master ： git merge goods_params</p>
<p>创建子分支<br>git checkout -b goods_list<br>推送至码云 git push -u origin goods_list</p>
<h3 id="3-商品列表"><a href="#3-商品列表" class="headerlink" title="3.商品列表"></a>3.商品列表</h3><h4 id="A-制作商品列表基本结构"><a href="#A-制作商品列表基本结构" class="headerlink" title="A.制作商品列表基本结构"></a>A.制作商品列表基本结构</h4><p>添加子级路由组件以及对应的规则,并设置组件的基本机构<br>打开 router.js,添加下面的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GoodList</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/List.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodList</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>打开 List.vue 组件，添加下列代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;商品列表&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">          &lt;el-input placeholder=&quot;请输入内容&quot;&gt;</span><br><span class="line">            &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="B-数据展示"><a href="#B-数据展示" class="headerlink" title="B.数据展示"></a>B.数据展示</h4><p>添加数据表格展示数据以及分页功能的实现,搜索功能的实现<br>在 main.js 中添加过滤器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建过滤器将秒数过滤为年月日，时分秒</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;dateFormat&#x27;</span>, <span class="keyword">function</span> (<span class="params">originVal</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(originVal)</span><br><span class="line">  <span class="keyword">const</span> y = dt.<span class="title function_">getFullYear</span>()</span><br><span class="line">  <span class="keyword">const</span> m = (dt.<span class="title function_">getMonth</span>() + <span class="number">1</span> + <span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> d = (dt.<span class="title function_">getDate</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> hh = (dt.<span class="title function_">getHours</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> mm = (dt.<span class="title function_">getMinutes</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> ss = (dt.<span class="title function_">getSeconds</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">&lt;el-card&gt;</span><br><span class="line">    &lt;!-- 搜索栏 --&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">            &lt;el-input placeholder=&quot;请输入内容&quot; v-model=&quot;queryInfo.query&quot; clearable @clear=&quot;getGoodsList&quot;&gt;</span><br><span class="line">                &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;getGoodsList&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 表格区域 --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;goodsList&quot; border stripe&gt;</span><br><span class="line">        &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;商品名称&quot; prop=&quot;goods_name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;商品价格(元)&quot; prop=&quot;goods_price&quot; width=&quot;95px&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;商品重量&quot; prop=&quot;goods_weight&quot; width=&quot;95px&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;创建时间&quot; prop=&quot;add_time&quot; width=&quot;140px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &#123;&#123;scope.row.add_time | dateFormat&#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;操作&quot; width=&quot;125px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">    &lt;/el-pagination&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">//绑定数据以及添加方法</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //查询参数</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      //保存商品列表信息</span><br><span class="line">      goodsList: [],</span><br><span class="line">      //总数据条数</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getGoodsList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getGoodsList() &#123;</span><br><span class="line">      //   根据分页获取对应的商品列表</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;goods&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取商品列表失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(res.data)</span><br><span class="line">      this.$message.success(&#x27;获取商品列表成功&#x27;)</span><br><span class="line">      this.goodsList = res.data.goods</span><br><span class="line">      this.total = res.data.total</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange(newSize) &#123;</span><br><span class="line">      //当页号发生改变时，更改pagesize，重新请求</span><br><span class="line">      this.queryInfo.pagesize = newSize</span><br><span class="line">      this.getGoodsList()</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(newPage) &#123;</span><br><span class="line">      //当页码发生改变时，更改pagesize，重新请求</span><br><span class="line">      this.queryInfo.pagenum = newPage</span><br><span class="line">      this.getGoodsList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-实现删除商品"><a href="#C-实现删除商品" class="headerlink" title="C.实现删除商品"></a>C.实现删除商品</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//绑定按钮点击事件</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; @click=&quot;removeGoods(scope.row.goods_id)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">//事件函数代码编写 async removeGoods(goods_id) &#123; //根据id删除对应的参数或属性 //弹窗提示用户是否要删除 const confirmResult = await this.$confirm( &#x27;请问是否要删除该商品&#x27;, &#x27;删除提示&#x27;, &#123; confirmButtonText: &#x27;确认删除&#x27;, cancelButtonText: &#x27;取消&#x27;, type: &#x27;warning&#x27; &#125; ).catch(err =&gt; err)</span><br><span class="line">//如果用户点击确认，则confirmResult 为&#x27;confirm&#x27; //如果用户点击取消, 则confirmResult获取的就是catch的错误消息&#x27;cancel&#x27; if (confirmResult != &#x27;confirm&#x27;) &#123; return this.$message.info(&#x27;已经取消删除&#x27;) &#125; //没有取消就是要删除，发送请求完成删除 const &#123;data:res&#125; = await this.$http.delete(`goods/$&#123;goods_id&#125;`) if</span><br><span class="line">(res.meta.status !== 200) &#123; return this.$message.error(&#x27;删除商品失败&#x27;) &#125; this.$message.success(&#x27;删除商品成功&#x27;) this.getGoodsList() &#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-添加商品"><a href="#4-添加商品" class="headerlink" title="4.添加商品"></a>4.添加商品</h3><h4 id="A-添加编程式导航"><a href="#A-添加编程式导航" class="headerlink" title="A.添加编程式导航"></a>A.添加编程式导航</h4><p>在 List.vue 中添加编程式导航，并创建添加商品路由组件及规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//在List.vue中添加编程式导航</span><br><span class="line">&lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;goAddPage&quot;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">goAddPage()&#123; this.$router.push(&#x27;/goods/add&#x27;) &#125;</span><br></pre></td></tr></table></figure>

<p>在 router.js 中引入 goods&#x2F;Add.vue,并添加路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GoodAdd</span> <span class="keyword">from</span> <span class="string">&#x27;./components/goods/Add.vue&#x27;</span></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">children</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/welcome&quot;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/users&quot;</span>, <span class="attr">component</span>: <span class="title class_">Users</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rights&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rights</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/roles&quot;</span>, <span class="attr">component</span>: <span class="title class_">Roles</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/categories&quot;</span>, <span class="attr">component</span>: <span class="title class_">Cate</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/params&quot;</span>, <span class="attr">component</span>: <span class="title class_">Params</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodList</span>  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/goods/add&quot;</span>, <span class="attr">component</span>: <span class="title class_">GoodAdd</span>  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="B-布局-Add-vue-组件"><a href="#B-布局-Add-vue-组件" class="headerlink" title="B.布局 Add.vue 组件"></a>B.布局 Add.vue 组件</h4><p>布局过程中需要使用 Steps 组件，在 element.js 中引入并注册该组件，并在 global.css 中给组件设置全局样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Steps</span>,<span class="title class_">Step</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Step</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Steps</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//global.css</span></span><br><span class="line">.<span class="property">el</span>-steps&#123;</span><br><span class="line">    <span class="attr">margin</span>:15px <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">el</span>-step__title&#123;</span><br><span class="line">    font-<span class="attr">size</span>: 13px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再在 Add.vue 中进行页面布局</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;添加商品&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;添加商品&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;!-- 消息提示 --&gt;</span><br><span class="line">      &lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt; &lt;/el-alert&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 步骤条组件 --&gt;</span><br><span class="line">      &lt;!-- align-center(居中效果) --&gt;</span><br><span class="line">      &lt;el-steps :space=&quot;200&quot; :active=&quot;activeIndex - 0&quot; finish-status=&quot;success&quot; align-center&gt;</span><br><span class="line">        &lt;el-step title=&quot;基本信息&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">        &lt;el-step title=&quot;商品参数&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">        &lt;el-step title=&quot;商品属性&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">        &lt;el-step title=&quot;商品图片&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">        &lt;el-step title=&quot;商品内容&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">        &lt;el-step title=&quot;完成&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">      &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- tab栏区域:el-tab-pane必须是el-tabs的子节点</span><br><span class="line">            :tab-position=&quot;&#x27;left&#x27;&quot;(设置tab栏为左右结构tab栏) --&gt;</span><br><span class="line">      &lt;!-- 表单：label-position=&quot;top&quot;(设置label在文本框上方) --&gt;</span><br><span class="line">      &lt;el-form :model=&quot;addForm&quot; :rules=&quot;addFormRules&quot; ref=&quot;addFormRef&quot; label-width=&quot;100px&quot; label-position=&quot;top&quot;&gt;</span><br><span class="line">        &lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot;&gt;</span><br><span class="line">          &lt;el-tab-pane label=&quot;基本信息&quot; name=&quot;0&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品名称&quot; prop=&quot;goods_name&quot;&gt;</span><br><span class="line">              &lt;el-input v-model=&quot;addForm.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品价格&quot; prop=&quot;goods_price&quot;&gt;</span><br><span class="line">              &lt;el-input v-model=&quot;addForm.goods_price&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品重量&quot; prop=&quot;goods_weight&quot;&gt;</span><br><span class="line">              &lt;el-input v-model=&quot;addForm.goods_weight&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品数量&quot; prop=&quot;goods_number&quot;&gt;</span><br><span class="line">              &lt;el-input v-model=&quot;addForm.goods_number&quot; type=&quot;number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品分类&quot; prop=&quot;goods_cat&quot;&gt;</span><br><span class="line">              &lt;!-- 选择商品分类的级联选择框 --&gt;</span><br><span class="line">              &lt;el-cascader expandTrigger=&quot;hover&quot; v-model=&quot;addForm.goods_cat&quot; :options=&quot;cateList&quot; :props=&quot;cateProps&quot; @change=&quot;handleChange&quot; clearable&gt;&lt;/el-cascader&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label=&quot;商品参数&quot; name=&quot;1&quot;&gt; &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label=&quot;商品属性&quot; name=&quot;2&quot;&gt; &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label=&quot;商品图片&quot; name=&quot;3&quot;&gt; &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label=&quot;商品内容&quot; name=&quot;4&quot;&gt; &lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;/el-tabs&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //保存步骤条激活项索引</span><br><span class="line">      activeIndex: &#x27;0&#x27;,</span><br><span class="line">      //添加商品的表单数据对象</span><br><span class="line">      addForm: &#123;</span><br><span class="line">        goods_name: &#x27;&#x27;,</span><br><span class="line">        goods_price: 0,</span><br><span class="line">        goods_weight: 0,</span><br><span class="line">        goods_number: 0,</span><br><span class="line">        goods_cat: []</span><br><span class="line">      &#125;,</span><br><span class="line">      //验证规则</span><br><span class="line">      addFormRules: &#123;</span><br><span class="line">        goods_name: [&#123; required: true, message: &#x27;请输入商品名称&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        goods_price: [&#123; required: true, message: &#x27;请输入商品价格&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        goods_weight: [&#123; required: true, message: &#x27;请输入商品重量&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        goods_number: [&#123; required: true, message: &#x27;请输入商品数量&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        goods_cat: [&#123; required: true, message: &#x27;请选择商品分类&#x27;, trigger: &#x27;blur&#x27; &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      //用来保存分类数据</span><br><span class="line">      cateList: [],</span><br><span class="line">      //配置级联菜单中数据如何展示</span><br><span class="line">      cateProps: &#123;</span><br><span class="line">        value: &#x27;cat_id&#x27;,</span><br><span class="line">        label: &#x27;cat_name&#x27;,</span><br><span class="line">        children: &#x27;children&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;categories&#x27;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取商品分类数据失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.cateList = res.data</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange() &#123;</span><br><span class="line">      //如果用户选择的不是三级分类,该次选择无效，因为必须选择三级分类</span><br><span class="line">      if (this.addForm.goods_cat.length !== 3) &#123;</span><br><span class="line">        this.addForm.goods_cat = []</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="C-添加-tab-栏切换验证"><a href="#C-添加-tab-栏切换验证" class="headerlink" title="C.添加 tab 栏切换验证"></a>C.添加 tab 栏切换验证</h4><p>也就是说不输入某些内容，无法切换到别的 tab 栏</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//首先给tabs添加tab切换前事件</span><br><span class="line">&lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot; :before-leave=&quot;beforeTabLeave&quot;&gt;</span><br><span class="line">......</span><br><span class="line">&lt;/el-tabs&gt;</span><br><span class="line"></span><br><span class="line">//再到methods编写事件函数beforeTabLeave beforeTabLeave(activeName,oldActiveName)&#123; //在tab栏切换之前触发，两个形参为切换前，后的tab栏name if(oldActiveName === &#x27;0&#x27;)&#123; //在第一个标签页的时候 if(this.addForm.goods_cat.length !== 3)&#123; this.$message.error(&#x27;请选择商品的分类&#x27;) return false &#125;else</span><br><span class="line">if(this.addForm.goods_name.trim() === &#x27;&#x27;)&#123; this.$message.error(&#x27;请输入商品名称&#x27;) return false &#125;else if(this.addForm.goods_price.trim() === &#x27;0&#x27;)&#123; this.$message.error(&#x27;请输入商品价格&#x27;) return false &#125;else if(this.addForm.goods_weight.trim() === &#x27;0&#x27;)&#123; this.$message.error(&#x27;请输入商品重量&#x27;) return false</span><br><span class="line">&#125;else if(this.addForm.goods_number.trim() === &#x27;0&#x27;)&#123; this.$message.error(&#x27;请输入商品数量&#x27;) return false &#125; &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="D-展示信息"><a href="#D-展示信息" class="headerlink" title="D.展示信息"></a>D.展示信息</h4><p>展示商品参数信息,商品属性信息<br>在商品参数信息展示中使用的 el-checkbox,el-checkbox-group 组件，打开 element.js 引入组件并注册组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">//在用户点击tab栏时触发事件</span><br><span class="line">&lt;el-tabs v-model=&quot;activeIndex&quot; :tab-position=&quot;&#x27;left&#x27;&quot; :before-leave=&quot;beforeTabLeave&quot; @tab-click=&quot;tabClicked&quot;&gt;</span><br><span class="line">........</span><br><span class="line"></span><br><span class="line">//在参数信息，商品属性面板中添加循环生成结构的代码</span><br><span class="line">&lt;el-tab-pane label=&quot;商品参数&quot; name=&quot;1&quot;&gt;</span><br><span class="line">  &lt;!-- 渲染表单item项 --&gt;</span><br><span class="line">  &lt;el-form-item :label=&quot;item.attr_name&quot; :key=&quot;item.attr_id&quot; v-for=&quot;item in manyTableData&quot;&gt;</span><br><span class="line">      &lt;!-- 使用数组渲染复选框组 --&gt;</span><br><span class="line">      &lt;el-checkbox-group v-model=&quot;item.attr_vals&quot;&gt;</span><br><span class="line">          &lt;el-checkbox border :label=&quot;val&quot; v-for=&quot;(val,i) in item.attr_vals&quot; :key=&quot;i&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">      &lt;/el-checkbox-group&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">&lt;el-tab-pane label=&quot;商品属性&quot; name=&quot;2&quot;&gt;</span><br><span class="line">  &lt;!-- 循环生成静态属性 --&gt;</span><br><span class="line">  &lt;el-form-item :label=&quot;item.attr_name&quot; v-for=&quot;item in onlyTableData&quot; :key=&quot;item.attr_id&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;item.attr_vals&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">//在data数据中添加保存动态参数和静态属性的数组</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //动态参数列表</span><br><span class="line">      manyTableData: [],</span><br><span class="line">      //静态属性列表</span><br><span class="line">      onlyTableData:[]</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    .......</span><br><span class="line">    async tabClicked() &#123;</span><br><span class="line">      //当用户点击切换tab栏时触发</span><br><span class="line">      if (this.activeIndex === &#x27;1&#x27;) &#123;</span><br><span class="line">        //发送请求获取动态参数</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">          `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">          &#123; params: &#123; sel: &#x27;many&#x27; &#125; &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;获取动态参数列表失败&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        //将attr_vals字符串转换为数组</span><br><span class="line">        res.data.forEach(item =&gt; &#123;</span><br><span class="line">          item.attr_vals =</span><br><span class="line">            item.attr_vals.length === 0 ? [] : item.attr_vals.split(&#x27; &#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.manyTableData = res.data</span><br><span class="line">      &#125; else if (this.activeIndex === &#x27;2&#x27;) &#123;</span><br><span class="line">        //发送请求获取静态属性</span><br><span class="line">        const &#123; data: res &#125; = await this.$http.get(</span><br><span class="line">          `categories/$&#123;this.cateId&#125;/attributes`,</span><br><span class="line">          &#123; params: &#123; sel: &#x27;only&#x27; &#125; &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          return this.$message.error(&#x27;获取静态属性列表失败&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.onlyTableData = res.data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //添加 计算属性获取三级分类</span><br><span class="line">  computed: &#123;</span><br><span class="line">    cateId() &#123;</span><br><span class="line">      if (this.addForm.goods_cat.length === 3) &#123;</span><br><span class="line">        return this.addForm.goods_cat[2]</span><br><span class="line">      &#125;</span><br><span class="line">      return null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="六、今日目标"><a href="#六、今日目标" class="headerlink" title="六、今日目标"></a>六、今日目标</h2><p>1.完成商品添加 2.完成订单列表 3.完成数据统计展示</p>
<h3 id="1-添加商品"><a href="#1-添加商品" class="headerlink" title="1.添加商品"></a>1.添加商品</h3><h4 id="A-完成图片上传"><a href="#A-完成图片上传" class="headerlink" title="A.完成图片上传"></a>A.完成图片上传</h4><p>使用 upload 组件完成图片上传<br>在 element.js 中引入 upload 组件，并注册<br>因为 upload 组件进行图片上传的时候并不是使用 axios 发送请求<br>所以，我们需要手动为上传图片的请求添加 token，即为 upload 组件添加 headers 属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//在页面中添加upload组件，并设置对应的事件和属性</span><br><span class="line">&lt;el-tab-pane label=&quot;商品图片&quot; name=&quot;3&quot;&gt;</span><br><span class="line">  &lt;!-- 商品图片上传</span><br><span class="line">  action:指定图片上传api接口</span><br><span class="line">  :on-preview ： 当点击图片时会触发该事件进行预览操作,处理图片预览</span><br><span class="line">  :on-remove : 当用户点击图片右上角的X号时触发执行</span><br><span class="line">  :on-success：当用户点击上传图片并成功上传时触发</span><br><span class="line">  list-type ：设置预览图片的方式</span><br><span class="line">  :headers ：设置上传图片的请求头 --&gt;</span><br><span class="line">  &lt;el-upload :action=&quot;uploadURL&quot; :on-preview=&quot;handlePreview&quot; :on-remove=&quot;handleRemove&quot; :on-success=&quot;handleSuccess&quot; list-type=&quot;picture&quot; :headers=&quot;headerObj&quot;&gt;</span><br><span class="line">    &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">//在el-card卡片视图下面添加对话框用来预览图片</span><br><span class="line">&lt;!-- 预览图片对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;图片预览&quot; :visible.sync=&quot;previewVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">  &lt;img :src=&quot;previewPath&quot; class=&quot;previewImg&quot; /&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">//在data中添加数据 data()&#123; return &#123; ...... //添加商品的表单数据对象 addForm: &#123; goods_name: &#x27;&#x27;, goods_price: 0, goods_weight: 0, goods_number: 0, goods_cat: [], //上传图片数组 pics: [] &#125;, //上传图片的url地址 uploadURL: &#x27;http://127.0.0.1:8888/api/private/v1/upload&#x27;, //图片上传组件的headers请求头对象</span><br><span class="line">headerObj: &#123; Authorization: window.sessionStorage.getItem(&#x27;token&#x27;) &#125;, //保存预览图片的url地址 previewPath: &#x27;&#x27;, //控制预览图片对话框的显示和隐藏 previewVisible:false &#125; &#125;, //在methods中添加事件处理函数 methods:&#123; ....... handlePreview(file) &#123; //当用户点击图片进行预览时执行，处理图片预览</span><br><span class="line">//形参file就是用户预览的那个文件 this.previewPath = file.response.data.url //显示预览图片对话框 this.previewVisible = true &#125;, handleRemove(file) &#123; //当用户点击X号删除时执行 //形参file就是用户点击删除的文件 //获取用户点击删除的那个图片的临时路径 const filePath = file.response.data.tmp_path</span><br><span class="line">//使用findIndex来查找符合条件的索引 const index = this.addForm.pics.findIndex(item =&gt; item.pic === filePath) //移除索引对应的图片 this.addForm.pics.splice(index, 1) &#125;, handleSuccess(response) &#123; //当上传成功时触发执行 //形参response就是上传成功之后服务器返回的结果</span><br><span class="line">//将服务器返回的临时路径保存到addForm表单的pics数组中 this.addForm.pics.push(&#123; pic: response.data.tmp_path &#125;) &#125; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="B-使用富文本插件"><a href="#B-使用富文本插件" class="headerlink" title="B.使用富文本插件"></a>B.使用富文本插件</h4><p>想要使用富文本插件 vue-quill-editor，就必须先从依赖安装该插件<br>引入并注册 vue-quill-editor，打开 main.js，编写如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入vue-quill-editor（富文本编辑器）</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueQuillEditor</span> <span class="keyword">from</span> <span class="string">&#x27;vue-quill-editor&#x27;</span></span><br><span class="line"><span class="comment">//导入vue-quill-editor的样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.core.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.snow.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.bubble.css&#x27;</span></span><br><span class="line">......</span><br><span class="line"><span class="comment">//全局注册组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;tree-table&#x27;</span>, <span class="title class_">TreeTable</span>)</span><br><span class="line"><span class="comment">//全局注册富文本组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueQuillEditor</span>)</span><br></pre></td></tr></table></figure>

<p>使用富文本插件 vue-quill-editor</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 富文本编辑器组件 --&gt;</span><br><span class="line">&lt;el-tab-pane label=&quot;商品内容&quot; name=&quot;4&quot;&gt;</span><br><span class="line">  &lt;!-- 富文本编辑器组件 --&gt;</span><br><span class="line">  &lt;quill-editor v-model=&quot;addForm.goods_introduce&quot;&gt;&lt;/quill-editor&gt;</span><br><span class="line">  &lt;!-- 添加商品按钮 --&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; class=&quot;btnAdd&quot;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">//在数据中添加goods_introduce</span><br><span class="line">//添加商品的表单数据对象</span><br><span class="line">addForm: &#123;</span><br><span class="line">  goods_name: &#x27;&#x27;,</span><br><span class="line">  goods_price: 0,</span><br><span class="line">  goods_weight: 0,</span><br><span class="line">  goods_number: 0,</span><br><span class="line">  goods_cat: [],</span><br><span class="line">  //上传图片数组</span><br><span class="line">  pics: [],</span><br><span class="line">  //商品的详情介绍</span><br><span class="line">  goods_introduce:&#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//在global.css样式中添加富文本编辑器的最小高度</span><br><span class="line">.ql-editor&#123;</span><br><span class="line">    min-height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">//给添加商品按钮添加间距</span><br><span class="line">.btnAdd&#123;</span><br><span class="line">  margin-top:15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="C-添加商品"><a href="#C-添加商品" class="headerlink" title="C.添加商品"></a>C.添加商品</h4><p>完成添加商品的操作<br>在添加商品之前，为了避免 goods_cat 数组转换字符串之后导致级联选择器报错<br>我们需要打开 vue 控制条，点击依赖，安装 lodash，把 addForm 进行深拷贝</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//打开Add.vue，导入lodash</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//官方推荐将lodash导入为_</span><br><span class="line">import _ from &#x27;lodash&#x27;</span><br><span class="line"></span><br><span class="line">//给添加商品按钮绑定点击事件</span><br><span class="line">&lt;!-- 添加商品按钮 --&gt;</span><br><span class="line">&lt;el-button type=&quot;primary&quot; class=&quot;btnAdd&quot; @click=&quot;add&quot;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">//编写点击事件完成商品添加</span><br><span class="line">add()&#123;</span><br><span class="line">  this.$refs.addFormRef.validate(async valid=&gt;&#123;</span><br><span class="line">    if(!valid) return this.$message.error(&quot;请填写必要的表单项!&quot;)</span><br><span class="line"></span><br><span class="line">    //将addForm进行深拷贝，避免goods_cat数组转换字符串之后导致级联选择器报错</span><br><span class="line">    const form = _.cloneDeep(this.addForm)</span><br><span class="line">    //将goods_cat从数组转换为&quot;1,2,3&quot;字符串形式</span><br><span class="line">    form.goods_cat = form.goods_cat.join(&quot;,&quot;)</span><br><span class="line">    //处理attrs数组，数组中需要包含商品的动态参数和静态属性</span><br><span class="line">    //将manyTableData（动态参数）处理添加到attrs</span><br><span class="line">    this.manyTableData.forEach(item=&gt;&#123;</span><br><span class="line">      form.attrs.push(&#123; attr_id:item.attr_id, attr_value:item.attr_vals.join(&quot; &quot;) &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    //将onlyTableData（静态属性）处理添加到attrs</span><br><span class="line">    this.onlyTableData.forEach(item=&gt;&#123;</span><br><span class="line">      form.attrs.push(&#123; attr_id:item.attr_id, attr_value:item.attr_vals &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    //发送请求完成商品的添加,商品名称必须是唯一的</span><br><span class="line">    const &#123;data:res&#125; = await this.$http.post(&#x27;goods&#x27;,form)</span><br><span class="line">    if(res.meta.status !== 201)&#123;</span><br><span class="line">      return this.$message.error(&#x27;添加商品失败&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    this.$message.success(&#x27;添加商品成功&#x27;)</span><br><span class="line">    //编程式导航跳转到商品列表</span><br><span class="line">    this.$router.push(&#x27;/goods&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-推送代码"><a href="#D-推送代码" class="headerlink" title="D.推送代码"></a>D.推送代码</h4><p>推送 goods_list 分支到码云<br>将代码添加到暂存区： git add .<br>将代码提交到本地仓库： git commit -m “完成商品功能开发”<br>将代码推送到码云： git push<br>切换到 master 主分支： git checkout master<br>将 goods_list 分支代码合并到 master: git merge goods_list<br>将 master 推送到码云： git push</p>
<h3 id="2-订单列表"><a href="#2-订单列表" class="headerlink" title="2.订单列表"></a>2.订单列表</h3><h4 id="A-创建分支"><a href="#A-创建分支" class="headerlink" title="A.创建分支"></a>A.创建分支</h4><p>创建 order 子分支并推送到码云<br>创建 order 子分支: git checkout -b order<br>将 order 分支推送到码云： git push -u origin order</p>
<h4 id="B-创建路由"><a href="#B-创建路由" class="headerlink" title="B.创建路由"></a>B.创建路由</h4><p>创建订单列表路由组件并添加路由规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">//在components中新建order文件夹，新建Order.vue组件，组件中添加代码如下</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;订单列表&lt;/h3&gt;</span><br><span class="line">        &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;订单管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;订单列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;!-- 搜索栏 --&gt;</span><br><span class="line">            &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">                &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">                    &lt;el-input placeholder=&quot;请输入内容&quot; v-model=&quot;queryInfo.query&quot; clearable&gt;</span><br><span class="line">                        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; &gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;/el-input&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //查询条件</span><br><span class="line">        queryInfo:&#123;</span><br><span class="line">            query:&#x27;&#x27;,</span><br><span class="line">            pagenum:1,</span><br><span class="line">            pagesize:10</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">//打开router.js导入Order.vue并添加规则</span><br><span class="line">import Order from &#x27;./components/order/Order.vue&#x27;</span><br><span class="line"></span><br><span class="line">path: &#x27;/home&#x27;, component: Home, redirect: &#x27;/welcome&#x27;, children: [</span><br><span class="line">  &#123; path: &quot;/welcome&quot;, component: Welcome &#125;,</span><br><span class="line">  &#123; path: &quot;/users&quot;, component: Users &#125;,</span><br><span class="line">  &#123; path: &quot;/rights&quot;, component: Rights &#125;,</span><br><span class="line">  &#123; path: &quot;/roles&quot;, component: Roles  &#125;,</span><br><span class="line">  &#123; path: &quot;/categories&quot;, component: Cate  &#125;,</span><br><span class="line">  &#123; path: &quot;/params&quot;, component: Params  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods&quot;, component: GoodList  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods/add&quot;, component: GoodAdd  &#125;,</span><br><span class="line">  &#123; path: &quot;/orders&quot;, component: Order  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-实现数据展示及分页"><a href="#C-实现数据展示及分页" class="headerlink" title="C.实现数据展示及分页"></a>C.实现数据展示及分页</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">&lt;el-card&gt;</span><br><span class="line">    &lt;!-- 搜索栏 --&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">            &lt;el-input placeholder=&quot;请输入内容&quot; v-model=&quot;queryInfo.query&quot; clearable&gt;</span><br><span class="line">                &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 订单表格 --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;orderList&quot; border stripe&gt;</span><br><span class="line">        &lt;el-table-column type=&quot;index&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;订单编号&quot; prop=&quot;order_number&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;订单价格&quot; prop=&quot;order_price&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;是否付款&quot; prop=&quot;pay_status&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-tag type=&quot;success&quot; v-if=&quot;scope.row.pay_status === &#x27;1&#x27;&quot;&gt;已付款&lt;/el-tag&gt;</span><br><span class="line">                &lt;el-tag type=&quot;danger&quot; v-else&gt;未付款&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;是否发货&quot; prop=&quot;is_send&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;下单时间&quot; prop=&quot;create_time&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &#123;&#123;scope.row.create_time | dateFormat&#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;操作&quot; width=&quot;125px&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size=&quot;mini&quot; type=&quot;success&quot; icon=&quot;el-icon-location&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;el-pagination @size-change=&quot;handleSizeChange&quot; @current-change=&quot;handleCurrentChange&quot; :current-page=&quot;queryInfo.pagenum&quot; :page-sizes=&quot;[3, 5, 10, 15]&quot; :page-size=&quot;queryInfo.pagesize&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; :total=&quot;total&quot;&gt;</span><br><span class="line">    &lt;/el-pagination&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //查询条件</span><br><span class="line">      queryInfo: &#123;</span><br><span class="line">        query: &#x27;&#x27;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      //订单列表数据</span><br><span class="line">      orderList: [],</span><br><span class="line">      //数据总条数</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getOrderList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getOrderList() &#123;</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;orders&#x27;, &#123;</span><br><span class="line">        params: this.queryInfo</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取订单列表数据失败!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.total = res.data.total</span><br><span class="line">      this.orderList = res.data.goods</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange(newSize)&#123;</span><br><span class="line">        this.queryInfo.pagesize = newSize</span><br><span class="line">        this.getOrderList()</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(newPage)&#123;</span><br><span class="line">        this.queryInfo.pagenum = newPage</span><br><span class="line">        this.getOrderList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-制作省市区县联动"><a href="#D-制作省市区县联动" class="headerlink" title="D.制作省市区县联动"></a>D.制作省市区县联动</h4><p>打开今天的资料，找到素材文件夹，复制 citydata.js 文件到 components&#x2F;order 文件夹中<br>然后导入 citydata.js 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import cityData from &quot;./citydata.js&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">//给修改地址按钮添加点击事件</span><br><span class="line">&lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; @click=&quot;showEditAddress&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">//添加修改地址对话框,在卡片视图下方添加</span><br><span class="line">&lt;!-- 修改地址对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;修改收货地址&quot; :visible.sync=&quot;addressVisible&quot; width=&quot;50%&quot; @close=&quot;addressDialogClosed&quot;&gt;</span><br><span class="line">    &lt;!-- 添加表单 --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;addressForm&quot; :rules=&quot;addressFormRules&quot; ref=&quot;addressFormRef&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;省市区县&quot; prop=&quot;address1&quot;&gt;</span><br><span class="line">            &lt;el-cascader :options=&quot;cityData&quot; v-model=&quot;addressForm.address1&quot;&gt;&lt;/el-cascader&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;详细地址&quot; prop=&quot;address2&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;addressForm.address2&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;addressVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addressVisible = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">//js部分的代码</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import cityData from &quot;./citydata.js&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //控制修改地址对话框的显示和隐藏</span><br><span class="line">      addressVisible:false,</span><br><span class="line">      //修改收货地址的表单</span><br><span class="line">      addressForm:&#123;</span><br><span class="line">          address1:[],</span><br><span class="line">          address2:&#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      addressFormRules:&#123;</span><br><span class="line">          address1:[&#123; required: true, message: &#x27;请选择省市区县&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">          address2:[&#123; required: true, message: &#x27;请输入详细地址&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">      &#125;,</span><br><span class="line">      //将导入的cityData数据保存起来</span><br><span class="line">      cityData:cityData</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    ......</span><br><span class="line">    showEditAddress() &#123;</span><br><span class="line">      //当用户点击修改收货地址按钮时触发</span><br><span class="line">      this.addressVisible = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    addressDialogClosed()&#123;</span><br><span class="line">        this.$refs.addressFormRef.resetFields()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.el-cascader&#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="E-制作物流进度对话框"><a href="#E-制作物流进度对话框" class="headerlink" title="E.制作物流进度对话框"></a>E.制作物流进度对话框</h4><p>因为我们使用的是 element-ui 中提供的 Timeline 组件，所以需要导入并注册组件<br>打开 element.js,编写代码会进行导入和注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    Timeline,TimelineItem</span><br><span class="line">&#125; from &#x27;element-ui&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Timeline)</span><br><span class="line">Vue.use(TimelineItem)</span><br></pre></td></tr></table></figure>

<p>打开 Order.vue 文件，添加代码实现物流进度对话框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 物流信息进度对话框 --&gt;</span><br><span class="line">&lt;el-dialog title=&quot;物流进度&quot; :visible.sync=&quot;progressVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;!-- 时间线组件  --&gt;</span><br><span class="line">    &lt;el-timeline&gt;</span><br><span class="line">        &lt;el-timeline-item v-for=&quot;(activity, index) in progressInfo&quot;</span><br><span class="line">        :key=&quot;index&quot; :timestamp=&quot;activity.time&quot;&gt;</span><br><span class="line">            &#123;&#123;activity.context&#125;&#125;</span><br><span class="line">        &lt;/el-timeline-item&gt;</span><br><span class="line">    &lt;/el-timeline&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import cityData from &#x27;./citydata.js&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ......</span><br><span class="line">      //控制物流进度对话框的显示和隐藏</span><br><span class="line">      progressVisible: false,</span><br><span class="line">      //保存物流信息</span><br><span class="line">      progressInfo: []</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">    ......</span><br><span class="line">    async showProgress() &#123;</span><br><span class="line">      //发送请求获取物流数据</span><br><span class="line">      const &#123; data: res &#125; = await this.$http.get(&#x27;/kuaidi/804909574412544580&#x27;)</span><br><span class="line"></span><br><span class="line">      if (res.meta.status !== 200) &#123;</span><br><span class="line">        return this.$message.error(&#x27;获取物流进度失败!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.progressInfo = res.data</span><br><span class="line">      //显示对话框</span><br><span class="line">      this.progressVisible = true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="F-推送代码"><a href="#F-推送代码" class="headerlink" title="F.推送代码"></a>F.推送代码</h4><p>将 order 分支代码推送至码云<br>将代码添加到暂存区： git add .<br>将代码提交到本地仓库： git commit -m “完成订单列表功能开发”<br>将代码推送到码云： git push<br>切换到 master 主分支： git checkout master<br>将 goods_list 分支代码合并到 master: git merge order<br>将 master 推送到码云： git push</p>
<h3 id="3-数据统计"><a href="#3-数据统计" class="headerlink" title="3.数据统计"></a>3.数据统计</h3><h4 id="A-创建子分支"><a href="#A-创建子分支" class="headerlink" title="A.创建子分支"></a>A.创建子分支</h4><p>创建 report 子分支并推送到码云<br>创建 report 子分支: git checkout -b report<br>将 report 分支推送到码云： git push -u origin report</p>
<h4 id="B-创建路由-1"><a href="#B-创建路由-1" class="headerlink" title="B.创建路由"></a>B.创建路由</h4><p>创建数据统计路由组件并添加路由规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//在components中新建report文件夹，新建Report.vue组件，组件中添加代码如下</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;数据报表&lt;/h3&gt;</span><br><span class="line">        &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;数据统计&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;数据报表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">        &lt;el-card&gt;&lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,created()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,methods:&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>打开 router.js，导入 Report.vue 并设置路由规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Report from &#x27;./components/report/Report.vue&#x27;</span><br><span class="line">path: &#x27;/home&#x27;, component: Home, redirect: &#x27;/welcome&#x27;, children: [</span><br><span class="line">  &#123; path: &quot;/welcome&quot;, component: Welcome &#125;,</span><br><span class="line">  &#123; path: &quot;/users&quot;, component: Users &#125;,</span><br><span class="line">  &#123; path: &quot;/rights&quot;, component: Rights &#125;,</span><br><span class="line">  &#123; path: &quot;/roles&quot;, component: Roles  &#125;,</span><br><span class="line">  &#123; path: &quot;/categories&quot;, component: Cate  &#125;,</span><br><span class="line">  &#123; path: &quot;/params&quot;, component: Params  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods&quot;, component: GoodList  &#125;,</span><br><span class="line">  &#123; path: &quot;/goods/add&quot;, component: GoodAdd  &#125;,</span><br><span class="line">  &#123; path: &quot;/orders&quot;, component: Order  &#125;,</span><br><span class="line">  &#123; path: &quot;/reports&quot;, component: Report  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="C-导入-ECharts-并使用"><a href="#C-导入-ECharts-并使用" class="headerlink" title="C.导入 ECharts 并使用"></a>C.导入 ECharts 并使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;数据报表&lt;/h3&gt;</span><br><span class="line">        &lt;!-- 面包屑导航 --&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;数据统计&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;数据报表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;!-- 卡片视图区域 --&gt;</span><br><span class="line">        &lt;el-card&gt;</span><br><span class="line">            &lt;div id=&quot;main&quot; style=&quot;width:750px;height:400px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//导入echarts</span><br><span class="line">import echarts from &#x27;echarts&#x27;</span><br><span class="line">//导入lodash</span><br><span class="line">import _ from &#x27;lodash&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //需要跟请求的折线图数据合并的options</span><br><span class="line">      options: &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">          text: &#x27;用户来源&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          trigger: &#x27;axis&#x27;,</span><br><span class="line">          axisPointer: &#123;</span><br><span class="line">            type: &#x27;cross&#x27;,</span><br><span class="line">            label: &#123;</span><br><span class="line">              backgroundColor: &#x27;#E9EEF3&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        grid: &#123;</span><br><span class="line">          left: &#x27;3%&#x27;,</span><br><span class="line">          right: &#x27;4%&#x27;,</span><br><span class="line">          bottom: &#x27;3%&#x27;,</span><br><span class="line">          containLabel: true</span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            boundaryGap: false</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        yAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            type: &#x27;value&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">  async mounted() &#123;</span><br><span class="line">    //在页面dom元素加载完毕之后执行的钩子函数mounted</span><br><span class="line">    // 基于准备好的dom，初始化echarts实例</span><br><span class="line">    var myChart = echarts.init(document.getElementById(&#x27;main&#x27;))</span><br><span class="line">    //准备数据和配置项</span><br><span class="line">    //发送请求获取折线图数据</span><br><span class="line">    const &#123; data: res &#125; = await this.$http.get(&#x27;reports/type/1&#x27;)</span><br><span class="line"></span><br><span class="line">    if (res.meta.status !== 200) &#123;</span><br><span class="line">      return this.$message.error(&#x27;获取折线图数据失败&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //合并res.data和this.options</span><br><span class="line">    const result = _.merge(res.data,this.options)</span><br><span class="line"></span><br><span class="line">    // 使用获取的数据展示图表</span><br><span class="line">    myChart.setOption(result)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="D-推送代码-1"><a href="#D-推送代码-1" class="headerlink" title="D.推送代码"></a>D.推送代码</h4><p>推送 report 分支到码云<br>将代码添加到暂存区： git add .<br>将代码提交到本地仓库： git commit -m “完成数据报表功能开发”<br>将代码推送到码云： git push<br>切换到 master 主分支： git checkout master<br>将 report 分支代码合并到 master: git merge report<br>将 master 推送到码云： git push</p>
<h2 id="七、今日目标"><a href="#七、今日目标" class="headerlink" title="七、今日目标"></a>七、今日目标</h2><p>1.完成项目优化 2.完成项目上线</p>
<h3 id="1-项目优化"><a href="#1-项目优化" class="headerlink" title="1.项目优化"></a>1.项目优化</h3><p>实现步骤：<br>A.生成打包报告，根据报告优化项目<br>B.第三方库启用 CDN<br>C.Element-UI 组件按需加载<br>D.路由懒加载<br>E.首页内容定制</p>
<h3 id="2-添加进度条"><a href="#2-添加进度条" class="headerlink" title="2.添加进度条"></a>2.添加进度条</h3><p>给项目添加进度条效果，先打开项目控制台，打开依赖，安装 nprogress<br>打开 main.js，编写如下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//导入进度条插件</span><br><span class="line">import NProgress from &#x27;nprogress&#x27;</span><br><span class="line">//导入进度条样式</span><br><span class="line">import &#x27;nprogress/nprogress.css&#x27;</span><br><span class="line">.....</span><br><span class="line">//请求在到达服务器之前，先会调用use中的这个回调函数来添加请求头信息</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  //当进入request拦截器，表示发送了请求，我们就开启进度条</span><br><span class="line">  NProgress.start()</span><br><span class="line">  //为请求头对象，添加token验证的Authorization字段</span><br><span class="line">  config.headers.Authorization = window.sessionStorage.getItem(&quot;token&quot;)</span><br><span class="line">  //必须返回config</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">//在response拦截器中，隐藏进度条</span><br><span class="line">axios.interceptors.response.use(config =&gt;&#123;</span><br><span class="line">  //当进入response拦截器，表示请求已经结束，我们就结束进度条</span><br><span class="line">  NProgress.done()</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-根据报错修改代码"><a href="#3-根据报错修改代码" class="headerlink" title="3.根据报错修改代码"></a>3.根据报错修改代码</h3><p>根据 ESLint 的警告提示更改对应的代码<br>在.prettierrc 文件中更改设置”printWidth”:200, 将每行代码的文字数量更改为 200</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;semi&quot;:false,</span><br><span class="line">    &quot;singleQuote&quot;:true,</span><br><span class="line">    &quot;printWidth&quot;:200</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-执行-build"><a href="#4-执行-build" class="headerlink" title="4.执行 build"></a>4.执行 build</h3><p>安装一个插件（babel-plugin-transform-remove-console）在项目 build 阶段移除所有的 console 信息<br>打开项目控制台，点击依赖-&gt;开发依赖，输入 babel-plugin-transform-remove-console，安装<br>打开 babel.config.js，编辑代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//项目发布阶段需要用到的babel插件</span><br><span class="line">const productPlugins = []</span><br><span class="line"></span><br><span class="line">//判断是开发还是发布阶段</span><br><span class="line">if(process.env.NODE_ENV === &#x27;production&#x27;)&#123;</span><br><span class="line">  //发布阶段</span><br><span class="line">  productPlugins.push(&quot;transform-remove-console&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;@vue/app&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;component&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;libraryName&quot;: &quot;element-ui&quot;,</span><br><span class="line">        &quot;styleLibraryName&quot;: &quot;theme-chalk&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...productPlugins</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-生成打包报告"><a href="#5-生成打包报告" class="headerlink" title="5.生成打包报告"></a>5.生成打包报告</h3><p>A.命令行形式生成打包报告<br>vue-cli-service build –report<br>B.在 vue 控制台生成打包报告<br>点击“任务”&#x3D;&gt;“build”&#x3D;&gt;“运行”<br>运行完毕之后点击右侧“分析”，“控制台”面板查看报告</p>
<h3 id="6-修改-webpack-的默认配置"><a href="#6-修改-webpack-的默认配置" class="headerlink" title="6.修改 webpack 的默认配置"></a>6.修改 webpack 的默认配置</h3><p>默认情况下，vue-cli 3.0 生成的项目，隐藏了 webpack 配置项，如果我们需要配置 webpack<br>需要通过 vue.config.js 来配置。<br>在项目根目录中创建 vue.config.js 文件，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        //发布模式</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            //entry找到默认的打包入口，调用clear则是删除默认的打包入口</span><br><span class="line">            //add添加新的打包入口</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-prod.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        //开发模式</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>补充：<br>chainWebpack 可以通过链式编程的形式，修改 webpack 配置<br>configureWebpack 可以通过操作对象的形式，修改 webpack 配置</p>
<h3 id="7-加载外部-CDN"><a href="#7-加载外部-CDN" class="headerlink" title="7.加载外部 CDN"></a>7.加载外部 CDN</h3><p>默认情况下，依赖项的所有第三方包都会被打包到 js&#x2F;chunk-vendors.<strong>**</strong>.js 文件中，导致该 js 文件过大<br>那么我们可以通过 externals 排除这些包，使它们不被打包到 js&#x2F;chunk-vendors.<strong>**</strong>.js 文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        //发布模式</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            //entry找到默认的打包入口，调用clear则是删除默认的打包入口</span><br><span class="line">            //add添加新的打包入口</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-prod.js&#x27;)</span><br><span class="line"></span><br><span class="line">            //使用externals设置排除项</span><br><span class="line">            config.set(&#x27;externals&#x27;,&#123;</span><br><span class="line">                vue:&#x27;Vue&#x27;,</span><br><span class="line">                &#x27;vue-router&#x27;:&#x27;VueRouter&#x27;,</span><br><span class="line">                axios:&#x27;axios&#x27;,</span><br><span class="line">                lodash:&#x27;_&#x27;,</span><br><span class="line">                echarts:&#x27;echarts&#x27;,</span><br><span class="line">                nprogress:&#x27;NProgress&#x27;,</span><br><span class="line">                &#x27;vue-quill-editor&#x27;:&#x27;VueQuillEditor&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        //开发模式</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置好排除之后，为了使我们可以使用 vue，axios 等内容，我们需要加载外部 CDN 的形式解决引入依赖项。<br>打开开发入口文件 main-prod.js,删除掉默认的引入代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">// import &#x27;./plugins/element.js&#x27;</span><br><span class="line">//导入字体图标</span><br><span class="line">import &#x27;./fonts/iconfont.css&#x27;</span><br><span class="line">//导入全局样式</span><br><span class="line">import &#x27;./css/global.css&#x27;</span><br><span class="line">//导入第三方组件vue-table-with-tree-grid</span><br><span class="line">import TreeTable from &#x27;vue-table-with-tree-grid&#x27;</span><br><span class="line">//导入进度条插件</span><br><span class="line">import NProgress from &#x27;nprogress&#x27;</span><br><span class="line">//导入进度条样式</span><br><span class="line">// import &#x27;nprogress/nprogress.css&#x27;</span><br><span class="line">// //导入axios</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">// //导入vue-quill-editor（富文本编辑器）</span><br><span class="line">import VueQuillEditor from &#x27;vue-quill-editor&#x27;</span><br><span class="line">// //导入vue-quill-editor的样式</span><br><span class="line">// import &#x27;quill/dist/quill.core.css&#x27;</span><br><span class="line">// import &#x27;quill/dist/quill.snow.css&#x27;</span><br><span class="line">// import &#x27;quill/dist/quill.bubble.css&#x27;</span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL = &#x27;http://127.0.0.1:8888/api/private/v1/&#x27;</span><br><span class="line">//请求在到达服务器之前，先会调用use中的这个回调函数来添加请求头信息</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  //当进入request拦截器，表示发送了请求，我们就开启进度条</span><br><span class="line">  NProgress.start()</span><br><span class="line">  //为请求头对象，添加token验证的Authorization字段</span><br><span class="line">  config.headers.Authorization = window.sessionStorage.getItem(&quot;token&quot;)</span><br><span class="line">  //必须返回config</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">//在response拦截器中，隐藏进度条</span><br><span class="line">axios.interceptors.response.use(config =&gt;&#123;</span><br><span class="line">  //当进入response拦截器，表示请求已经结束，我们就结束进度条</span><br><span class="line">  NProgress.done()</span><br><span class="line">  return config</span><br><span class="line">&#125;)</span><br><span class="line">Vue.prototype.$http = axios</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">//全局注册组件</span><br><span class="line">Vue.component(&#x27;tree-table&#x27;, TreeTable)</span><br><span class="line">//全局注册富文本组件</span><br><span class="line">Vue.use(VueQuillEditor)</span><br><span class="line"></span><br><span class="line">//创建过滤器将秒数过滤为年月日，时分秒</span><br><span class="line">Vue.filter(&#x27;dateFormat&#x27;,function(originVal)&#123;</span><br><span class="line">  const dt = new Date(originVal)</span><br><span class="line">  const y = dt.getFullYear()</span><br><span class="line">  const m = (dt.getMonth()+1+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const d = (dt.getDate()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line"></span><br><span class="line">  const hh = (dt.getHours()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const mm = (dt.getMinutes()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line">  const ss = (dt.getSeconds()+&#x27;&#x27;).padStart(2,&#x27;0&#x27;)</span><br><span class="line"></span><br><span class="line">  return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>然后打开 public&#x2F;index.html 添加外部 cdn 引入代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</span><br><span class="line">    &lt;title&gt;电商后台管理系统&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- nprogress 的样式表文件 --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot; /&gt;</span><br><span class="line">    &lt;!-- 富文本编辑器 的样式表文件 --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.core.min.css&quot; /&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.snow.min.css&quot; /&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.bubble.min.css&quot; /&gt;</span><br><span class="line">    &lt;!-- element-ui 的样式表文件 --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/element-ui/2.8.2/theme-chalk/index.css&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/vue/2.5.22/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/axios/0.18.0/axios.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/lodash.js/4.17.11/lodash.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/echarts/4.1.0/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- 富文本编辑器的 js 文件 --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue-quill-editor@3.0.4/dist/vue-quill-editor.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- element-ui 的 js 文件 --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/element-ui/2.8.2/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;noscript&gt;</span><br><span class="line">      &lt;strong&gt;We&#x27;re sorry but vue_shop doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;</span><br><span class="line">    &lt;/noscript&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- built files will be auto injected --&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8-定制首页内容"><a href="#8-定制首页内容" class="headerlink" title="8.定制首页内容"></a>8.定制首页内容</h3><p>开发环境的首页和发布环境的首页展示内容的形式有所不同<br>如开发环境中使用的是 import 加载第三方包，而发布环境则是使用 CDN，那么首页也需根据环境不同来进行不同的实现<br>我们可以通过插件的方式来定制首页内容，打开 vue.config.js，编写代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    chainWebpack:config=&gt;&#123;</span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;production&#x27;,config=&gt;&#123;</span><br><span class="line">            ......</span><br><span class="line"></span><br><span class="line">            //使用插件</span><br><span class="line">            config.plugin(&#x27;html&#x27;).tap(args=&gt;&#123;</span><br><span class="line">                //添加参数isProd</span><br><span class="line">                args[0].isProd = true</span><br><span class="line">                return args</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        config.when(process.env.NODE_ENV === &#x27;development&#x27;,config=&gt;&#123;</span><br><span class="line">            config.entry(&#x27;app&#x27;).clear().add(&#x27;./src/main-dev.js&#x27;)</span><br><span class="line"></span><br><span class="line">            //使用插件</span><br><span class="line">            config.plugin(&#x27;html&#x27;).tap(args=&gt;&#123;</span><br><span class="line">                //添加参数isProd</span><br><span class="line">                args[0].isProd = false</span><br><span class="line">                return args</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在 public&#x2F;index.html 中使用插件判断是否为发布环境并定制首页内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</span><br><span class="line">    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.isProd ? &#x27;&#x27; : &#x27;dev - &#x27; %&gt;电商后台管理系统&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;% if(htmlWebpackPlugin.options.isProd)&#123; %&gt;</span><br><span class="line">    &lt;!-- nprogress 的样式表文件 --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot; /&gt;</span><br><span class="line">    ........</span><br><span class="line">    &lt;!-- element-ui 的 js 文件 --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/element-ui/2.8.2/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  .......</span><br></pre></td></tr></table></figure>

<h3 id="9-路由懒加载"><a href="#9-路由懒加载" class="headerlink" title="9.路由懒加载"></a>9.路由懒加载</h3><p>当路由被访问时才加载对应的路由文件，就是路由懒加载。<br>路由懒加载实现步骤： 1.安装 @babel&#x2F;plugin-syntax-dynamic-import<br>打开 vue 控制台，点击依赖-&gt;安装依赖-&gt;开发依赖-&gt;搜索@babel&#x2F;plugin-syntax-dynamic-import<br>点击安装。</p>
<p>2.在 babel.config.js 中声明该插件，打开 babel.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//项目发布阶段需要用到的babel插件</span><br><span class="line">const productPlugins = []</span><br><span class="line"></span><br><span class="line">//判断是开发还是发布阶段</span><br><span class="line">if(process.env.NODE_ENV === &#x27;production&#x27;)&#123;</span><br><span class="line">  //发布阶段</span><br><span class="line">  productPlugins.push(&quot;transform-remove-console&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;@vue/app&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;component&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;libraryName&quot;: &quot;element-ui&quot;,</span><br><span class="line">        &quot;styleLibraryName&quot;: &quot;theme-chalk&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...productPlugins,</span><br><span class="line">    //配置路由懒加载插件</span><br><span class="line">    &quot;@babel/plugin-syntax-dynamic-import&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.将路由更改为按需加载的形式，打开 router.js，更改引入组件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Router from &#x27;vue-router&#x27;</span><br><span class="line">const Login = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Login.vue&#x27;)</span><br><span class="line">// import Login from &#x27;./components/Login.vue&#x27;</span><br><span class="line">const Home = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Home.vue&#x27;)</span><br><span class="line">// import Home from &#x27;./components/Home.vue&#x27;</span><br><span class="line">const Welcome = () =&gt; import(/* webpackChunkName:&quot;login_home_welcome&quot; */ &#x27;./components/Welcome.vue&#x27;)</span><br><span class="line">// import Welcome from &#x27;./components/Welcome.vue&#x27;</span><br><span class="line">const Users = () =&gt; import(/* webpackChunkName:&quot;user&quot; */ &#x27;./components/user/Users.vue&#x27;)</span><br><span class="line">// import Users from &#x27;./components/user/Users.vue&#x27;</span><br><span class="line">const Rights = () =&gt; import(/* webpackChunkName:&quot;power&quot; */ &#x27;./components/power/Rights.vue&#x27;)</span><br><span class="line">// import Rights from &#x27;./components/power/Rights.vue&#x27;</span><br><span class="line">const Roles = () =&gt; import(/* webpackChunkName:&quot;power&quot; */ &#x27;./components/power/Roles.vue&#x27;)</span><br><span class="line">// import Roles from &#x27;./components/power/Roles.vue&#x27;</span><br><span class="line">const Cate = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Cate.vue&#x27;)</span><br><span class="line">// import Cate from &#x27;./components/goods/Cate.vue&#x27;</span><br><span class="line">const Params = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Params.vue&#x27;)</span><br><span class="line">// import Params from &#x27;./components/goods/Params.vue&#x27;</span><br><span class="line">const GoodList = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/List.vue&#x27;)</span><br><span class="line">// import GoodList from &#x27;./components/goods/List.vue&#x27;</span><br><span class="line">const GoodAdd = () =&gt; import(/* webpackChunkName:&quot;goods&quot; */ &#x27;./components/goods/Add.vue&#x27;)</span><br><span class="line">// import GoodAdd from &#x27;./components/goods/Add.vue&#x27;</span><br><span class="line">const Order = () =&gt; import(/* webpackChunkName:&quot;order&quot; */ &#x27;./components/order/Order.vue&#x27;)</span><br><span class="line">// import Order from &#x27;./components/order/Order.vue&#x27;</span><br><span class="line">const Report = () =&gt; import(/* webpackChunkName:&quot;report&quot; */ &#x27;./components/report/Report.vue&#x27;)</span><br><span class="line">// import Report from &#x27;./components/report/Report.vue&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="10-项目上线"><a href="#10-项目上线" class="headerlink" title="10.项目上线"></a>10.项目上线</h3><h4 id="A-通过-node-创建服务器"><a href="#A-通过-node-创建服务器" class="headerlink" title="A.通过 node 创建服务器"></a>A.通过 node 创建服务器</h4><p>在 vue_shop 同级创建一个文件夹 vue_shop_server 存放 node 服务器<br>使用终端打开 vue_shop_server 文件夹，输入命令 npm init -y<br>初始化包之后，输入命令 npm i express -S<br>打开 vue_shop 目录，复制 dist 文件夹，粘贴到 vue_shop_server 中<br>在 vue_shop_server 文件夹中创建 app.js 文件,编写代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">app.listen(8998,()=&gt;&#123;</span><br><span class="line">    console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>然后再次在终端中输入 node app.js</p>
<h4 id="B-开启-gzip-压缩"><a href="#B-开启-gzip-压缩" class="headerlink" title="B.开启 gzip 压缩"></a>B.开启 gzip 压缩</h4><p>打开 vue_shop_server 文件夹的终端，输入命令：npm i compression -D<br>打开 app.js,编写代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line"></span><br><span class="line">const compression = require(&#x27;compression&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">app.use(compression())</span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">app.listen(8998,()=&gt;&#123;</span><br><span class="line">    console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="C-配置-https-服务"><a href="#C-配置-https-服务" class="headerlink" title="C.配置 https 服务"></a>C.配置 https 服务</h4><p>配置 https 服务一般是后台进行处理，前端开发人员了解即可。<br>首先，需要申请 SSL 证书，进入<a target="_blank" rel="noopener" href="https://freessl.cn官网/">https://freessl.cn官网</a><br>在后台导入证书，打开今天资料&#x2F;素材，复制素材中的两个文件到 vue_shop_server 中<br>打开 app.js 文件，编写代码导入证书，并开启 https 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const compression = require(&#x27;compression&#x27;)</span><br><span class="line">const https = require(&#x27;https&#x27;)</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line">//创建配置对象设置公钥和私钥</span><br><span class="line">const options = &#123;</span><br><span class="line">    cert:fs.readFileSync(&#x27;./full_chain.pem&#x27;),</span><br><span class="line">    key:fs.readFileSync(&#x27;./private.key&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.use(compression())</span><br><span class="line">app.use(express.static(&#x27;./dist&#x27;))</span><br><span class="line"></span><br><span class="line">// app.listen(8998,()=&gt;&#123;</span><br><span class="line">//     console.log(&quot;server running at http://127.0.0.1:8998&quot;)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">//启动https服务</span><br><span class="line">https.createServer(options,app).listen(443)</span><br></pre></td></tr></table></figure>

<p>注意：因为我们使用的证书有问题，所以无法正常使用 https 服务</p>
<h4 id="D-使用-pm2-管理应用"><a href="#D-使用-pm2-管理应用" class="headerlink" title="D.使用 pm2 管理应用"></a>D.使用 pm2 管理应用</h4><p>打开 vue_shop_server 文件夹的终端，输入命令：npm i pm2 -g<br>使用 pm2 启动项目，在终端中输入命令：pm2 start app.js –name 自定义名称<br>查看项目列表命令：pm2 ls<br>重启项目：pm2 restart 自定义名称<br>停止项目：pm2 stop 自定义名称<br>删除项目：pm2 delete 自定义名称</p>
<h2 id="八、今日目标"><a href="#八、今日目标" class="headerlink" title="八、今日目标"></a>八、今日目标</h2><p>1.Vuex 概述</p>
<p>2.Vuex 基本使用</p>
<p>3.使用 Vuex 完成 todo 案例</p>
<h3 id="1-Vuex-概述"><a href="#1-Vuex-概述" class="headerlink" title="1.Vuex 概述"></a>1.Vuex 概述</h3><p>Vuex 是实现组件全局状态（数据）管理的一种机制，可以方便的实现组件之间的数据共享</p>
<p>使用 Vuex 管理数据的好处：<br>A.能够在 vuex 中集中管理共享的数据，便于开发和后期进行维护<br>B.能够高效的实现组件之间的数据共享，提高开发效率<br>C.存储在 vuex 中的数据是响应式的，当数据发生改变时，页面中的数据也会同步更新</p>
<h3 id="2-Vuex-的基本使用"><a href="#2-Vuex-的基本使用" class="headerlink" title="2.Vuex 的基本使用"></a>2.Vuex 的基本使用</h3><p>创建带有 vuex 的 vue 项目，打开终端，输入命令：vue ui<br>当项目仪表盘打开之后，我们点击页面左上角的项目管理下拉列表，再点击 Vue 项目管理器<br>点击创建项目，如下图所示<br>第一步，设置项目名称和包管理器<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE01.png"><br>第二步，设置手动配置项目<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE02.png"><br>第三步，设置功能项<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE03.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE04.png"><br>第四步，创建项目<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Vue/%E5%88%9B%E5%BB%BAvuex%E9%A1%B9%E7%9B%AE05.png"></p>
<h3 id="3-使用-Vuex-完成计数器案例"><a href="#3-使用-Vuex-完成计数器案例" class="headerlink" title="3.使用 Vuex 完成计数器案例"></a>3.使用 Vuex 完成计数器案例</h3><p>打开刚刚创建的 vuex 项目，找到 src 目录中的 App.vue 组件，将代码重新编写如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;my-addition&gt;&lt;/my-addition&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;----------------------------------------&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;my-subtraction&gt;&lt;/my-subtraction&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Addition from &#x27;./components/Addition.vue&#x27;</span><br><span class="line">import Subtraction from &#x27;./components/Subtraction.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    &#x27;my-subtraction&#x27;: Subtraction,</span><br><span class="line">    &#x27;my-addition&#x27;: Addition</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在 components 文件夹中创建 Addition.vue 组件，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;当前最新的count值为：&lt;/h3&gt;</span><br><span class="line">        &lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在 components 文件夹中创建 Subtraction.vue 组件，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;当前最新的count值为：&lt;/h3&gt;</span><br><span class="line">        &lt;button&gt;-1&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>最后在项目根目录(与 src 平级)中创建 .prettierrc 文件，编写代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;semi&quot;:false,</span><br><span class="line">    &quot;singleQuote&quot;:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-Vuex-中的核心特性"><a href="#4-Vuex-中的核心特性" class="headerlink" title="4.Vuex 中的核心特性"></a>4.Vuex 中的核心特性</h3><h4 id="A-State"><a href="#A-State" class="headerlink" title="A.State"></a>A.State</h4><p>​ State 提供唯一的公共数据源，所有共享的数据都要统一放到 Store 中的 State 中存储<br>​ 例如，打开项目中的 store.js 文件，在 State 对象中可以添加我们要共享的数据，如：count:0<br>​</p>
<pre><code>在组件中访问State的方式：
1).this.$store.state.全局数据名称  如：this.$store.state.count
2).先按需导入mapState函数： import &#123; mapState &#125; from &#39;vuex&#39;
然后数据映射为计算属性： computed:&#123; ...mapState([&#39;全局数据名称&#39;]) &#125;
</code></pre>
<h4 id="B-Mutation"><a href="#B-Mutation" class="headerlink" title="B.Mutation"></a>B.Mutation</h4><p>Mutation 用于修改变更$store 中的数据<br>使用方式：<br>打开 store.js 文件，在 mutations 中添加代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">    add(state,step)&#123;</span><br><span class="line">      //第一个形参永远都是state也就是$state对象</span><br><span class="line">      //第二个形参是调用add时传递的参数</span><br><span class="line">      state.count+=step;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>然后在 Addition.vue 中给按钮添加事件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;Add&quot;&gt;+1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">  Add()&#123;</span><br><span class="line">    //使用commit函数调用mutations中的对应函数，</span><br><span class="line">    //第一个参数就是我们要调用的mutations中的函数名</span><br><span class="line">    //第二个参数就是传递给add函数的参数</span><br><span class="line">    this.$store.commit(&#x27;add&#x27;,10)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 mutations 的第二种方式：<br>import { mapMutations } from ‘vuex’</p>
<p>methods:{<br>…mapMutations([‘add’])<br>}<br>如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mapState,mapMutations &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">      //获得mapMutations映射的sub函数</span><br><span class="line">      ...mapMutations([&#x27;sub&#x27;]),</span><br><span class="line">      //当点击按钮时触发Sub函数</span><br><span class="line">      Sub()&#123;</span><br><span class="line">          //调用sub函数完成对数据的操作</span><br><span class="line">          this.sub(10);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">      ...mapState([&#x27;count&#x27;])</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="C-Action"><a href="#C-Action" class="headerlink" title="C.Action"></a>C.Action</h4><p>在 mutations 中不能编写异步的代码，会导致 vue 调试器的显示出错。<br>在 vuex 中我们可以使用 Action 来执行异步操作。<br>操作步骤如下：<br>打开 store.js 文件，修改 Action，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  addAsync(context,step)&#123;</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">      context.commit(&#x27;add&#x27;,step);</span><br><span class="line">    &#125;,2000)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在 Addition.vue 中给按钮添加事件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;AddAsync&quot;&gt;...+1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">  AddAsync()&#123;</span><br><span class="line">    this.$store.dispatch(&#x27;addAsync&#x27;,5)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二种方式：<br>import { mapActions } from ‘vuex’</p>
<p>methods:{<br>…mapMutations([‘subAsync’])<br>}<br>如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mapState,mapMutations,mapActions &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">      //获得mapMutations映射的sub函数</span><br><span class="line">      ...mapMutations([&#x27;sub&#x27;]),</span><br><span class="line">      //当点击按钮时触发Sub函数</span><br><span class="line">      Sub()&#123;</span><br><span class="line">          //调用sub函数完成对数据的操作</span><br><span class="line">          this.sub(10);</span><br><span class="line">      &#125;,</span><br><span class="line">      //获得mapActions映射的addAsync函数</span><br><span class="line">      ...mapActions([&#x27;subAsync&#x27;]),</span><br><span class="line">      asyncSub()&#123;</span><br><span class="line">          this.subAsync(5);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">      ...mapState([&#x27;count&#x27;])</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="D-Getter"><a href="#D-Getter" class="headerlink" title="D.Getter"></a>D.Getter</h4><p>Getter 用于对 Store 中的数据进行加工处理形成新的数据<br>它只会包装 Store 中保存的数据，并不会修改 Store 中保存的数据，当 Store 中的数据发生变化时，Getter 生成的内容也会随之变化<br>打开 store.js 文件，添加 getters，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  .......</span><br><span class="line">  getters:&#123;</span><br><span class="line">    //添加了一个showNum的属性</span><br><span class="line">    showNum : state =&gt;&#123;</span><br><span class="line">      return &#x27;最新的count值为：&#x27;+state.count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>然后打开 Addition.vue 中，添加插值表达式使用 getters</p>
<h3></h3>

<p>或者也可以在 Addition.vue 中，导入 mapGetters，并将之映射为计算属性<br>import { mapGetters } from ‘vuex’<br>computed:{<br>…mapGetters([‘showNum’])<br>}</p>
<h3 id="5-vuex-案例"><a href="#5-vuex-案例" class="headerlink" title="5.vuex 案例"></a>5.vuex 案例</h3><h4 id="A-初始化案例"><a href="#A-初始化案例" class="headerlink" title="A.初始化案例"></a>A.初始化案例</h4><p>首先使用 vue ui 初始化一个使用 vuex 的案例<br>然后打开 public 文件夹，创建一个 list.json 文件，文件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 0,</span><br><span class="line">        &quot;info&quot;: &quot;Racing car sprays burning fuel into crowd.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;info&quot;: &quot;Japanese princess to wed commoner.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;info&quot;: &quot;Australian walks 100km after outback crash.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 3,</span><br><span class="line">        &quot;info&quot;: &quot;Man charged over missing wedding girl.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;: 4,</span><br><span class="line">        &quot;info&quot;: &quot;Los Angeles battles huge wildfires.&quot;,</span><br><span class="line">        &quot;done&quot;: false</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>再接着，打开 main.js,添加 store.js 的引入，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import store from &#x27;./store.js&#x27;</span><br><span class="line"></span><br><span class="line">// 1. 导入 ant-design-vue 组件库</span><br><span class="line">import Antd from &#x27;ant-design-vue&#x27;</span><br><span class="line">// 2. 导入组件库的样式表</span><br><span class="line">import &#x27;ant-design-vue/dist/antd.css&#x27;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line">// 3. 安装组件库</span><br><span class="line">Vue.use(Antd)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  store,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>再接着打开 store.js，添加 axios 请求 json 文件获取数据的代码，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    //所有任务列表</span><br><span class="line">    list: [],</span><br><span class="line">    //文本输入框中的值</span><br><span class="line">    inputValue: &#x27;AAA&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    initList(state, list) &#123;</span><br><span class="line">      state.list = list</span><br><span class="line">    &#125;,</span><br><span class="line">    setInputValue(state,value)&#123;</span><br><span class="line">      state.inputValue = value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    getList(context) &#123;</span><br><span class="line">      axios.get(&#x27;/list.json&#x27;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        console.log(data);</span><br><span class="line">        context.commit(&#x27;initList&#x27;, data)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>最后，代开 App.vue 文件，将 store 中的数据获取并展示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;a-input placeholder=&quot;请输入任务&quot; class=&quot;my_ipt&quot; :value=&quot;inputValue&quot; @change=&quot;handleInputChange&quot; /&gt;</span><br><span class="line">    &lt;a-button type=&quot;primary&quot;&gt;添加事项&lt;/a-button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a-list bordered :dataSource=&quot;list&quot; class=&quot;dt_list&quot;&gt;</span><br><span class="line">      &lt;a-list-item slot=&quot;renderItem&quot; slot-scope=&quot;item&quot;&gt;</span><br><span class="line">        &lt;!-- 复选框 --&gt;</span><br><span class="line">        &lt;a-checkbox :checked=&quot;item.done&quot;&gt;&#123;&#123;item.info&#125;&#125;&lt;/a-checkbox&gt;</span><br><span class="line">        &lt;!-- 删除链接 --&gt;</span><br><span class="line">        &lt;a slot=&quot;actions&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">      &lt;/a-list-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- footer区域 --&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;footer&quot;&gt;</span><br><span class="line">        &lt;!-- 未完成的任务个数 --&gt;</span><br><span class="line">        &lt;span&gt;0条剩余&lt;/span&gt;</span><br><span class="line">        &lt;!-- 操作按钮 --&gt;</span><br><span class="line">        &lt;a-button-group&gt;</span><br><span class="line">          &lt;a-button type=&quot;primary&quot;&gt;全部&lt;/a-button&gt;</span><br><span class="line">          &lt;a-button&gt;未完成&lt;/a-button&gt;</span><br><span class="line">          &lt;a-button&gt;已完成&lt;/a-button&gt;</span><br><span class="line">        &lt;/a-button-group&gt;</span><br><span class="line">        &lt;!-- 把已经完成的任务清空 --&gt;</span><br><span class="line">        &lt;a&gt;清除已完成&lt;/a&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/a-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // list:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">    // console.log(this.$store);</span><br><span class="line">    this.$store.dispatch(&#x27;getList&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    handleInputChange(e)&#123;</span><br><span class="line">      // console.log(e.target.value)</span><br><span class="line">      this.$store.commit(&#x27;setInputValue&#x27;,e.target.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my_ipt &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dt_list &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footer &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="B-完成添加事项"><a href="#B-完成添加事项" class="headerlink" title="B.完成添加事项"></a>B.完成添加事项</h4><p>首先，打开 App.vue 文件，给“添加事项”按钮绑定点击事件，编写处理函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//绑定事件</span><br><span class="line">&lt;a-button type=&quot;primary&quot; @click=&quot;addItemToList&quot;&gt;添加事项&lt;/a-button&gt;</span><br><span class="line"></span><br><span class="line">//编写事件处理函数</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    addItemToList()&#123;</span><br><span class="line">      //向列表中新增事项</span><br><span class="line">      if(this.inputValue.trim().length &lt;= 0)&#123;</span><br><span class="line">        return this.$message.warning(&#x27;文本框内容不能为空&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.$store.commit(&#x27;addItem&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>然后打开 store.js 编写 addItem</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    //所有任务列表</span><br><span class="line">    list: [],</span><br><span class="line">    //文本输入框中的值</span><br><span class="line">    inputValue: &#x27;AAA&#x27;,</span><br><span class="line">    //下一个id</span><br><span class="line">    nextId:5</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    //添加列表项</span><br><span class="line">    addItem(state)&#123;</span><br><span class="line">      const obj = &#123;</span><br><span class="line">        id :state.nextId,</span><br><span class="line">        info: state.inputValue.trim(),</span><br><span class="line">        done:false</span><br><span class="line">      &#125;</span><br><span class="line">      //将创建好的事项添加到数组list中</span><br><span class="line">      state.list.push(obj)</span><br><span class="line">      //将nextId值自增</span><br><span class="line">      state.nextId++</span><br><span class="line">      state.inputValue = &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="C-完成删除事项"><a href="#C-完成删除事项" class="headerlink" title="C.完成删除事项"></a>C.完成删除事项</h4><p>首先，打开 App.vue 文件，给“删除”按钮绑定点击事件，编写处理函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//绑定事件</span><br><span class="line">&lt;a slot=&quot;actions&quot; @click=&quot;removeItemById(item.id)&quot;&gt;删除&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">//编写事件处理函数</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    removeItemById(id)&#123;</span><br><span class="line">      //根据id删除事项</span><br><span class="line">      this.$store.commit(&#x27;removeItem&#x27;,id)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>然后打开 store.js 编写 addItem</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    removeItem(state,id)&#123;</span><br><span class="line">      //根据id删除事项数据</span><br><span class="line">      const index = state.list.findIndex( x =&gt; x.id === id )</span><br><span class="line">      // console.log(index);</span><br><span class="line">      if(index != -1) state.list.splice(index,1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="D-完成选中状态的改变"><a href="#D-完成选中状态的改变" class="headerlink" title="D.完成选中状态的改变"></a>D.完成选中状态的改变</h4><p>首先，打开 App.vue 文件，给“复选”按钮绑定点击事件，编写处理函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//绑定事件</span><br><span class="line">&lt;a-checkbox :checked=&quot;item.done&quot; @change=&quot;cbStateChanged(item.id,$event)&quot;&gt;&#123;&#123;item.info&#125;&#125;&lt;/a-checkbox&gt;</span><br><span class="line"></span><br><span class="line">//编写事件处理函数</span><br><span class="line">methods:&#123;</span><br><span class="line">    ......</span><br><span class="line">    cbStateChanged(id,e)&#123;</span><br><span class="line">      //复选框状态改变时触发</span><br><span class="line">      const param = &#123;</span><br><span class="line">        id:id,</span><br><span class="line">        status:e.target.checked</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      //根据id更改事项状态</span><br><span class="line">      this.$store.commit(&#x27;changeStatus&#x27;,param)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>然后打开 store.js 编写 addItem</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    changeStatus(state,param)&#123;</span><br><span class="line">      //根据id改变对应事项的状态</span><br><span class="line">      const index = state.list.findIndex( x =&gt; x.id === param.id )</span><br><span class="line">      if(index != -1) state.list[index].done = param.status</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="E-剩余项统计"><a href="#E-剩余项统计" class="headerlink" title="E.剩余项统计"></a>E.剩余项统计</h4><p>打开 store.js，添加 getters 完成剩余项统计</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getters:&#123;</span><br><span class="line">  unDoneLength(state)&#123;</span><br><span class="line">    const temp = state.list.filter( x =&gt; x.done === false )</span><br><span class="line">    console.log(temp)</span><br><span class="line">    return temp.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开 App.vue，使用 getters 展示剩余项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//使用映射好的计算属性展示剩余项</span><br><span class="line">&lt;!-- 未完成的任务个数 --&gt;</span><br><span class="line">&lt;span&gt;&#123;&#123;unDoneLength&#125;&#125;条剩余&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">//导入getters</span><br><span class="line">import &#123; mapState,mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">//映射</span><br><span class="line">computed:&#123;</span><br><span class="line">  ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;]),</span><br><span class="line">  ...mapGetters([&#x27;unDoneLength&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="F-清除完成事项"><a href="#F-清除完成事项" class="headerlink" title="F.清除完成事项"></a>F.清除完成事项</h4><p>首先，打开 App.vue 文件，给“清除已完成”按钮绑定点击事件，编写处理函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 把已经完成的任务清空 --&gt;</span><br><span class="line">&lt;a @click=&quot;clean&quot;&gt;清除已完成&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">//编写事件处理函数</span><br><span class="line">methods:&#123;</span><br><span class="line">  ......</span><br><span class="line">  clean()&#123;</span><br><span class="line">    //清除已经完成的事项</span><br><span class="line">    this.$store.commit(&#x27;cleanDone&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后打开 store.js 编写 addItem</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  ......</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ........</span><br><span class="line">    cleanDone(state)&#123;</span><br><span class="line">      state.list = state.list.filter( x =&gt; x.done === false )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="G-点击选项卡切换事项"><a href="#G-点击选项卡切换事项" class="headerlink" title="G.点击选项卡切换事项"></a>G.点击选项卡切换事项</h4><p>打开 App.vue，给“全部”，“未完成”，“已完成”三个选项卡绑定点击事件，编写处理函数<br>并将列表数据来源更改为一个 getters。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-list bordered :dataSource=&quot;infoList&quot; class=&quot;dt_list&quot;&gt;</span><br><span class="line">  ......</span><br><span class="line">  &lt;!-- 操作按钮 --&gt;</span><br><span class="line">  &lt;a-button-group&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;all&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;all&#x27;)&quot;&gt;全部&lt;/a-button&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;undone&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;undone&#x27;)&quot;&gt;未完成&lt;/a-button&gt;</span><br><span class="line">    &lt;a-button :type=&quot;viewKey ===&#x27;done&#x27;?&#x27;primary&#x27;:&#x27;default&#x27;&quot; @click=&quot;changeList(&#x27;done&#x27;)&quot;&gt;已完成&lt;/a-button&gt;</span><br><span class="line">  &lt;/a-button-group&gt;</span><br><span class="line">  ......</span><br><span class="line">&lt;/a-list&gt;</span><br><span class="line"></span><br><span class="line">//编写事件处理函数以及映射计算属性</span><br><span class="line">methods:&#123;</span><br><span class="line">  ......</span><br><span class="line">  changeList( key )&#123;</span><br><span class="line">    //点击“全部”，“已完成”，“未完成”时触发</span><br><span class="line">    this.$store.commit(&#x27;changeKey&#x27;,key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">computed:&#123;</span><br><span class="line">  ...mapState([&#x27;list&#x27;,&#x27;inputValue&#x27;,&#x27;viewKey&#x27;]),</span><br><span class="line">  ...mapGetters([&#x27;unDoneLength&#x27;,&#x27;infoList&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开 store.js，添加 getters，mutations，state</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    ......</span><br><span class="line">    //保存默认的选项卡值</span><br><span class="line">    viewKey:&#x27;all&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ......</span><br><span class="line">    changeKey(state,key)&#123;</span><br><span class="line">      //当用户点击“全部”，“已完成”，“未完成”选项卡时触发</span><br><span class="line">      state.viewKey = key</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ......</span><br><span class="line">  getters:&#123;</span><br><span class="line">    .......</span><br><span class="line">    infoList(state)&#123;</span><br><span class="line">      if(state.viewKey === &#x27;all&#x27;)&#123;</span><br><span class="line">        return state.list</span><br><span class="line">      &#125;</span><br><span class="line">      if(state.viewKey === &#x27;undone&#x27;)&#123;</span><br><span class="line">        return state.list.filter( x =&gt; x.done === false )</span><br><span class="line">      &#125;</span><br><span class="line">      if(state.viewKey === &#x27;done&#x27;)&#123;</span><br><span class="line">        return state.list.filter( x =&gt; x.done === true )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Ramsayi</div><div class="post-copyright__author_desc">这个人很懒，什么都填了</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://ramsayi.asia/posts/1386d0b9/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://ramsayi.asia/posts/1386d0b9/')">Vue全家桶-项目实战</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/others/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://ramsayi.asia/posts/1386d0b9/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Vue全家桶-项目实战&amp;url=https://ramsayi.asia/posts/1386d0b9/&amp;pic=https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/vue2.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ramsayi.asia" target="_blank">Ramsayi</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>技术学习<span class="categoryesPageCount">241</span></a><a class="post-meta__box__categoryes" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Vue/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>Vue<span class="categoryesPageCount">12</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Vue2/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Vue2<span class="tagsPageCount">2</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/ue5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/c6d7328c/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/react.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">react基础Day02-受控组件&amp;评论案例&amp;props&amp;context</div></div></a></div><div class="next-post pull-right"><a href="/posts/c386cf1b/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/python-spider.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Python从零开始学编程爬虫</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/de6e7ab8/" title="uni-app基础知识"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/uniapp.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-23</div><div class="title">uni-app基础知识</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Ramsayi</h1><div class="author-info__desc">这个人很懒，什么都填了</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/ramsayi" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/354247938" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">1.</span> <span class="toc-text">一、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%B5%E5%95%86%E4%B8%9A%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.电商业务概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.</span> <span class="toc-text">2.项目初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%A0%81%E4%BA%91%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">3.码云相关操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.4.</span> <span class="toc-text">4.配置后台项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.</span> <span class="toc-text">5.实现登录功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">6.登录成功之后的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">1.7.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">2.</span> <span class="toc-text">二、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-number">2.1.</span> <span class="toc-text">1.后台首页基本布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B6%E9%83%A8%E5%B8%83%E5%B1%80%EF%BC%8C%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%B8%83%E5%B1%80"><span class="toc-number">2.2.</span> <span class="toc-text">2.顶部布局，侧边栏布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-axios-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">3.axios 请求拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AF%B7%E6%B1%82%E4%BE%A7%E8%BE%B9%E6%A0%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.</span> <span class="toc-text">4.请求侧边栏数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AE%E6%BF%80%E6%B4%BB%E5%AD%90%E8%8F%9C%E5%8D%95%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">5.设置激活子菜单样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%B6%E4%BD%9C%E4%BE%A7%E8%BE%B9%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84%E4%BC%B8%E7%BC%A9%E5%8A%9F%E8%83%BD"><span class="toc-number">2.6.</span> <span class="toc-text">6.制作侧边菜单栏的伸缩功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9C%A8%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-number">2.7.</span> <span class="toc-text">7.在后台首页添加子级路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%8C%E6%88%90%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E4%B8%BB%E4%BD%93%E5%8C%BA%E5%9F%9F"><span class="toc-number">2.8.</span> <span class="toc-text">8.完成用户列表主体区域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%BB%98%E5%88%B6%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">2.9.</span> <span class="toc-text">9.绘制用户列表基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%AF%B7%E6%B1%82%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">2.10.</span> <span class="toc-text">10.请求用户列表数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%B0%86%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.11.</span> <span class="toc-text">11.将用户列表数据展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%88%86%E9%A1%B5"><span class="toc-number">2.12.</span> <span class="toc-text">12.实现用户列表分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%AE%9E%E7%8E%B0%E6%9B%B4%E6%96%B0%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81"><span class="toc-number">2.13.</span> <span class="toc-text">13.实现更新用户状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">2.14.</span> <span class="toc-text">14.实现搜索功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">2.15.</span> <span class="toc-text">15.实现添加用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">3.</span> <span class="toc-text">三、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">3.1.</span> <span class="toc-text">1.修改用户信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">3.2.</span> <span class="toc-text">2.删除用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-number">3.3.</span> <span class="toc-text">3.推送代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8"><span class="toc-number">3.4.</span> <span class="toc-text">4.权限列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8%E8%B7%AF%E7%94%B1"><span class="toc-number">3.4.1.</span> <span class="toc-text">A.添加权限列表路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA"><span class="toc-number">3.4.2.</span> <span class="toc-text">B.添加面包屑导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.3.</span> <span class="toc-text">C.显示数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8"><span class="toc-number">3.5.</span> <span class="toc-text">5.角色列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E8%B7%AF%E7%94%B1"><span class="toc-number">3.5.1.</span> <span class="toc-text">A.添加角色列表路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA-1"><span class="toc-number">3.5.2.</span> <span class="toc-text">B.添加面包屑导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE-1"><span class="toc-number">3.5.3.</span> <span class="toc-text">C.显示数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E"><span class="toc-number">3.5.4.</span> <span class="toc-text">D.补充说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E7%94%9F%E6%88%90%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8"><span class="toc-number">3.5.5.</span> <span class="toc-text">E.生成权限列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E7%BE%8E%E5%8C%96%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.5.6.</span> <span class="toc-text">F.美化样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">3.5.7.</span> <span class="toc-text">G.添加权限删除功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#H-%E5%AE%8C%E6%88%90%E6%9D%83%E9%99%90%E5%88%86%E9%85%8D%E5%8A%9F%E8%83%BD"><span class="toc-number">3.5.8.</span> <span class="toc-text">H.完成权限分配功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-%E5%AE%8C%E6%88%90%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E5%BC%B9%E7%AA%97"><span class="toc-number">3.5.9.</span> <span class="toc-text">I.完成树形结构弹窗</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2"><span class="toc-number">3.6.</span> <span class="toc-text">6.分配角色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%B0%86%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%E5%88%B0%E7%A0%81%E4%BA%91"><span class="toc-number">3.7.</span> <span class="toc-text">7.将代码推送到码云</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">4.</span> <span class="toc-text">四、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.</span> <span class="toc-text">1.商品分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%96%B0%E5%BB%BA%E5%88%86%E6%94%AF-goods-cate"><span class="toc-number">4.1.1.</span> <span class="toc-text">A.新建分支 goods_cate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E5%AD%90%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-number">4.1.2.</span> <span class="toc-text">B.创建子级路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0%E7%BB%84%E4%BB%B6%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-number">4.1.3.</span> <span class="toc-text">C.添加组件基本布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E8%AF%B7%E6%B1%82%E5%88%86%E7%B1%BB%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.4.</span> <span class="toc-text">D.请求分类数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.5.</span> <span class="toc-text">E.使用插件展示数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E5%88%97"><span class="toc-number">4.1.6.</span> <span class="toc-text">F.自定义数据列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E5%AE%8C%E6%88%90%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-number">4.1.7.</span> <span class="toc-text">G.完成分页功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#H-%E5%AE%8C%E6%88%90%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.8.</span> <span class="toc-text">H.完成添加分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-number">4.1.9.</span> <span class="toc-text">I.推送代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%82%E6%95%B0%E7%AE%A1%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">2.参数管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%BA%A7%E7%BB%84%E4%BB%B6"><span class="toc-number">4.2.1.</span> <span class="toc-text">A.添加子级组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%AE%8C%E6%88%90%E7%BB%84%E4%BB%B6%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="toc-number">4.2.2.</span> <span class="toc-text">B.完成组件基本布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%8C%E6%88%90%E7%BA%A7%E8%81%94%E9%80%89%E6%8B%A9%E6%A1%86"><span class="toc-number">4.2.3.</span> <span class="toc-text">C.完成级联选择框</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%B1%95%E7%A4%BA%E5%8F%82%E6%95%B0"><span class="toc-number">4.2.4.</span> <span class="toc-text">D.展示参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0"><span class="toc-number">4.2.5.</span> <span class="toc-text">E.添加参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E7%BC%96%E8%BE%91%E5%8F%82%E6%95%B0"><span class="toc-number">4.2.6.</span> <span class="toc-text">F.编辑参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E5%88%A0%E9%99%A4%E5%8F%82%E6%95%B0"><span class="toc-number">4.2.7.</span> <span class="toc-text">G.删除参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">5.</span> <span class="toc-text">五、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%82%E6%95%B0%E7%AE%A1%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">1.参数管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%B1%95%E7%A4%BA%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0%E5%8F%AF%E9%80%89%E9%A1%B9"><span class="toc-number">5.1.1.</span> <span class="toc-text">A.展示动态参数可选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4%E5%8F%AF%E9%80%89%E9%A1%B9"><span class="toc-number">5.1.2.</span> <span class="toc-text">B.添加&#x2F;删除可选项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81%E5%88%B0%E7%A0%81%E4%BA%91"><span class="toc-number">5.2.</span> <span class="toc-text">2.推送代码到码云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8"><span class="toc-number">5.3.</span> <span class="toc-text">3.商品列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%B6%E4%BD%9C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.3.1.</span> <span class="toc-text">A.制作商品列表基本结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">5.3.2.</span> <span class="toc-text">B.数据展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4%E5%95%86%E5%93%81"><span class="toc-number">5.3.3.</span> <span class="toc-text">C.实现删除商品</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-number">5.4.</span> <span class="toc-text">4.添加商品</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E6%B7%BB%E5%8A%A0%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">5.4.1.</span> <span class="toc-text">A.添加编程式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%B8%83%E5%B1%80-Add-vue-%E7%BB%84%E4%BB%B6"><span class="toc-number">5.4.2.</span> <span class="toc-text">B.布局 Add.vue 组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0-tab-%E6%A0%8F%E5%88%87%E6%8D%A2%E9%AA%8C%E8%AF%81"><span class="toc-number">5.4.3.</span> <span class="toc-text">C.添加 tab 栏切换验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%B1%95%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">5.4.4.</span> <span class="toc-text">D.展示信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">6.</span> <span class="toc-text">六、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-number">6.1.</span> <span class="toc-text">1.添加商品</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%AE%8C%E6%88%90%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">6.1.1.</span> <span class="toc-text">A.完成图片上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E4%BD%BF%E7%94%A8%E5%AF%8C%E6%96%87%E6%9C%AC%E6%8F%92%E4%BB%B6"><span class="toc-number">6.1.2.</span> <span class="toc-text">B.使用富文本插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%B7%BB%E5%8A%A0%E5%95%86%E5%93%81"><span class="toc-number">6.1.3.</span> <span class="toc-text">C.添加商品</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-number">6.1.4.</span> <span class="toc-text">D.推送代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8"><span class="toc-number">6.2.</span> <span class="toc-text">2.订单列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="toc-number">6.2.1.</span> <span class="toc-text">A.创建分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="toc-number">6.2.2.</span> <span class="toc-text">B.创建路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%E5%8F%8A%E5%88%86%E9%A1%B5"><span class="toc-number">6.2.3.</span> <span class="toc-text">C.实现数据展示及分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%88%B6%E4%BD%9C%E7%9C%81%E5%B8%82%E5%8C%BA%E5%8E%BF%E8%81%94%E5%8A%A8"><span class="toc-number">6.2.4.</span> <span class="toc-text">D.制作省市区县联动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E5%88%B6%E4%BD%9C%E7%89%A9%E6%B5%81%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">6.2.5.</span> <span class="toc-text">E.制作物流进度对话框</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81"><span class="toc-number">6.2.6.</span> <span class="toc-text">F.推送代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1"><span class="toc-number">6.3.</span> <span class="toc-text">3.数据统计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9B%E5%BB%BA%E5%AD%90%E5%88%86%E6%94%AF"><span class="toc-number">6.3.1.</span> <span class="toc-text">A.创建子分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1-1"><span class="toc-number">6.3.2.</span> <span class="toc-text">B.创建路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AF%BC%E5%85%A5-ECharts-%E5%B9%B6%E4%BD%BF%E7%94%A8"><span class="toc-number">6.3.3.</span> <span class="toc-text">C.导入 ECharts 并使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81-1"><span class="toc-number">6.3.4.</span> <span class="toc-text">D.推送代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">7.</span> <span class="toc-text">七、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="toc-number">7.1.</span> <span class="toc-text">1.项目优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">7.2.</span> <span class="toc-text">2.添加进度条</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E6%8A%A5%E9%94%99%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81"><span class="toc-number">7.3.</span> <span class="toc-text">3.根据报错修改代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%89%A7%E8%A1%8C-build"><span class="toc-number">7.4.</span> <span class="toc-text">4.执行 build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%94%9F%E6%88%90%E6%89%93%E5%8C%85%E6%8A%A5%E5%91%8A"><span class="toc-number">7.5.</span> <span class="toc-text">5.生成打包报告</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9-webpack-%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">7.6.</span> <span class="toc-text">6.修改 webpack 的默认配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%8A%A0%E8%BD%BD%E5%A4%96%E9%83%A8-CDN"><span class="toc-number">7.7.</span> <span class="toc-text">7.加载外部 CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%9A%E5%88%B6%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9"><span class="toc-number">7.8.</span> <span class="toc-text">8.定制首页内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">7.9.</span> <span class="toc-text">9.路由懒加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF"><span class="toc-number">7.10.</span> <span class="toc-text">10.项目上线</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E9%80%9A%E8%BF%87-node-%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">7.10.1.</span> <span class="toc-text">A.通过 node 创建服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%BC%80%E5%90%AF-gzip-%E5%8E%8B%E7%BC%A9"><span class="toc-number">7.10.2.</span> <span class="toc-text">B.开启 gzip 压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E9%85%8D%E7%BD%AE-https-%E6%9C%8D%E5%8A%A1"><span class="toc-number">7.10.3.</span> <span class="toc-text">C.配置 https 服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E4%BD%BF%E7%94%A8-pm2-%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8"><span class="toc-number">7.10.4.</span> <span class="toc-text">D.使用 pm2 管理应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">8.</span> <span class="toc-text">八、今日目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vuex-%E6%A6%82%E8%BF%B0"><span class="toc-number">8.1.</span> <span class="toc-text">1.Vuex 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vuex-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">8.2.</span> <span class="toc-text">2.Vuex 的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8-Vuex-%E5%AE%8C%E6%88%90%E8%AE%A1%E6%95%B0%E5%99%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">8.3.</span> <span class="toc-text">3.使用 Vuex 完成计数器案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Vuex-%E4%B8%AD%E7%9A%84%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-number">8.4.</span> <span class="toc-text">4.Vuex 中的核心特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-State"><span class="toc-number">8.4.1.</span> <span class="toc-text">A.State</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-Mutation"><span class="toc-number">8.4.2.</span> <span class="toc-text">B.Mutation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-Action"><span class="toc-number">8.4.3.</span> <span class="toc-text">C.Action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-Getter"><span class="toc-number">8.4.4.</span> <span class="toc-text">D.Getter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">8.5.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-vuex-%E6%A1%88%E4%BE%8B"><span class="toc-number">8.6.</span> <span class="toc-text">5.vuex 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A1%88%E4%BE%8B"><span class="toc-number">8.6.1.</span> <span class="toc-text">A.初始化案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E5%AE%8C%E6%88%90%E6%B7%BB%E5%8A%A0%E4%BA%8B%E9%A1%B9"><span class="toc-number">8.6.2.</span> <span class="toc-text">B.完成添加事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E5%AE%8C%E6%88%90%E5%88%A0%E9%99%A4%E4%BA%8B%E9%A1%B9"><span class="toc-number">8.6.3.</span> <span class="toc-text">C.完成删除事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-%E5%AE%8C%E6%88%90%E9%80%89%E4%B8%AD%E7%8A%B6%E6%80%81%E7%9A%84%E6%94%B9%E5%8F%98"><span class="toc-number">8.6.4.</span> <span class="toc-text">D.完成选中状态的改变</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#E-%E5%89%A9%E4%BD%99%E9%A1%B9%E7%BB%9F%E8%AE%A1"><span class="toc-number">8.6.5.</span> <span class="toc-text">E.剩余项统计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#F-%E6%B8%85%E9%99%A4%E5%AE%8C%E6%88%90%E4%BA%8B%E9%A1%B9"><span class="toc-number">8.6.6.</span> <span class="toc-text">F.清除完成事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-%E7%82%B9%E5%87%BB%E9%80%89%E9%A1%B9%E5%8D%A1%E5%88%87%E6%8D%A2%E4%BA%8B%E9%A1%B9"><span class="toc-number">8.6.7.</span> <span class="toc-text">G.点击选项卡切换事项</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/947f8646/" title="虚幻5 - 入门教程 - GenJi 欧酱"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/ue5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="虚幻5 - 入门教程 - GenJi 欧酱"/></a><div class="content"><a class="title" href="/posts/947f8646/" title="虚幻5 - 入门教程 - GenJi 欧酱">虚幻5 - 入门教程 - GenJi 欧酱</a><time datetime="2023-11-21T15:31:43.000Z" title="发表于 2023-11-21 23:31:43">2023-11-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b2d509e5/" title="OneDrive自定义云同步文件夹"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/bg/wallhaven-8586my.png?_r_=e68d70a2-e807-3acb-6dff-4b365041cc9d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OneDrive自定义云同步文件夹"/></a><div class="content"><a class="title" href="/posts/b2d509e5/" title="OneDrive自定义云同步文件夹">OneDrive自定义云同步文件夹</a><time datetime="2023-10-17T04:41:17.000Z" title="发表于 2023-10-17 12:41:17">2023-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/36da500e/" title="SARscape中SAR数据处理准备工作总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/bg/wallhaven-exrqrr.jpg?_r_=93c1f869-3f53-2cfa-8483-b11d4936b5a2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SARscape中SAR数据处理准备工作总结"/></a><div class="content"><a class="title" href="/posts/36da500e/" title="SARscape中SAR数据处理准备工作总结">SARscape中SAR数据处理准备工作总结</a><time datetime="2023-09-19T11:36:30.000Z" title="发表于 2023-09-19 19:36:30">2023-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a2554cd9/" title="Sentinel 1文件名命名规则"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/article/Sentinel/Sentinel-1-SAR-User-Guide-Naming-Conventions-Figure-1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sentinel 1文件名命名规则"/></a><div class="content"><a class="title" href="/posts/a2554cd9/" title="Sentinel 1文件名命名规则">Sentinel 1文件名命名规则</a><time datetime="2023-09-19T11:21:13.000Z" title="发表于 2023-09-19 19:21:13">2023-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d2fdc809/" title="Unity3D入门教程 - 阿发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/banner/unity3d.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity3D入门教程 - 阿发"/></a><div class="content"><a class="title" href="/posts/d2fdc809/" title="Unity3D入门教程 - 阿发">Unity3D入门教程 - 阿发</a><time datetime="2023-07-09T11:15:18.000Z" title="发表于 2023-07-09 19:15:18">2023-07-09</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:anzhiyu-c@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/6378063631" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/ramsayi/assets/logo/avatar.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/372204786" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/DwCpMEy/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2018 - 2024 By <a class="footer-bar-link" href="/" title="Ramsayi" target="_blank">Ramsayi</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://image.anheyu.com" title="图床">图床</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">265</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">47</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">40</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ramsayi.asia/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 0.88rem;">Axios<sup>1</sup></a><a href="/tags/Bilibili/" style="font-size: 0.88rem;">Bilibili<sup>1</sup></a><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>35</sup></a><a href="/tags/C-%E7%90%86%E8%AE%BA%E7%BB%BC%E5%90%88%E4%BD%9C%E4%B8%9A/" style="font-size: 0.88rem;">C++理论综合作业<sup>4</sup></a><a href="/tags/Curl/" style="font-size: 0.88rem;">Curl<sup>1</sup></a><a href="/tags/Dart/" style="font-size: 0.88rem;">Dart<sup>115</sup></a><a href="/tags/ECharts/" style="font-size: 0.88rem;">ECharts<sup>4</sup></a><a href="/tags/Excel/" style="font-size: 0.88rem;">Excel<sup>1</sup></a><a href="/tags/FFmpeg/" style="font-size: 0.88rem;">FFmpeg<sup>1</sup></a><a href="/tags/Flutter/" style="font-size: 0.88rem;">Flutter<sup>115</sup></a><a href="/tags/Getx/" style="font-size: 0.88rem;">Getx<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>7</sup></a><a href="/tags/Jupyter/" style="font-size: 0.88rem;">Jupyter<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 0.88rem;">Markdown<sup>1</sup></a><a href="/tags/OneDrive/" style="font-size: 0.88rem;">OneDrive<sup>1</sup></a><a href="/tags/Powershell/" style="font-size: 0.88rem;">Powershell<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>10</sup></a><a href="/tags/React/" style="font-size: 0.88rem;">React<sup>9</sup></a><a href="/tags/SARscape/" style="font-size: 0.88rem;">SARscape<sup>1</sup></a><a href="/tags/Sentinel/" style="font-size: 0.88rem;">Sentinel<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>7</sup></a><a href="/tags/Ubuntu/" style="font-size: 0.88rem;">Ubuntu<sup>2</sup></a><a href="/tags/Unity3D/" style="font-size: 0.88rem;">Unity3D<sup>1</sup></a><a href="/tags/VMware/" style="font-size: 0.88rem;">VMware<sup>1</sup></a><a href="/tags/Vim/" style="font-size: 0.88rem;">Vim<sup>1</sup></a><a href="/tags/Vue2/" style="font-size: 0.88rem;">Vue2<sup>2</sup></a><a href="/tags/Vue3/" style="font-size: 0.88rem;">Vue3<sup>10</sup></a><a href="/tags/You-Get/" style="font-size: 0.88rem;">You-Get<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 0.88rem;">uniapp<sup>1</sup></a><a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 0.88rem;">下载<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>9</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">博客<sup>5</sup></a><a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 0.88rem;">快捷键<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 0.88rem;">终端<sup>3</sup></a><a href="/tags/%E8%99%9A%E5%B9%BB5/" style="font-size: 0.88rem;">虚幻5<sup>1</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 0.88rem;">虚拟机<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 0.88rem;">视频<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/01/2018 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2018 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Ramsayi 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("01/01/2018 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-h131i132g-ramsayi.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.27/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-h131i132g-ramsayi.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-h131i132g-ramsayi.vercel.app/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.27/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@a.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/inject/custom.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="//code.tidio.co/fxk9glqedvgfb9eqhzyajcc3o4oupxbo.js" async="async"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    let isShow = false
    const close = () => {
      window.tidioChatApi.hide()
      isShow = false
      document.body.style.position = 'relative';
      document.documentElement.style.overflow = 'auto'
    }
    
    const open = () => {
      window.tidioChatApi.open()
      window.tidioChatApi.show()
      isShow = true
    }

    const onTidioChatApiReady = () => {
      window.tidioChatApi.hide()
      window.tidioChatApi.on("close", close)
    }
    if (window.tidioChatApi) {
      window.tidioChatApi.on("ready", onTidioChatApiReady)
    } else {
      document.addEventListener("tidioChat-ready", onTidioChatApiReady)
    }

    window.chatBtnFn = () => {
      if (!window.tidioChatApi) return
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        window.tidioChatApi && window.tidioChatApi.hide()
      },
      show: () => {
        window.tidioChatApi && window.tidioChatApi.show()
      }
    }
  }
})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>